(self.webpackChunkPopExplore=self.webpackChunkPopExplore||[]).push([[179],{2011:(wt,$e,R)=>{"use strict";R.d($e,{Dh:()=>Ee,GT:()=>de,cc:()=>ce,hO:()=>ie,on:()=>Y,pX:()=>he,xv:()=>ge});var a=R(5e3),le=R(127),F=R(5813);wt=R.hmd(wt);const Te=["ngOnDestroy"],he=(X,qe,Ue,Ae={})=>new Proxy(X,{get:(_e,ye)=>Ue.runOutsideAngular(()=>{var ue;if(X[ye])return(null===(ue=null==Ae?void 0:Ae.spy)||void 0===ue?void 0:ue.get)&&Ae.spy.get(ye,X[ye]),X[ye];if(Te.indexOf(ye)>-1)return()=>{};const be=qe.toPromise().then(Q=>{const q=Q&&Q[ye];return"function"==typeof q?q.bind(Q):q&&q.then?q.then(re=>Ue.run(()=>re)):Ue.run(()=>q)});return new Proxy(()=>{},{get:(Q,q)=>be[q],apply:(Q,q,re)=>be.then(Z=>{var $;const me=Z&&Z(...re);return(null===($=null==Ae?void 0:Ae.spy)||void 0===$?void 0:$.apply)&&Ae.spy.apply(ye,re,me),me})})})}),de=(X,qe)=>{qe.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Ae=>{Object.defineProperty(X.prototype,Ae,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Ae))})})};class ne{constructor(qe){return qe}}const Ee=new a.OlP("angularfire2.app.options"),ge=new a.OlP("angularfire2.app.name");function Y(X,qe,Ue){const _e="object"==typeof Ue&&Ue||{};_e.name=_e.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const ue=le.Z.apps.filter(be=>be&&be.name===_e.name)[0]||qe.runOutsideAngular(()=>le.Z.initializeApp(X,_e));try{JSON.stringify(X)!==JSON.stringify(ue.options)&&W("error",`${ue.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(be){}return new ne(ue)}const W=(X,...qe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[X](...qe)},ee={provide:ne,useFactory:Y,deps:[Ee,a.R0b,[new a.FiY,ge]]};let ie=(()=>{class X{constructor(Ue){le.Z.registerVersion("angularfire",F.q4.full,"core"),le.Z.registerVersion("angularfire",F.q4.full,"app-compat"),le.Z.registerVersion("angular",a.q4F.full,Ue.toString())}static initializeApp(Ue,Ae){return{ngModule:X,providers:[{provide:Ee,useValue:Ue},{provide:ge,useValue:Ae}]}}}return X.\u0275fac=function(Ue){return new(Ue||X)(a.LFG(a.Lbi))},X.\u0275mod=a.oAB({type:X}),X.\u0275inj=a.cJS({providers:[ee]}),X})();function ce(X,qe,Ue,Ae,_e){const[,ye,ue]=globalThis.\u0275AngularfireInstanceCache.find(be=>be[0]===X)||[];if(ye)return function Pe(X,qe){try{return X.toString()===qe.toString()}catch(Ue){return X===qe}}(_e,ue)||(K("error",`${qe} was already initialized on the ${Ue} Firebase App with different settings.${J?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:_e,was:ue})),ye;{const be=Ae();return globalThis.\u0275AngularfireInstanceCache.push([X,be,_e]),be}}const J=!!wt.hot,K=(X,...qe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[X](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(wt,$e,R)=>{"use strict";R.d($e,{q4:()=>sh,iC:()=>xu,fc:()=>Au,HU:()=>Su,vb:()=>ah,JM:()=>Mo});var a=R(5e3),le=R(5867),F=R(5861),Te=R(9681),he=R(2090),de=R(4859),ne=R(1877);const Ee="@firebase/installations",W="w:0.5.8",ee="FIS_v2",X=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qe(I){return I instanceof he.ZR&&I.code.includes("request-failed")}function Ue({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ae(I){return{token:I.token,requestStatus:2,expiresIn:re(I.expiresIn),creationTime:Date.now()}}function _e(I,D){return ye.apply(this,arguments)}function ye(){return(ye=(0,F.Z)(function*(I,D){const G=(yield D.json()).error;return X.create("request-failed",{requestName:I,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})})).apply(this,arguments)}function ue({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function be(I,{refreshToken:D}){const O=ue(I);return O.append("Authorization",function Z(I){return`${ee} ${I}`}(D)),O}function Q(I){return q.apply(this,arguments)}function q(){return(q=(0,F.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function re(I){return Number(I.replace("s","000"))}function $(I,D){return me.apply(this,arguments)}function me(){return(me=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:O}){const G=Ue(I),Se=ue(I),ke=D.getImmediate({optional:!0});if(ke){const Kt=yield ke.getHeartbeatsHeader();Kt&&Se.append("x-firebase-client",Kt)}const Dt={method:"POST",headers:Se,body:JSON.stringify({fid:O,authVersion:ee,appId:I.appId,sdkVersion:W})},xt=yield Q(()=>fetch(G,Dt));if(xt.ok){const Kt=yield xt.json();return{fid:Kt.fid||O,registrationStatus:2,refreshToken:Kt.refreshToken,authToken:Ae(Kt.authToken)}}throw yield _e("Create Installation",xt)})).apply(this,arguments)}function pe(I){return new Promise(D=>{setTimeout(D,I)})}const dt=/^[cdef][\w-]{21}$/;function Ce(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const O=function xe(I){return function st(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return dt.test(O)?O:""}catch(I){return""}}function Be(I){return`${I.appName}!${I.appId}`}const Fe=new Map;function ze(I,D){const O=Be(I);Ke(O,D),function mt(I,D){const O=function Xt(){return!Qt&&"BroadcastChannel"in self&&(Qt=new BroadcastChannel("[Firebase] FID Change"),Qt.onmessage=I=>{Ke(I.data.key,I.data.fid)}),Qt}();O&&O.postMessage({key:I,fid:D}),function hn(){0===Fe.size&&Qt&&(Qt.close(),Qt=null)}()}(O,D)}function Ke(I,D){const O=Fe.get(I);if(O)for(const G of O)G(D)}let Qt=null;const $n="firebase-installations-store";let Wr=null;function lr(){return Wr||(Wr=(0,he.X3)("firebase-installations-database",1,(I,D)=>{0===D&&I.createObjectStore($n)})),Wr}function Ot(I,D){return Br.apply(this,arguments)}function Br(){return(Br=(0,F.Z)(function*(I,D){const O=Be(I),Se=(yield lr()).transaction($n,"readwrite"),ke=Se.objectStore($n),it=yield ke.get(O);return yield ke.put(D,O),yield Se.complete,(!it||it.fid!==D.fid)&&ze(I,D.fid),D})).apply(this,arguments)}function Un(I){return sr.apply(this,arguments)}function sr(){return(sr=(0,F.Z)(function*(I){const D=Be(I),G=(yield lr()).transaction($n,"readwrite");yield G.objectStore($n).delete(D),yield G.complete})).apply(this,arguments)}function jn(I,D){return hi.apply(this,arguments)}function hi(){return(hi=(0,F.Z)(function*(I,D){const O=Be(I),Se=(yield lr()).transaction($n,"readwrite"),ke=Se.objectStore($n),it=yield ke.get(O),Dt=D(it);return void 0===Dt?yield ke.delete(O):yield ke.put(Dt,O),yield Se.complete,Dt&&(!it||it.fid!==Dt.fid)&&ze(I,Dt.fid),Dt})).apply(this,arguments)}function Tn(I){return cr.apply(this,arguments)}function cr(){return(cr=(0,F.Z)(function*(I){let D;const O=yield jn(I.appConfig,G=>{const Se=Ti(G),ke=Ns(I,Se);return D=ke.registrationPromise,ke.installationEntry});return""===O.fid?{installationEntry:yield D}:{installationEntry:O,registrationPromise:D}})).apply(this,arguments)}function Ti(I){return Yt(I||{fid:Ce(),registrationStatus:0})}function Ns(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(X.create("app-offline"))};const O={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},G=function un(I,D){return It.apply(this,arguments)}(I,O);return{installationEntry:O,registrationPromise:G}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:jt(I)}:{installationEntry:D}}function It(){return(It=(0,F.Z)(function*(I,D){try{const O=yield $(I,D);return Ot(I.appConfig,O)}catch(O){throw qe(O)&&409===O.customData.serverCode?yield Un(I.appConfig):yield Ot(I.appConfig,{fid:D.fid,registrationStatus:0}),O}})).apply(this,arguments)}function jt(I){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,F.Z)(function*(I){let D=yield ti(I.appConfig);for(;1===D.registrationStatus;)yield pe(100),D=yield ti(I.appConfig);if(0===D.registrationStatus){const{installationEntry:O,registrationPromise:G}=yield Tn(I);return G||O}return D})).apply(this,arguments)}function ti(I){return jn(I,D=>{if(!D)throw X.create("installation-not-found");return Yt(D)})}function Yt(I){return function rs(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Dr(I,D){return gr.apply(this,arguments)}function gr(){return(gr=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},O){const G=Nt(I,O),Se=be(I,O),ke=D.getImmediate({optional:!0});if(ke){const Kt=yield ke.getHeartbeatsHeader();Kt&&Se.append("x-firebase-client",Kt)}const Dt={method:"POST",headers:Se,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},xt=yield Q(()=>fetch(G,Dt));if(xt.ok)return Ae(yield xt.json());throw yield _e("Generate Auth Token",xt)})).apply(this,arguments)}function Nt(I,{fid:D}){return`${Ue(I)}/${D}/authTokens:generate`}function Sr(I){return dn.apply(this,arguments)}function dn(){return(dn=(0,F.Z)(function*(I,D=!1){let O;const G=yield jn(I.appConfig,ke=>{if(!Jt(ke))throw X.create("not-registered");const it=ke.authToken;if(!D&&te(it))return ke;if(1===it.requestStatus)return O=Ct(I,D),ke;{if(!navigator.onLine)throw X.create("app-offline");const Dt=ae(ke);return O=Ft(I,Dt),Dt}});return O?yield O:G.authToken})).apply(this,arguments)}function Ct(I,D){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,F.Z)(function*(I,D){let O=yield bt(I.appConfig);for(;1===O.authToken.requestStatus;)yield pe(100),O=yield bt(I.appConfig);const G=O.authToken;return 0===G.requestStatus?Sr(I,D):G})).apply(this,arguments)}function bt(I){return jn(I,D=>{if(!Jt(D))throw X.create("not-registered");return function Re(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ft(I,D){return fn.apply(this,arguments)}function fn(){return(fn=(0,F.Z)(function*(I,D){try{const O=yield Dr(I,D),G=Object.assign(Object.assign({},D),{authToken:O});return yield Ot(I.appConfig,G),O}catch(O){if(!qe(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const G=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ot(I.appConfig,G)}else yield Un(I.appConfig);throw O}})).apply(this,arguments)}function Jt(I){return void 0!==I&&2===I.registrationStatus}function te(I){return 2===I.requestStatus&&!function H(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function ae(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function ct(){return(ct=(0,F.Z)(function*(I){const D=I,{installationEntry:O,registrationPromise:G}=yield Tn(D);return G?G.catch(console.error):Sr(D).catch(console.error),O.fid})).apply(this,arguments)}function mn(){return(mn=(0,F.Z)(function*(I,D=!1){const O=I;return yield mr(O),(yield Sr(O,D)).token})).apply(this,arguments)}function mr(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,F.Z)(function*(I){const{registrationPromise:D}=yield Tn(I);D&&(yield D)})).apply(this,arguments)}function ur(I){return X.create("missing-app-config-values",{valueName:I})}const Di="installations",tt=I=>{const D=I.getProvider("app").getImmediate(),O=function qi(I){if(!I||!I.options)throw ur("App Configuration");if(!I.name)throw ur("App Name");const D=["projectId","apiKey","appId"];for(const O of D)if(!I.options[O])throw ur(O);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:O,heartbeatServiceProvider:(0,Te._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},sn=I=>{const D=I.getProvider("app").getImmediate(),O=(0,Te._getProvider)(D,Di).getImmediate();return{getId:()=>function De(I){return ct.apply(this,arguments)}(O),getToken:Se=>function $t(I){return mn.apply(this,arguments)}(O,Se)}};(function Dn(){(0,Te._registerComponent)(new de.wA(Di,tt,"PUBLIC")),(0,Te._registerComponent)(new de.wA("installations-internal",sn,"PRIVATE"))})(),(0,Te.registerVersion)(Ee,"0.5.8"),(0,Te.registerVersion)(Ee,"0.5.8","esm2017");const dr="@firebase/remote-config",Xn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _t{constructor(D,O,G,Se){this.client=D,this.storage=O,this.storageCache=G,this.logger=Se}isCachedDataFresh(D,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const G=Date.now()-O,Se=G<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${G}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Se}.`),Se}fetch(D){var O=this;return(0,F.Z)(function*(){const[G,Se]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(Se&&O.isCachedDataFresh(D.cacheMaxAgeMillis,G))return Se;D.eTag=Se&&Se.eTag;const ke=yield O.client.fetch(D),it=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ke.status&&it.push(O.storage.setLastSuccessfulFetchResponse(ke)),yield Promise.all(it),ke})()}}function Lt(I=navigator){return I.languages&&I.languages[0]||I.language}class on{constructor(D,O,G,Se,ke,it){this.firebaseInstallations=D,this.sdkVersion=O,this.namespace=G,this.projectId=Se,this.apiKey=ke,this.appId=it}fetch(D){var O=this;return(0,F.Z)(function*(){const[G,Se]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),it=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Dt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},xt={sdk_version:O.sdkVersion,app_instance_id:G,app_instance_id_token:Se,app_id:O.appId,language_code:Lt()},Kt={method:"POST",headers:Dt,body:JSON.stringify(xt)},In=fetch(it,Kt),an=new Promise((Fi,Fs)=>{D.signal.addEventListener(()=>{const aa=new Error("The operation was aborted.");aa.name="AbortError",Fs(aa)})});let Mr;try{yield Promise.race([In,an]),Mr=yield In}catch(Fi){let Fs="fetch-client-network";throw"AbortError"===Fi.name&&(Fs="fetch-timeout"),Xn.create(Fs,{originalErrorMessage:Fi.message})}let fr=Mr.status;const Oo=Mr.headers.get("ETag")||void 0;let br,zn;if(200===Mr.status){let Fi;try{Fi=yield Mr.json()}catch(Fs){throw Xn.create("fetch-client-parse",{originalErrorMessage:Fs.message})}br=Fi.entries,zn=Fi.state}if("INSTANCE_STATE_UNSPECIFIED"===zn?fr=500:"NO_CHANGE"===zn?fr=304:("NO_TEMPLATE"===zn||"EMPTY_CONFIG"===zn)&&(br={}),304!==fr&&200!==fr)throw Xn.create("fetch-status",{httpStatus:fr});return{status:fr,eTag:Oo,config:br}})()}}class ss{constructor(D,O){this.client=D,this.storage=O}fetch(D){var O=this;return(0,F.Z)(function*(){const G=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(D,G)})()}attemptFetch(D,{throttleEndTimeMillis:O,backoffCount:G}){var Se=this;return(0,F.Z)(function*(){yield function cn(I,D){return new Promise((O,G)=>{const Se=Math.max(D-Date.now(),0),ke=setTimeout(O,Se);I.addEventListener(()=>{clearTimeout(ke),G(Xn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,O);try{const ke=yield Se.client.fetch(D);return yield Se.storage.deleteThrottleMetadata(),ke}catch(ke){if(!function zi(I){if(!(I instanceof he.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ke))throw ke;const it={throttleEndTimeMillis:Date.now()+(0,he.$s)(G),backoffCount:G+1};return yield Se.storage.setThrottleMetadata(it),Se.attemptFetch(D,it)}})()}}class jl{constructor(D,O,G,Se,ke){this.app=D,this._client=O,this._storageCache=G,this._storage=Se,this._logger=ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ho(I,D){const O=I.target.error||void 0;return Xn.create(D,{originalErrorMessage:O&&O.message})}const fo="app_namespace_store";class jg{constructor(D,O,G,Se=function $g(){return new Promise((I,D)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=G=>{D(ho(G,"storage-open"))},O.onsuccess=G=>{I(G.target.result)},O.onupgradeneeded=G=>{0===G.oldVersion&&G.target.result.createObjectStore(fo,{keyPath:"compositeKey"})}}catch(O){D(Xn.create("storage-open",{originalErrorMessage:O}))}})}()){this.appId=D,this.appName=O,this.namespace=G,this.openDbPromise=Se}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var O=this;return(0,F.Z)(function*(){const G=yield O.openDbPromise;return new Promise((Se,ke)=>{const Dt=G.transaction([fo],"readonly").objectStore(fo),xt=O.createCompositeKey(D);try{const Kt=Dt.get(xt);Kt.onerror=In=>{ke(ho(In,"storage-get"))},Kt.onsuccess=In=>{const an=In.target.result;Se(an?an.value:void 0)}}catch(Kt){ke(Xn.create("storage-get",{originalErrorMessage:Kt&&Kt.message}))}})})()}set(D,O){var G=this;return(0,F.Z)(function*(){const Se=yield G.openDbPromise;return new Promise((ke,it)=>{const xt=Se.transaction([fo],"readwrite").objectStore(fo),Kt=G.createCompositeKey(D);try{const In=xt.put({compositeKey:Kt,value:O});In.onerror=an=>{it(ho(an,"storage-set"))},In.onsuccess=()=>{ke()}}catch(In){it(Xn.create("storage-set",{originalErrorMessage:In&&In.message}))}})})()}delete(D){var O=this;return(0,F.Z)(function*(){const G=yield O.openDbPromise;return new Promise((Se,ke)=>{const Dt=G.transaction([fo],"readwrite").objectStore(fo),xt=O.createCompositeKey(D);try{const Kt=Dt.delete(xt);Kt.onerror=In=>{ke(ho(In,"storage-delete"))},Kt.onsuccess=()=>{Se()}}catch(Kt){ke(Xn.create("storage-delete",{originalErrorMessage:Kt&&Kt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class qd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const O=D.storage.getLastFetchStatus(),G=D.storage.getLastSuccessfulFetchTimestampMillis(),Se=D.storage.getActiveConfig(),ke=yield O;ke&&(D.lastFetchStatus=ke);const it=yield G;it&&(D.lastSuccessfulFetchTimestampMillis=it);const Dt=yield Se;Dt&&(D.activeConfig=Dt)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function qo(){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,F.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Sa(){(0,Te._registerComponent)(new de.wA("remote-config",function I(D,{instanceIdentifier:O}){const G=D.getProvider("app").getImmediate(),Se=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Xn.create("registration-window");if(!(0,he.hl)())throw Xn.create("indexed-db-unavailable");const{projectId:ke,apiKey:it,appId:Dt}=G.options;if(!ke)throw Xn.create("registration-project-id");if(!it)throw Xn.create("registration-api-key");if(!Dt)throw Xn.create("registration-app-id");const xt=new jg(Dt,G.name,O=O||"firebase"),Kt=new qd(xt),In=new ne.Yd(dr);In.logLevel=ne.in.ERROR;const an=new on(Se,Te.SDK_VERSION,O,ke,it,Dt),Mr=new ss(an,xt),fr=new _t(Mr,xt,Kt,In),Oo=new jl(G,fr,Kt,xt,In);return function P(I){const D=(0,he.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Oo),Oo},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(dr,"0.3.7"),(0,Te.registerVersion)(dr,"0.3.7","esm2017")}();const ou="/firebase-messaging-sw.js",po="/firebase-cloud-messaging-push-scope",Wi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zo="google.c.a.c_id",ol="google.c.a.c_l",zd="google.c.a.ts",Hg="google.c.a.e";var go=(()=>{return(I=go||(go={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",go;var I})();function os(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gl(I){const O=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(O),Se=new Uint8Array(G.length);for(let ke=0;ke<G.length;++ke)Se[ke]=G.charCodeAt(ke);return Se}const ql="fcm_token_details_db",ni="fcm_token_object_Store";function Yf(I){return zl.apply(this,arguments)}function zl(){return zl=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ke=>ke.name).includes(ql))return null;let D=null;return(yield(0,he.X3)(ql,5,function(){var G=(0,F.Z)(function*(Se,ke,it,Dt){var xt;if(ke<2||!Se.objectStoreNames.contains(ni))return;const Kt=Dt.objectStore(ni),In=yield Kt.index("fcmSenderId").get(I);if(yield Kt.clear(),In)if(2===ke){const an=In;if(!an.auth||!an.p256dh||!an.endpoint)return;D={token:an.fcmToken,createTime:null!==(xt=an.createTime)&&void 0!==xt?xt:Date.now(),subscriptionOptions:{auth:an.auth,p256dh:an.p256dh,endpoint:an.endpoint,swScope:an.swScope,vapidKey:"string"==typeof an.vapidKey?an.vapidKey:os(an.vapidKey)}}}else if(3===ke){const an=In;D={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:os(an.auth),p256dh:os(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:os(an.vapidKey)}}}else if(4===ke){const an=In;D={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:os(an.auth),p256dh:os(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:os(an.vapidKey)}}}});return function(Se,ke,it,Dt){return G.apply(this,arguments)}}())).close(),yield(0,he.Lj)(ql),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Wd(D)?D:null}),zl.apply(this,arguments)}function Wd(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Gs="firebase-messaging-store";let al=null;function au(){return al||(al=(0,he.X3)("firebase-messaging-database",1,(I,D)=>{0===D&&I.createObjectStore(Gs)})),al}function Jn(I){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(I){const D=Yo(I),G=yield(yield au()).transaction(Gs).objectStore(Gs).get(D);if(G)return G;{const Se=yield Yf(I.appConfig.senderId);if(Se)return yield mo(I,Se),Se}})).apply(this,arguments)}function mo(I,D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,F.Z)(function*(I,D){const O=Yo(I),Se=(yield au()).transaction(Gs,"readwrite");return yield Se.objectStore(Gs).put(D,O),yield Se.complete,D})).apply(this,arguments)}function Zd(I){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,F.Z)(function*(I){const D=Yo(I),G=(yield au()).transaction(Gs,"readwrite");yield G.objectStore(Gs).delete(D),yield G.complete})).apply(this,arguments)}function Yo({appConfig:I}){return I.appId}const xr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ll(I,D){return vs.apply(this,arguments)}function vs(){return(vs=(0,F.Z)(function*(I,D){const O=yield yo(I),G=Ht(D),Se={method:"POST",headers:O,body:JSON.stringify(G)};let ke;try{ke=yield(yield fetch(Yi(I.appConfig),Se)).json()}catch(it){throw xr.create("token-subscribe-failed",{errorInfo:it})}if(ke.error)throw xr.create("token-subscribe-failed",{errorInfo:ke.error.message});if(!ke.token)throw xr.create("token-subscribe-no-token");return ke.token})).apply(this,arguments)}function mi(I,D){return _o.apply(this,arguments)}function _o(){return(_o=(0,F.Z)(function*(I,D){const O=yield yo(I),G=Ht(D.subscriptionOptions),Se={method:"PATCH",headers:O,body:JSON.stringify(G)};let ke;try{ke=yield(yield fetch(`${Yi(I.appConfig)}/${D.token}`,Se)).json()}catch(it){throw xr.create("token-update-failed",{errorInfo:it})}if(ke.error)throw xr.create("token-update-failed",{errorInfo:ke.error.message});if(!ke.token)throw xr.create("token-update-no-token");return ke.token})).apply(this,arguments)}function qs(I,D){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,F.Z)(function*(I,D){const G={method:"DELETE",headers:yield yo(I)};try{const ke=yield(yield fetch(`${Yi(I.appConfig)}/${D}`,G)).json();if(ke.error)throw xr.create("token-unsubscribe-failed",{errorInfo:ke.error.message})}catch(Se){throw xr.create("token-unsubscribe-failed",{errorInfo:Se})}})).apply(this,arguments)}function Yi({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function yo(I){return vo.apply(this,arguments)}function vo(){return(vo=(0,F.Z)(function*({appConfig:I,installations:D}){const O=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Ht({p256dh:I,auth:D,endpoint:O,vapidKey:G}){const Se={web:{endpoint:O,auth:D,p256dh:I}};return G!==Wi&&(Se.web.applicationPubKey=G),Se}const Kl=6048e5;function cl(I){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,F.Z)(function*(I){const D=yield uu(I.swRegistration,I.vapidKey),O={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:os(D.getKey("auth")),p256dh:os(D.getKey("p256dh"))},G=yield Jn(I.firebaseDependencies);if(G){if(Ma(G.subscriptionOptions,O))return Date.now()>=G.createTime+Kl?lu(I,{token:G.token,createTime:Date.now(),subscriptionOptions:O}):G.token;try{yield qs(I.firebaseDependencies,G.token)}catch(Se){console.warn(Se)}return Je(I.firebaseDependencies,O)}return Je(I.firebaseDependencies,O)})).apply(this,arguments)}function Xl(I){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,F.Z)(function*(I){const D=yield Jn(I.firebaseDependencies);D&&(yield qs(I.firebaseDependencies,D.token),yield Zd(I.firebaseDependencies));const O=yield I.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function lu(I,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,F.Z)(function*(I,D){try{const O=yield mi(I.firebaseDependencies,D),G=Object.assign(Object.assign({},D),{token:O,createTime:Date.now()});return yield mo(I.firebaseDependencies,G),O}catch(O){throw yield Xl(I),O}})).apply(this,arguments)}function Je(I,D){return yn.apply(this,arguments)}function yn(){return(yn=(0,F.Z)(function*(I,D){const G={token:yield ll(I,D),createTime:Date.now(),subscriptionOptions:D};return yield mo(I,G),G.token})).apply(this,arguments)}function uu(I,D){return or.apply(this,arguments)}function or(){return(or=(0,F.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gl(D)})})).apply(this,arguments)}function Ma(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Pa(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Ki(I,D){if(!D.notification)return;I.notification={};const O=D.notification.title;O&&(I.notification.title=O);const G=D.notification.body;G&&(I.notification.body=G);const Se=D.notification.image;Se&&(I.notification.image=Se)}(D,I),function du(I,D){!D.data||(I.data=D.data)}(D,I),function hu(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const O=D.fcmOptions.link;O&&(I.fcmOptions.link=O);const G=D.fcmOptions.analytics_label;G&&(I.fcmOptions.analyticsLabel=G)}(D,I),D}function Yd(I){return"object"==typeof I&&!!I&&zo in I}function fu(I,D){const O=[];for(let G=0;G<I.length;G++)O.push(I.charAt(G)),G<D.length&&O.push(D.charAt(G));return O.join("")}function Co(I){return xr.create("missing-app-config-values",{valueName:I})}fu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ri{constructor(D,O,G){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Se=function ec(I){if(!I||!I.options)throw Co("App Configuration Object");if(!I.name)throw Co("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:O}=I;for(const G of D)if(!O[G])throw Co(G);return{appName:I.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Se,installations:O,analyticsProvider:G}}_delete(){return Promise.resolve()}}function as(I){return tc.apply(this,arguments)}function tc(){return(tc=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(ou,{scope:po}),I.swRegistration.update().catch(()=>{})}catch(D){throw xr.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function bo(I,D){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,F.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield as(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw xr.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function pu(I,D){return nc.apply(this,arguments)}function nc(){return(nc=(0,F.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Wi)})).apply(this,arguments)}function gu(){return(gu=(0,F.Z)(function*(I,D){if(!navigator)throw xr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xr.create("permission-blocked");return yield pu(I,null==D?void 0:D.vapidKey),yield bo(I,null==D?void 0:D.serviceWorkerRegistration),cl(I)})).apply(this,arguments)}function ul(I,D,O){return dl.apply(this,arguments)}function dl(){return(dl=(0,F.Z)(function*(I,D,O){const G=mu(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:O[zo],message_name:O[ol],message_time:O[zd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function mu(I){switch(I){case go.NOTIFICATION_CLICKED:return"notification_open";case go.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Kd(){return(Kd=(0,F.Z)(function*(I,D){const O=D.data;if(!O.isFirebaseMessaging)return;I.onMessageHandler&&O.messageType===go.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Pa(O)):I.onMessageHandler.next(Pa(O)));const G=O.data;Yd(G)&&"1"===G[Hg]&&(yield ul(I,O.messageType,G))})).apply(this,arguments)}const yu="@firebase/messaging",Qd=I=>{const D=new ri(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function _u(I,D){return Kd.apply(this,arguments)}(D,O)),D},Qo=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:G=>function rc(I,D){return gu.apply(this,arguments)}(D,G)}};function Jd(){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,F.Z)(function*(){try{yield(0,he.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xd(){(0,Te._registerComponent)(new de.wA("messaging",Qd,"PUBLIC")),(0,Te._registerComponent)(new de.wA("messaging-internal",Qo,"PRIVATE")),(0,Te.registerVersion)(yu,"0.9.12"),(0,Te.registerVersion)(yu,"0.9.12","esm2017")}();const Cu="analytics",xy="firebase_id",hl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ic="https://www.googletagmanager.com/gtag/js",jr=new ne.Yd("@firebase/analytics");function eh(I){return Promise.all(I.map(D=>D.catch(O=>O)))}function Gg(I,D){const O=document.createElement("script");O.src=`${ic}?l=${I}&id=${D}`,O.async=!0,document.head.appendChild(O)}function Oa(I,D,O,G,Se,ke){return th.apply(this,arguments)}function th(){return(th=(0,F.Z)(function*(I,D,O,G,Se,ke){const it=G[Se];try{if(it)yield D[it];else{const xt=(yield eh(O)).find(Kt=>Kt.measurementId===Se);xt&&(yield D[xt.appId])}}catch(Dt){jr.error(Dt)}I("config",Se,ke)})).apply(this,arguments)}function wu(I,D,O,G,Se){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,F.Z)(function*(I,D,O,G,Se){try{let ke=[];if(Se&&Se.send_to){let it=Se.send_to;Array.isArray(it)||(it=[it]);const Dt=yield eh(O);for(const xt of it){const Kt=Dt.find(an=>an.measurementId===xt),In=Kt&&D[Kt.appId];if(!In){ke=[];break}ke.push(In)}}0===ke.length&&(ke=Object.values(D)),yield Promise.all(ke),I("event",G,Se||{})}catch(ke){jr.error(ke)}})).apply(this,arguments)}function qg(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(ic))return D;return null}const Yr=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vt=new class Zs{constructor(D={},O=1e3){this.throttleMetadata=D,this.intervalMillis=O}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,O){this.throttleMetadata[D]=O}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Cn(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function fl(I){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(I){var D;const{appId:O,apiKey:G}=I,Se={method:"GET",headers:Cn(G)},ke=hl.replace("{app-id}",O),it=yield fetch(ke,Se);if(200!==it.status&&304!==it.status){let Dt="";try{const xt=yield it.json();(null===(D=xt.error)||void 0===D?void 0:D.message)&&(Dt=xt.error.message)}catch(xt){}throw Yr.create("config-fetch-failed",{httpStatus:it.status,responseMessage:Dt})}return it.json()})).apply(this,arguments)}function Eu(I){return er.apply(this,arguments)}function er(){return(er=(0,F.Z)(function*(I,D=Vt,O){const{appId:G,apiKey:Se,measurementId:ke}=I.options;if(!G)throw Yr.create("no-app-id");if(!Se){if(ke)return{measurementId:ke,appId:G};throw Yr.create("no-api-key")}const it=D.getThrottleMetadata(G)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dt=new Iu;return setTimeout((0,F.Z)(function*(){Dt.abort()}),void 0!==O?O:6e4),ea({appId:G,apiKey:Se,measurementId:ke},it,Dt,D)})).apply(this,arguments)}function ea(I,D,O){return tr.apply(this,arguments)}function tr(){return(tr=(0,F.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:O},G,Se=Vt){const{appId:ke,measurementId:it}=I;try{yield rh(G,D)}catch(Dt){if(it)return jr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${Dt.message}]`),{appId:ke,measurementId:it};throw Dt}try{const Dt=yield fl(I);return Se.deleteThrottleMetadata(ke),Dt}catch(Dt){if(!At(Dt)){if(Se.deleteThrottleMetadata(ke),it)return jr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${Dt.message}]`),{appId:ke,measurementId:it};throw Dt}const xt=503===Number(Dt.customData.httpStatus)?(0,he.$s)(O,Se.intervalMillis,30):(0,he.$s)(O,Se.intervalMillis),Kt={throttleEndTimeMillis:Date.now()+xt,backoffCount:O+1};return Se.setThrottleMetadata(ke,Kt),jr.debug(`Calling attemptFetch again in ${xt} millis`),ea(I,Kt,G,Se)}})).apply(this,arguments)}function rh(I,D){return new Promise((O,G)=>{const Se=Math.max(D-Date.now(),0),ke=setTimeout(O,Se);I.addEventListener(()=>{clearTimeout(ke),G(Yr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function At(I){if(!(I instanceof he.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Iu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ta(){return bs.apply(this,arguments)}function bs(){return(bs=(0,F.Z)(function*(){if(!(0,he.hl)())return jr.warn(Yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(I){return jr.warn(Yr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Ys(){return(Ys=(0,F.Z)(function*(I,D,O,G,Se,ke,it){var Dt;const xt=Eu(I);xt.then(fr=>{O[fr.measurementId]=fr.appId,I.options.measurementId&&fr.measurementId!==I.options.measurementId&&jr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${fr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fr=>jr.error(fr)),D.push(xt);const Kt=ta().then(fr=>{if(fr)return G.getId()}),[In,an]=yield Promise.all([xt,Kt]);qg()||Gg(ke,In.measurementId),Se("js",new Date);const Mr=null!==(Dt=null==it?void 0:it.config)&&void 0!==Dt?Dt:{};return Mr.origin="firebase",Mr.update=!0,null!=an&&(Mr[xy]=an),Se("config",In.measurementId,Mr),In.measurementId})).apply(this,arguments)}class ii{constructor(D){this.app=D}_delete(){return delete ws[this.app.options.appId],Promise.resolve()}}let ws={},Ks=[];const We={};let yi,L,vr="dataLayer",Tu=!1;function ls(I,D,O){!function Tt(){const I=[];if((0,he.ru)()&&I.push("This is a browser extension environment."),(0,he.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((G,Se)=>`(${Se+1}) ${G}`).join(" "),O=Yr.create("invalid-analytics-context",{errorInfo:D});jr.warn(O.message)}}();const G=I.options.appId;if(!G)throw Yr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Yr.create("no-api-key");jr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ws[G])throw Yr.create("already-exists",{id:G});if(!Tu){!function Ws(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(vr);const{wrappedGtag:ke,gtagCore:it}=function Qf(I,D,O,G,Se){let ke=function(...it){window[G].push(arguments)};return window[Se]&&"function"==typeof window[Se]&&(ke=window[Se]),window[Se]=function nh(I,D,O,G){function ke(){return(ke=(0,F.Z)(function*(it,Dt,xt){try{"event"===it?yield wu(I,D,O,Dt,xt):"config"===it?yield Oa(I,D,O,G,Dt,xt):I("set",Dt)}catch(Kt){jr.error(Kt)}})).apply(this,arguments)}return function Se(it,Dt,xt){return ke.apply(this,arguments)}}(ke,I,D,O),{gtagCore:ke,wrappedGtag:window[Se]}}(ws,Ks,We,vr,"gtag");L=ke,yi=it,Tu=!0}return ws[G]=function Io(I,D,O,G,Se,ke,it){return Ys.apply(this,arguments)}(I,Ks,We,D,yi,vr,O),new ii(I)}function na(){return(na=(0,F.Z)(function*(I,D,O,G,Se){if(Se&&Se.global)I("event",O,G);else{const ke=yield D;I("event",O,Object.assign(Object.assign({},G),{send_to:ke}))}})).apply(this,arguments)}function Xi(){return lc.apply(this,arguments)}function lc(){return(lc=(0,F.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(I){return!1}})).apply(this,arguments)}const cc="@firebase/analytics";!function ep(){(0,Te._registerComponent)(new de.wA(Cu,(D,{options:O})=>ls(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,Te._registerComponent)(new de.wA("analytics-internal",function I(D){try{const O=D.getProvider(Cu).getImmediate();return{logEvent:(G,Se,ke)=>function Jf(I,D,O,G){I=(0,he.m9)(I),function nn(I,D,O,G,Se){return na.apply(this,arguments)}(L,ws[I.app.options.appId],D,O,G).catch(Se=>jr.error(Se))}(O,G,Se,ke)}}catch(O){throw Yr.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,Te.registerVersion)(cc,"0.7.8"),(0,Te.registerVersion)(cc,"0.7.8","esm2017")}();var Ri=R(4408),ki=R(7565);const dc=new class hr extends ki.v{}(class Qs extends Ri.o{constructor(D,O){super(D,O),this.scheduler=D,this.work=O}schedule(D,O=0){return O>0?super.schedule(D,O):(this.delay=O,this.state=D,this.scheduler.flush(this),this)}execute(D,O){return O>0||this.closed?super.execute(D,O):this._execute(D,O)}requestAsyncId(D,O,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(D,O,G):D.flush(this)}});var tp=R(4986),hc=R(8505),Kr=R(5363),Ni=R(9468);const sh=new a.GfV("7.3.0"),xo="__angularfire_symbol__analyticsIsSupportedValue",si="__angularfire_symbol__analyticsIsSupported",Es="__angularfire_symbol__remoteConfigIsSupportedValue",ra="__angularfire_symbol__remoteConfigIsSupported",fc="__angularfire_symbol__messagingIsSupportedValue",oh="__angularfire_symbol__messagingIsSupported";function Mo(I,D,O){if(D){if(1===D.length)return D[0];const ke=D.filter(it=>it.app===O);if(1===ke.length)return ke[0]}return O.container.getProvider(I).getImmediate({optional:!0})}globalThis[si]||(globalThis[si]=Xi().then(I=>globalThis[xo]=I).catch(()=>globalThis[xo]=!1)),globalThis[oh]||(globalThis[oh]=Jd().then(I=>globalThis[fc]=I).catch(()=>globalThis[fc]=!1)),globalThis[ra]||(globalThis[ra]=qo().then(I=>globalThis[Es]=I).catch(()=>globalThis[Es]=!1));const ah=(I,D)=>{const O=D?[D]:(0,le.C6)(),G=[];return O.forEach(Se=>{Se.container.getProvider(I).instances.forEach(it=>{G.includes(it)||G.push(it)})}),G};function ia(){}class Na{constructor(D,O=dc){this.zone=D,this.delegate=O}now(){return this.delegate.now()}schedule(D,O,G){const Se=this.zone;return this.delegate.schedule(function(it){Se.runGuarded(()=>{D.apply(this,[it])})},O,G)}}class lh{constructor(D){this.zone=D,this.task=null}call(D,O){const G=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ia,{},ia,ia)),O.pipe((0,hc.b)({next:G,complete:G,error:G})).subscribe(D).add(G)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Su=(()=>{class I{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new Na(Zone.current)),this.insideAngular=O.run(()=>new Na(Zone.current,tp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(O){return new(O||I)(a.LFG(a.R0b))},I.\u0275prov=a.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Xs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Au(I){return I.pipe((0,Kr.Q)(Xs().outsideAngular))}function xu(I){return Xs(),function oa(I){return function(O){return(O=O.lift(new lh(I.ngZone))).pipe((0,Ni.R)(I.outsideAngular),(0,Kr.Q)(I.insideAngular))}}(Xs())(I)}},2090:(wt,$e,R)=>{"use strict";R.d($e,{$s:()=>rs,BH:()=>ce,DV:()=>mt,Dv:()=>hi,G6:()=>Q,GJ:()=>ot,L:()=>ge,LL:()=>st,Lj:()=>fn,Mn:()=>ue,Pz:()=>xe,Sg:()=>Pe,UG:()=>X,UI:()=>Xt,US:()=>ne,Wj:()=>Ti,X3:()=>Ft,Yr:()=>be,ZB:()=>ee,ZR:()=>pe,b$:()=>Ae,cI:()=>Ce,d:()=>_e,dS:()=>un,eu:()=>re,g5:()=>Te,gK:()=>Tn,gQ:()=>lr,h$:()=>Ee,hl:()=>q,hu:()=>F,jU:()=>qe,lb:()=>Ns,m9:()=>Nt,ne:()=>Ot,p$:()=>W,pd:()=>Wr,r3:()=>Ke,ru:()=>Ue,tV:()=>Y,uI:()=>K,ug:()=>It,vZ:()=>hn,w1:()=>ye,w9:()=>Oe,xO:()=>vn,xb:()=>Qt,z$:()=>J,zI:()=>Z,zd:()=>$n});var a=R(5861);const F=function(te,H){if(!te)throw Te(H)},Te=function(te){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+te)},he=function(te){const H=[];let ae=0;for(let Re=0;Re<te.length;Re++){let De=te.charCodeAt(Re);De<128?H[ae++]=De:De<2048?(H[ae++]=De>>6|192,H[ae++]=63&De|128):55296==(64512&De)&&Re+1<te.length&&56320==(64512&te.charCodeAt(Re+1))?(De=65536+((1023&De)<<10)+(1023&te.charCodeAt(++Re)),H[ae++]=De>>18|240,H[ae++]=De>>12&63|128,H[ae++]=De>>6&63|128,H[ae++]=63&De|128):(H[ae++]=De>>12|224,H[ae++]=De>>6&63|128,H[ae++]=63&De|128)}return H},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,H){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ae=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Re=[];for(let De=0;De<te.length;De+=3){const ct=te[De],$t=De+1<te.length,mn=$t?te[De+1]:0,mr=De+2<te.length,_n=mr?te[De+2]:0;let Nn=(15&mn)<<2|_n>>6,_r=63&_n;mr||(_r=64,$t||(Nn=64)),Re.push(ae[ct>>2],ae[(3&ct)<<4|mn>>4],ae[Nn],ae[_r])}return Re.join("")},encodeString(te,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(te):this.encodeByteArray(he(te),H)},decodeString(te,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(te):function(te){const H=[];let ae=0,Re=0;for(;ae<te.length;){const De=te[ae++];if(De<128)H[Re++]=String.fromCharCode(De);else if(De>191&&De<224){const ct=te[ae++];H[Re++]=String.fromCharCode((31&De)<<6|63&ct)}else if(De>239&&De<365){const mr=((7&De)<<18|(63&te[ae++])<<12|(63&te[ae++])<<6|63&te[ae++])-65536;H[Re++]=String.fromCharCode(55296+(mr>>10)),H[Re++]=String.fromCharCode(56320+(1023&mr))}else{const ct=te[ae++],$t=te[ae++];H[Re++]=String.fromCharCode((15&De)<<12|(63&ct)<<6|63&$t)}}return H.join("")}(this.decodeStringToByteArray(te,H))},decodeStringToByteArray(te,H){this.init_();const ae=H?this.charToByteMapWebSafe_:this.charToByteMap_,Re=[];for(let De=0;De<te.length;){const ct=ae[te.charAt(De++)],mn=De<te.length?ae[te.charAt(De)]:0;++De;const _n=De<te.length?ae[te.charAt(De)]:64;++De;const rn=De<te.length?ae[te.charAt(De)]:64;if(++De,null==ct||null==mn||null==_n||null==rn)throw Error();Re.push(ct<<2|mn>>4),64!==_n&&(Re.push(mn<<4&240|_n>>2),64!==rn&&Re.push(_n<<6&192|rn))}return Re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}},Ee=function(te){const H=he(te);return ne.encodeByteArray(H,!0)},ge=function(te){return Ee(te).replace(/\./g,"")},Y=function(te){try{return ne.decodeString(te,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function W(te){return ee(void 0,te)}function ee(te,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return H}for(const ae in H)!H.hasOwnProperty(ae)||!ie(ae)||(te[ae]=ee(te[ae],H[ae]));return te}function ie(te){return"__proto__"!==te}class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,ae)=>{this.resolve=H,this.reject=ae})}wrapCallback(H){return(ae,Re)=>{ae?this.reject(ae):this.resolve(Re),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(ae):H(ae,Re))}}}function Pe(te,H){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Re=H||"demo-project",De=te.iat||0,ct=te.sub||te.user_id;if(!ct)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $t=Object.assign({iss:`https://securetoken.google.com/${Re}`,aud:Re,iat:De,exp:De+3600,auth_time:De,sub:ct,user_id:ct,firebase:{sign_in_provider:"custom",identities:{}}},te);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify($t)),""].join(".")}function J(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function K(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(J())}function X(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(te){return!1}}function qe(){return"object"==typeof self&&self.self===self}function Ue(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return J().indexOf("Electron/")>=0}function ye(){const te=J();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function ue(){return J().indexOf("MSAppHost/")>=0}function be(){return!1}function Q(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function re(){return new Promise((te,H)=>{try{let ae=!0;const Re="validate-browser-context-for-indexeddb-analytics-module",De=self.indexedDB.open(Re);De.onsuccess=()=>{De.result.close(),ae||self.indexedDB.deleteDatabase(Re),te(!0)},De.onupgradeneeded=()=>{ae=!1},De.onerror=()=>{var ct;H((null===(ct=De.error)||void 0===ct?void 0:ct.message)||"")}}catch(ae){H(ae)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(H,ae,Re){super(ae),this.code=H,this.customData=Re,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}}class st{constructor(H,ae,Re){this.service=H,this.serviceName=ae,this.errors=Re}create(H,...ae){const Re=ae[0]||{},De=`${this.service}/${H}`,ct=this.errors[H],$t=ct?function dt(te,H){return te.replace(Ne,(ae,Re)=>{const De=H[Re];return null!=De?String(De):`<${Re}?>`})}(ct,Re):"Error";return new pe(De,`${this.serviceName}: ${$t} (${De}).`,Re)}}const Ne=/\{\$([^}]+)}/g;function Ce(te){return JSON.parse(te)}function xe(te){return JSON.stringify(te)}const Be=function(te){let H={},ae={},Re={},De="";try{const ct=te.split(".");H=Ce(Y(ct[0])||""),ae=Ce(Y(ct[1])||""),De=ct[2],Re=ae.d||{},delete ae.d}catch(ct){}return{header:H,claims:ae,data:Re,signature:De}},Oe=function(te){const ae=Be(te).claims;return!!ae&&"object"==typeof ae&&ae.hasOwnProperty("iat")},ot=function(te){const H=Be(te).claims;return"object"==typeof H&&!0===H.admin};function Ke(te,H){return Object.prototype.hasOwnProperty.call(te,H)}function mt(te,H){if(Object.prototype.hasOwnProperty.call(te,H))return te[H]}function Qt(te){for(const H in te)if(Object.prototype.hasOwnProperty.call(te,H))return!1;return!0}function Xt(te,H,ae){const Re={};for(const De in te)Object.prototype.hasOwnProperty.call(te,De)&&(Re[De]=H.call(ae,te[De],De,te));return Re}function hn(te,H){if(te===H)return!0;const ae=Object.keys(te),Re=Object.keys(H);for(const De of ae){if(!Re.includes(De))return!1;const ct=te[De],$t=H[De];if(zt(ct)&&zt($t)){if(!hn(ct,$t))return!1}else if(ct!==$t)return!1}for(const De of Re)if(!ae.includes(De))return!1;return!0}function zt(te){return null!==te&&"object"==typeof te}function vn(te){const H=[];for(const[ae,Re]of Object.entries(te))Array.isArray(Re)?Re.forEach(De=>{H.push(encodeURIComponent(ae)+"="+encodeURIComponent(De))}):H.push(encodeURIComponent(ae)+"="+encodeURIComponent(Re));return H.length?"&"+H.join("&"):""}function $n(te){const H={};return te.replace(/^\?/,"").split("&").forEach(Re=>{if(Re){const[De,ct]=Re.split("=");H[decodeURIComponent(De)]=decodeURIComponent(ct)}}),H}function Wr(te){const H=te.indexOf("?");if(!H)return"";const ae=te.indexOf("#",H);return te.substring(H,ae>0?ae:void 0)}class lr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,ae){ae||(ae=0);const Re=this.W_;if("string"==typeof H)for(let rn=0;rn<16;rn++)Re[rn]=H.charCodeAt(ae)<<24|H.charCodeAt(ae+1)<<16|H.charCodeAt(ae+2)<<8|H.charCodeAt(ae+3),ae+=4;else for(let rn=0;rn<16;rn++)Re[rn]=H[ae]<<24|H[ae+1]<<16|H[ae+2]<<8|H[ae+3],ae+=4;for(let rn=16;rn<80;rn++){const Nn=Re[rn-3]^Re[rn-8]^Re[rn-14]^Re[rn-16];Re[rn]=4294967295&(Nn<<1|Nn>>>31)}let _n,Qn,De=this.chain_[0],ct=this.chain_[1],$t=this.chain_[2],mn=this.chain_[3],mr=this.chain_[4];for(let rn=0;rn<80;rn++){rn<40?rn<20?(_n=mn^ct&($t^mn),Qn=1518500249):(_n=ct^$t^mn,Qn=1859775393):rn<60?(_n=ct&$t|mn&(ct|$t),Qn=2400959708):(_n=ct^$t^mn,Qn=3395469782);const Nn=(De<<5|De>>>27)+_n+mr+Qn+Re[rn]&4294967295;mr=mn,mn=$t,$t=4294967295&(ct<<30|ct>>>2),ct=De,De=Nn}this.chain_[0]=this.chain_[0]+De&4294967295,this.chain_[1]=this.chain_[1]+ct&4294967295,this.chain_[2]=this.chain_[2]+$t&4294967295,this.chain_[3]=this.chain_[3]+mn&4294967295,this.chain_[4]=this.chain_[4]+mr&4294967295}update(H,ae){if(null==H)return;void 0===ae&&(ae=H.length);const Re=ae-this.blockSize;let De=0;const ct=this.buf_;let $t=this.inbuf_;for(;De<ae;){if(0===$t)for(;De<=Re;)this.compress_(H,De),De+=this.blockSize;if("string"==typeof H){for(;De<ae;)if(ct[$t]=H.charCodeAt(De),++$t,++De,$t===this.blockSize){this.compress_(ct),$t=0;break}}else for(;De<ae;)if(ct[$t]=H[De],++$t,++De,$t===this.blockSize){this.compress_(ct),$t=0;break}}this.inbuf_=$t,this.total_+=ae}digest(){const H=[];let ae=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let De=this.blockSize-1;De>=56;De--)this.buf_[De]=255&ae,ae/=256;this.compress_(this.buf_);let Re=0;for(let De=0;De<5;De++)for(let ct=24;ct>=0;ct-=8)H[Re]=this.chain_[De]>>ct&255,++Re;return H}}function Ot(te,H){const ae=new Br(te,H);return ae.subscribe.bind(ae)}class Br{constructor(H,ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ae,this.task.then(()=>{H(this)}).catch(Re=>{this.error(Re)})}next(H){this.forEachObserver(ae=>{ae.next(H)})}error(H){this.forEachObserver(ae=>{ae.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,ae,Re){let De;if(void 0===H&&void 0===ae&&void 0===Re)throw new Error("Missing Observer.");De=function sr(te,H){if("object"!=typeof te||null===te)return!1;for(const ae of H)if(ae in te&&"function"==typeof te[ae])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:ae,complete:Re},void 0===De.next&&(De.next=jn),void 0===De.error&&(De.error=jn),void 0===De.complete&&(De.complete=jn);const ct=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?De.error(this.finalError):De.complete()}catch($t){}}),this.observers.push(De),ct}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let ae=0;ae<this.observers.length;ae++)this.sendOne(ae,H)}sendOne(H,ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{ae(this.observers[H])}catch(Re){"undefined"!=typeof console&&console.error&&console.error(Re)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jn(){}const hi=function(te,H,ae,Re){let De;if(Re<H?De="at least "+H:Re>ae&&(De=0===ae?"none":"no more than "+ae),De)throw new Error(te+" failed: Was called with "+Re+(1===Re?" argument.":" arguments.")+" Expects "+De+".")};function Tn(te,H){return`${te} failed: ${H} argument `}function Ti(te,H,ae,Re){if((!Re||ae)&&"function"!=typeof ae)throw new Error(Tn(te,H)+"must be a valid function.")}function Ns(te,H,ae,Re){if((!Re||ae)&&("object"!=typeof ae||null===ae))throw new Error(Tn(te,H)+"must be a valid context object.")}const un=function(te){const H=[];let ae=0;for(let Re=0;Re<te.length;Re++){let De=te.charCodeAt(Re);if(De>=55296&&De<=56319){const ct=De-55296;Re++,F(Re<te.length,"Surrogate pair missing trail surrogate."),De=65536+(ct<<10)+(te.charCodeAt(Re)-56320)}De<128?H[ae++]=De:De<2048?(H[ae++]=De>>6|192,H[ae++]=63&De|128):De<65536?(H[ae++]=De>>12|224,H[ae++]=De>>6&63|128,H[ae++]=63&De|128):(H[ae++]=De>>18|240,H[ae++]=De>>12&63|128,H[ae++]=De>>6&63|128,H[ae++]=63&De|128)}return H},It=function(te){let H=0;for(let ae=0;ae<te.length;ae++){const Re=te.charCodeAt(ae);Re<128?H++:Re<2048?H+=2:Re>=55296&&Re<=56319?(H+=4,ae++):H+=3}return H};function rs(te,H=1e3,ae=2){const Re=H*Math.pow(ae,te),De=Math.round(.5*Re*(Math.random()-.5)*2);return Math.min(144e5,Re+De)}function Nt(te){return te&&te._delegate?te._delegate:te}function Sr(te,H){return new Promise((ae,Re)=>{te.onsuccess=De=>{ae(De.target.result)},te.onerror=De=>{var ct;Re(`${H}: ${null===(ct=De.target.error)||void 0===ct?void 0:ct.message}`)}})}class dn{constructor(H){this._db=H,this.objectStoreNames=this._db.objectStoreNames}transaction(H,ae="readonly"){return new Ct(this._db.transaction.call(this._db,H,ae))}createObjectStore(H,ae){return new Xe(this._db.createObjectStore(H,ae))}close(){this._db.close()}}class Ct{constructor(H){this._transaction=H,this.complete=new Promise((ae,Re)=>{this._transaction.oncomplete=function(){ae()},this._transaction.onerror=()=>{Re(this._transaction.error)},this._transaction.onabort=()=>{Re(this._transaction.error)}})}objectStore(H){return new Xe(this._transaction.objectStore(H))}}class Xe{constructor(H){this._store=H}index(H){return new bt(this._store.index(H))}createIndex(H,ae,Re){return new bt(this._store.createIndex(H,ae,Re))}get(H){return Sr(this._store.get(H),"Error reading from IndexedDB")}put(H,ae){return Sr(this._store.put(H,ae),"Error writing to IndexedDB")}delete(H){return Sr(this._store.delete(H),"Error deleting from IndexedDB")}clear(){return Sr(this._store.clear(),"Error clearing IndexedDB object store")}}class bt{constructor(H){this._index=H}get(H){return Sr(this._index.get(H),"Error reading from IndexedDB")}}function Ft(te,H,ae){return new Promise((Re,De)=>{try{const ct=indexedDB.open(te,H);ct.onsuccess=$t=>{Re(new dn($t.target.result))},ct.onerror=$t=>{var mn;De(`Error opening indexedDB: ${null===(mn=$t.target.error)||void 0===mn?void 0:mn.message}`)},ct.onupgradeneeded=$t=>{ae(new dn(ct.result),$t.oldVersion,$t.newVersion,new Ct(ct.transaction))}}catch(ct){De(`Error opening indexedDB: ${ct.message}`)}})}function fn(te){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,a.Z)(function*(te){return new Promise((H,ae)=>{try{const Re=indexedDB.deleteDatabase(te);Re.onsuccess=()=>{H()},Re.onerror=De=>{var ct;ae(`Error deleting indexedDB database "${te}": ${null===(ct=De.target.error)||void 0===ct?void 0:ct.message}`)}}catch(Re){ae(`Error deleting indexedDB database "${te}": ${Re.message}`)}})})).apply(this,arguments)}},9442:(wt,$e,R)=>{"use strict";R.d($e,{c:()=>Pe});var a=R(3756);let le;const Te=J=>J.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),he=J=>{if(void 0===le){const X=void 0!==J.style.webkitAnimationName;le=void 0===J.style.animationName&&X?"-webkit-":""}return le},de=(J,K,X)=>{const qe=K.startsWith("animation")?he(J):"";J.style.setProperty(qe+K,X)},ne=(J,K)=>{const X=K.startsWith("animation")?he(J):"";J.style.removeProperty(X+K)},Y=[],ce=(J=[],K)=>{if(void 0!==K){const X=Array.isArray(K)?K:[K];return[...J,...X]}return J},Pe=J=>{let K,X,qe,Ue,Ae,_e,q,Ne,Ce,xe,Be,ot,Ke,ye=[],ue=[],be=[],Q=!1,re={},Z=[],$=[],me={},pe=0,st=!1,dt=!1,Fe=!0,ze=!1,Oe=!0,mt=!1;const Qt=J,Xt=[],hn=[],zt=[],vn=[],$n=[],Wr=[],lr=[],Ot=[],Br=[],Un=[],sr="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,jn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&sr,Tn=()=>Un,It=(B,z)=>(((null==z?void 0:z.oneTimeCallback)?hn:Xt).push({c:B,o:z}),Ke),Gn=()=>{if(jn)Un.forEach(B=>{B.cancel()}),Un.length=0;else{const B=zt.slice();(0,a.r)(()=>{B.forEach(z=>{ne(z,"animation-name"),ne(z,"animation-duration"),ne(z,"animation-timing-function"),ne(z,"animation-iteration-count"),ne(z,"animation-delay"),ne(z,"animation-play-state"),ne(z,"animation-fill-mode"),ne(z,"animation-direction")})})}},ti=()=>{$n.forEach(B=>{(null==B?void 0:B.parentNode)&&B.parentNode.removeChild(B)}),$n.length=0},Jt=()=>void 0!==Ae?Ae:q?q.getFill():"both",te=()=>void 0!==Ce?Ce:void 0!==_e?_e:q?q.getDirection():"normal",H=()=>st?"linear":void 0!==qe?qe:q?q.getEasing():"linear",ae=()=>dt?0:void 0!==xe?xe:void 0!==X?X:q?q.getDuration():0,Re=()=>void 0!==Ue?Ue:q?q.getIterations():1,De=()=>void 0!==Be?Be:void 0!==K?K:q?q.getDelay():0,Di=()=>{0!==pe&&(pe--,0===pe&&((()=>{Ai(),Ot.forEach(Ze=>Ze()),Br.forEach(Ze=>Ze());const B=Fe?1:0,z=Z,we=$,Ge=me;zt.forEach(Ze=>{const Qe=Ze.classList;z.forEach(_t=>Qe.add(_t)),we.forEach(_t=>Qe.remove(_t));for(const _t in Ge)Ge.hasOwnProperty(_t)&&de(Ze,_t,Ge[_t])}),Xt.forEach(Ze=>Ze.c(B,Ke)),hn.forEach(Ze=>Ze.c(B,Ke)),hn.length=0,Oe=!0,Fe&&(ze=!0),Fe=!0})(),q&&q.animationFinish()))},Vr=(B=!0)=>{ti();const z=(J=>(J.forEach(K=>{for(const X in K)if(K.hasOwnProperty(X)){const qe=K[X];if("easing"===X)K["animation-timing-function"]=qe,delete K[X];else{const Ue=Te(X);Ue!==X&&(K[Ue]=qe,delete K[X])}}}),J))(ye);zt.forEach(we=>{if(z.length>0){const Ge=((J=[])=>J.map(K=>{const X=K.offset,qe=[];for(const Ue in K)K.hasOwnProperty(Ue)&&"offset"!==Ue&&qe.push(`${Ue}: ${K[Ue]};`);return`${100*X}% { ${qe.join(" ")} }`}).join(" "))(z);ot=void 0!==J?J:(J=>{let K=Y.indexOf(J);return K<0&&(K=Y.push(J)-1),`ion-animation-${K}`})(Ge);const Ze=((J,K,X)=>{const qe=(J=>{const K=J.getRootNode();return K.head||K})(X),Ue=he(X),Ae=qe.querySelector("#"+J);if(Ae)return Ae;const _e=(X.ownerDocument||document).createElement("style");return _e.id=J,_e.textContent=`@${Ue}keyframes ${J} { ${K} } @${Ue}keyframes ${J}-alt { ${K} }`,qe.appendChild(_e),_e})(ot,Ge,we);$n.push(Ze),de(we,"animation-duration",`${ae()}ms`),de(we,"animation-timing-function",H()),de(we,"animation-delay",`${De()}ms`),de(we,"animation-fill-mode",Jt()),de(we,"animation-direction",te());const Qe=Re()===1/0?"infinite":Re().toString();de(we,"animation-iteration-count",Qe),de(we,"animation-play-state","paused"),B&&de(we,"animation-name",`${Ze.id}-alt`),(0,a.r)(()=>{de(we,"animation-name",Ze.id||null)})}})},sn=(B=!0)=>{(()=>{Wr.forEach(Ge=>Ge()),lr.forEach(Ge=>Ge());const B=ue,z=be,we=re;zt.forEach(Ge=>{const Ze=Ge.classList;B.forEach(Qe=>Ze.add(Qe)),z.forEach(Qe=>Ze.remove(Qe));for(const Qe in we)we.hasOwnProperty(Qe)&&de(Ge,Qe,we[Qe])})})(),ye.length>0&&(jn?(zt.forEach(B=>{const z=B.animate(ye,{id:Qt,delay:De(),duration:ae(),easing:H(),iterations:Re(),fill:Jt(),direction:te()});z.pause(),Un.push(z)}),Un.length>0&&(Un[0].onfinish=()=>{Di()})):Vr(B)),Q=!0},Dn=B=>{if(B=Math.min(Math.max(B,0),.9999),jn)Un.forEach(z=>{z.currentTime=z.effect.getComputedTiming().delay+ae()*B,z.pause()});else{const z=`-${ae()*B}ms`;zt.forEach(we=>{ye.length>0&&(de(we,"animation-delay",z),de(we,"animation-play-state","paused"))})}},dr=B=>{Un.forEach(z=>{z.effect.updateTiming({delay:De(),duration:ae(),easing:H(),iterations:Re(),fill:Jt(),direction:te()})}),void 0!==B&&Dn(B)},$r=(B=!0,z)=>{(0,a.r)(()=>{zt.forEach(we=>{de(we,"animation-name",ot||null),de(we,"animation-duration",`${ae()}ms`),de(we,"animation-timing-function",H()),de(we,"animation-delay",void 0!==z?`-${z*ae()}ms`:`${De()}ms`),de(we,"animation-fill-mode",Jt()||null),de(we,"animation-direction",te()||null);const Ge=Re()===1/0?"infinite":Re().toString();de(we,"animation-iteration-count",Ge),B&&de(we,"animation-name",`${ot}-alt`),(0,a.r)(()=>{de(we,"animation-name",ot||null)})})})},wn=(B=!1,z=!0,we)=>(B&&vn.forEach(Ge=>{Ge.update(B,z,we)}),jn?dr(we):$r(z,we),Ke),fi=()=>{Q&&(jn?Un.forEach(B=>{B.pause()}):zt.forEach(B=>{de(B,"animation-play-state","paused")}),mt=!0)},_s=()=>{Ne=void 0,Di()},Ai=()=>{Ne&&clearTimeout(Ne)},Mi=B=>new Promise(z=>{(null==B?void 0:B.sync)&&(dt=!0,It(()=>dt=!1,{oneTimeCallback:!0})),Q||sn(),ze&&(jn?(Dn(0),dr()):$r(),ze=!1),Oe&&(pe=vn.length+1,Oe=!1),It(()=>z(),{oneTimeCallback:!0}),vn.forEach(we=>{we.play()}),jn?(Un.forEach(B=>{B.play()}),(0===ye.length||0===zt.length)&&Di()):(()=>{if(Ai(),(0,a.r)(()=>{zt.forEach(B=>{ye.length>0&&de(B,"animation-play-state","running")})}),0===ye.length||0===zt.length)Di();else{const B=De()||0,z=ae()||0,we=Re()||1;isFinite(we)&&(Ne=setTimeout(_s,B+z*we+100)),((J,K)=>{let X;const qe={passive:!0},Ae=_e=>{J===_e.target&&(X&&X(),Ai(),(0,a.r)(()=>{zt.forEach(B=>{ne(B,"animation-duration"),ne(B,"animation-delay"),ne(B,"animation-play-state")}),(0,a.r)(Di)}))};J&&(J.addEventListener("webkitAnimationEnd",Ae,qe),J.addEventListener("animationend",Ae,qe),X=()=>{J.removeEventListener("webkitAnimationEnd",Ae,qe),J.removeEventListener("animationend",Ae,qe)})})(zt[0])}})(),mt=!1}),U=(B,z)=>{const we=ye[0];return void 0===we||void 0!==we.offset&&0!==we.offset?ye=[{offset:0,[B]:z},...ye]:we[B]=z,Ke};return Ke={parentAnimation:q,elements:zt,childAnimations:vn,id:Qt,animationFinish:Di,from:U,to:(B,z)=>{const we=ye[ye.length-1];return void 0===we||void 0!==we.offset&&1!==we.offset?ye=[...ye,{offset:1,[B]:z}]:we[B]=z,Ke},fromTo:(B,z,we)=>U(B,z).to(B,we),parent:B=>(q=B,Ke),play:Mi,pause:()=>(vn.forEach(B=>{B.pause()}),fi(),Ke),stop:()=>{vn.forEach(B=>{B.stop()}),Q&&(Gn(),Q=!1),st=!1,dt=!1,Oe=!0,Ce=void 0,xe=void 0,Be=void 0,pe=0,ze=!1,Fe=!0,mt=!1},destroy:B=>(vn.forEach(z=>{z.destroy(B)}),(B=>{Gn(),B&&ti()})(B),zt.length=0,vn.length=0,ye.length=0,Xt.length=0,hn.length=0,Q=!1,Oe=!0,Ke),keyframes:B=>{const z=ye!==B;return ye=B,z&&(B=>{jn?Tn().forEach(z=>{if(z.effect.setKeyframes)z.effect.setKeyframes(B);else{const we=new KeyframeEffect(z.effect.target,B,z.effect.getTiming());z.effect=we}}):Vr()})(ye),Ke},addAnimation:B=>{if(null!=B)if(Array.isArray(B))for(const z of B)z.parent(Ke),vn.push(z);else B.parent(Ke),vn.push(B);return Ke},addElement:B=>{if(null!=B)if(1===B.nodeType)zt.push(B);else if(B.length>=0)for(let z=0;z<B.length;z++)zt.push(B[z]);else console.error("Invalid addElement value");return Ke},update:wn,fill:B=>(Ae=B,wn(!0),Ke),direction:B=>(_e=B,wn(!0),Ke),iterations:B=>(Ue=B,wn(!0),Ke),duration:B=>(!jn&&0===B&&(B=1),X=B,wn(!0),Ke),easing:B=>(qe=B,wn(!0),Ke),delay:B=>(K=B,wn(!0),Ke),getWebAnimations:Tn,getKeyframes:()=>ye,getFill:Jt,getDirection:te,getDelay:De,getIterations:Re,getEasing:H,getDuration:ae,afterAddRead:B=>(Ot.push(B),Ke),afterAddWrite:B=>(Br.push(B),Ke),afterClearStyles:(B=[])=>{for(const z of B)me[z]="";return Ke},afterStyles:(B={})=>(me=B,Ke),afterRemoveClass:B=>($=ce($,B),Ke),afterAddClass:B=>(Z=ce(Z,B),Ke),beforeAddRead:B=>(Wr.push(B),Ke),beforeAddWrite:B=>(lr.push(B),Ke),beforeClearStyles:(B=[])=>{for(const z of B)re[z]="";return Ke},beforeStyles:(B={})=>(re=B,Ke),beforeRemoveClass:B=>(be=ce(be,B),Ke),beforeAddClass:B=>(ue=ce(ue,B),Ke),onFinish:It,isRunning:()=>0!==pe&&!mt,progressStart:(B=!1,z)=>(vn.forEach(we=>{we.progressStart(B,z)}),fi(),st=B,Q||sn(),wn(!1,!0,z),Ke),progressStep:B=>(vn.forEach(z=>{z.progressStep(B)}),Dn(B),Ke),progressEnd:(B,z,we)=>(st=!1,vn.forEach(Ge=>{Ge.progressEnd(B,z,we)}),void 0!==we&&(xe=we),ze=!1,Fe=!0,0===B?(Ce="reverse"===te()?"normal":"reverse","reverse"===Ce&&(Fe=!1),jn?(wn(),Dn(1-z)):(Be=(1-z)*ae()*-1,wn(!1,!1))):1===B&&(jn?(wn(),Dn(z)):(Be=z*ae()*-1,wn(!1,!1))),void 0!==B&&(It(()=>{xe=void 0,Ce=void 0,Be=void 0},{oneTimeCallback:!0}),q||Mi()),Ke)}}},3509:(wt,$e,R)=>{"use strict";R.d($e,{G:()=>he});class le{constructor(ne,Ee,ge,Y,W){this.id=Ee,this.name=ge,this.disableScroll=W,this.priority=1e6*Y+Ee,this.ctrl=ne}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ne=this.ctrl.capture(this.name,this.id,this.priority);return ne&&this.disableScroll&&this.ctrl.disableScroll(this.id),ne}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class F{constructor(ne,Ee,ge,Y){this.id=Ee,this.disable=ge,this.disableScroll=Y,this.ctrl=ne}block(){if(this.ctrl){if(this.disable)for(const ne of this.disable)this.ctrl.disableGesture(ne,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ne of this.disable)this.ctrl.enableGesture(ne,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Te="backdrop-no-scroll",he=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ne){return new le(this,this.newID(),ne.name,ne.priority||0,!!ne.disableScroll)}createBlocker(ne={}){return new F(this,this.newID(),ne.disable,!!ne.disableScroll)}start(ne,Ee,ge){return this.canStart(ne)?(this.requestedStart.set(Ee,ge),!0):(this.requestedStart.delete(Ee),!1)}capture(ne,Ee,ge){if(!this.start(ne,Ee,ge))return!1;const Y=this.requestedStart;let W=-1e4;if(Y.forEach(ee=>{W=Math.max(W,ee)}),W===ge){this.capturedId=Ee,Y.clear();const ee=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ne}});return document.dispatchEvent(ee),!0}return Y.delete(Ee),!1}release(ne){this.requestedStart.delete(ne),this.capturedId===ne&&(this.capturedId=void 0)}disableGesture(ne,Ee){let ge=this.disabledGestures.get(ne);void 0===ge&&(ge=new Set,this.disabledGestures.set(ne,ge)),ge.add(Ee)}enableGesture(ne,Ee){const ge=this.disabledGestures.get(ne);void 0!==ge&&ge.delete(Ee)}disableScroll(ne){this.disabledScroll.add(ne),1===this.disabledScroll.size&&document.body.classList.add(Te)}enableScroll(ne){this.disabledScroll.delete(ne),0===this.disabledScroll.size&&document.body.classList.remove(Te)}canStart(ne){return!(void 0!==this.capturedId||this.isDisabled(ne))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ne){const Ee=this.disabledGestures.get(ne);return!!(Ee&&Ee.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(wt,$e,R)=>{"use strict";R.r($e),R.d($e,{MENU_BACK_BUTTON_PRIORITY:()=>he,OVERLAY_BACK_BUTTON_PRIORITY:()=>Te,blockHardwareBackButton:()=>le,startHardwareBackButton:()=>F});var a=R(5861);const le=()=>{document.addEventListener("backbutton",()=>{})},F=()=>{const de=document;let ne=!1;de.addEventListener("backbutton",()=>{if(ne)return;let Ee=0,ge=[];const Y=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ie,ce){ge.push({priority:ie,handler:ce,id:Ee++})}}});de.dispatchEvent(Y);const W=function(){var ie=(0,a.Z)(function*(ce){try{if(null==ce?void 0:ce.handler){const Pe=ce.handler(ee);null!=Pe&&(yield Pe)}}catch(Pe){console.error(Pe)}});return function(Pe){return ie.apply(this,arguments)}}(),ee=()=>{if(ge.length>0){let ie={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ge.forEach(ce=>{ce.priority>=ie.priority&&(ie=ce)}),ne=!0,ge=ge.filter(ce=>ce.id!==ie.id),W(ie).then(()=>ne=!1)}};ee()})},Te=100,he=99},3756:(wt,$e,R)=>{"use strict";R.d($e,{a:()=>ne,b:()=>Ee,c:()=>F,d:()=>ce,e:()=>Pe,f:()=>ie,g:()=>ge,h:()=>Ae,i:()=>de,j:()=>Te,k:()=>ee,l:()=>J,m:()=>W,n:()=>K,o:()=>Ue,p:()=>qe,q:()=>_e,r:()=>Y,s:()=>ye,t:()=>a,u:()=>X});const a=(ue,be=0)=>new Promise(Q=>{le(ue,be,Q)}),le=(ue,be=0,Q)=>{let q,re;const Z={passive:!0},me=()=>{q&&q()},pe=st=>{(void 0===st||ue===st.target)&&(me(),Q(st))};return ue&&(ue.addEventListener("webkitTransitionEnd",pe,Z),ue.addEventListener("transitionend",pe,Z),re=setTimeout(pe,be+500),q=()=>{re&&(clearTimeout(re),re=void 0),ue.removeEventListener("webkitTransitionEnd",pe,Z),ue.removeEventListener("transitionend",pe,Z)}),me},F=(ue,be)=>{ue.componentOnReady?ue.componentOnReady().then(Q=>be(Q)):Y(()=>be(ue))},Te=(ue,be=[])=>{const Q={};return be.forEach(q=>{ue.hasAttribute(q)&&(null!==ue.getAttribute(q)&&(Q[q]=ue.getAttribute(q)),ue.removeAttribute(q))}),Q},he=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],de=ue=>Te(ue,he),ne=(ue,be,Q,q)=>{var re;if("undefined"!=typeof window){const Z=window,$=null===(re=null==Z?void 0:Z.Ionic)||void 0===re?void 0:re.config;if($){const me=$.get("_ael");if(me)return me(ue,be,Q,q);if($._ael)return $._ael(ue,be,Q,q)}}return ue.addEventListener(be,Q,q)},Ee=(ue,be,Q,q)=>{var re;if("undefined"!=typeof window){const Z=window,$=null===(re=null==Z?void 0:Z.Ionic)||void 0===re?void 0:re.config;if($){const me=$.get("_rel");if(me)return me(ue,be,Q,q);if($._rel)return $._rel(ue,be,Q,q)}}return ue.removeEventListener(be,Q,q)},ge=(ue,be=ue)=>ue.shadowRoot||be,Y=ue=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(ue):"function"==typeof requestAnimationFrame?requestAnimationFrame(ue):setTimeout(ue),W=ue=>!!ue.shadowRoot&&!!ue.attachShadow,ee=ue=>{const be=ue.closest("ion-item");return be?be.querySelector("ion-label"):null},ie=ue=>{if(ue.focus(),ue.classList.contains("ion-focusable")){const be=ue.closest("ion-app");be&&be.setFocus([ue])}},ce=(ue,be)=>{let Q;const q=ue.getAttribute("aria-labelledby"),re=ue.id;let Z=null!==q&&""!==q.trim()?q:be+"-lbl",$=null!==q&&""!==q.trim()?document.getElementById(q):ee(ue);return $?(null===q&&($.id=Z),Q=$.textContent,$.setAttribute("aria-hidden","true")):""!==re.trim()&&($=document.querySelector(`label[for="${re}"]`),$&&(""!==$.id?Z=$.id:$.id=Z=`${re}-lbl`,Q=$.textContent)),{label:$,labelId:Z,labelText:Q}},Pe=(ue,be,Q,q,re)=>{if(ue||W(be)){let Z=be.querySelector("input.aux-input");Z||(Z=be.ownerDocument.createElement("input"),Z.type="hidden",Z.classList.add("aux-input"),be.appendChild(Z)),Z.disabled=re,Z.name=Q,Z.value=q||""}},J=(ue,be,Q)=>Math.max(ue,Math.min(be,Q)),K=(ue,be)=>{if(!ue){const Q="ASSERT: "+be;throw console.error(Q),new Error(Q)}},X=ue=>ue.timeStamp||Date.now(),qe=ue=>{if(ue){const be=ue.changedTouches;if(be&&be.length>0){const Q=be[0];return{x:Q.clientX,y:Q.clientY}}if(void 0!==ue.pageX)return{x:ue.pageX,y:ue.pageY}}return{x:0,y:0}},Ue=ue=>{const be="rtl"===document.dir;switch(ue){case"start":return be;case"end":return!be;default:throw new Error(`"${ue}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ae=(ue,be)=>{const Q=ue._original||ue;return{_original:ue,emit:_e(Q.emit.bind(Q),be)}},_e=(ue,be=0)=>{let Q;return(...q)=>{clearTimeout(Q),Q=setTimeout(ue,be,...q)}},ye=(ue,be)=>{if(null!=ue||(ue={}),null!=be||(be={}),ue===be)return!0;const Q=Object.keys(ue);if(Q.length!==Object.keys(be).length)return!1;for(const q of Q)if(!(q in be)||ue[q]!==be[q])return!1;return!0}},4318:(wt,$e,R)=>{"use strict";R.d($e,{L:()=>Te,a:()=>he,b:()=>de,c:()=>ne,d:()=>Ee,e:()=>be,g:()=>re,l:()=>ye,s:()=>Q,t:()=>W});var a=R(5861),le=R(2361),F=R(3756);const Te="ionViewWillEnter",he="ionViewDidEnter",de="ionViewWillLeave",ne="ionViewDidLeave",Ee="ionViewWillUnload",W=Z=>new Promise(($,me)=>{(0,le.c)(()=>{ee(Z),ie(Z).then(pe=>{pe.animation&&pe.animation.destroy(),ce(Z),$(pe)},pe=>{ce(Z),me(pe)})})}),ee=Z=>{const $=Z.enteringEl,me=Z.leavingEl;q($,me,Z.direction),Z.showGoBack?$.classList.add("can-go-back"):$.classList.remove("can-go-back"),Q($,!1),$.style.setProperty("pointer-events","none"),me&&(Q(me,!1),me.style.setProperty("pointer-events","none"))},ie=function(){var Z=(0,a.Z)(function*($){const me=yield Pe($);return me&&le.B.isBrowser?J(me,$):K($)});return function(me){return Z.apply(this,arguments)}}(),ce=Z=>{const $=Z.enteringEl,me=Z.leavingEl;$.classList.remove("ion-page-invisible"),$.style.removeProperty("pointer-events"),void 0!==me&&(me.classList.remove("ion-page-invisible"),me.style.removeProperty("pointer-events"))},Pe=function(){var Z=(0,a.Z)(function*($){return $.leavingEl&&$.animated&&0!==$.duration?$.animationBuilder?$.animationBuilder:"ios"===$.mode?(yield Promise.resolve().then(R.bind(R,1815))).iosTransitionAnimation:(yield Promise.resolve().then(R.bind(R,6447))).mdTransitionAnimation:void 0});return function(me){return Z.apply(this,arguments)}}(),J=function(){var Z=(0,a.Z)(function*($,me){yield X(me,!0);const pe=$(me.baseEl,me);Ae(me.enteringEl,me.leavingEl);const st=yield Ue(pe,me);return me.progressCallback&&me.progressCallback(void 0),st&&_e(me.enteringEl,me.leavingEl),{hasCompleted:st,animation:pe}});return function(me,pe){return Z.apply(this,arguments)}}(),K=function(){var Z=(0,a.Z)(function*($){const me=$.enteringEl,pe=$.leavingEl;return yield X($,!1),Ae(me,pe),_e(me,pe),{hasCompleted:!0}});return function(me){return Z.apply(this,arguments)}}(),X=function(){var Z=(0,a.Z)(function*($,me){const st=(void 0!==$.deepWait?$.deepWait:me)?[be($.enteringEl),be($.leavingEl)]:[ue($.enteringEl),ue($.leavingEl)];yield Promise.all(st),yield qe($.viewIsReady,$.enteringEl)});return function(me,pe){return Z.apply(this,arguments)}}(),qe=function(){var Z=(0,a.Z)(function*($,me){$&&(yield $(me))});return function(me,pe){return Z.apply(this,arguments)}}(),Ue=(Z,$)=>{const me=$.progressCallback,pe=new Promise(st=>{Z.onFinish(dt=>st(1===dt))});return me?(Z.progressStart(!0),me(Z)):Z.play(),pe},Ae=(Z,$)=>{ye($,de),ye(Z,Te)},_e=(Z,$)=>{ye(Z,he),ye($,ne)},ye=(Z,$)=>{if(Z){const me=new CustomEvent($,{bubbles:!1,cancelable:!1});Z.dispatchEvent(me)}},ue=Z=>Z?new Promise($=>(0,F.c)(Z,$)):Promise.resolve(),be=function(){var Z=(0,a.Z)(function*($){const me=$;if(me){if(null!=me.componentOnReady){if(null!=(yield me.componentOnReady()))return}else if(null!=me.__registerHost)return void(yield new Promise(st=>(0,F.r)(st)));yield Promise.all(Array.from(me.children).map(be))}});return function(me){return Z.apply(this,arguments)}}(),Q=(Z,$)=>{$?(Z.setAttribute("aria-hidden","true"),Z.classList.add("ion-page-hidden")):(Z.hidden=!1,Z.removeAttribute("aria-hidden"),Z.classList.remove("ion-page-hidden"))},q=(Z,$,me)=>{void 0!==Z&&(Z.style.zIndex="back"===me?"99":"101"),void 0!==$&&($.style.zIndex="100")},re=Z=>Z.classList.contains("ion-page")?Z:Z.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Z},3139:(wt,$e,R)=>{"use strict";R.r($e),R.d($e,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>ge});var a=R(3509);const le=(ie,ce,Pe,J)=>{const K=F(ie)?{capture:!!J.capture,passive:!!J.passive}:!!J.capture;let X,qe;return ie.__zone_symbol__addEventListener?(X="__zone_symbol__addEventListener",qe="__zone_symbol__removeEventListener"):(X="addEventListener",qe="removeEventListener"),ie[X](ce,Pe,K),()=>{ie[qe](ce,Pe,K)}},F=ie=>{if(void 0===Te)try{const ce=Object.defineProperty({},"passive",{get:()=>{Te=!0}});ie.addEventListener("optsTest",()=>{},ce)}catch(ce){Te=!1}return!!Te};let Te;const ne=ie=>ie instanceof Document?ie:ie.ownerDocument,ge=ie=>{let ce=!1,Pe=!1,J=!0,K=!1;const X=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ie),qe=X.canStart,Ue=X.onWillStart,Ae=X.onStart,_e=X.onEnd,ye=X.notCaptured,ue=X.onMove,be=X.threshold,Q=X.passive,q=X.blurOnStart,re={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Z=((ie,ce,Pe)=>{const J=Pe*(Math.PI/180),K="x"===ie,X=Math.cos(J),qe=ce*ce;let Ue=0,Ae=0,_e=!1,ye=0;return{start(ue,be){Ue=ue,Ae=be,ye=0,_e=!0},detect(ue,be){if(!_e)return!1;const Q=ue-Ue,q=be-Ae,re=Q*Q+q*q;if(re<qe)return!1;const Z=Math.sqrt(re),$=(K?Q:q)/Z;return ye=$>X?1:$<-X?-1:0,_e=!1,!0},isGesture:()=>0!==ye,getDirection:()=>ye}})(X.direction,X.threshold,X.maxAngle),$=a.G.createGesture({name:ie.gestureName,priority:ie.gesturePriority,disableScroll:ie.disableScroll}),st=()=>{!ce||(K=!1,ue&&ue(re))},dt=()=>!($&&!$.capture()||(ce=!0,J=!1,re.startX=re.currentX,re.startY=re.currentY,re.startTime=re.currentTime,Ue?Ue(re).then(Ce):Ce(),0)),Ce=()=>{q&&(()=>{if("undefined"!=typeof document){const Oe=document.activeElement;(null==Oe?void 0:Oe.blur)&&Oe.blur()}})(),Ae&&Ae(re),J=!0},xe=()=>{ce=!1,Pe=!1,K=!1,J=!0,$.release()},Be=Oe=>{const ot=ce,Ke=J;if(xe(),Ke){if(Y(re,Oe),ot)return void(_e&&_e(re));ye&&ye(re)}},Fe=((ie,ce,Pe,J,K)=>{let X,qe,Ue,Ae,_e,ye,ue,be=0;const Q=Ne=>{be=Date.now()+2e3,ce(Ne)&&(!qe&&Pe&&(qe=le(ie,"touchmove",Pe,K)),Ue||(Ue=le(Ne.target,"touchend",re,K)),Ae||(Ae=le(Ne.target,"touchcancel",re,K)))},q=Ne=>{be>Date.now()||!ce(Ne)||(!ye&&Pe&&(ye=le(ne(ie),"mousemove",Pe,K)),ue||(ue=le(ne(ie),"mouseup",Z,K)))},re=Ne=>{$(),J&&J(Ne)},Z=Ne=>{me(),J&&J(Ne)},$=()=>{qe&&qe(),Ue&&Ue(),Ae&&Ae(),qe=Ue=Ae=void 0},me=()=>{ye&&ye(),ue&&ue(),ye=ue=void 0},pe=()=>{$(),me()},st=(Ne=!0)=>{Ne?(X||(X=le(ie,"touchstart",Q,K)),_e||(_e=le(ie,"mousedown",q,K))):(X&&X(),_e&&_e(),X=_e=void 0,pe())};return{enable:st,stop:pe,destroy:()=>{st(!1),J=Pe=ce=void 0}}})(X.el,Oe=>{const ot=ee(Oe);return!(Pe||!J||(W(Oe,re),re.startX=re.currentX,re.startY=re.currentY,re.startTime=re.currentTime=ot,re.velocityX=re.velocityY=re.deltaX=re.deltaY=0,re.event=Oe,qe&&!1===qe(re))||($.release(),!$.start()))&&(Pe=!0,0===be?dt():(Z.start(re.startX,re.startY),!0))},Oe=>{ce?!K&&J&&(K=!0,Y(re,Oe),requestAnimationFrame(st)):(Y(re,Oe),Z.detect(re.currentX,re.currentY)&&(!Z.isGesture()||!dt())&&ze())},Be,{capture:!1,passive:Q}),ze=()=>{xe(),Fe.stop(),ye&&ye(re)};return{enable(Oe=!0){Oe||(ce&&Be(void 0),xe()),Fe.enable(Oe)},destroy(){$.destroy(),Fe.destroy()}}},Y=(ie,ce)=>{if(!ce)return;const Pe=ie.currentX,J=ie.currentY,K=ie.currentTime;W(ce,ie);const X=ie.currentX,qe=ie.currentY,Ae=(ie.currentTime=ee(ce))-K;if(Ae>0&&Ae<100){const ye=(qe-J)/Ae;ie.velocityX=(X-Pe)/Ae*.7+.3*ie.velocityX,ie.velocityY=.7*ye+.3*ie.velocityY}ie.deltaX=X-ie.startX,ie.deltaY=qe-ie.startY,ie.event=ce},W=(ie,ce)=>{let Pe=0,J=0;if(ie){const K=ie.changedTouches;if(K&&K.length>0){const X=K[0];Pe=X.clientX,J=X.clientY}else void 0!==ie.pageX&&(Pe=ie.pageX,J=ie.pageY)}ce.currentX=Pe,ce.currentY=J},ee=ie=>ie.timeStamp||Date.now()},2361:(wt,$e,R)=>{"use strict";R.d($e,{B:()=>Mi,H:()=>vn,a:()=>ze,b:()=>ur,c:()=>xi,e:()=>dn,f:()=>On,g:()=>Oe,h:()=>hn,i:()=>Sr,j:()=>H,k:()=>Di,p:()=>J,r:()=>sn,s:()=>ce});var a=R(5861);let F,Te,he,de=!1,ne=!1,Ee=!1,ge=!1,Y=!1;const W="undefined"!=typeof window?window:{},ee=W.document||{head:{}},ie={$flags$:0,$resourcesUrl$:"",jmp:P=>P(),raf:P=>requestAnimationFrame(P),ael:(P,U,fe,Ie)=>P.addEventListener(U,fe,Ie),rel:(P,U,fe,Ie)=>P.removeEventListener(U,fe,Ie),ce:(P,U)=>new CustomEvent(P,U)},ce=P=>{Object.assign(ie,P)},J=P=>Promise.resolve(P),K=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(P){}return!1})(),X=(P,U,fe,Ie)=>{fe&&fe.map(([B,z,we])=>{const Ge=Ue(P,B),Ze=qe(U,we),Qe=Ae(B);ie.ael(Ge,z,Ze,Qe),(U.$rmListeners$=U.$rmListeners$||[]).push(()=>ie.rel(Ge,z,Ze,Qe))})},qe=(P,U)=>fe=>{try{256&P.$flags$?P.$lazyInstance$[U](fe):(P.$queuedListeners$=P.$queuedListeners$||[]).push([U,fe])}catch(Ie){$r(Ie)}},Ue=(P,U)=>4&U?ee:8&U?W:16&U?ee.body:P,Ae=P=>0!=(2&P),Q="s-id",q="sty-id",$="http://www.w3.org/1999/xlink",st=new WeakMap,dt=(P,U,fe)=>{let Ie=En.get(P);K&&fe?(Ie=Ie||new CSSStyleSheet,Ie.replace(U)):Ie=U,En.set(P,Ie)},Ne=(P,U,fe,Ie)=>{let B=xe(U,fe),z=En.get(B);if(P=11===P.nodeType?P:ee,z)if("string"==typeof z){let Ge,we=st.get(P=P.head||P);we||st.set(P,we=new Set),we.has(B)||(P.host&&(Ge=P.querySelector(`[${q}="${B}"]`))?Ge.innerHTML=z:(Ge=ee.createElement("style"),Ge.innerHTML=z,P.insertBefore(Ge,P.querySelector("link"))),we&&we.add(B))}else P.adoptedStyleSheets.includes(z)||(P.adoptedStyleSheets=[...P.adoptedStyleSheets,z]);return B},xe=(P,U)=>"sc-"+(U&&32&P.$flags$?P.$tagName$+"-"+U:P.$tagName$),Be=P=>P.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),ze=P=>Xn.push(P),Oe=P=>tt(P).$modeName$,ot={},Xt=P=>"object"==(P=typeof P)||"function"===P,hn=(P,U,...fe)=>{let Ie=null,B=null,z=null,we=!1,Ge=!1,Ze=[];const Qe=Lt=>{for(let on=0;on<Lt.length;on++)Ie=Lt[on],Array.isArray(Ie)?Qe(Ie):null!=Ie&&"boolean"!=typeof Ie&&((we="function"!=typeof P&&!Xt(Ie))&&(Ie=String(Ie)),we&&Ge?Ze[Ze.length-1].$text$+=Ie:Ze.push(we?zt(null,Ie):Ie),Ge=we)};if(Qe(fe),U){U.key&&(B=U.key),U.name&&(z=U.name);{const Lt=U.className||U.class;Lt&&(U.class="object"!=typeof Lt?Lt:Object.keys(Lt).filter(on=>Lt[on]).join(" "))}}if("function"==typeof P)return P(null===U?{}:U,Ze,Wr);const _t=zt(P,null);return _t.$attrs$=U,Ze.length>0&&(_t.$children$=Ze),_t.$key$=B,_t.$name$=z,_t},zt=(P,U)=>({$flags$:0,$tag$:P,$text$:U,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),vn={},Wr={forEach:(P,U)=>P.map(lr).forEach(U),map:(P,U)=>P.map(lr).map(U).map(Ot)},lr=P=>({vattrs:P.$attrs$,vchildren:P.$children$,vkey:P.$key$,vname:P.$name$,vtag:P.$tag$,vtext:P.$text$}),Ot=P=>{if("function"==typeof P.vtag){const fe=Object.assign({},P.vattrs);return P.vkey&&(fe.key=P.vkey),P.vname&&(fe.name=P.vname),hn(P.vtag,fe,...P.vchildren||[])}const U=zt(P.vtag,P.vtext);return U.$attrs$=P.vattrs,U.$children$=P.vchildren,U.$key$=P.vkey,U.$name$=P.vname,U},Br=(P,U,fe,Ie,B,z)=>{if(fe!==Ie){let we=dr(P,U),Ge=U.toLowerCase();if("class"===U){const Ze=P.classList,Qe=sr(fe),_t=sr(Ie);Ze.remove(...Qe.filter(Lt=>Lt&&!_t.includes(Lt))),Ze.add(..._t.filter(Lt=>Lt&&!Qe.includes(Lt)))}else if("style"===U){for(const Ze in fe)(!Ie||null==Ie[Ze])&&(Ze.includes("-")?P.style.removeProperty(Ze):P.style[Ze]="");for(const Ze in Ie)(!fe||Ie[Ze]!==fe[Ze])&&(Ze.includes("-")?P.style.setProperty(Ze,Ie[Ze]):P.style[Ze]=Ie[Ze])}else if("key"!==U)if("ref"===U)Ie&&Ie(P);else if(we||"o"!==U[0]||"n"!==U[1]){const Ze=Xt(Ie);if((we||Ze&&null!==Ie)&&!B)try{if(P.tagName.includes("-"))P[U]=Ie;else{let _t=null==Ie?"":Ie;"list"===U?we=!1:(null==fe||P[U]!=_t)&&(P[U]=_t)}}catch(_t){}let Qe=!1;Ge!==(Ge=Ge.replace(/^xlink\:?/,""))&&(U=Ge,Qe=!0),null==Ie||!1===Ie?(!1!==Ie||""===P.getAttribute(U))&&(Qe?P.removeAttributeNS($,U):P.removeAttribute(U)):(!we||4&z||B)&&!Ze&&(Ie=!0===Ie?"":Ie,Qe?P.setAttributeNS($,U,Ie):P.setAttribute(U,Ie))}else U="-"===U[2]?U.slice(3):dr(W,Ge)?Ge.slice(2):Ge[2]+U.slice(3),fe&&ie.rel(P,U,fe,!1),Ie&&ie.ael(P,U,Ie,!1)}},Un=/\s/,sr=P=>P?P.split(Un):[],jn=(P,U,fe,Ie)=>{const B=11===U.$elm$.nodeType&&U.$elm$.host?U.$elm$.host:U.$elm$,z=P&&P.$attrs$||ot,we=U.$attrs$||ot;for(Ie in z)Ie in we||Br(B,Ie,z[Ie],void 0,fe,U.$flags$);for(Ie in we)Br(B,Ie,z[Ie],we[Ie],fe,U.$flags$)},hi=(P,U,fe,Ie)=>{let we,Ge,Ze,B=U.$children$[fe],z=0;if(de||(Ee=!0,"slot"===B.$tag$&&(F&&Ie.classList.add(F+"-s"),B.$flags$|=B.$children$?2:1)),null!==B.$text$)we=B.$elm$=ee.createTextNode(B.$text$);else if(1&B.$flags$)we=B.$elm$=ee.createTextNode("");else{if(ge||(ge="svg"===B.$tag$),we=B.$elm$=ee.createElementNS(ge?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&B.$flags$?"slot-fb":B.$tag$),ge&&"foreignObject"===B.$tag$&&(ge=!1),jn(null,B,ge),(P=>null!=P)(F)&&we["s-si"]!==F&&we.classList.add(we["s-si"]=F),B.$children$)for(z=0;z<B.$children$.length;++z)Ge=hi(P,B,z,we),Ge&&we.appendChild(Ge);"svg"===B.$tag$?ge=!1:"foreignObject"===we.tagName&&(ge=!0)}return we["s-hn"]=he,3&B.$flags$&&(we["s-sr"]=!0,we["s-cr"]=Te,we["s-sn"]=B.$name$||"",Ze=P&&P.$children$&&P.$children$[fe],Ze&&Ze.$tag$===B.$tag$&&P.$elm$&&Tn(P.$elm$,!1)),we},Tn=(P,U)=>{ie.$flags$|=1;const fe=P.childNodes;for(let Ie=fe.length-1;Ie>=0;Ie--){const B=fe[Ie];B["s-hn"]!==he&&B["s-ol"]&&(jt(B).insertBefore(B,It(B)),B["s-ol"].remove(),B["s-ol"]=void 0,Ee=!0),U&&Tn(B,U)}ie.$flags$&=-2},cr=(P,U,fe,Ie,B,z)=>{let Ge,we=P["s-cr"]&&P["s-cr"].parentNode||P;for(we.shadowRoot&&we.tagName===he&&(we=we.shadowRoot);B<=z;++B)Ie[B]&&(Ge=hi(null,fe,B,P),Ge&&(Ie[B].$elm$=Ge,we.insertBefore(Ge,It(U))))},Ti=(P,U,fe,Ie,B)=>{for(;U<=fe;++U)(Ie=P[U])&&(B=Ie.$elm$,gr(Ie),ne=!0,B["s-ol"]?B["s-ol"].remove():Tn(B,!0),B.remove())},un=(P,U)=>P.$tag$===U.$tag$&&("slot"===P.$tag$?P.$name$===U.$name$:P.$key$===U.$key$),It=P=>P&&P["s-ol"]||P,jt=P=>(P["s-ol"]?P["s-ol"]:P).parentNode,Gn=(P,U)=>{const fe=U.$elm$=P.$elm$,Ie=P.$children$,B=U.$children$,z=U.$tag$,we=U.$text$;let Ge;null===we?(ge="svg"===z||"foreignObject"!==z&&ge,"slot"===z||jn(P,U,ge),null!==Ie&&null!==B?((P,U,fe,Ie)=>{let zi,ss,B=0,z=0,we=0,Ge=0,Ze=U.length-1,Qe=U[0],_t=U[Ze],Lt=Ie.length-1,on=Ie[0],cn=Ie[Lt];for(;B<=Ze&&z<=Lt;)if(null==Qe)Qe=U[++B];else if(null==_t)_t=U[--Ze];else if(null==on)on=Ie[++z];else if(null==cn)cn=Ie[--Lt];else if(un(Qe,on))Gn(Qe,on),Qe=U[++B],on=Ie[++z];else if(un(_t,cn))Gn(_t,cn),_t=U[--Ze],cn=Ie[--Lt];else if(un(Qe,cn))("slot"===Qe.$tag$||"slot"===cn.$tag$)&&Tn(Qe.$elm$.parentNode,!1),Gn(Qe,cn),P.insertBefore(Qe.$elm$,_t.$elm$.nextSibling),Qe=U[++B],cn=Ie[--Lt];else if(un(_t,on))("slot"===Qe.$tag$||"slot"===cn.$tag$)&&Tn(_t.$elm$.parentNode,!1),Gn(_t,on),P.insertBefore(_t.$elm$,Qe.$elm$),_t=U[--Ze],on=Ie[++z];else{for(we=-1,Ge=B;Ge<=Ze;++Ge)if(U[Ge]&&null!==U[Ge].$key$&&U[Ge].$key$===on.$key$){we=Ge;break}we>=0?(ss=U[we],ss.$tag$!==on.$tag$?zi=hi(U&&U[z],fe,we,P):(Gn(ss,on),U[we]=void 0,zi=ss.$elm$),on=Ie[++z]):(zi=hi(U&&U[z],fe,z,P),on=Ie[++z]),zi&&jt(Qe.$elm$).insertBefore(zi,It(Qe.$elm$))}B>Ze?cr(P,null==Ie[Lt+1]?null:Ie[Lt+1].$elm$,fe,Ie,z,Lt):z>Lt&&Ti(U,B,Ze)})(fe,Ie,U,B):null!==B?(null!==P.$text$&&(fe.textContent=""),cr(fe,null,U,B,0,B.length-1)):null!==Ie&&Ti(Ie,0,Ie.length-1),ge&&"svg"===z&&(ge=!1)):(Ge=fe["s-cr"])?Ge.parentNode.textContent=we:P.$text$!==we&&(fe.data=we)},ti=P=>{let fe,Ie,B,z,we,Ge,U=P.childNodes;for(Ie=0,B=U.length;Ie<B;Ie++)if(fe=U[Ie],1===fe.nodeType){if(fe["s-sr"])for(we=fe["s-sn"],fe.hidden=!1,z=0;z<B;z++)if(Ge=U[z].nodeType,U[z]["s-hn"]!==fe["s-hn"]||""!==we){if(1===Ge&&we===U[z].getAttribute("slot")){fe.hidden=!0;break}}else if(1===Ge||3===Ge&&""!==U[z].textContent.trim()){fe.hidden=!0;break}ti(fe)}},Yt=[],rs=P=>{let U,fe,Ie,B,z,we,Ge=0,Ze=P.childNodes,Qe=Ze.length;for(;Ge<Qe;Ge++){if(U=Ze[Ge],U["s-sr"]&&(fe=U["s-cr"])&&fe.parentNode)for(Ie=fe.parentNode.childNodes,B=U["s-sn"],we=Ie.length-1;we>=0;we--)fe=Ie[we],!fe["s-cn"]&&!fe["s-nr"]&&fe["s-hn"]!==U["s-hn"]&&(Dr(fe,B)?(z=Yt.find(_t=>_t.$nodeToRelocate$===fe),ne=!0,fe["s-sn"]=fe["s-sn"]||B,z?z.$slotRefNode$=U:Yt.push({$slotRefNode$:U,$nodeToRelocate$:fe}),fe["s-sr"]&&Yt.map(_t=>{Dr(_t.$nodeToRelocate$,fe["s-sn"])&&(z=Yt.find(Lt=>Lt.$nodeToRelocate$===fe),z&&!_t.$slotRefNode$&&(_t.$slotRefNode$=z.$slotRefNode$))})):Yt.some(_t=>_t.$nodeToRelocate$===fe)||Yt.push({$nodeToRelocate$:fe}));1===U.nodeType&&rs(U)}},Dr=(P,U)=>1===P.nodeType?null===P.getAttribute("slot")&&""===U||P.getAttribute("slot")===U:P["s-sn"]===U||""===U,gr=P=>{P.$attrs$&&P.$attrs$.ref&&P.$attrs$.ref(null),P.$children$&&P.$children$.map(gr)},Sr=P=>tt(P).$hostElement$,dn=(P,U,fe)=>{const Ie=Sr(P);return{emit:B=>Ct(Ie,U,{bubbles:!!(4&fe),composed:!!(2&fe),cancelable:!!(1&fe),detail:B})}},Ct=(P,U,fe)=>{const Ie=ie.ce(U,fe);return P.dispatchEvent(Ie),Ie},Xe=(P,U)=>{U&&!P.$onRenderResolve$&&U["s-p"]&&U["s-p"].push(new Promise(fe=>P.$onRenderResolve$=fe))},bt=(P,U)=>{if(P.$flags$|=16,!(4&P.$flags$))return Xe(P,P.$ancestorComponent$),xi(()=>Ft(P,U));P.$flags$|=512},Ft=(P,U)=>{const Ie=P.$lazyInstance$;let B;return U&&(P.$flags$|=256,P.$queuedListeners$&&(P.$queuedListeners$.map(([z,we])=>Re(Ie,z,we)),P.$queuedListeners$=null),B=Re(Ie,"componentWillLoad")),B=De(B,()=>Re(Ie,"componentWillRender")),De(B,()=>fn(P,Ie,U))},fn=function(){var P=(0,a.Z)(function*(U,fe,Ie){const B=U.$hostElement$,we=B["s-rc"];Ie&&(P=>{const U=P.$cmpMeta$,fe=P.$hostElement$,Ie=U.$flags$,z=Ne(fe.shadowRoot?fe.shadowRoot:fe.getRootNode(),U,P.$modeName$);10&Ie&&(fe["s-sc"]=z,fe.classList.add(z+"-h"),2&Ie&&fe.classList.add(z+"-s"))})(U);Jt(U,fe),we&&(we.map(Ze=>Ze()),B["s-rc"]=void 0);{const Ze=B["s-p"],Qe=()=>te(U);0===Ze.length?Qe():(Promise.all(Ze).then(Qe),U.$flags$|=4,Ze.length=0)}});return function(fe,Ie,B){return P.apply(this,arguments)}}(),Jt=(P,U,fe)=>{try{U=U.render&&U.render(),P.$flags$&=-17,P.$flags$|=2,((P,U)=>{const fe=P.$hostElement$,Ie=P.$cmpMeta$,B=P.$vnode$||zt(null,null),z=(P=>P&&P.$tag$===vn)(U)?U:hn(null,null,U);if(he=fe.tagName,Ie.$attrsToReflect$&&(z.$attrs$=z.$attrs$||{},Ie.$attrsToReflect$.map(([we,Ge])=>z.$attrs$[Ge]=fe[we])),z.$tag$=null,z.$flags$|=4,P.$vnode$=z,z.$elm$=B.$elm$=fe.shadowRoot||fe,F=fe["s-sc"],Te=fe["s-cr"],de=0!=(1&Ie.$flags$),ne=!1,Gn(B,z),ie.$flags$|=1,Ee){rs(z.$elm$);let we,Ge,Ze,Qe,_t,Lt,on=0;for(;on<Yt.length;on++)we=Yt[on],Ge=we.$nodeToRelocate$,Ge["s-ol"]||(Ze=ee.createTextNode(""),Ze["s-nr"]=Ge,Ge.parentNode.insertBefore(Ge["s-ol"]=Ze,Ge));for(on=0;on<Yt.length;on++)if(we=Yt[on],Ge=we.$nodeToRelocate$,we.$slotRefNode$){for(Qe=we.$slotRefNode$.parentNode,_t=we.$slotRefNode$.nextSibling,Ze=Ge["s-ol"];Ze=Ze.previousSibling;)if(Lt=Ze["s-nr"],Lt&&Lt["s-sn"]===Ge["s-sn"]&&Qe===Lt.parentNode&&(Lt=Lt.nextSibling,!Lt||!Lt["s-nr"])){_t=Lt;break}(!_t&&Qe!==Ge.parentNode||Ge.nextSibling!==_t)&&Ge!==_t&&(!Ge["s-hn"]&&Ge["s-ol"]&&(Ge["s-hn"]=Ge["s-ol"].parentNode.nodeName),Qe.insertBefore(Ge,_t))}else 1===Ge.nodeType&&(Ge.hidden=!0)}ne&&ti(z.$elm$),ie.$flags$&=-2,Yt.length=0})(P,U)}catch(Ie){$r(Ie,P.$hostElement$)}return null},te=P=>{const fe=P.$hostElement$,B=P.$lazyInstance$,z=P.$ancestorComponent$;Re(B,"componentDidRender"),64&P.$flags$?Re(B,"componentDidUpdate"):(P.$flags$|=64,ct(fe),Re(B,"componentDidLoad"),P.$onReadyResolve$(fe),z||ae()),P.$onInstanceResolve$(fe),P.$onRenderResolve$&&(P.$onRenderResolve$(),P.$onRenderResolve$=void 0),512&P.$flags$&&pi(()=>bt(P,!1)),P.$flags$&=-517},H=P=>{{const U=tt(P),fe=U.$hostElement$.isConnected;return fe&&2==(18&U.$flags$)&&bt(U,!1),fe}},ae=P=>{ct(ee.documentElement),pi(()=>Ct(W,"appload",{detail:{namespace:"ionic"}}))},Re=(P,U,fe)=>{if(P&&P[U])try{return P[U](fe)}catch(Ie){$r(Ie)}},De=(P,U)=>P&&P.then?P.then(U):U(),ct=P=>P.classList.add("hydrated"),mn=(P,U,fe,Ie,B,z,we)=>{let Ge,Ze,Qe,_t;if(1===z.nodeType){for(Ge=z.getAttribute("c-id"),Ge&&(Ze=Ge.split("."),(Ze[0]===we||"0"===Ze[0])&&(Qe={$flags$:0,$hostId$:Ze[0],$nodeId$:Ze[1],$depth$:Ze[2],$index$:Ze[3],$tag$:z.tagName.toLowerCase(),$elm$:z,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},U.push(Qe),z.removeAttribute("c-id"),P.$children$||(P.$children$=[]),P.$children$[Qe.$index$]=Qe,P=Qe,Ie&&"0"===Qe.$depth$&&(Ie[Qe.$index$]=Qe.$elm$))),_t=z.childNodes.length-1;_t>=0;_t--)mn(P,U,fe,Ie,B,z.childNodes[_t],we);if(z.shadowRoot)for(_t=z.shadowRoot.childNodes.length-1;_t>=0;_t--)mn(P,U,fe,Ie,B,z.shadowRoot.childNodes[_t],we)}else if(8===z.nodeType)Ze=z.nodeValue.split("."),(Ze[1]===we||"0"===Ze[1])&&(Ge=Ze[0],Qe={$flags$:0,$hostId$:Ze[1],$nodeId$:Ze[2],$depth$:Ze[3],$index$:Ze[4],$elm$:z,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Ge?(Qe.$elm$=z.nextSibling,Qe.$elm$&&3===Qe.$elm$.nodeType&&(Qe.$text$=Qe.$elm$.textContent,U.push(Qe),z.remove(),P.$children$||(P.$children$=[]),P.$children$[Qe.$index$]=Qe,Ie&&"0"===Qe.$depth$&&(Ie[Qe.$index$]=Qe.$elm$))):Qe.$hostId$===we&&("s"===Ge?(Qe.$tag$="slot",z["s-sn"]=Ze[5]?Qe.$name$=Ze[5]:"",z["s-sr"]=!0,Ie&&(Qe.$elm$=ee.createElement(Qe.$tag$),Qe.$name$&&Qe.$elm$.setAttribute("name",Qe.$name$),z.parentNode.insertBefore(Qe.$elm$,z),z.remove(),"0"===Qe.$depth$&&(Ie[Qe.$index$]=Qe.$elm$)),fe.push(Qe),P.$children$||(P.$children$=[]),P.$children$[Qe.$index$]=Qe):"r"===Ge&&(Ie?z.remove():(B["s-cr"]=z,z["s-cn"]=!0))));else if(P&&"style"===P.$tag$){const Lt=zt(null,z.textContent);Lt.$elm$=z,Lt.$index$="0",P.$children$=[Lt]}},mr=(P,U)=>{if(1===P.nodeType){let fe=0;for(;fe<P.childNodes.length;fe++)mr(P.childNodes[fe],U);if(P.shadowRoot)for(fe=0;fe<P.shadowRoot.childNodes.length;fe++)mr(P.shadowRoot.childNodes[fe],U)}else if(8===P.nodeType){const fe=P.nodeValue.split(".");"o"===fe[0]&&(U.set(fe[1]+"."+fe[2],P),P.nodeValue="",P["s-en"]=fe[3])}},Nn=(P,U,fe)=>{if(U.$members$){P.watchers&&(U.$watchers$=P.watchers);const Ie=Object.entries(U.$members$),B=P.prototype;if(Ie.map(([z,[we]])=>{31&we||2&fe&&32&we?Object.defineProperty(B,z,{get(){return((P,U)=>tt(this).$instanceValues$.get(U))(0,z)},set(Ge){((P,U,fe,Ie)=>{const B=tt(P),z=B.$hostElement$,we=B.$instanceValues$.get(U),Ge=B.$flags$,Ze=B.$lazyInstance$;fe=((P,U)=>null==P||Xt(P)?P:4&U?"false"!==P&&(""===P||!!P):2&U?parseFloat(P):1&U?String(P):P)(fe,Ie.$members$[U][0]);const Qe=Number.isNaN(we)&&Number.isNaN(fe);if((!(8&Ge)||void 0===we)&&fe!==we&&!Qe&&(B.$instanceValues$.set(U,fe),Ze)){if(Ie.$watchers$&&128&Ge){const Lt=Ie.$watchers$[U];Lt&&Lt.map(on=>{try{Ze[on](fe,we,U)}catch(cn){$r(cn,z)}})}2==(18&Ge)&&bt(B,!1)}})(this,z,Ge,U)},configurable:!0,enumerable:!0}):1&fe&&64&we&&Object.defineProperty(B,z,{value(...Ge){const Ze=tt(this);return Ze.$onInstancePromise$.then(()=>Ze.$lazyInstance$[z](...Ge))}})}),1&fe){const z=new Map;B.attributeChangedCallback=function(we,Ge,Ze){ie.jmp(()=>{const Qe=z.get(we);if(this.hasOwnProperty(Qe))Ze=this[Qe],delete this[Qe];else if(B.hasOwnProperty(Qe)&&"number"==typeof this[Qe]&&this[Qe]==Ze)return;this[Qe]=(null!==Ze||"boolean"!=typeof this[Qe])&&Ze})},P.observedAttributes=Ie.filter(([we,Ge])=>15&Ge[0]).map(([we,Ge])=>{const Ze=Ge[1]||we;return z.set(Ze,we),512&Ge[0]&&U.$attrsToReflect$.push([we,Ze]),Ze})}}return P},_r=function(){var P=(0,a.Z)(function*(U,fe,Ie,B,z){if(0==(32&fe.$flags$)){{if(fe.$flags$|=32,(z=Si(Ie)).then){const Qe=()=>{};z=yield z,Qe()}z.isProxied||(Ie.$watchers$=z.watchers,Nn(z,Ie,2),z.isProxied=!0);const Ze=()=>{};fe.$flags$|=8;try{new z(fe)}catch(Qe){$r(Qe)}fe.$flags$&=-9,fe.$flags$|=128,Ze(),is(fe.$lazyInstance$)}if(z.style){let Ze=z.style;"string"!=typeof Ze&&(Ze=Ze[fe.$modeName$=(P=>Xn.map(U=>U(P)).find(U=>!!U))(U)]);const Qe=xe(Ie,fe.$modeName$);if(!En.has(Qe)){const _t=()=>{};dt(Qe,Ze,!!(1&Ie.$flags$)),_t()}}}const we=fe.$ancestorComponent$,Ge=()=>bt(fe,!0);we&&we["s-rc"]?we["s-rc"].push(Ge):Ge()});return function(fe,Ie,B,z,we){return P.apply(this,arguments)}}(),is=P=>{Re(P,"connectedCallback")},Hs=P=>{const U=P["s-cr"]=ee.createComment("");U["s-cn"]=!0,P.insertBefore(U,P.firstChild)},ur=(P,U={})=>{const Ie=[],B=U.exclude||[],z=W.customElements,we=ee.head,Ge=we.querySelector("meta[charset]"),Ze=ee.createElement("style"),Qe=[],_t=ee.querySelectorAll(`[${q}]`);let Lt,on=!0,cn=0;for(Object.assign(ie,U),ie.$resourcesUrl$=new URL(U.resourcesUrl||"./",ee.baseURI).href,ie.$flags$|=2;cn<_t.length;cn++)dt(_t[cn].getAttribute(q),Be(_t[cn].innerHTML),!0);P.map(zi=>{zi[1].map(ss=>{const Ar={$flags$:ss[0],$tagName$:ss[1],$members$:ss[2],$listeners$:ss[3]};Ar.$members$=ss[2],Ar.$listeners$=ss[3],Ar.$attrsToReflect$=[],Ar.$watchers$={};const sl=Ar.$tagName$,jl=class extends HTMLElement{constructor(ho){super(ho),Dn(ho=this,Ar),1&Ar.$flags$&&ho.attachShadow({mode:"open",delegatesFocus:!!(16&Ar.$flags$)})}connectedCallback(){Lt&&(clearTimeout(Lt),Lt=null),on?Qe.push(this):ie.jmp(()=>(P=>{if(0==(1&ie.$flags$)){const U=tt(P),fe=U.$cmpMeta$,Ie=()=>{};if(1&U.$flags$)X(P,U,fe.$listeners$),is(U.$lazyInstance$);else{let B;if(U.$flags$|=1,B=P.getAttribute(Q),B){if(1&fe.$flags$){const z=Ne(P.shadowRoot,fe,P.getAttribute("s-mode"));P.classList.remove(z+"-h",z+"-s")}((P,U,fe,Ie)=>{const z=P.shadowRoot,we=[],Ze=z?[]:null,Qe=Ie.$vnode$=zt(U,null);ie.$orgLocNodes$||mr(ee.body,ie.$orgLocNodes$=new Map),P[Q]=fe,P.removeAttribute(Q),mn(Qe,we,[],Ze,P,P,fe),we.map(_t=>{const Lt=_t.$hostId$+"."+_t.$nodeId$,on=ie.$orgLocNodes$.get(Lt),cn=_t.$elm$;on&&""===on["s-en"]&&on.parentNode.insertBefore(cn,on.nextSibling),z||(cn["s-hn"]=U,on&&(cn["s-ol"]=on,cn["s-ol"]["s-nr"]=cn)),ie.$orgLocNodes$.delete(Lt)}),z&&Ze.map(_t=>{_t&&z.appendChild(_t)})})(P,fe.$tagName$,B,U)}B||12&fe.$flags$&&Hs(P);{let z=P;for(;z=z.parentNode||z.host;)if(1===z.nodeType&&z.hasAttribute("s-id")&&z["s-p"]||z["s-p"]){Xe(U,U.$ancestorComponent$=z);break}}fe.$members$&&Object.entries(fe.$members$).map(([z,[we]])=>{if(31&we&&P.hasOwnProperty(z)){const Ge=P[z];delete P[z],P[z]=Ge}}),pi(()=>_r(P,U,fe))}Ie()}})(this))}disconnectedCallback(){ie.jmp(()=>(P=>{if(0==(1&ie.$flags$)){const U=tt(this),fe=U.$lazyInstance$;U.$rmListeners$&&(U.$rmListeners$.map(Ie=>Ie()),U.$rmListeners$=void 0),Re(fe,"disconnectedCallback")}})())}componentOnReady(){return tt(this).$onReadyPromise$}};Ar.$lazyBundleId$=zi[0],!B.includes(sl)&&!z.get(sl)&&(Ie.push(sl),z.define(sl,Nn(jl,Ar,1)))})}),Ze.innerHTML=Ie+"{visibility:hidden}.hydrated{visibility:inherit}",Ze.setAttribute("data-styles",""),we.insertBefore(Ze,Ge?Ge.nextSibling:we.firstChild),on=!1,Qe.length?Qe.map(zi=>zi.connectedCallback()):ie.jmp(()=>Lt=setTimeout(ae,30))},Di=P=>{const U=new URL(P,ie.$resourcesUrl$);return U.origin!==W.location.origin?U.href:U.pathname},Vr=new WeakMap,tt=P=>Vr.get(P),sn=(P,U)=>Vr.set(U.$lazyInstance$=P,U),Dn=(P,U)=>{const fe={$flags$:0,$hostElement$:P,$cmpMeta$:U,$instanceValues$:new Map};return fe.$onInstancePromise$=new Promise(Ie=>fe.$onInstanceResolve$=Ie),fe.$onReadyPromise$=new Promise(Ie=>fe.$onReadyResolve$=Ie),P["s-p"]=[],P["s-rc"]=[],X(P,fe,U.$listeners$),Vr.set(P,fe)},dr=(P,U)=>U in P,$r=(P,U)=>(0,console.error)(P,U),wn=new Map,Si=(P,U,fe)=>{const Ie=P.$tagName$.replace(/-/g,"_"),B=P.$lazyBundleId$,z=wn.get(B);return z?z[Ie]:R(863)(`./${B}.entry.js`).then(we=>(wn.set(B,we),we[Ie]),$r)},En=new Map,Xn=[],fi=[],en=[],_s=(P,U)=>fe=>{P.push(fe),Y||(Y=!0,U&&4&ie.$flags$?pi(ys):ie.raf(ys))},Ai=P=>{for(let U=0;U<P.length;U++)try{P[U](performance.now())}catch(fe){$r(fe)}P.length=0},ys=()=>{Ai(fi),Ai(en),(Y=fi.length>0)&&ie.raf(ys)},pi=P=>J().then(P),On=_s(fi,!1),xi=_s(en,!0),Mi={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},7726:(wt,$e,R)=>{"use strict";R.d($e,{m:()=>W});var a=R(5861),le=R(7593),F=R(3756),Te=R(6254),he=R(9442);const de=ee=>(0,he.c)().duration(ee?400:300),ne=ee=>{let ie,ce;const Pe=ee.width+8,J=(0,he.c)(),K=(0,he.c)();ee.isEndSide?(ie=Pe+"px",ce="0px"):(ie=-Pe+"px",ce="0px"),J.addElement(ee.menuInnerEl).fromTo("transform",`translateX(${ie})`,`translateX(${ce})`);const qe="ios"===(0,Te.b)(ee),Ue=qe?.2:.25;return K.addElement(ee.backdropEl).fromTo("opacity",.01,Ue),de(qe).addAnimation([J,K])},Ee=ee=>{let ie,ce;const Pe=(0,Te.b)(ee),J=ee.width;ee.isEndSide?(ie=-J+"px",ce=J+"px"):(ie=J+"px",ce=-J+"px");const K=(0,he.c)().addElement(ee.menuInnerEl).fromTo("transform",`translateX(${ce})`,"translateX(0px)"),X=(0,he.c)().addElement(ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${ie})`),qe=(0,he.c)().addElement(ee.backdropEl).fromTo("opacity",.01,.32);return de("ios"===Pe).addAnimation([K,X,qe])},ge=ee=>{const ie=(0,Te.b)(ee),ce=ee.width*(ee.isEndSide?-1:1)+"px",Pe=(0,he.c)().addElement(ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${ce})`);return de("ios"===ie).addAnimation(Pe)},W=(()=>{const ee=new Map,ie=[],ce=function(){var Ce=(0,a.Z)(function*(xe){const Be=yield Ae(xe);return!!Be&&Be.open()});return function(Be){return Ce.apply(this,arguments)}}(),Pe=function(){var Ce=(0,a.Z)(function*(xe){const Be=yield void 0!==xe?Ae(xe):_e();return void 0!==Be&&Be.close()});return function(Be){return Ce.apply(this,arguments)}}(),J=function(){var Ce=(0,a.Z)(function*(xe){const Be=yield Ae(xe);return!!Be&&Be.toggle()});return function(Be){return Ce.apply(this,arguments)}}(),K=function(){var Ce=(0,a.Z)(function*(xe,Be){const Fe=yield Ae(Be);return Fe&&(Fe.disabled=!xe),Fe});return function(Be,Fe){return Ce.apply(this,arguments)}}(),X=function(){var Ce=(0,a.Z)(function*(xe,Be){const Fe=yield Ae(Be);return Fe&&(Fe.swipeGesture=xe),Fe});return function(Be,Fe){return Ce.apply(this,arguments)}}(),qe=function(){var Ce=(0,a.Z)(function*(xe){if(null!=xe){const Be=yield Ae(xe);return void 0!==Be&&Be.isOpen()}return void 0!==(yield _e())});return function(Be){return Ce.apply(this,arguments)}}(),Ue=function(){var Ce=(0,a.Z)(function*(xe){const Be=yield Ae(xe);return!!Be&&!Be.disabled});return function(Be){return Ce.apply(this,arguments)}}(),Ae=function(){var Ce=(0,a.Z)(function*(xe){return yield Ne(),"start"===xe||"end"===xe?dt(ze=>ze.side===xe&&!ze.disabled)||dt(ze=>ze.side===xe):null!=xe?dt(Fe=>Fe.menuId===xe):dt(Fe=>!Fe.disabled)||(ie.length>0?ie[0].el:void 0)});return function(Be){return Ce.apply(this,arguments)}}(),_e=function(){var Ce=(0,a.Z)(function*(){return yield Ne(),me()});return function(){return Ce.apply(this,arguments)}}(),ye=function(){var Ce=(0,a.Z)(function*(){return yield Ne(),pe()});return function(){return Ce.apply(this,arguments)}}(),ue=function(){var Ce=(0,a.Z)(function*(){return yield Ne(),st()});return function(){return Ce.apply(this,arguments)}}(),be=(Ce,xe)=>{ee.set(Ce,xe)},re=Ce=>{const xe=Ce.side;ie.filter(Be=>Be.side===xe&&Be!==Ce).forEach(Be=>Be.disabled=!0)},Z=function(){var Ce=(0,a.Z)(function*(xe,Be,Fe){if(st())return!1;if(Be){const ze=yield _e();ze&&xe.el!==ze&&(yield ze.setOpen(!1,!1))}return xe._setOpen(Be,Fe)});return function(Be,Fe,ze){return Ce.apply(this,arguments)}}(),me=()=>dt(Ce=>Ce._isOpen),pe=()=>ie.map(Ce=>Ce.el),st=()=>ie.some(Ce=>Ce.isAnimating),dt=Ce=>{const xe=ie.find(Ce);if(void 0!==xe)return xe.el},Ne=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ce=>new Promise(xe=>(0,F.c)(Ce,xe))));return be("reveal",ge),be("push",Ee),be("overlay",ne),"undefined"!=typeof document&&document.addEventListener("ionBackButton",Ce=>{const xe=me();xe&&Ce.detail.register(le.MENU_BACK_BUTTON_PRIORITY,()=>xe.close())}),{registerAnimation:be,get:Ae,getMenus:ye,getOpen:_e,isEnabled:Ue,swipeGesture:X,isAnimating:ue,isOpen:qe,enable:K,toggle:J,close:Pe,open:ce,_getOpenSync:me,_createAnimation:(Ce,xe)=>{const Be=ee.get(Ce);if(!Be)throw new Error("animation not registered");return Be(xe)},_register:Ce=>{ie.indexOf(Ce)<0&&(Ce.disabled||re(Ce),ie.push(Ce))},_unregister:Ce=>{const xe=ie.indexOf(Ce);xe>-1&&ie.splice(xe,1)},_setOpen:Z,_setActiveMenu:re}})()},6254:(wt,$e,R)=>{"use strict";R.d($e,{a:()=>W,b:()=>st,c:()=>F,g:()=>Y,i:()=>dt});var a=R(2361);class le{constructor(){this.m=new Map}reset(Ce){this.m=new Map(Object.entries(Ce))}get(Ce,xe){const Be=this.m.get(Ce);return void 0!==Be?Be:xe}getBoolean(Ce,xe=!1){const Be=this.m.get(Ce);return void 0===Be?xe:"string"==typeof Be?"true"===Be:!!Be}getNumber(Ce,xe){const Be=parseFloat(this.m.get(Ce));return isNaN(Be)?void 0!==xe?xe:NaN:Be}set(Ce,xe){this.m.set(Ce,xe)}}const F=new le,ge="ionic-persist-config",Y=Ne=>ee(Ne),W=(Ne,Ce)=>("string"==typeof Ne&&(Ce=Ne,Ne=void 0),Y(Ne).includes(Ce)),ee=(Ne=window)=>{if(void 0===Ne)return[];Ne.Ionic=Ne.Ionic||{};let Ce=Ne.Ionic.platforms;return null==Ce&&(Ce=Ne.Ionic.platforms=ie(Ne),Ce.forEach(xe=>Ne.document.documentElement.classList.add(`plt-${xe}`))),Ce},ie=Ne=>{const Ce=F.get("platform");return Object.keys(me).filter(xe=>{const Be=null==Ce?void 0:Ce[xe];return"function"==typeof Be?Be(Ne):me[xe](Ne)})},Pe=Ne=>!!(Z(Ne,/iPad/i)||Z(Ne,/Macintosh/i)&&_e(Ne)),X=Ne=>Z(Ne,/android|sink/i),_e=Ne=>$(Ne,"(any-pointer:coarse)"),ue=Ne=>be(Ne)||Q(Ne),be=Ne=>!!(Ne.cordova||Ne.phonegap||Ne.PhoneGap),Q=Ne=>{const Ce=Ne.Capacitor;return!!(null==Ce?void 0:Ce.isNative)},Z=(Ne,Ce)=>Ce.test(Ne.navigator.userAgent),$=(Ne,Ce)=>{var xe;return null===(xe=Ne.matchMedia)||void 0===xe?void 0:xe.call(Ne,Ce).matches},me={ipad:Pe,iphone:Ne=>Z(Ne,/iPhone/i),ios:Ne=>Z(Ne,/iPhone|iPod/i)||Pe(Ne),android:X,phablet:Ne=>{const Ce=Ne.innerWidth,xe=Ne.innerHeight,Be=Math.min(Ce,xe),Fe=Math.max(Ce,xe);return Be>390&&Be<520&&Fe>620&&Fe<800},tablet:Ne=>{const Ce=Ne.innerWidth,xe=Ne.innerHeight,Be=Math.min(Ce,xe),Fe=Math.max(Ce,xe);return Pe(Ne)||(Ne=>X(Ne)&&!Z(Ne,/mobile/i))(Ne)||Be>460&&Be<820&&Fe>780&&Fe<1400},cordova:be,capacitor:Q,electron:Ne=>Z(Ne,/electron/i),pwa:Ne=>{var Ce;return!(!(null===(Ce=Ne.matchMedia)||void 0===Ce?void 0:Ce.call(Ne,"(display-mode: standalone)").matches)&&!Ne.navigator.standalone)},mobile:_e,mobileweb:Ne=>_e(Ne)&&!ue(Ne),desktop:Ne=>!_e(Ne),hybrid:ue};let pe;const st=Ne=>Ne&&(0,a.g)(Ne)||pe,dt=(Ne={})=>{if("undefined"==typeof window)return;const Ce=window.document,xe=window,Be=xe.Ionic=xe.Ionic||{},Fe={};Ne._ael&&(Fe.ael=Ne._ael),Ne._rel&&(Fe.rel=Ne._rel),Ne._ce&&(Fe.ce=Ne._ce),(0,a.s)(Fe);const ze=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ne=>{try{const Ce=Ne.sessionStorage.getItem(ge);return null!==Ce?JSON.parse(Ce):{}}catch(Ce){return{}}})(xe)),{persistConfig:!1}),Be.config),(Ne=>{const Ce={};return Ne.location.search.slice(1).split("&").map(xe=>xe.split("=")).map(([xe,Be])=>[decodeURIComponent(xe),decodeURIComponent(Be)]).filter(([xe])=>((Ne,Ce)=>Ne.substr(0,Ce.length)===Ce)(xe,"ionic:")).map(([xe,Be])=>[xe.slice("ionic:".length),Be]).forEach(([xe,Be])=>{Ce[xe]=Be}),Ce})(xe)),Ne);F.reset(ze),F.getBoolean("persistConfig")&&((Ne,Ce)=>{try{Ne.sessionStorage.setItem(ge,JSON.stringify(Ce))}catch(xe){return}})(xe,ze),ee(xe),Be.config=F,Be.mode=pe=F.get("mode",Ce.documentElement.getAttribute("mode")||(W(xe,"ios")?"ios":"md")),F.set("mode",pe),Ce.documentElement.setAttribute("mode",pe),Ce.documentElement.classList.add(pe),F.getBoolean("_testing")&&F.set("animated",!1);const Oe=Ke=>{var mt;return null===(mt=Ke.tagName)||void 0===mt?void 0:mt.startsWith("ION-")},ot=Ke=>["ios","md"].includes(Ke);(0,a.a)(Ke=>{for(;Ke;){const mt=Ke.mode||Ke.getAttribute("mode");if(mt){if(ot(mt))return mt;Oe(Ke)&&console.warn('Invalid ionic mode: "'+mt+'", expected: "ios" or "md"')}Ke=Ke.parentElement}return pe})}},1815:(wt,$e,R)=>{"use strict";R.r($e),R.d($e,{iosTransitionAnimation:()=>ee,shadow:()=>de});var a=R(9442),le=R(4318);R(2361);const he=ie=>document.querySelector(`${ie}.ion-cloned-element`),de=ie=>ie.shadowRoot||ie,ne=ie=>{const ce="ION-TABS"===ie.tagName?ie:ie.querySelector("ion-tabs"),Pe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=ce){const J=ce.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=J?J.querySelector(Pe):null}return ie.querySelector(Pe)},Ee=(ie,ce)=>{const Pe="ION-TABS"===ie.tagName?ie:ie.querySelector("ion-tabs");let J=[];if(null!=Pe){const K=Pe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=K&&(J=K.querySelectorAll("ion-buttons"))}else J=ie.querySelectorAll("ion-buttons");for(const K of J){const X=K.closest("ion-header"),qe=X&&!X.classList.contains("header-collapse-condense-inactive"),Ue=K.querySelector("ion-back-button"),Ae=K.classList.contains("buttons-collapse"),_e="start"===K.slot||""===K.slot;if(null!==Ue&&_e&&(Ae&&qe&&ce||!Ae))return Ue}return null},Y=(ie,ce,Pe,J,K,X)=>{const qe=ce?`calc(100% - ${X.right+4}px)`:X.left-4+"px",Ue=ce?"7px":"-7px",Ae=ce?"-4px":"4px",_e=ce?"-4px":"4px",ye=ce?"right":"left",ue=ce?"left":"right",q=Pe?[{offset:0,opacity:1,transform:`translate3d(${Ae}, ${X.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ue}, ${K.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ue}, ${K.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Ae}, ${X.top-46}px, 0) scale(1)`}],$=Pe?[{offset:0,opacity:1,transform:`translate3d(${_e}, ${X.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${_e}, ${X.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${_e}, ${X.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${_e}, ${X.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${_e}, ${X.top-46}px, 0) scale(1)`}],me=(0,a.c)(),pe=(0,a.c)(),st=he("ion-back-button"),dt=de(st).querySelector(".button-text"),Ne=de(st).querySelector("ion-icon");st.text=J.text,st.mode=J.mode,st.icon=J.icon,st.color=J.color,st.disabled=J.disabled,st.style.setProperty("display","block"),st.style.setProperty("position","fixed"),pe.addElement(Ne),me.addElement(dt),me.beforeStyles({"transform-origin":`${ye} center`}).beforeAddWrite(()=>{J.style.setProperty("display","none"),st.style.setProperty(ye,qe)}).afterAddWrite(()=>{J.style.setProperty("display",""),st.style.setProperty("display","none"),st.style.removeProperty(ye)}).keyframes(q),pe.beforeStyles({"transform-origin":`${ue} center`}).keyframes($),ie.addAnimation([me,pe])},W=(ie,ce,Pe,J,K,X)=>{const qe=ce?`calc(100% - ${K.right}px)`:`${K.left}px`,Ue=ce?"-18px":"18px",Ae=ce?"right":"left",ue=Pe?[{offset:0,opacity:0,transform:`translate3d(${Ue}, ${X.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${K.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${K.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ue}, ${X.top-4}px, 0) scale(0.5)`}],be=he("ion-title"),Q=(0,a.c)();be.innerText=J.innerText,be.size=J.size,be.color=J.color,Q.addElement(be),Q.beforeStyles({"transform-origin":`${Ae} center`,height:"46px",display:"",position:"relative",[Ae]:qe}).beforeAddWrite(()=>{J.style.setProperty("display","none")}).afterAddWrite(()=>{J.style.setProperty("display",""),be.style.setProperty("display","none")}).keyframes(ue),ie.addAnimation(Q)},ee=(ie,ce)=>{try{const Pe="cubic-bezier(0.32,0.72,0,1)",J="opacity",K="transform",X="0%",Ue="rtl"===ie.ownerDocument.dir,Ae=Ue?"-99.5%":"99.5%",_e=Ue?"33%":"-33%",ye=ce.enteringEl,ue=ce.leavingEl,be="back"===ce.direction,Q=ye.querySelector(":scope > ion-content"),q=ye.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),re=ye.querySelectorAll(":scope > ion-header > ion-toolbar"),Z=(0,a.c)(),$=(0,a.c)();if(Z.addElement(ye).duration(ce.duration||540).easing(ce.easing||Pe).fill("both").beforeRemoveClass("ion-page-invisible"),ue&&ie){const dt=(0,a.c)();dt.addElement(ie),Z.addAnimation(dt)}if(Q||0!==re.length||0!==q.length?($.addElement(Q),$.addElement(q)):$.addElement(ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Z.addAnimation($),be?$.beforeClearStyles([J]).fromTo("transform",`translateX(${_e})`,`translateX(${X})`).fromTo(J,.8,1):$.beforeClearStyles([J]).fromTo("transform",`translateX(${Ae})`,`translateX(${X})`),Q){const dt=de(Q).querySelector(".transition-effect");if(dt){const Ne=dt.querySelector(".transition-cover"),Ce=dt.querySelector(".transition-shadow"),xe=(0,a.c)(),Be=(0,a.c)(),Fe=(0,a.c)();xe.addElement(dt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Be.addElement(Ne).beforeClearStyles([J]).fromTo(J,0,.1),Fe.addElement(Ce).beforeClearStyles([J]).fromTo(J,.03,.7),xe.addAnimation([Be,Fe]),$.addAnimation([xe])}}const me=ye.querySelector("ion-header.header-collapse-condense"),{forward:pe,backward:st}=((ie,ce,Pe,J,K)=>{const X=Ee(J,Pe),qe=ne(K),Ue=ne(J),Ae=Ee(K,Pe),_e=null!==X&&null!==qe&&!Pe,ye=null!==Ue&&null!==Ae&&Pe;if(_e){const ue=qe.getBoundingClientRect(),be=X.getBoundingClientRect();W(ie,ce,Pe,qe,ue,be),Y(ie,ce,Pe,X,ue,be)}else if(ye){const ue=Ue.getBoundingClientRect(),be=Ae.getBoundingClientRect();W(ie,ce,Pe,Ue,ue,be),Y(ie,ce,Pe,Ae,ue,be)}return{forward:_e,backward:ye}})(Z,Ue,be,ye,ue);if(re.forEach(dt=>{const Ne=(0,a.c)();Ne.addElement(dt),Z.addAnimation(Ne);const Ce=(0,a.c)();Ce.addElement(dt.querySelector("ion-title"));const xe=(0,a.c)(),Be=Array.from(dt.querySelectorAll("ion-buttons,[menuToggle]")),Fe=dt.closest("ion-header"),ze=null==Fe?void 0:Fe.classList.contains("header-collapse-condense-inactive");let Oe;Oe=Be.filter(be?Xt=>{const hn=Xt.classList.contains("buttons-collapse");return hn&&!ze||!hn}:Xt=>!Xt.classList.contains("buttons-collapse")),xe.addElement(Oe);const ot=(0,a.c)();ot.addElement(dt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ke=(0,a.c)();Ke.addElement(de(dt).querySelector(".toolbar-background"));const mt=(0,a.c)(),Qt=dt.querySelector("ion-back-button");if(Qt&&mt.addElement(Qt),Ne.addAnimation([Ce,xe,ot,Ke,mt]),xe.fromTo(J,.01,1),ot.fromTo(J,.01,1),be)ze||Ce.fromTo("transform",`translateX(${_e})`,`translateX(${X})`).fromTo(J,.01,1),ot.fromTo("transform",`translateX(${_e})`,`translateX(${X})`),mt.fromTo(J,.01,1);else if(me||Ce.fromTo("transform",`translateX(${Ae})`,`translateX(${X})`).fromTo(J,.01,1),ot.fromTo("transform",`translateX(${Ae})`,`translateX(${X})`),Ke.beforeClearStyles([J,"transform"]),(null==Fe?void 0:Fe.translucent)?Ke.fromTo("transform",Ue?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ke.fromTo(J,.01,"var(--opacity)"),pe||mt.fromTo(J,.01,1),Qt&&!pe){const hn=(0,a.c)();hn.addElement(de(Qt).querySelector(".button-text")).fromTo("transform",Ue?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ne.addAnimation(hn)}}),ue){const dt=(0,a.c)(),Ne=ue.querySelector(":scope > ion-content"),Ce=ue.querySelectorAll(":scope > ion-header > ion-toolbar"),xe=ue.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ne||0!==Ce.length||0!==xe.length?(dt.addElement(Ne),dt.addElement(xe)):dt.addElement(ue.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Z.addAnimation(dt),be){dt.beforeClearStyles([J]).fromTo("transform",`translateX(${X})`,Ue?"translateX(-100%)":"translateX(100%)");const Be=(0,le.g)(ue);Z.afterAddWrite(()=>{"normal"===Z.getDirection()&&Be.style.setProperty("display","none")})}else dt.fromTo("transform",`translateX(${X})`,`translateX(${_e})`).fromTo(J,1,.8);if(Ne){const Be=de(Ne).querySelector(".transition-effect");if(Be){const Fe=Be.querySelector(".transition-cover"),ze=Be.querySelector(".transition-shadow"),Oe=(0,a.c)(),ot=(0,a.c)(),Ke=(0,a.c)();Oe.addElement(Be).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ot.addElement(Fe).beforeClearStyles([J]).fromTo(J,.1,0),Ke.addElement(ze).beforeClearStyles([J]).fromTo(J,.7,.03),Oe.addAnimation([ot,Ke]),dt.addAnimation([Oe])}}Ce.forEach(Be=>{const Fe=(0,a.c)();Fe.addElement(Be);const ze=(0,a.c)();ze.addElement(Be.querySelector("ion-title"));const Oe=(0,a.c)(),ot=Be.querySelectorAll("ion-buttons,[menuToggle]"),Ke=Be.closest("ion-header"),mt=null==Ke?void 0:Ke.classList.contains("header-collapse-condense-inactive"),Qt=Array.from(ot).filter(Wr=>{const lr=Wr.classList.contains("buttons-collapse");return lr&&!mt||!lr});Oe.addElement(Qt);const Xt=(0,a.c)(),hn=Be.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");hn.length>0&&Xt.addElement(hn);const zt=(0,a.c)();zt.addElement(de(Be).querySelector(".toolbar-background"));const vn=(0,a.c)(),$n=Be.querySelector("ion-back-button");if($n&&vn.addElement($n),Fe.addAnimation([ze,Oe,Xt,vn,zt]),Z.addAnimation(Fe),vn.fromTo(J,.99,0),Oe.fromTo(J,.99,0),Xt.fromTo(J,.99,0),be){if(mt||ze.fromTo("transform",`translateX(${X})`,Ue?"translateX(-100%)":"translateX(100%)").fromTo(J,.99,0),Xt.fromTo("transform",`translateX(${X})`,Ue?"translateX(-100%)":"translateX(100%)"),zt.beforeClearStyles([J,"transform"]),(null==Ke?void 0:Ke.translucent)?zt.fromTo("transform","translateX(0px)",Ue?"translateX(-100%)":"translateX(100%)"):zt.fromTo(J,"var(--opacity)",0),$n&&!st){const lr=(0,a.c)();lr.addElement(de($n).querySelector(".button-text")).fromTo("transform",`translateX(${X})`,`translateX(${(Ue?-124:124)+"px"})`),Fe.addAnimation(lr)}}else mt||ze.fromTo("transform",`translateX(${X})`,`translateX(${_e})`).fromTo(J,.99,0).afterClearStyles([K,J]),Xt.fromTo("transform",`translateX(${X})`,`translateX(${_e})`).afterClearStyles([K,J]),vn.afterClearStyles([J]),ze.afterClearStyles([J]),Oe.afterClearStyles([J])})}return Z}catch(Pe){throw Pe}}},6447:(wt,$e,R)=>{"use strict";R.r($e),R.d($e,{mdTransitionAnimation:()=>Te});var a=R(9442),le=R(4318);R(2361);const Te=(he,de)=>{const ge="back"===de.direction,W=de.leavingEl,ee=(0,le.g)(de.enteringEl),ie=ee.querySelector("ion-toolbar"),ce=(0,a.c)();if(ce.addElement(ee).fill("both").beforeRemoveClass("ion-page-invisible"),ge?ce.duration(de.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):ce.duration(de.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),ie){const Pe=(0,a.c)();Pe.addElement(ie),ce.addAnimation(Pe)}if(W&&ge){ce.duration(de.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Pe=(0,a.c)();Pe.addElement((0,le.g)(W)).onFinish(J=>{1===J&&Pe.elements.length>0&&Pe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),ce.addAnimation(Pe)}return ce}},599:(wt,$e,R)=>{"use strict";R.d($e,{B:()=>Be,a:()=>Ee,b:()=>ge,c:()=>ie,d:()=>re,e:()=>Pe,f:()=>$,g:()=>st,h:()=>de,i:()=>Ne,j:()=>qe,k:()=>Q,m:()=>W,s:()=>xe});var a=R(5861),le=R(6254),F=R(7593),Te=R(3756);let he=0;const de=new WeakMap,ne=Fe=>({create:ze=>J(Fe,ze),dismiss:(ze,Oe,ot)=>ue(document,ze,Oe,Fe,ot),getTop:()=>(0,a.Z)(function*(){return Q(document,Fe)})()}),Ee=ne("ion-alert"),ge=ne("ion-action-sheet"),W=ne("ion-modal"),ie=ne("ion-popover"),Pe=Fe=>{"undefined"!=typeof document&&ye(document);const ze=he++;Fe.overlayIndex=ze,Fe.hasAttribute("id")||(Fe.id=`ion-overlay-${ze}`)},J=(Fe,ze)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(Fe).then(()=>{const Oe=document.createElement(Fe);return Oe.classList.add("overlay-hidden"),Object.assign(Oe,Object.assign(Object.assign({},ze),{hasController:!0})),me(document).appendChild(Oe),new Promise(ot=>(0,Te.c)(Oe,ot))}):Promise.resolve(),K='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',X="input:not([type=hidden]), textarea, button, select",qe=(Fe,ze)=>{let Oe=Fe.querySelector(K);const ot=null==Oe?void 0:Oe.shadowRoot;ot&&(Oe=ot.querySelector(X)||Oe),Oe?(0,Te.f)(Oe):ze.focus()},Ae=(Fe,ze)=>{const Oe=Array.from(Fe.querySelectorAll(K));let ot=Oe.length>0?Oe[Oe.length-1]:null;const Ke=null==ot?void 0:ot.shadowRoot;Ke&&(ot=Ke.querySelector(X)||ot),ot?ot.focus():ze.focus()},ye=Fe=>{0===he&&(he=1,Fe.addEventListener("focus",ze=>{((Fe,ze)=>{const Oe=Q(ze,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),ot=Fe.target;Oe&&ot&&!Oe.classList.contains("ion-disable-focus-trap")&&(Oe.shadowRoot?(()=>{if(Oe.contains(ot))Oe.lastFocus=ot;else{const Qt=Oe.lastFocus;qe(Oe,Oe),Qt===ze.activeElement&&Ae(Oe,Oe),Oe.lastFocus=ze.activeElement}})():(()=>{if(Oe===ot)Oe.lastFocus=void 0;else{const Qt=(0,Te.g)(Oe);if(!Qt.contains(ot))return;const Xt=Qt.querySelector(".ion-overlay-wrapper");if(!Xt)return;if(Xt.contains(ot))Oe.lastFocus=ot;else{const hn=Oe.lastFocus;qe(Xt,Oe),hn===ze.activeElement&&Ae(Xt,Oe),Oe.lastFocus=ze.activeElement}}})())})(ze,Fe)},!0),Fe.addEventListener("ionBackButton",ze=>{const Oe=Q(Fe);(null==Oe?void 0:Oe.backdropDismiss)&&ze.detail.register(F.OVERLAY_BACK_BUTTON_PRIORITY,()=>Oe.dismiss(void 0,Be))}),Fe.addEventListener("keyup",ze=>{if("Escape"===ze.key){const Oe=Q(Fe);(null==Oe?void 0:Oe.backdropDismiss)&&Oe.dismiss(void 0,Be)}}))},ue=(Fe,ze,Oe,ot,Ke)=>{const mt=Q(Fe,ot,Ke);return mt?mt.dismiss(ze,Oe):Promise.reject("overlay does not exist")},Q=(Fe,ze,Oe)=>{const ot=((Fe,ze)=>(void 0===ze&&(ze="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Fe.querySelectorAll(ze)).filter(Oe=>Oe.overlayIndex>0)))(Fe,ze).filter(Ke=>!(Fe=>Fe.classList.contains("overlay-hidden"))(Ke));return void 0===Oe?ot[ot.length-1]:ot.find(Ke=>Ke.id===Oe)},q=(Fe=!1)=>{const Oe=me(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Oe||(Fe?Oe.setAttribute("aria-hidden","true"):Oe.removeAttribute("aria-hidden"))},re=function(){var Fe=(0,a.Z)(function*(ze,Oe,ot,Ke,mt){var Qt,Xt;if(ze.presented)return;q(!0),ze.presented=!0,ze.willPresent.emit(),null===(Qt=ze.willPresentShorthand)||void 0===Qt||Qt.emit();const hn=(0,le.b)(ze),zt=ze.enterAnimation?ze.enterAnimation:le.c.get(Oe,"ios"===hn?ot:Ke);(yield pe(ze,zt,ze.el,mt))&&(ze.didPresent.emit(),null===(Xt=ze.didPresentShorthand)||void 0===Xt||Xt.emit()),"ION-TOAST"!==ze.el.tagName&&Z(ze.el),ze.keyboardClose&&ze.el.focus()});return function(Oe,ot,Ke,mt,Qt){return Fe.apply(this,arguments)}}(),Z=function(){var Fe=(0,a.Z)(function*(ze){let Oe=document.activeElement;if(!Oe)return;const ot=null==Oe?void 0:Oe.shadowRoot;ot&&(Oe=ot.querySelector(X)||Oe),yield ze.onDidDismiss(),Oe.focus()});return function(Oe){return Fe.apply(this,arguments)}}(),$=function(){var Fe=(0,a.Z)(function*(ze,Oe,ot,Ke,mt,Qt,Xt){var hn,zt;if(!ze.presented)return!1;q(!1),ze.presented=!1;try{ze.el.style.setProperty("pointer-events","none"),ze.willDismiss.emit({data:Oe,role:ot}),null===(hn=ze.willDismissShorthand)||void 0===hn||hn.emit({data:Oe,role:ot});const vn=(0,le.b)(ze),$n=ze.leaveAnimation?ze.leaveAnimation:le.c.get(Ke,"ios"===vn?mt:Qt);"gesture"!==ot&&(yield pe(ze,$n,ze.el,Xt)),ze.didDismiss.emit({data:Oe,role:ot}),null===(zt=ze.didDismissShorthand)||void 0===zt||zt.emit({data:Oe,role:ot}),de.delete(ze),ze.el.classList.add("overlay-hidden"),ze.el.style.removeProperty("pointer-events")}catch(vn){console.error(vn)}return ze.el.remove(),!0});return function(Oe,ot,Ke,mt,Qt,Xt,hn){return Fe.apply(this,arguments)}}(),me=Fe=>Fe.querySelector("ion-app")||Fe.body,pe=function(){var Fe=(0,a.Z)(function*(ze,Oe,ot,Ke){ot.classList.remove("overlay-hidden");const Qt=Oe(ze.el,Ke);(!ze.animated||!le.c.getBoolean("animated",!0))&&Qt.duration(0),ze.keyboardClose&&Qt.beforeAddWrite(()=>{const hn=ot.ownerDocument.activeElement;(null==hn?void 0:hn.matches("input,ion-input, ion-textarea"))&&hn.blur()});const Xt=de.get(ze)||[];return de.set(ze,[...Xt,Qt]),yield Qt.play(),!0});return function(Oe,ot,Ke,mt){return Fe.apply(this,arguments)}}(),st=(Fe,ze)=>{let Oe;const ot=new Promise(Ke=>Oe=Ke);return dt(Fe,ze,Ke=>{Oe(Ke.detail)}),ot},dt=(Fe,ze,Oe)=>{const ot=Ke=>{(0,Te.b)(Fe,ze,ot),Oe(Ke)};(0,Te.a)(Fe,ze,ot)},Ne=Fe=>"cancel"===Fe||Fe===Be,Ce=Fe=>Fe(),xe=(Fe,ze)=>{if("function"==typeof Fe)return le.c.get("_zoneGate",Ce)(()=>{try{return Fe(ze)}catch(ot){throw ot}})},Be="backdrop"},1266:(wt,$e,R)=>{"use strict";var a=R(5e3);let le=null;function F(){return le}const ne=new a.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function ge(){return(0,a.LFG)(W)}()},providedIn:"platform"}),n})();const Y=new a.OlP("Location Initialized");let W=(()=>{class n extends Ee{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ee()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ee()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function ie(){return new W((0,a.LFG)(ne))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function ce(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function J(n){return n&&"?"!==n[0]?"?"+n:n}let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function X(n){const e=(0,a.LFG)(ne).location;return new Ue((0,a.LFG)(Ee),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new a.OlP("appBaseHref");let Ue=(()=>{class n extends K{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ce(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+J(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,l){const u=this.prepareExternalUrl(i+J(l));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){const u=this.prepareExternalUrl(i+J(l));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Ee),a.LFG(qe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n extends K{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ce(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,l){let u=this.prepareExternalUrl(i+J(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){let u=this.prepareExternalUrl(i+J(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Ee),a.LFG(qe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(be(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+J(r))}normalize(t){return n.stripTrailingSlash(function ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=J,n.joinWithSlash=ce,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(a.LFG(K),a.LFG(Ee))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function ye(){return new _e((0,a.LFG)(K),(0,a.LFG)(Ee))}()},providedIn:"root"}),n})();function be(n){return n.replace(/\/index.html$/,"")}class pi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let On=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,l,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new pi(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===l?void 0:l);else if(null!==l){const f=r.get(l);r.move(f,u),xi(f,i)}});for(let i=0,l=r.length;i<l;i++){const f=r.get(i).context;f.index=i,f.count=l,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xi(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function xi(n,e){n.context.$implicit=e.item}let P=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new U,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fe("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fe("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class U{constructor(){this.$implicit=null,this.ngIf=null}}function fe(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(e)}'.`)}let Wo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function ni(n){return"server"===n}let Wl=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new Zl((0,a.LFG)(ne),window)}),n})();class Zl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function al(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const u=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Gs(this.window.history)||Gs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Gs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class mo extends class xa extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){le||(le=n)}(new mo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zd(){return Vn=Vn||document.querySelector("base"),Vn?Vn.getAttribute("href"):null}();return null==t?null:function Yo(n){Zo=Zo||document.createElement("a"),Zo.setAttribute("href",n);const e=Zo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Vn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _s(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Zo,Vn=null;const gi=new a.OlP("TRANSITION_ID"),ll=[{provide:a.ip1,useFactory:function xr(n,e,t){return()=>{t.get(a.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[gi,ne,a.zs3],multi:!0}];class vs{static init(){(0,a.VLi)(new vs)}addToWindow(e){a.dqk.getAngularTestability=(r,i=!0)=>{const l=e.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let l=i.length,u=!1;const f=function(_){u=u||_,l--,0==l&&r(u)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let mi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const _o=new a.OlP("EventManagerPlugins");let qs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const u=i[l];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(_o),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Yl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Yi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends Yi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(vo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vo))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function vo(n){F().remove(n)}const Ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kl=/%COMP%/g;function Je(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Je(n,i,t):(i=i.replace(Kl,n),t.push(i))}return t}function yn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let or=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ma(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new du(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case a.ifc.ShadowDom:return new hu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Je(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(qs),a.LFG(yo),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Ma{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ht[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const l=Ht[i];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ht[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(a.JOm.DashCase|a.JOm.Important)?e.style.setProperty(t,r,i&a.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&a.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yn(r)):this.eventManager.addEventListener(e,t,yn(r))}}class du extends Ma{constructor(e,t,r,i){super(e),this.component=r;const l=Je(i+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function lu(n){return"_ngcontent-%COMP%".replace(Kl,n)}(i+"-"+r.id),this.hostAttr=function cu(n){return"_nghost-%COMP%".replace(Kl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class hu extends Ma{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Je(i.id,i.styles,[]);for(let u=0;u<l.length;u++){const f=document.createElement("style");f.textContent=l[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Yd=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const fu=["alt","control","meta","shift"],Co={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ri={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},as={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tc=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const l=n.parseEventName(r),u=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let u="";if(fu.forEach(_=>{const C=r.indexOf(_);C>-1&&(r.splice(C,1),u+=_+".")}),u+=l,0!=r.length||0===l.length)return null;const f={};return f.domEventName=i,f.fullKey=u,f}static getEventFullKey(t){let r="",i=function bo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ri.hasOwnProperty(e)&&(e=ri[e]))}return Co[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),fu.forEach(l=>{l!=i&&as[l](t)&&(r+=l+".")}),r+=i,r}static eventCallback(t,r,i){return l=>{n.getEventFullKey(l)===t&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ne))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const gu=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function Cs(){mo.makeCurrent(),vs.init()},multi:!0},{provide:ne,useFactory:function nc(){return(0,a.RDi)(document),document},deps:[]}]),ul=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function pu(){return new a.qLn},deps:[]},{provide:_o,useClass:Yd,multi:!0,deps:[ne,a.R0b,a.Lbi]},{provide:_o,useClass:tc,multi:!0,deps:[ne]},{provide:or,useClass:or,deps:[qs,yo,a.AFp]},{provide:a.FYo,useExisting:or},{provide:Yi,useExisting:yo},{provide:yo,useClass:yo,deps:[ne]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:qs,useClass:qs,deps:[_o,a.R0b]},{provide:class Jn{},useClass:mi,deps:[]}];let dl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:a.AFp,useValue:t.appId},{provide:gi,useExisting:a.AFp},ll]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:ul,imports:[Wo,a.hGG]}),n})();"undefined"!=typeof window&&window;var Zr=R(2011),Yr=R(4986),Pi=R(8306),Sn=R(8996),Zs=R(7669);function Vt(...n){const e=(0,Zs.yG)(n);return(0,Sn.D)(n,e)}var Cn=R(5813),fl=R(8189);function Eu(...n){return function qn(){return(0,fl.J)(1)}()((0,Sn.D)(n,(0,Zs.yG)(n)))}var er=R(4482);function ea(...n){const e=(0,Zs.yG)(n);return(0,er.e)((t,r)=>{(e?Eu(n,t,e):Eu(n,t)).subscribe(r)})}var tr=R(5403);function rh(){return(0,er.e)((n,e)=>{let t,r=!1;n.subscribe((0,tr.x)(e,i=>{const l=t;t=i,r&&e.next([l,i]),r=!0}))})}var At=R(4004);function Iu(n,e,t,r,i){return(l,u)=>{let f=t,_=e,C=0;l.subscribe((0,tr.x)(u,T=>{const S=C++;_=f?n(_,T,S):(f=!0,T),r&&u.next(_)},i&&(()=>{f&&u.next(_),u.complete()})))}}function ta(n,e){return(0,er.e)(Iu(n,e,arguments.length>=2,!0))}var bs=R(4671);function Io(n,e=bs.y){return n=null!=n?n:Ys,(0,er.e)((t,r)=>{let i,l=!0;t.subscribe((0,tr.x)(r,u=>{const f=e(u);(l||!n(i,f))&&(l=!1,i=f,r.next(u))}))})}function Ys(n,e){return n===e}function ii(n,e){return(0,er.e)((t,r)=>{let i=0;t.subscribe((0,tr.x)(r,l=>n.call(e,l,i++)&&r.next(l)))})}R(820);var Tt,Ks=R(3942),We=R(5861),vr=R(9681),Qi=R(4859),yi=R(1877),L=R(2090),Tu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},To={},ls=ls||{},nn=Tu||self;function na(){}function sc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Oi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Do="closure_uid_"+(1e9*Math.random()>>>0),oc=0;function So(n,e,t){return n.call.apply(n.bind,arguments)}function Ra(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hn(n,e,t){return(Hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?So:Ra).apply(null,arguments)}function ac(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function Xi(){this.s=this.s,this.o=this.o}var zg={};Xi.prototype.s=!1,Xi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ih(n){return Object.prototype.hasOwnProperty.call(n,Do)&&n[Do]||(n[Do]=++oc)}(this);delete zg[n]}},Xi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cr=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Xf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&e.call(t,i[l],l,n)};function Jf(n){return Array.prototype.concat.apply([],arguments)}function cc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uc(n){return/^[\s\xa0]*$/.test(n)}var ki,ep=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ri(n,e){return-1!=n.indexOf(e)}function Qs(n,e){return n<e?-1:n>e?1:0}e:{var hr=nn.navigator;if(hr){var dc=hr.userAgent;if(dc){ki=dc;break e}}ki=""}function Ao(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tp(n){const e={};for(const t in n)e[t]=n[t];return e}var hc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kr(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<hc.length;l++)t=hc[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ni(n){return Ni[" "](n),n}Ni[" "]=na;var ka,n,xo=Ri(ki,"Opera"),si=Ri(ki,"Trident")||Ri(ki,"MSIE"),Es=Ri(ki,"Edge"),ra=Es||si,fc=Ri(ki,"Gecko")&&!(Ri(ki.toLowerCase(),"webkit")&&!Ri(ki,"Edge"))&&!(Ri(ki,"Trident")||Ri(ki,"MSIE"))&&!Ri(ki,"Edge"),oh=Ri(ki.toLowerCase(),"webkit")&&!Ri(ki,"Edge");function Du(){var n=nn.document;return n?n.documentMode:void 0}e:{var vi="",pc=(n=ki,fc?/rv:([^\);]+)(\)|;)/.exec(n):Es?/Edge\/([\d\.]+)/.exec(n):si?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oh?/WebKit\/(\S+)/.exec(n):xo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pc&&(vi=pc?pc[1]:""),si){var Mo=Du();if(null!=Mo&&Mo>parseFloat(vi)){ka=String(Mo);break e}}ka=vi}var ah={};var Su=nn.document&&si&&(Du()||parseInt(ka,10))||void 0,Xs=function(){if(!nn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{nn.addEventListener("test",na,e),nn.removeEventListener("test",na,e)}catch(t){}return n}();function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ci(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fc){e:{try{Ni(e.nodeName);var i=!0;break e}catch(l){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Au[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ci.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},Hr(Ci,oi);var Au={2:"touch",3:"pen",4:"mouse"};Ci.prototype.h=function(){Ci.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sa="closure_listenable_"+(1e6*Math.random()|0),xu=0;function oa(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++xu,this.ca=this.fa=!1}function Po(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Fa(n){this.src=n,this.g={},this.h=0}function I(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=Cr(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(Po(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function D(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return i}return-1}Fa.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=D(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new oa(e,this.src,l,!!r,i)).fa=t,n.push(e)),e};var O="closure_lm_"+(1e6*Math.random()|0),G={};function Se(n,e,t,r,i){if(r&&r.once)return Dt(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Se(n,e[l],t,r,i);return null}return t=Oo(t),n&&n[sa]?n.N(e,t,Oi(r)?!!r.capture:!!r,i):ke(n,e,t,!1,r,i)}function ke(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var u=Oi(i)?!!i.capture:!!i,f=Mr(n);if(f||(n[O]=f=new Fa(n)),(t=f.add(e,t,r,u,l)).proxy)return t;if(r=function it(){var e=an;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Xs||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(In(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Dt(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Dt(n,e[l],t,r,i);return null}return t=Oo(t),n&&n[sa]?n.O(e,t,Oi(r)?!!r.capture:!!r,i):ke(n,e,t,!0,r,i)}function xt(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)xt(n,e[l],t,r,i);else r=Oi(r)?!!r.capture:!!r,t=Oo(t),n&&n[sa]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=D(l=n.g[e],t,r,i))&&(Po(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Mr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=D(e,t,r,i)),(t=-1<n?e[n]:null)&&Kt(t))}function Kt(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[sa])I(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(In(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Mr(e))?(I(t,n),0==t.h&&(t.src=null,e[O]=null)):Po(n)}}}function In(n){return n in G?G[n]:G[n]="on"+n}function an(n,e){if(n.ca)n=!0;else{e=new Ci(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Kt(n),n=t.call(r,e)}return n}function Mr(n){return(n=n[O])instanceof Fa?n:null}var fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oo(n){return"function"==typeof n?n:(n[fr]||(n[fr]=function(e){return n.handleEvent(e)}),n[fr])}function br(){Xi.call(this),this.i=new Fa(this),this.P=this,this.I=null}function zn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var i=e;Kr(e=new oi(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var u=e.g=t[l];i=Fi(u,r,!0,e)&&i}if(i=Fi(u=e.g=n,r,!0,e)&&i,i=Fi(u,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=Fi(u=e.g=t[l],r,!1,e)&&i}function Fi(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var u=e[l];if(u&&!u.ca&&u.capture==t){var f=u.listener,_=u.ia||u.src;u.fa&&I(n.i,u),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Hr(br,Xi),br.prototype[sa]=!0,br.prototype.removeEventListener=function(n,e,t,r){xt(this,n,e,t,r)},br.prototype.M=function(){if(br.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Po(t[r]);delete n.g[e],n.h--}}this.I=null},br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fs=nn.JSON.stringify;function aa(){var n=mc;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var rp,np=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ch,n=>n.reset());class ch{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gc(n){nn.setTimeout(()=>{throw n},0)}function uh(n,e){rp||function Py(){var n=nn.Promise.resolve(void 0);rp=function(){n.then(Oy)}}(),Ro||(rp(),Ro=!0),mc.add(n,e)}var Ro=!1,mc=new class Wg{constructor(){this.h=this.g=null}add(e,t){const r=np.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Oy(){for(var n;n=aa();){try{n.h.call(n.g)}catch(t){gc(t)}var e=np;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ro=!1}function dh(n,e){br.call(this),this.h=n||1,this.g=e||nn,this.j=Hn(this.kb,this),this.l=Date.now()}function hh(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _c(n,e,t){if("function"==typeof n)t&&(n=Hn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hn(n.handleEvent,n)}return 2147483647<Number(e)?-1:nn.setTimeout(n,e||0)}function Ry(n){n.g=_c(()=>{n.g=null,n.i&&(n.i=!1,Ry(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hr(dh,br),(Tt=dh.prototype).da=!1,Tt.S=null,Tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zn(this,"tick"),this.da&&(hh(this),this.start()))}},Tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){dh.Z.M.call(this),hh(this),delete this.g};class ky extends Xi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ry(this)}M(){super.M(),this.g&&(nn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mu(n){Xi.call(this),this.h=n,this.g={}}Hr(Mu,Xi);var Zg=[];function Pu(n,e,t,r){Array.isArray(t)||(t&&(Zg[0]=t.toString()),t=Zg);for(var i=0;i<t.length;i++){var l=Se(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function fh(n){Ao(n.g,function(e,t){this.g.hasOwnProperty(t)&&Kt(e)},n),n.g={}}function la(){this.g=!0}function Ou(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function sp(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<i.length;u++)i[u]=""}}}return Fs(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Mu.prototype.M=function(){Mu.Z.M.call(this),fh(this)},Mu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},la.prototype.Aa=function(){this.g=!1},la.prototype.info=function(){};var La={},op=null;function yc(){return op=op||new br}function ap(n){oi.call(this,La.Ma,n)}function Ru(n){const e=yc();zn(e,new ap(e,n))}function Yg(n,e){oi.call(this,La.STAT_EVENT,n),this.stat=e}function Ji(n){const e=yc();zn(e,new Yg(e,n))}function gh(n,e){oi.call(this,La.Na,n),this.size=e}function ku(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return nn.setTimeout(function(){n()},e)}La.Ma="serverreachability",Hr(ap,oi),La.STAT_EVENT="statevent",Hr(Yg,oi),La.Na="timingevent",Hr(gh,oi);var Is={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vc={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mh(){}function lp(){}mh.prototype.h=null;var yh,_h={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function cp(){oi.call(this,"d")}function up(){oi.call(this,"c")}function vh(){}function Nu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Mu(this),this.P=pl,this.W=new dh(n=ra?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ly}function Ly(){this.i=null,this.g="",this.h=!1}Hr(cp,oi),Hr(up,oi),Hr(vh,mh),vh.prototype.g=function(){return new XMLHttpRequest},vh.prototype.i=function(){return{}},yh=new vh;var pl=45e3,Kg={},Ch={};function Ua(n,e,t){n.K=1,n.v=wr(Js(e)),n.s=t,n.U=!0,dp(n,null)}function dp(n,e){n.F=Date.now(),Ba(n),n.A=Js(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),$u(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ly,n.g=am(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ky(Hn(n.Ia,n,n.g),n.O)),Pu(n.V,n.g,"readystatechange",n.gb),e=n.H?tp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ru(1),function Ny(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var u="",f=l.split("&"),_=0;_<f.length;_++){var C=f[_].split("=");if(1<C.length){var T=C[0];C=C[1];var S=T.split("_");u=2<=S.length&&"type"==S[1]?u+(T+"=")+C+"&":u+(T+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ts(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Cc(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Qg(n,t),i==Ch){4==e&&(n.o=4,Ji(14),r=!1),Ou(n.j,n.m,null,"[Incomplete Response]");break}if(i==Kg){n.o=4,Ji(15),Ou(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ou(n.j,n.m,i,null),Fu(n,i)}Ts(n)&&i!=Ch&&i!=Kg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Cp(e),e.L=!0,Ji(11))):(Ou(n.j,n.m,t,"[Invalid Chunked Response]"),wc(n),bc(n))}function Qg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ch:(t=Number(e.substring(t,r)),isNaN(t)?Kg:(r+=1)+t>e.length?Ch:(e=e.substr(r,t),n.C=r+t,e))}function Ba(n){n.Y=Date.now()+n.P,hp(n,n.P)}function hp(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ku(Hn(n.eb,n),e)}function fp(n){n.B&&(nn.clearTimeout(n.B),n.B=null)}function bc(n){0==n.l.G||n.I||Ph(n.l,n)}function wc(n){fp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,hh(n.W),fh(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fu(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||mp(t.i,n)))if(t.I=n.N,!n.J&&mp(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=ku(Hn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;wl(t),ut(t)}Hu(t),Ji(18)}if(1>=Ih(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Fo(t,11)}else if((n.J||t.g==n)&&wl(t),!uc(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const T=C[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=C[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const k=C[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const oe=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var l=r.i;!l.g&&(Ri(oe,"spdy")||Ri(oe,"quic")||Ri(oe,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Dc(l,l.h),l.h=null))}if(r.D){const Ve=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(r.sa=Ve,pr(r.F,r.D,Ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=Rh(r,r.H?r.la:null,r.W),u.J){Th(r.i,u);var f=u,_=r.K;_&&f.setTimeout(_),f.B&&(fp(f),Ba(f)),r.g=u}else Ac(r);0<t.l.length&&Rt(t)}else"stop"!=C[0]&&"close"!=C[0]||Fo(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Fo(t,7):Le(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Ru(4)}catch(C){}}function Lu(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(sc(n)||"string"==typeof n)Xf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(sc(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function pp(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(sc(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}}function Uu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Uu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function gp(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ko(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)ko(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function ko(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Tt=Nu.prototype).setTimeout=function(n){this.P=n},Tt.gb=function(n){n=n.target;const e=this.L;e&&3==p(n)?e.l():this.Ia(n)},Tt.Ia=function(n){try{if(n==this.g)e:{const T=p(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||ra||this.g&&(this.h.h||this.g.ga()||m(this.g)))){this.I||4!=T||7==e||Ru(8==e||0>=S?3:2),fp(this);var t=this.g.ba();this.N=t;t:if(Ts(this)){var r=m(this.g);n="";var i=r.length,l=4==p(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wc(this),bc(this);var u="";break t}this.h.i=new nn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function ip(n,e,t,r,i,l,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uc(f)){var C=f;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Ji(12),wc(this),bc(this);break e}Ou(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fu(this,t)}this.U?(Cc(this,T,u),ra&&this.i&&3==T&&(Pu(this.V,this.W,"tick",this.fb),this.W.start())):(Ou(this.j,this.m,u,null),Fu(this,u)),4==T&&wc(this),this.i&&!this.I&&(4==T?Ph(this.l,this):(this.i=!1,Ba(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ji(12)):(this.o=0,Ji(13)),wc(this),bc(this)}}}catch(T){}},Tt.fb=function(){if(this.g){var n=p(this.g),e=this.g.ga();this.C<e.length&&(fp(this),Cc(this,n,e),this.i&&4!=n&&Ba(this))}},Tt.cancel=function(){this.I=!0,wc(this)},Tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ph(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ru(3),Ji(17)),wc(this),this.o=2,bc(this)):hp(this,this.Y-n)},(Tt=Uu.prototype).R=function(){gp(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Tt.T=function(){return gp(this),this.g.concat()},Tt.get=function(n,e){return ko(this.h,n)?this.h[n]:e},Tt.set=function(n,e){ko(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],l=this.get(i);n.call(e,l,i,this)}};var Xg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ca(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ca){this.g=void 0!==e?e:n.g,Bu(this,n.j),this.s=n.s,gl(this,n.i),ml(this,n.m),this.l=n.l,e=n.h;var t=new wh;t.i=e.i,e.g&&(t.g=new Uu(e.g),t.h=e.h),bh(this,t),this.o=n.o}else n&&(t=String(n).match(Xg))?(this.g=!!e,Bu(this,t[1]||"",!0),this.s=_l(t[2]||""),gl(this,t[3]||"",!0),ml(this,t[4]),this.l=_l(t[5]||"",!0),bh(this,t[6]||"",!0),this.o=_l(t[7]||"")):(this.g=!!e,this.h=new wh(null,this.g))}function Js(n){return new ca(n)}function Bu(n,e,t){n.j=t?_l(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function gl(n,e,t){n.i=t?_l(e,!0):e}function ml(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function bh(n,e,t){e instanceof wh?(n.h=e,function Li(n,e){e&&!n.j&&(Ls(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(bi(this,r),$u(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ec(e,jy)),n.h=new wh(e,n.g))}function pr(n,e,t){n.h.set(e,t)}function wr(n){return pr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _l(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ec(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Vy),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Vy(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ca.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ec(e,Vu,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ec(e,Vu,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ec(t,"/"==t.charAt(0)?em:$y,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ec(t,Fb)),n.join("")};var Vu=/[#\/\?@]/g,$y=/[#\?:]/g,em=/[#\?]/g,jy=/[#\?@]/g,Fb=/#/g;function wh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ls(n){n.g||(n.g=new Uu,n.h=0,n.i&&function Uy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bi(n,e){Ls(n),e=Va(n,e),ko(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ko((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&gp(n)))}function Ic(n,e){return Ls(n),e=Va(n,e),ko(n.g.h,e)}function $u(n,e,t){bi(n,e),0<t.length&&(n.i=null,n.g.set(Va(n,e),cc(t)),n.h+=t.length)}function Va(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Eh(n){this.l=n||Ds,n=nn.PerformanceNavigationTiming?0<(n=nn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(nn.g&&nn.g.Ea&&nn.g.Ea()&&nn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Tt=wh.prototype).add=function(n,e){Ls(this),this.i=null,n=Va(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Tt.forEach=function(n,e){Ls(this),this.g.forEach(function(t,r){Xf(t,function(i){n.call(e,i,r,this)},this)},this)},Tt.T=function(){Ls(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],l=0;l<i.length;l++)t.push(e[r]);return t},Tt.R=function(n){Ls(this);var e=[];if("string"==typeof n)Ic(this,n)&&(e=Jf(e,this.g.get(Va(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Jf(e,n[t])}return e},Tt.set=function(n,e){return Ls(this),this.i=null,Ic(this,n=Va(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var u=i;""!==r[l]&&(u+="="+encodeURIComponent(String(r[l]))),n.push(u)}}return this.i=n.join("&")};var Ds=10;function Tc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ih(n){return n.h?1:n.g?n.g.size:0}function mp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Dc(n,e){n.g?n.g.add(e):n.h=e}function Th(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _p(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cc(n.i)}function Dh(){}function Hy(){this.g=new Dh}function No(n,e,t){const r=t||"";try{Lu(n,function(i,l){let u=i;Oi(i)&&(u=Fs(i)),e.push(r+l+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(l){}}function vl(n){this.l=n.$b||null,this.j=n.ib||!1}function Ah(n,e){br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=xh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Eh.prototype.cancel=function(){if(this.i=_p(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Dh.prototype.stringify=function(n){return nn.JSON.stringify(n,void 0)},Dh.prototype.parse=function(n){return nn.JSON.parse(n,void 0)},Hr(vl,mh),vl.prototype.g=function(){return new Ah(this.l,this.j)},vl.prototype.i=function(n){return function(){return n}}({}),Hr(Ah,br);var xh=0;function ai(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Cl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bl(n)}function bl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=Ah.prototype).open=function(n,e){if(this.readyState!=xh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bl(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||nn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cl(this)),this.readyState=xh},Tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==nn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ai(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cl(this):bl(this),3==this.readyState&&ai(this)}},Tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Cl(this))},Tt.Ta=function(n){this.g&&(this.response=n,Cl(this))},Tt.ha=function(){this.g&&Cl(this)},Tt.setRequestHeader=function(n,e){this.v.append(n,e)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ah.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Gy=nn.JSON.parse;function Wn(n){br.call(this),this.headers=new Uu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sc,this.K=this.L=!1}Hr(Wn,br);var Sc="",yp=/^https?$/i,nm=["POST","PUT"];function vp(n){return"content-type"==n.toLowerCase()}function rm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,im(n),Mh(n)}function im(n){n.D||(n.D=!0,zn(n,"complete"),zn(n,"error"))}function sm(n){if(n.h&&void 0!==ls&&(!n.C[1]||4!=p(n)||2!=n.ba()))if(n.v&&4==p(n))_c(n.Fa,0,n);else if(zn(n,"readystatechange"),4==p(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Xg)[1]||null;if(!i&&nn.self&&nn.self.location){var l=nn.self.location.protocol;i=l.substr(0,l.length-1)}r=!yp.test(i?i.toLowerCase():"")}t=r}if(t)zn(n,"complete"),zn(n,"success");else{n.m=6;try{var u=2<p(n)?n.g.statusText:""}catch(_){u=""}n.j=u+" ["+n.ba()+"]",im(n)}}finally{Mh(n)}}}function Mh(n,e){if(n.g){y(n);const t=n.g,r=n.C[0]?na:null;n.g=null,n.C=null,e||zn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function y(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(nn.clearTimeout(n.A),n.A=null)}function p(n){return n.g?n.g.readyState:0}function m(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Sc:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function A(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function b(n){let e="";return Ao(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pr(n,e,t))}function N(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ve(n){this.za=0,this.l=[],this.h=new la,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=N("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=N("baseRetryDelayMs",5e3,n),this.$a=N("retryDelaySeedMs",1e4,n),this.Ya=N("forwardChannelMaxRetries",2,n),this.ra=N("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Eh(n&&n.concurrentRequestLimit),this.Ca=new Hy,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Le(n){if(St(n),3==n.G){var e=n.V++,t=Js(n.F);pr(t,"SID",n.J),pr(t,"RID",e),pr(t,"TYPE","terminate"),ua(n,t),(e=new Nu(n,n.h,e,void 0)).K=2,e.v=wr(Js(t)),t=!1,nn.navigator&&nn.navigator.sendBeacon&&(t=nn.navigator.sendBeacon(e.v.toString(),"")),!t&&nn.Image&&((new Image).src=e.v,t=!0),t||(e.g=am(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ba(e)}om(n)}function ut(n){n.g&&(Cp(n),n.g.cancel(),n.g=null)}function St(n){ut(n),n.u&&(nn.clearTimeout(n.u),n.u=null),wl(n),n.i.cancel(),n.m&&("number"==typeof n.m&&nn.clearTimeout(n.m),n.m=null)}function Wt(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Rt(n)}function Rt(n){Tc(n.i)||n.m||(n.m=!0,uh(n.Ha,n),n.C=0)}function Ss(n,e){var t;t=e?e.m:n.V++;const r=Js(n.F);pr(r,"SID",n.J),pr(r,"RID",t),pr(r,"AID",n.U),ua(n,r),n.o&&n.s&&A(r,n.o,n.s),t=new Nu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ju(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Dc(n.i,t),Ua(t,r,e)}function ua(n,e){n.j&&Lu({},function(t,r){pr(e,r,t)})}function ju(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Hn(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const u=["count="+t];-1==l?0<t?(l=i[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let f=!0;for(let _=0;_<t;_++){let C=i[_].h;const T=i[_].g;if(C-=l,0>C)l=Math.max(0,i[_].h-100),f=!1;else try{No(T,u,"req"+C+"_")}catch(S){r&&r(T)}}if(f){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Ac(n){n.g||n.u||(n.Y=1,uh(n.Ga,n),n.A=0)}function Hu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ku(Hn(n.Ga,n),Oh(n,n.A)),n.A++,0))}function Cp(n){null!=n.B&&(nn.clearTimeout(n.B),n.B=null)}function da(n){n.g=new Nu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Js(n.oa);pr(e,"RID","rpc"),pr(e,"SID",n.J),pr(e,"CI",n.N?"0":"1"),pr(e,"AID",n.U),ua(n,e),pr(e,"TYPE","xmlhttp"),n.o&&n.s&&A(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=wr(Js(e)),t.s=null,t.U=!0,dp(t,n)}function wl(n){null!=n.v&&(nn.clearTimeout(n.v),n.v=null)}function Ph(n,e){var t=null;if(n.g==e){wl(n),Cp(n),n.g=null;var r=2}else{if(!mp(n.i,e))return;t=e.D,Th(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;zn(r=yc(),new gh(r,t,e,i)),Rt(n)}else Ac(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Er(n,e){return!(Ih(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ku(Hn(n.Ha,n,e),Oh(n,n.C)),n.C++,0)))}(n,e)||2==r&&Hu(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Fo(n,5);break;case 4:Fo(n,10);break;case 3:Fo(n,6);break;default:Fo(n,2)}}function Oh(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Fo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Hn(n.jb,n);t||(t=new ca("//www.google.com/images/cleardot.gif"),nn.location&&"http"==nn.location.protocol||Bu(t,"https"),wr(t)),function tm(n,e){const t=new la;if(nn.Image){const r=new Image;r.onload=ac(Sh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ac(Sh,t,r,"TestLoadImage: error",!1,e),r.onabort=ac(Sh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ac(Sh,t,r,"TestLoadImage: timeout",!1,e),nn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ji(2);n.G=0,n.j&&n.j.va(e),om(n),St(n)}function om(n){n.G=0,n.I=-1,n.j&&((0!=_p(n.i).length||0!=n.l.length)&&(n.i.i.length=0,cc(n.l),n.l.length=0),n.j.ua())}function Rh(n,e,t){let r=function Jg(n){return n instanceof ca?Js(n):new ca(n,void 0)}(t);if(""!=r.i)e&&gl(r,e+"."+r.i),ml(r,r.m);else{const i=nn.location;r=function By(n,e,t,r){var i=new ca(null,void 0);return n&&Bu(i,n),e&&gl(i,e),t&&ml(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Ao(n.aa,function(i,l){pr(r,l,i)}),t=n.sa,(e=n.D)&&t&&pr(r,e,t),pr(r,"VER",n.ma),ua(n,r),r}function am(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(t&&n.Ba&&!n.qa?new vl({ib:!0}):n.qa)).L=n.H,e}function Lb(){}function lm(){if(si&&!(10<=Number(Su)))throw Error("Environmental error: no available transport.")}function eo(n,e){br.call(this),this.g=new ve(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!uc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!uc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gu(this)}function zy(n){cp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cm(){up.call(this),this.status=1}function Gu(n){this.g=n}(Tt=Wn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yh.g(),this.C=function Fy(n){return n.h||(n.h=n.i())}(this.u?this.u:yh),this.g.onreadystatechange=Hn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void rm(this,l)}n=t||"";const i=new Uu(this.headers);r&&Lu(r,function(l,u){i.set(u,l)}),r=function My(n){e:{var e=vp;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=nn.FormData&&n instanceof nn.FormData,!(0<=Cr(nm,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,u){this.g.setRequestHeader(u,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{y(this),0<this.B&&((this.K=function qy(n){return si&&function ia(){return function sh(n){var e=ah;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ep(String(ka)).split("."),t=ep("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",l=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=Qs(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||Qs(0==i[2].length,0==l[2].length)||Qs(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hn(this.pa,this)):this.A=_c(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){rm(this,l)}},Tt.pa=function(){void 0!==ls&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zn(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zn(this,"complete"),zn(this,"abort"),Mh(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mh(this,!0)),Wn.Z.M.call(this)},Tt.Fa=function(){this.s||(this.F||this.v||this.l?sm(this):this.cb())},Tt.cb=function(){sm(this)},Tt.ba=function(){try{return 2<p(this)?this.g.status:-1}catch(n){return-1}},Tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Gy(e)}},Tt.Da=function(){return this.m},Tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=ve.prototype).ma=8,Tt.G=1,Tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Nu(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=tp(l),Kr(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ju(this,i,e),pr(t=Js(this.F),"RID",n),pr(t,"CVER",22),this.D&&pr(t,"X-HTTP-Session-Id",this.D),ua(this,t),this.o&&l&&A(t,this.o,l),Dc(this.i,i),this.Ra&&pr(t,"TYPE","init"),this.ja?(pr(t,"$req",e),pr(t,"SID","null"),i.$=!0,Ua(i,t,null)):Ua(i,t,e),this.G=2}}else 3==this.G&&(n?Ss(this,n):0==this.l.length||Tc(this.i)||Ss(this))},Tt.Ga=function(){if(this.u=null,da(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ku(Hn(this.bb,this),n)}},Tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ji(10),ut(this),da(this))},Tt.ab=function(){null!=this.v&&(this.v=null,ut(this),Hu(this),Ji(19))},Tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ji(2)):(this.h.info("Failed to ping google.com"),Ji(1))},(Tt=Lb.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Oa=function(){},lm.prototype.g=function(n,e){return new eo(n,e)},Hr(eo,br),eo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),uh(Hn(n.hb,n,e))),Ji(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Rh(n,null,n.W),Rt(n)},eo.prototype.close=function(){Le(this.g)},eo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Wt(this.g,e)}else this.v?((e={}).__data__=Fs(n),Wt(this.g,e)):Wt(this.g,n)},eo.prototype.M=function(){this.g.j=null,delete this.j,Le(this.g),delete this.g,eo.Z.M.call(this)},Hr(zy,cp),Hr(cm,up),Hr(Gu,Lb),Gu.prototype.xa=function(){zn(this.g,"a")},Gu.prototype.wa=function(n){zn(this.g,new zy(n))},Gu.prototype.va=function(n){zn(this.g,new cm(n))},Gu.prototype.ua=function(){zn(this.g,"b")},lm.prototype.createWebChannel=lm.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,vc.COMPLETE="complete",lp.EventType=_h,_h.OPEN="a",_h.CLOSE="b",_h.ERROR="c",_h.MESSAGE="d",br.prototype.listen=br.prototype.N,Wn.prototype.listenOnce=Wn.prototype.O,Wn.prototype.getLastError=Wn.prototype.La,Wn.prototype.getLastErrorCode=Wn.prototype.Da,Wn.prototype.getStatus=Wn.prototype.ba,Wn.prototype.getResponseJson=Wn.prototype.Qa,Wn.prototype.getResponseText=Wn.prototype.ga,Wn.prototype.send=Wn.prototype.ea;var Wy=To.createWebChannelTransport=function(){return new lm},yD=To.getStatEventTarget=function(){return yc()},Zy=To.ErrorCode=Is,Ub=To.EventType=vc,Bb=To.Event=La,xc=To.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Vb=To.FetchXmlHttpFactory=vl,bp=To.WebChannel=lp,vD=To.XhrIo=Wn;const wp="@firebase/firestore";class es{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let qu="9.6.11";const El=new yi.Yd("@firebase/firestore");function um(){return El.logLevel}function at(n,...e){if(El.logLevel<=yi.in.DEBUG){const t=e.map(dm);El.debug(`Firestore (${qu}): ${n}`,...t)}}function Gr(n,...e){if(El.logLevel<=yi.in.ERROR){const t=e.map(dm);El.error(`Firestore (${qu}): ${n}`,...t)}}function Mc(n,...e){if(El.logLevel<=yi.in.WARN){const t=e.map(dm);El.warn(`Firestore (${qu}): ${n}`,...t)}}function dm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Mt(n="Unexpected state"){const e=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: `+n;throw Gr(e),new Error(e)}function ln(n,e){n||Mt()}function pt(n,e){return n}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $b{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class Qy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Hb{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let u=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ui,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const C=u;e.enqueueRetryable((0,We.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},_=C=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(C=>_(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?_(C):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ui)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ln("string"==typeof r.accessToken),new $b(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ln(null===e||"string"==typeof e),new es(e)}}class dM{constructor(e,t,r){this.type="FirstParty",this.user=es.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Gb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new dM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zb{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.p;return this.p=l.token,at("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ln("string"==typeof t.token),this.p=t.token,new qb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class to{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ha(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}to.A=-1;class Wb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ha(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function pn(n,e){return n<e?-1:n>e?1:0}function kh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Zb(n){return n+"\0"}class Qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new nt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pn(this.nanoseconds,e.nanoseconds):pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tn(e)}static min(){return new tn(new Qr(0,0))}static max(){return new tn(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Xy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ep{constructor(e,t,r){void 0===t?t=0:t>e.length&&Mt(),void 0===r?r=e.length-t:r>e.length-t&&Mt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ep.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ep?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),u=t.get(i);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yt extends Ep{construct(e,t,r){return new yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new nt(je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yt(t)}static emptyPath(){return new yt([])}}const Kb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends Ep{construct(e,t,r){return new wi(e,t,r)}static isValidIdentifier(e){return Kb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new nt(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new nt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new nt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(l(),i++)}if(l(),u)throw new nt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wi(t)}static emptyPath(){return new wi([])}}class Wu{constructor(e){this.fields=e,e.sort(wi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new nr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const Qb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pc(n){if(ln(!!n),"string"==typeof n){let e=0;const t=Qb.exec(n);if(ln(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(n.seconds),nanos:Pr(n.nanos)}}function Pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function As(n){return"string"==typeof n?nr.fromBase64String(n):nr.fromUint8Array(n)}function Ip(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Jy(n){const e=n.mapValue.fields.__previous_value__;return Ip(e)?Jy(e):e}function Zu(n){const e=Pc(n.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}class fM{constructor(e,t,r,i,l,u,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class $a{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $a("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}function Nh(n){return null==n}function Oc(n){return 0===n&&1/n==-1/0}function Tp(n){return"number"==typeof n&&Number.isInteger(n)&&!Oc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ht{constructor(e){this.path=e}static fromPath(e){return new ht(yt.fromString(e))}static fromName(e){return new ht(yt.fromString(e).popFirst(5))}static empty(){return new ht(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new yt(e.slice()))}}const fm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pm={nullValue:"NULL_VALUE"};function Fh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ip(n)?4:CD(n)?9:10:Mt()}function ja(n,e){if(n===e)return!0;const t=Fh(n);if(t!==Fh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zu(n).isEqual(Zu(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Pc(r.timestampValue),u=Pc(i.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,As(n.bytesValue).isEqual(As(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pr(r.geoPointValue.latitude)===Pr(i.geoPointValue.latitude)&&Pr(r.geoPointValue.longitude)===Pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pr(r.integerValue)===Pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=Pr(r.doubleValue),u=Pr(i.doubleValue);return l===u?Oc(l)===Oc(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return kh(n.arrayValue.values||[],e.arrayValue.values||[],ja);case 10:return function(r,i){const l=r.mapValue.fields||{},u=i.mapValue.fields||{};if(Xy(l)!==Xy(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===u[f]||!ja(l[f],u[f])))return!1;return!0}(n,e);default:return Mt()}var i}function Dp(n,e){return void 0!==(n.values||[]).find(t=>ja(t,e))}function Rc(n,e){if(n===e)return 0;const t=Fh(n),r=Fh(e);if(t!==r)return pn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pn(n.booleanValue,e.booleanValue);case 2:return function(i,l){const u=Pr(i.integerValue||i.doubleValue),f=Pr(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return Xb(n.timestampValue,e.timestampValue);case 4:return Xb(Zu(n),Zu(e));case 5:return pn(n.stringValue,e.stringValue);case 6:return function(i,l){const u=As(i),f=As(l);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const u=i.split("/"),f=l.split("/");for(let _=0;_<u.length&&_<f.length;_++){const C=pn(u[_],f[_]);if(0!==C)return C}return pn(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const u=pn(Pr(i.latitude),Pr(l.latitude));return 0!==u?u:pn(Pr(i.longitude),Pr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const u=i.values||[],f=l.values||[];for(let _=0;_<u.length&&_<f.length;++_){const C=Rc(u[_],f[_]);if(C)return C}return pn(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){const u=i.fields||{},f=Object.keys(u),_=l.fields||{},C=Object.keys(_);f.sort(),C.sort();for(let T=0;T<f.length&&T<C.length;++T){const S=pn(f[T],C[T]);if(0!==S)return S;const k=Rc(u[f[T]],_[C[T]]);if(0!==k)return k}return pn(f.length,C.length)}(n.mapValue,e.mapValue);default:throw Mt()}}function Xb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return pn(n,e);const t=Pc(n),r=Pc(e),i=pn(t.seconds,r.seconds);return 0!==i?i:pn(t.nanos,r.nanos)}function Yu(n){return Jb(n)}function Jb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Pc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?As(n.bytesValue).toBase64():"referenceValue"in n?ht.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const u of r.values||[])l?l=!1:i+=",",i+=Jb(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const f of i)u?u=!1:l+=",",l+=`${f}:${Jb(r.fields[f])}`;return l+"}"}(n.mapValue):Mt();var e}function Ku(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ew(n){return!!n&&"integerValue"in n}function Lh(n){return!!n&&"arrayValue"in n}function ev(n){return!!n&&"nullValue"in n}function tw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uh(n){return!!n&&"mapValue"in n}function gm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pM(n){return"nullValue"in n?pm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ku($a.empty(),ht.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Mt()}function gM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ku($a.empty(),ht.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?fm:Mt()}function bD(n,e){return void 0===n?e:void 0===e||Rc(n,e)>0?n:e}function wD(n,e){return void 0===n?e:void 0===e||Rc(n,e)<0?n:e}class xs{constructor(e){this.value=e}static empty(){return new xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gm(t)}setAll(e){let t=wi.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=gm(u):i.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());Uh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Uh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zu(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new xs(gm(this.value))}}function ED(n){const e=[];return zu(n.fields,(t,r)=>{const i=new wi([t]);if(Uh(r)){const l=ED(r.mapValue).fields;if(0===l.length)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)}),new Wu(e)}class Or{constructor(e,t,r,i,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Or(e,0,tn.min(),tn.min(),xs.empty(),0)}static newFoundDocument(e,t,r){return new Or(e,1,t,tn.min(),r,0)}static newNoDocument(e,t){return new Or(e,2,t,tn.min(),xs.empty(),0)}static newUnknownDocument(e,t){return new Or(e,3,t,tn.min(),xs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Or(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ha(n){return n.fields.find(e=>2===e.kind)}function Il(n){return n.fields.filter(e=>2!==e.kind)}tv.UNKNOWN_ID=-1;class mm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bh(0,fa.min())}}function _m(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=tn.fromTimestamp(1e9===r?new Qr(t+1,0):new Qr(t,r));return new fa(i,ht.empty(),e)}function nw(n){return new fa(n.readTime,n.key,-1)}class fa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fa(tn.min(),ht.empty(),-1)}static max(){return new fa(tn.max(),ht.empty(),-1)}}function ID(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ht.comparator(n.documentKey,e.documentKey),0!==t?t:pn(n.largestBatchId,e.largestBatchId))}class kc{constructor(e,t=null,r=[],i=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=u,this.endAt=f,this.P=null}}function nv(n,e=null,t=[],r=[],i=null,l=null,u=null){return new kc(n,e,t,r,i,l,u)}function Qu(n){const e=pt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Yu(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Nh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yu(r)).join(",")),e.P=t}return e.P}function Sp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!vm(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ja(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ov(n.startAt,e.startAt)&&ov(n.endAt,e.endAt)}function Ap(n){return ht.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ym(n,e){return n.filters.filter(t=>t instanceof qr&&t.field.isEqual(e))}function rw(n,e,t){let r,i=!0;for(const l of ym(n,e)){let u,f=!0;switch(l.op){case"<":case"<=":u=pM(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,f=!1;break;case"!=":case"not-in":u=pm}bD(r,u)===u&&(r=u,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];bD(r,u)===u&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function Vh(n,e,t){let r,i=!0;for(const l of ym(n,e)){let u,f=!0;switch(l.op){case">=":case">":u=gM(l.value),f=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,f=!1;break;case"!=":case"not-in":u=fm}wD(r,u)===u&&(r=u,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];wD(r,u)===u&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new iv(e,t,r):"array-contains"===t?new TD(e,r):"in"===t?new iw(e,r):"not-in"===t?new sw(e,r):"array-contains-any"===t?new sv(e,r):new qr(e,t,r)}static V(e,t,r){return"in"===t?new $h(e,r):new xp(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Rc(t,this.value)):null!==t&&Fh(this.value)===Fh(t)&&this.v(Rc(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class iv extends qr{constructor(e,t,r){super(e,t,r),this.key=ht.fromName(r.referenceValue)}matches(e){const t=ht.comparator(e.key,this.key);return this.v(t)}}class $h extends qr{constructor(e,t){super(e,"in",t),this.keys=Xu(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xp extends qr{constructor(e,t){super(e,"not-in",t),this.keys=Xu(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xu(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ht.fromName(r.referenceValue))}class TD extends qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lh(t)&&Dp(t.arrayValue,this.value)}}class iw extends qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dp(this.value.arrayValue,t)}}class sw extends qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dp(this.value.arrayValue,t)}}class sv extends qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dp(this.value.arrayValue,r))}}class Ga{constructor(e,t){this.position=e,this.inclusive=t}}class Ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function vm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ow(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(r=l.field.isKeyField()?ht.comparator(ht.fromName(u.referenceValue),t.key):Rc(u,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function ov(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ja(n.position[t],e.position[t]))return!1;return!0}class Nc{constructor(e,t=null,r=[],i=[],l=null,u="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function av(n,e,t,r,i,l,u,f){return new Nc(n,e,t,r,i,l,u,f)}function ed(n){return new Nc(n)}function Cm(n){return!Nh(n.limit)&&"F"===n.limitType}function Mp(n){return!Nh(n.limit)&&"L"===n.limitType}function lv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cv(n){for(const e of n.filters)if(e.S())return e.field;return null}function Ms(n){return null!==n.collectionGroup}function jh(n){const e=pt(n);if(null===e.D){e.D=[];const t=cv(e),r=lv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ju(t)),e.D.push(new Ju(wi.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ju(wi.keyField(),l))}}}return e.D}function Lo(n){const e=pt(n);if(!e.C)if("F"===e.limitType)e.C=nv(e.path,e.collectionGroup,jh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of jh(e))t.push(new Ju(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Ga(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Ga(e.startAt.position,!e.startAt.inclusive):null;e.C=nv(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function DD(n,e,t){return new Nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bm(n,e){return Sp(Lo(n),Lo(e))&&n.limitType===e.limitType}function uv(n){return`${Qu(Lo(n))}|lt:${n.limitType}`}function aw(n){return`Query(target=${function rv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Yu(r.value)}`;var r}).join(", ")}]`),Nh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Yu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Yu(t)).join(",")),`Target(${e})`}(Lo(n))}; limitType=${n.limitType})`}function dv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ht.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,u){const f=ow(i,l,u);return i.inclusive?f<=0:f<0}(t.startAt,jh(t),r)||t.endAt&&!function(i,l,u){const f=ow(i,l,u);return i.inclusive?f>=0:f>0}(t.endAt,jh(t),r)));var t,r}function wm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hv(n){return(e,t)=>{let r=!1;for(const i of jh(n)){const l=SD(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function SD(n,e,t){const r=n.field.isKeyField()?ht.comparator(e.key,t.key):function(i,l,u){const f=l.data.field(i),_=u.data.field(i);return null!==f&&null!==_?Rc(f,_):Mt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Mt()}}function lw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function cw(n){return{integerValue:""+n}}function fv(n,e){return Tp(e)?cw(e):lw(n,e)}class Em{constructor(){this._=void 0}}function uw(n,e,t){return n instanceof td?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Fc?hw(n,e):n instanceof cs?Im(n,e):function(r,i){const l=dw(r,i),u=fw(l)+fw(r.k);return ew(l)&&ew(r.k)?cw(u):lw(r.M,u)}(n,e)}function AD(n,e,t){return n instanceof Fc?hw(n,e):n instanceof cs?Im(n,e):t}function dw(n,e){return n instanceof Hh?ew(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class td extends Em{}class Fc extends Em{constructor(e){super(),this.elements=e}}function hw(n,e){const t=xD(e);for(const r of n.elements)t.some(i=>ja(i,r))||t.push(r);return{arrayValue:{values:t}}}class cs extends Em{constructor(e){super(),this.elements=e}}function Im(n,e){let t=xD(e);for(const r of n.elements)t=t.filter(i=>!ja(i,r));return{arrayValue:{values:t}}}class Hh extends Em{constructor(e,t){super(),this.M=e,this.k=t}}function fw(n){return Pr(n.integerValue||n.doubleValue)}function xD(n){return Lh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Gh{constructor(e,t){this.field=e,this.transform=t}}class PD{constructor(e,t){this.version=e,this.transformResults=t}}class li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tm{}function OD(n,e,t){n instanceof nd?function(r,i,l){const u=r.value.clone(),f=mw(r.fieldTransforms,i,l.transformResults);u.setAll(f),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Lc?function(r,i,l){if(!qh(r.precondition,i))return void i.convertToUnknownDocument(l.version);const u=mw(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(gw(r)),f.setAll(u),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zh(n,e,t){var i;n instanceof nd?function(r,i,l){if(!qh(r.precondition,i))return;const u=r.value.clone(),f=Sm(r.fieldTransforms,l,i);u.setAll(f),i.convertToFoundDocument(Dm(i),u).setHasLocalMutations()}(n,e,t):n instanceof Lc?function(r,i,l){if(!qh(r.precondition,i))return;const u=Sm(r.fieldTransforms,l,i),f=i.data;f.setAll(gw(r)),f.setAll(u),i.convertToFoundDocument(Dm(i),f).setHasLocalMutations()}(n,e,t):qh(n.precondition,i=e)&&i.convertToNoDocument(tn.min())}function pv(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=dw(r.transform,i||null);null!=l&&(null==t&&(t=xs.empty()),t.set(r.field,l))}return t||null}function pw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kh(t,r,(i,l)=>function MD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Fc&&r instanceof Fc||t instanceof cs&&r instanceof cs?kh(t.elements,r.elements,ja):t instanceof Hh&&r instanceof Hh?ja(t.k,r.k):t instanceof td&&r instanceof td);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Dm(n){return n.isFoundDocument()?n.version:tn.min()}class nd extends Tm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Lc extends Tm{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function gw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mw(n,e,t){const r=new Map;ln(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,f=e.data.field(l.field);r.set(l.field,AD(u,f,t[i]))}return r}function Sm(n,e,t){const r=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);r.set(i.field,uw(l,u,e))}return r}class Am extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class gv extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class _w{constructor(e){this.count=e}}var Xr,Fn;function mv(n){switch(n){default:return Mt();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function _v(n){if(void 0===n)return Gr("GRPC error has no .code"),je.UNKNOWN;switch(n){case Xr.OK:return je.OK;case Xr.CANCELLED:return je.CANCELLED;case Xr.UNKNOWN:return je.UNKNOWN;case Xr.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case Xr.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case Xr.INTERNAL:return je.INTERNAL;case Xr.UNAVAILABLE:return je.UNAVAILABLE;case Xr.UNAUTHENTICATED:return je.UNAUTHENTICATED;case Xr.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case Xr.NOT_FOUND:return je.NOT_FOUND;case Xr.ALREADY_EXISTS:return je.ALREADY_EXISTS;case Xr.PERMISSION_DENIED:return je.PERMISSION_DENIED;case Xr.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case Xr.ABORTED:return je.ABORTED;case Xr.OUT_OF_RANGE:return je.OUT_OF_RANGE;case Xr.UNIMPLEMENTED:return je.UNIMPLEMENTED;case Xr.DATA_LOSS:return je.DATA_LOSS;default:return Mt()}}(Fn=Xr||(Xr={}))[Fn.OK=0]="OK",Fn[Fn.CANCELLED=1]="CANCELLED",Fn[Fn.UNKNOWN=2]="UNKNOWN",Fn[Fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fn[Fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fn[Fn.NOT_FOUND=5]="NOT_FOUND",Fn[Fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fn[Fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fn[Fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fn[Fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fn[Fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fn[Fn.ABORTED=10]="ABORTED",Fn[Fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fn[Fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fn[Fn.INTERNAL=13]="INTERNAL",Fn[Fn.UNAVAILABLE=14]="UNAVAILABLE",Fn[Fn.DATA_LOSS=15]="DATA_LOSS";class us{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zu(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return Yb(this.inner)}size(){return this.innerSize}}class Rr{constructor(e,t){this.comparator=e,this.root=t||ts.EMPTY}insert(e,t){return new Rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ts.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xm(this.root,e,this.comparator,!1)}getReverseIterator(){return new xm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xm(this.root,e,this.comparator,!0)}}class xm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ts{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=null!=r?r:ts.RED,this.left=null!=i?i:ts.EMPTY,this.right=null!=l?l:ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new ts(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ts.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mt();const e=this.left.check();if(e!==this.right.check())throw Mt();return e+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1,ts.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt()}get value(){throw Mt()}get color(){throw Mt()}get left(){throw Mt()}get right(){throw Mt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ts(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kr{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mm(this.data.getIterator())}getIteratorFrom(e){return new Mm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kr(this.comparator);return t.data=e,t}}class Mm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rd(n){return n.hasNext()?n.getNext():void 0}const yv=new Rr(ht.comparator);function ds(){return yv}const RD=new Rr(ht.comparator);function Pp(){return RD}function Wh(){return new us(n=>n.toString(),(n,e)=>n.isEqual(e))}const yw=new Rr(ht.comparator),vw=new kr(ht.comparator);function Zn(...n){let e=vw;for(const t of n)e=e.add(t);return e}const vv=new kr(pn);function Pm(){return vv}class Op{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Zh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Op(tn.min(),r,Pm(),ds(),Zn())}}class Zh{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Zh(nr.EMPTY_BYTE_STRING,t,Zn(),Zn(),Zn())}}class Tl{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Cv{constructor(e,t){this.targetId=e,this.$=t}}class Cw{constructor(e,t,r=nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class bw{constructor(){this.B=0,this.L=Ew(),this.U=nr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Zn(),t=Zn(),r=Zn();return this.L.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Mt()}}),new Zh(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ew()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Yh{constructor(e){this.nt=e,this.st=new Map,this.it=ds(),this.rt=ww(),this.ot=new kr(pn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const l=i.target;if(Ap(l))if(0===r){const u=new ht(l.path);this.ct(t,u,Or.newNoDocument(u,tn.min()))}else ln(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,u)=>{const f=this.wt(u);if(f){if(l.current&&Ap(f.target)){const _=new ht(f.target.path);null!==this.it.get(_)||this.It(u,_)||this.ct(u,_,Or.newNoDocument(_,e))}l.j&&(t.set(u,l.H()),l.J())}});let r=Zn();this.rt.forEach((l,u)=>{let f=!0;u.forEachWhile(_=>{const C=this.wt(_);return!C||2===C.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.it.forEach((l,u)=>u.setReadTime(e));const i=new Op(e,t,this.ot,this.it,r);return this.it=ds(),this.rt=ww(),this.ot=new kr(pn),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new bw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new kr(pn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||at("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new bw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ww(){return new Rr(ht.comparator)}function Ew(){return new Rr(ht.comparator)}const kD={asc:"ASCENDING",desc:"DESCENDING"},ND={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pa{constructor(e,t){this.databaseId=e,this.N=t}}function id(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bv(n,e){return n.N?e.toBase64():e.toUint8Array()}function Iw(n,e){return id(n,e.toTimestamp())}function Ei(n){return ln(!!n),tn.fromTimestamp(function(e){const t=Pc(e);return new Qr(t.seconds,t.nanos)}(n))}function Om(n,e){return(t=n,new yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tw(n){const e=yt.fromString(n);return ln(Ow(e)),e}function Rp(n,e){return Om(n.databaseId,e.path)}function qa(n,e){const t=Tw(e);if(t.get(1)!==n.databaseId.projectId)throw new nt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new nt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ht(Iv(t))}function wv(n,e){return Om(n.databaseId,e)}function Ev(n){const e=Tw(n);return 4===e.length?yt.emptyPath():Iv(e)}function Rm(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Iv(n){return ln(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Dw(n,e,t){return{name:Rp(n,e),fields:t.value.mapValue.fields}}function Sw(n,e,t){const r=qa(n,e.name),i=Ei(e.updateTime),l=new xs({mapValue:{fields:e.fields}}),u=Or.newFoundDocument(r,i,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function sd(n,e){let t;if(e instanceof nd)t={update:Dw(n,e.key,e.value)};else if(e instanceof Am)t={delete:Rp(n,e.key)};else if(e instanceof Lc)t={update:Dw(n,e.key,e.data),updateMask:Sv(e.fieldMask)};else{if(!(e instanceof gv))return Mt();t={verify:Rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const u=l.transform;if(u instanceof td)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Fc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof cs)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hh)return{fieldPath:l.field.canonicalString(),increment:u.k};throw Mt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Iw(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Mt()),t;var i}function Tv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?li.updateTime(Ei(i.updateTime)):void 0!==i.exists?li.exists(i.exists):li.none():li.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,u){let f=null;"setToServerValue"in u?(ln("REQUEST_TIME"===u.setToServerValue),f=new td):"appendMissingElements"in u?f=new Fc(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new cs(u.removeAllFromArray.values||[]):"increment"in u?f=new Hh(l,u.increment):Mt();const _=wi.fromServerFormat(u.fieldPath);return new Gh(_,f)}(n,i)):[];var i;if(e.update){const i=qa(n,e.update.name),l=new xs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Wu((e.updateMask.fieldPaths||[]).map(C=>wi.fromServerFormat(C)));return new Lc(i,l,u,t,r)}return new nd(i,l,t,r)}if(e.delete){const i=qa(n,e.delete);return new Am(i,t)}if(e.verify){const i=qa(n,e.verify);return new gv(i,t)}return Mt()}function Dv(n,e){return{documents:[wv(n,e.path)]}}function FD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const C=_.map(T=>function(S){if("=="===S.op){if(tw(S.value))return{unaryFilter:{field:od(S.field),op:"IS_NAN"}};if(ev(S.value))return{unaryFilter:{field:od(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(tw(S.value))return{unaryFilter:{field:od(S.field),op:"IS_NOT_NAN"}};if(ev(S.value))return{unaryFilter:{field:od(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:od(S.field),op:Mw(S.op),value:S.value}}}(T));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);i&&(t.structuredQuery.where=i);const l=function(_){if(0!==_.length)return _.map(C=>{return{field:od((T=C).field),direction:xw(T.dir)};var T})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=(C=e.limit,n.N||Nh(C)?C:{value:C});var C,f,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Uo(n){let e=Ev(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ln(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=LD(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(T=>{return new Ju(Kh((S=T).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(T){let S;return S="object"==typeof T?T.value:T,Nh(S)?null:S}(t.limit));let _=null;var T;t.startAt&&(_=new Ga((T=t.startAt).values||[],!!T.before));let C=null;return t.endAt&&(C=function(T){return new Ga(T.values||[],!T.before)}(t.endAt)),av(e,i,u,l,f,"F",_,C)}function LD(n){return n?void 0!==n.unaryFilter?[Pw(n)]:void 0!==n.fieldFilter?[vM(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>LD(e)).reduce((e,t)=>e.concat(t)):Mt():[]}function xw(n){return kD[n]}function Mw(n){return ND[n]}function od(n){return{fieldPath:n.canonicalString()}}function Kh(n){return wi.fromServerFormat(n.fieldPath)}function vM(n){return qr.create(Kh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Pw(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Kh(n.unaryFilter.field);return qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Kh(n.unaryFilter.field);return qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kh(n.unaryFilter.field);return qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kh(n.unaryFilter.field);return qr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Mt()}}function Sv(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ow(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ns(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Rw(e)),e=UD(n.get(t),e);return Rw(e)}function UD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Rw(n){return n+"\x01\x01"}function za(n){const e=n.length;if(ln(e>=2),2===e)return ln("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yt.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const u=n.indexOf("\x01",l);switch((u<0||u>t)&&Mt(),n.charAt(u+1)){case"\x01":const f=n.substring(l,u);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(l,u),i+="\0";break;case"\x11":i+=n.substring(l,u+1);break;default:Mt()}l=u+2}return new yt(r)}const kw=["userId","batchId"];function km(n,e){return[n,ns(e)]}function Nw(n,e,t){return[n,ns(e),t]}const Nm={},Qh=["prefixPath","collectionGroup","readTime","documentId"],BD=["prefixPath","collectionGroup","documentId"],kp=["collectionGroup","readTime","prefixPath","documentId"],VD=["canonicalId","targetId"],$D=["targetId","path"],Av=["path","targetId"],Wa=["collectionId","parent"],Np=["indexId","uid"],hs=["uid","sequenceNumber"],ad=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fm=["indexId","uid","orderedDocumentKey"],Bo=["userId","collectionPath","documentId"],xv=["userId","collectionPath","largestBatchId"],Xh=["userId","collectionGroup","largestBatchId"],ld=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Jh=[...ld,"documentOverlays"],cd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ef=[...cd,"indexConfiguration","indexState","indexEntries"],ud="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class He{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new He((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof He?t:He.resolve(t)}catch(t){return He.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):He.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):He.reject(t)}static resolve(e){return new He((t,r)=>{t(e)})}static reject(e){return new He((t,r)=>{r(e)})}static waitFor(e){return new He((t,r)=>{let i=0,l=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++l,u&&l===i&&t()},_=>r(_))}),u=!0,l===i&&t()})}static or(e){let t=He.resolve(!1);for(const r of e)t=t.next(i=>i?He.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}}class Dl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ui,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new tf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Lm(r.target.error);this.At.reject(new tf(e,i))}}static open(e,t,r,i){try{return new Dl(t,e.transaction(i,r))}catch(l){throw new tf(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(at("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lw(t)}}class Vo{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Vo.Vt((0,L.z$)())&&Gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return at("SimpleDb","Removing database:",e),Bc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,L.hl)())return!1;if(Vo.St())return!0;const e=(0,L.z$)(),t=Vo.Vt(e),r=0<t&&t<10,i=Vo.Dt(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,We.Z)(function*(){return t.db||(at("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{r(u.target.result)},l.onblocked=()=>{i(new tf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new nt(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new nt(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new tf(e,f))},l.onupgradeneeded=u=>{at("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.bt.kt(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{at("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,We.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{l.db=yield l.Nt(e);const _=Dl.open(l.db,e,u?"readonly":"readwrite",r),C=i(_).next(T=>(_.Pt(),T)).catch(T=>(_.abort(T),He.reject(T))).toPromise();return C.catch(()=>{}),yield _.Rt,C}catch(_){const C="FirebaseError"!==_.name&&f<3;if(at("SimpleDb","Transaction failed with error:",_.message,"Retrying:",C),l.close(),!C)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Fw{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bc(this.Ft.delete())}}class tf extends nt{constructor(e,t){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uc(n){return"IndexedDbTransactionError"===n.name}class Lw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(at("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bc(r)}add(e){return at("SimpleDb","ADD",this.store.name,e,e),Bc(this.store.add(e))}get(e){return Bc(this.store.get(e)).next(t=>(void 0===t&&(t=null),at("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return at("SimpleDb","DELETE",this.store.name,e),Bc(this.store.delete(e))}count(){return at("SimpleDb","COUNT",this.store.name),Bc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(u,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new He((l,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new He((i,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){at("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,u,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new He((r,i)=>{t.onerror=l=>{const u=Lm(l.target.error);i(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new He((i,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const _=new Fw(f),C=t(f.primaryKey,f.value,_);if(C instanceof He){const T=C.catch(S=>(_.done(),He.reject(S)));r.push(T)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>He.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bc(n){return new He((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Lm(r.target.error);t(i)}})}let Mv=!1;function Lm(n){const e=Vo.Vt((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mv||(Mv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Pv extends dd{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Bi(n,e){const t=pt(n);return Vo.xt(t.Ht,e)}class Um{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&OD(l,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&zh(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&zh(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(tn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zn())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(t,r)=>pw(t,r))&&kh(this.baseMutations,e.baseMutations,(t,r)=>pw(t,r))}}class Ov{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ln(e.mutations.length===r.length);let i=yw;const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,r[u].version);return new Ov(e,t,r,i)}}class Bm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Sl{constructor(e,t,r,i,l=tn.min(),u=tn.min(),f=nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new Sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Uw{constructor(e){this.Jt=e}}function Rv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rp(i=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:id(i,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vc(e.version)};else{if(!e.isUnknownDocument())return Mt();r.unknownDocument={path:t.path.toArray(),version:Vc(e.version)}}var i,l;return r}function Vm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hd(n){const e=new Qr(n.seconds,n.nanoseconds);return tn.fromTimestamp(e)}function nf(n,e){const t=(e.baseMutations||[]).map(l=>Tv(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(u.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Tv(n.Jt,l)),i=Qr.fromMillis(e.localWriteTimeMs);return new Um(e.batchId,i,t,r)}function $m(n){const e=hd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hd(n.lastLimboFreeSnapshotVersion):tn.min();let r;var i;return void 0!==n.query.documents?(ln(1===(i=n.query).documents.length),r=Lo(ed(Ev(i.documents[0])))):r=Lo(Uo(n.query)),new Sl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,nr.fromBase64String(n.resumeToken))}function Bw(n,e){const t=Vc(e.snapshotVersion),r=Vc(e.lastLimboFreeSnapshotVersion);let i;i=Ap(e.target)?Dv(n.Jt,e.target):FD(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qu(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fp(n){const e=Uo({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DD(e,e.limit,"L"):e}function Lp(n,e){return new Bm(e.largestBatchId,Tv(n.Jt,e.overlayMutation))}function Vw(n,e){const t=e.path.lastSegment();return[n,ns(e.path.popLast()),t]}class CM{getBundleMetadata(e,t){return HD(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:hd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return HD(e).put({bundleId:(r=t).id,createTime:Vc(Ei(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return GD(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Fp(i.bundledQuery),readTime:hd(i.readTime)};var i})}saveNamedQuery(e,t){return GD(e).put({name:(r=t).name,readTime:Vc(Ei(r.readTime)),bundledQuery:r.bundledQuery});var r}}function HD(n){return Bi(n,"bundles")}function GD(n){return Bi(n,"namedQueries")}class kv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new kv(e,t.uid||"")}getOverlay(e,t){return rf(e).get(Vw(this.userId,t)).next(r=>r?Lp(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((l,u)=>{const f=new Bm(t,u);i.push(this.Xt(e,f))}),He.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(ns(u.getCollectionPath())));const l=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(rf(e).Qt("collectionPathOverlayIndex",f))}),He.waitFor(l)}getOverlaysForCollection(e,t,r){const i=Wh(),l=ns(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return rf(e).qt("collectionPathOverlayIndex",u).next(f=>{for(const _ of f){const C=Lp(this.M,_);i.set(C.getKey(),C)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=Wh();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rf(e).Wt({index:"collectionGroupOverlayIndex",range:f},(_,C,T)=>{const S=Lp(this.M,C);l.size()<i||S.largestBatchId===u?(l.set(S.getKey(),S),u=S.largestBatchId):T.done()}).next(()=>l)}Xt(e,t){return rf(e).put(function(r,i,l){const[u,f,_]=Vw(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:sd(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function rf(n){return Bi(n,"documentOverlays")}class sf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Pr(e.integerValue));else if("doubleValue"in e){const r=Pr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Oc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(As(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?CD(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Mt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),ht.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function qD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function fd(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=qD(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}sf.fe=new sf;class zD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=fd(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=fd(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $w{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class WD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class af{constructor(){this.De=new zD,this.Ce=new $w(this.De),this.xe=new WD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ga{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ga(this.indexId,this.documentKey,this.arrayValue,r)}}function pd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Nv(n.arrayValue,e.arrayValue),0!==t?t:(t=Nv(n.directionalValue,e.directionalValue),0!==t?t:ht.comparator(n.documentKey,e.documentKey)))}function Nv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ZD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Ha(e);if(void 0!==t&&!this.Be(t))return!1;const r=Il(e);let i=0,l=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[l++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(l>=this.Me.length||!this.Ue(this.Me[l++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class YD{constructor(){this.qe=new Fv}addToCollectionParentIndex(e,t){return this.qe.add(t),He.resolve()}getCollectionParents(e,t){return He.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return He.resolve()}deleteFieldIndex(e,t){return He.resolve()}getDocumentsMatchingTarget(e,t){return He.resolve(null)}getFieldIndex(e,t){return He.resolve(null)}getFieldIndexes(e,t){return He.resolve([])}getNextCollectionGroupToUpdate(e){return He.resolve(null)}updateCollectionGroup(e,t,r){return He.resolve()}updateIndexEntries(e,t){return He.resolve()}}class Fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kr(yt.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kr(yt.comparator)).toArray()}}const lf=new Uint8Array(0);class KD{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Fv,this.Ge=new us(r=>Qu(r),(r,i)=>Sp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const l={collectionId:r,parent:ns(i)};return Lv(e).put(l)}return He.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Zb(t),""],!1,!0);return Lv(e).qt(i).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(za(u.parent))}return r})}addFieldIndex(e,t){const r=Bp(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Bp(e),i=Vp(e),l=Up(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Up(e);let i=!0;const l=new Map;return He.forEach(this.Qe(t),u=>this.getFieldIndex(e,u).next(f=>{i&&(i=!!f),l.set(u,f)})).next(()=>{if(i){let u=Zn();const f=[];return He.forEach(l,(_,C)=>{var T;at("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Bt=>`${Bt.fieldPath}:${Bt.kind}`).join(",")}`} to execute ${Qu(t)}`);const S=function(Bt,kt){const gn=Ha(kt);if(void 0===gn)return null;for(const kn of ym(Bt,gn.fieldPath))switch(kn.op){case"array-contains-any":return kn.value.arrayValue.values||[];case"array-contains":return[kn.value]}return null}(C,_),k=function(Bt,kt){const gn=new Map;for(const kn of Il(kt))for(const Gi of ym(Bt,kn.fieldPath))switch(Gi.op){case"==":case"in":gn.set(kn.fieldPath.canonicalString(),Gi.value);break;case"not-in":case"!=":return gn.set(kn.fieldPath.canonicalString(),Gi.value),Array.from(gn.values())}return null}(C,_),j=function(Bt,kt){const gn=[];let kn=!0;for(const Gi of Il(kt)){const Da=0===Gi.kind?rw(Bt,Gi.fieldPath,Bt.startAt):Vh(Bt,Gi.fieldPath,Bt.startAt);if(!Da.value)return null;gn.push(Da.value),kn&&(kn=Da.inclusive)}return new Ga(gn,kn)}(C,_),oe=function(Bt,kt){const gn=[];let kn=!0;for(const Gi of Il(kt)){const Da=0===Gi.kind?Vh(Bt,Gi.fieldPath,Bt.endAt):rw(Bt,Gi.fieldPath,Bt.endAt);if(!Da.value)return null;gn.push(Da.value),kn&&(kn=Da.inclusive)}return new Ga(gn,kn)}(C,_),Ve=this.je(_,C,j),rt=this.je(_,C,oe),Gt=this.We(_,C,k),qt=this.ze(_.indexId,S,Ve,!!j&&j.inclusive,rt,!!oe&&oe.inclusive,Gt);return He.forEach(qt,Bt=>r.Gt(Bt,t.limit).next(kt=>{kt.forEach(gn=>{const kn=ht.fromSegments(gn.documentKey);u.has(kn)||(u=u.add(kn),f.push(kn))})}))}).next(()=>f)}return He.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,l,u,f){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),C=_/(null!=t?t.length:1),T=[];for(let S=0;S<_;++S){const k=t?this.He(t[S/C]):lf,j=r?this.Je(e,k,r[S%C],i):this.Ye(e),oe=l?this.Xe(e,k,l[S%C],u):this.Ye(e+1);T.push(...this.createRange(j,oe,f.map(Ve=>this.Je(e,k,Ve,!0))))}return T}Je(e,t,r,i){const l=new ga(e,ht.empty(),t,r);return i?l:l.ke()}Xe(e,t,r,i){const l=new ga(e,ht.empty(),t,r);return i?l.ke():l}Ye(e){return new ga(e,ht.empty(),lf,lf)}getFieldIndex(e,t){const r=new ZD(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(l=>{const u=l.filter(f=>r.$e(f));return u.sort((f,_)=>_.fields.length-f.fields.length),u.length>0?u[0]:null})}Ze(e,t){const r=new af;for(const i of Il(e)){const l=t.data.field(i.fieldPath);if(null==l)return null;const u=r.Ne(i.kind);sf.fe.Zt(l,u)}return r.Se()}He(e){const t=new af;return sf.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new af;return sf.fe.Zt(Ku(this.databaseId,t),r.Ne(function(i){const l=Il(i);return 0===l.length?0:l[l.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new af);let l=0;for(const u of Il(e)){const f=r[l++];for(const _ of i)if(this.en(t,u.fieldPath)&&Lh(f))i=this.nn(i,u,f);else{const C=_.Ne(u.kind);sf.fe.Zt(f,C)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],l=[];for(const u of r.arrayValue.values||[])for(const f of i){const _=new af;_.seed(f.Se()),sf.fe.Zt(u,_.Ne(t.kind)),l.push(_)}return l}en(e,t){return!!e.filters.find(r=>r instanceof qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bp(e),i=Vp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const u=[];return He.forEach(l,f=>i.get([f.indexId,this.uid]).next(_=>{u.push(function(C,T){const S=T?new Bh(T.sequenceNumber,new fa(hd(T.readTime),new ht(za(T.documentKey)),T.largestBatchId)):Bh.empty(),k=C.fields.map(([j,oe])=>new mm(wi.fromServerFormat(j),oe));return new tv(C.indexId,C.collectionGroup,k,S)}(f,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:pn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Bp(e),l=Vp(e);return this.rn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>He.forEach(f,_=>{return l.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Vc((k=r).readTime),documentKey:ns(k.documentKey.path),largestBatchId:k.largestBatchId});var k})))}updateIndexEntries(e,t){const r=new Map;return He.forEach(t,(i,l)=>{const u=r.get(i.collectionGroup);return(u?He.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),He.forEach(f,_=>this.on(e,i,_).next(C=>{const T=this.un(l,_);return C.isEqual(T)?He.resolve():this.an(e,l,_,C,T)}))))})}cn(e,t,r,i){return Up(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Up(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Up(e);let l=new kr(pd);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(u,f)=>{l=l.add(new ga(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>l)}un(e,t){let r=new kr(pd);const i=this.Ze(t,e);if(null==i)return r;const l=Ha(t);if(null!=l){const u=e.data.field(l.fieldPath);if(Lh(u))for(const f of u.arrayValue.values||[])r=r.add(new ga(t.indexId,e.key,this.He(f),i))}else r=r.add(new ga(t.indexId,e.key,lf,i));return r}an(e,t,r,i,l){at("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,_,C,T,S){const k=f.getIterator(),j=_.getIterator();let oe=rd(k),Ve=rd(j);for(;oe||Ve;){let rt=!1,Gt=!1;if(oe&&Ve){const qt=C(oe,Ve);qt<0?Gt=!0:qt>0&&(rt=!0)}else null!=oe?Gt=!0:rt=!0;rt?(T(Ve),Ve=rd(j)):Gt?(S(oe),oe=rd(k)):(oe=rd(k),Ve=rd(j))}}(i,l,pd,f=>{u.push(this.cn(e,t,r,f))},f=>{u.push(this.hn(e,t,r,f))}),He.waitFor(u)}rn(e){let t=1;return Vp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>pd(u,f)).filter((u,f,_)=>!f||0!==pd(u,_[f-1]));const i=[];i.push(e);for(const u of r){const f=pd(u,e),_=pd(u,t);if(0===f)i[0]=e.ke();else if(f>0&&_<0)i.push(u),i.push(u.ke());else if(_>0)break}i.push(t);const l=[];for(let u=0;u<i.length;u+=2)l.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,lf,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,lf,[]]));return l}}function Lv(n){return Bi(n,"collectionParents")}function Up(n){return Bi(n,"indexEntries")}function Bp(n){return Bi(n,"indexConfiguration")}function Vp(n){return Bi(n,"indexState")}const jm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class no{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new no(e,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Hm(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const _=r.Wt({range:u},(T,S,k)=>(f++,k.delete()));l.push(_.next(()=>{ln(1===f)}));const C=[];for(const T of t.mutations){const S=Nw(e,T.key.path,t.batchId);l.push(i.delete(S)),C.push(T.key)}return He.waitFor(l).next(()=>C)}function Gm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Mt();e=n.noDocument}return JSON.stringify(e).length}no.DEFAULT_COLLECTION_PERCENTILE=10,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,no.DEFAULT=new no(41943040,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),no.DISABLED=new no(-1,0,0);class jw{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){ln(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new jw(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Al(e).Wt({index:"userMutationsIndex",range:r},(i,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=$c(e),u=Al(e);return u.add({}).next(f=>{ln("number"==typeof f);const _=new Um(f,t,r,i),C=function(k,j,oe){const Ve=oe.baseMutations.map(Gt=>sd(k.Jt,Gt)),rt=oe.mutations.map(Gt=>sd(k.Jt,Gt));return{userId:j,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:Ve,mutations:rt}}(this.M,this.userId,_),T=[];let S=new kr((k,j)=>pn(k.canonicalString(),j.canonicalString()));for(const k of i){const j=Nw(this.userId,k.key.path,f);S=S.add(k.key.path.popLast()),T.push(u.put(C)),T.push(l.put(j,Nm))}return S.forEach(k=>{T.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),He.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return Al(e).get(t).next(r=>r?(ln(r.userId===this.userId),nf(this.M,r)):null)}fn(e,t){return this.ln[t]?He.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Al(e).Wt({index:"userMutationsIndex",range:i},(u,f,_)=>{f.userId===this.userId&&(ln(f.batchId>=r),l=nf(this.M,f)),_.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Al(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Al(e).qt("userMutationsIndex",t).next(r=>r.map(i=>nf(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=km(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return $c(e).Wt({range:i},(u,f,_)=>{const[C,T,S]=u,k=za(T);if(C===this.userId&&t.path.isEqual(k))return Al(e).get(S).next(j=>{if(!j)throw Mt();ln(j.userId===this.userId),l.push(nf(this.M,j))});_.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kr(pn);const i=[];return t.forEach(l=>{const u=km(this.userId,l.path),f=IDBKeyRange.lowerBound(u),_=$c(e).Wt({range:f},(C,T,S)=>{const[k,j,oe]=C,Ve=za(j);k===this.userId&&l.path.isEqual(Ve)?r=r.add(oe):S.done()});i.push(_)}),He.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=km(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new kr(pn);return $c(e).Wt({range:u},(_,C,T)=>{const[S,k,j]=_,oe=za(k);S===this.userId&&r.isPrefixOf(oe)?oe.length===i&&(f=f.add(j)):T.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(l=>{i.push(Al(e).get(l).next(u=>{if(null===u)throw Mt();ln(u.userId===this.userId),r.push(nf(this.M,u))}))}),He.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Hm(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),He.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return He.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $c(e).Wt({range:r},(l,u,f)=>{if(l[0]===this.userId){const _=za(l[1]);i.push(_)}else f.done()}).next(()=>{ln(0===i.length)})})}containsKey(e,t){return cf(e,this.userId,t)}wn(e){return qm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cf(n,e,t){const r=km(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return $c(n).Wt({range:l,jt:!0},(f,_,C)=>{const[T,S,k]=f;T===e&&S===i&&(u=!0),C.done()}).next(()=>u)}function Al(n){return Bi(n,"mutations")}function $c(n){return Bi(n,"documentMutations")}function qm(n){return Bi(n,"mutationQueues")}class gd{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new gd(0)}static yn(){return new gd(-1)}}class zm{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new gd(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>tn.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xl(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(ln(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return xl(e).Wt((u,f)=>{const _=$m(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,l.push(this.removeTargetData(e,_)))}).next(()=>He.waitFor(l)).next(()=>i)}forEachTarget(e,t){return xl(e).Wt((r,i)=>{const l=$m(i);t(l)})}pn(e){return Wm(e).get("targetGlobalKey").next(t=>(ln(null!==t),t))}In(e,t){return Wm(e).put("targetGlobalKey",t)}Tn(e,t){return xl(e).put(Bw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Qu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return xl(e).Wt({range:i,index:"queryTargetsIndex"},(u,f,_)=>{const C=$m(f);Sp(t,C.target)&&(l=C,_.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=md(e);return t.forEach(u=>{const f=ns(u.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),He.waitFor(i)}removeMatchingKeys(e,t,r){const i=md(e);return He.forEach(t,l=>{const u=ns(l.path);return He.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=md(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=md(e);let l=Zn();return i.Wt({range:r,jt:!0},(u,f,_)=>{const C=za(u[1]),T=new ht(C);l=l.add(T)}).next(()=>l)}containsKey(e,t){const r=ns(t.path),i=IDBKeyRange.bound([r],[Zb(r)],!1,!0);let l=0;return md(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,f],_,C)=>{0!==u&&(l++,C.done())}).next(()=>l>0)}Et(e,t){return xl(e).get(t).next(r=>r?$m(r):null)}}function xl(n){return Bi(n,"targets")}function Wm(n){return Bi(n,"targetGlobal")}function md(n){return Bi(n,"targetDocuments")}function _d(n){return $p.apply(this,arguments)}function $p(){return $p=(0,We.Z)(function*(n){if(n.code!==je.FAILED_PRECONDITION||n.message!==ud)throw n;at("LocalStore","Unexpectedly lost primary lease")}),$p.apply(this,arguments)}function Zm([n,e],[t,r]){const i=pn(n,t);return 0===i?pn(e,r):i}class Uv{constructor(e){this.An=e,this.buffer=new kr(Zm),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Zm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hw{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;at("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,We.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Uc(i)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield _d(i)}yield t.Sn(e)}))}}class Bv{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return He.resolve(to.A);const r=new Uv(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),He.resolve(jm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jm):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,l,u,f,_,C;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,u=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(l=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(C=Date.now(),um()<=yi.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-T}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${l} targets in `+(_-f)+`ms\n\tRemoved ${S} documents in `+(C-_)+`ms\nTotal Duration: ${C-T}ms`),He.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:S})))}}class Gw{constructor(e,t){this.db=e,this.garbageCollector=new Bv(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return jp(e,r)}removeReference(e,t,r){return jp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jp(e,t)}On(e,t){return function(r,i){let l=!1;return qm(r).zt(u=>cf(r,u,i).next(f=>(f&&(l=!0),He.resolve(!f)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Mn(e,(u,f)=>{if(f<=t){const _=this.On(e,u).next(C=>{if(!C)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,tn.min()),md(e).delete([0,ns(u.path)])))});i.push(_)}}).next(()=>He.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jp(e,t)}Mn(e,t){const r=md(e);let i,l=to.A;return r.Wt({index:"documentTargetsIndex"},([u,f],{path:_,sequenceNumber:C})=>{0===u?(l!==to.A&&t(new ht(za(i)),l),l=C,i=_):l=to.A}).next(()=>{l!==to.A&&t(new ht(za(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jp(n,e){return md(n).put((r=n.currentSequenceNumber,{targetId:0,path:ns(e.path),sequenceNumber:r}));var r}class Ym{constructor(){this.changes=new us(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?He.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qw{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return jc(e).put(r)}removeEntry(e,t,r){return jc(e).delete(function(i,l){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Vm(l),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Or.newInvalidDocument(t);return jc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yd(t))},(i,l)=>{r=this.$n(t,l)}).next(()=>r)}Bn(e,t){let r={size:0,document:Or.newInvalidDocument(t)};return jc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yd(t))},(i,l)=>{r={document:this.$n(t,l),size:Gm(l)}}).next(()=>r)}getEntries(e,t){let r=ds();return this.Ln(e,t,(i,l)=>{const u=this.$n(i,l);r=r.insert(i,u)}).next(()=>r)}Un(e,t){let r=ds(),i=new Rr(ht.comparator);return this.Ln(e,t,(l,u)=>{const f=this.$n(l,u);r=r.insert(l,f),i=i.insert(l,Gm(u))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return He.resolve();let i=new kr(zw);t.forEach(_=>i=i.add(_));const l=IDBKeyRange.bound(yd(i.first()),yd(i.last())),u=i.getIterator();let f=u.getNext();return jc(e).Wt({index:"documentKeyIndex",range:l},(_,C,T)=>{const S=ht.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;f&&zw(f,S)<0;)r(f,null),f=u.getNext();f&&f.isEqual(S)&&(r(f,C),f=u.hasNext()?u.getNext():null),f?T.Ut(yd(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Vm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jc(e).qt(IDBKeyRange.bound(i,l,!0)).next(u=>{let f=ds();for(const _ of u){const C=this.$n(ht.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(C.key,C)}return f})}getAllFromCollectionGroup(e,t,r,i){let l=ds();const u=$v(t,r),f=$v(t,fa.max());return jc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(_,C,T)=>{const S=this.$n(ht.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(S.key,S),l.size===i&&T.done()}).next(()=>l)}newChangeBuffer(e){return new QD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Vv(e).get("remoteDocumentGlobalKey").next(t=>(ln(!!t),t))}Fn(e,t){return Vv(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function jD(n,e){let t;if(e.document)t=Sw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ht.fromSegments(e.noDocument.path),i=hd(e.noDocument.readTime);t=Or.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Mt();{const r=ht.fromSegments(e.unknownDocument.path),i=hd(e.unknownDocument.version);t=Or.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qr(r[0],r[1]);return tn.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(tn.min()))return r}return Or.newInvalidDocument(e)}}class QD extends Ym{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new us(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new kr((l,u)=>pn(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const f=this.Gn.get(l);if(t.push(this.Kn.removeEntry(e,l,f.readTime)),u.isValidDocument()){const _=Rv(this.Kn.M,u);i=i.add(l.path.popLast()),r+=Gm(_)-f.size,t.push(this.Kn.addEntry(e,l,_))}else if(r-=f.size,this.trackRemovals){const _=Rv(this.Kn.M,u.convertToNoDocument(tn.min()));t.push(this.Kn.addEntry(e,l,_))}}),i.forEach(l=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Kn.updateMetadata(e,r)),He.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((l,u)=>{this.Gn.set(l,{size:u,readTime:r.get(l).readTime})}),r))}}function Vv(n){return Bi(n,"remoteDocumentGlobal")}function jc(n){return Bi(n,"remoteDocumentsV14")}function yd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $v(n,e){const t=e.documentKey.path.toArray();return[n,Vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(i=pn(t[l],r[l]),i)return i;return i=pn(t.length,r.length),i||(i=pn(t[t.length-2],r[r.length-2]),i||pn(t[t.length-1],r[r.length-1]))}class Ww{constructor(e){this.M=e}kt(e,t,r,i){const l=new Dl("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kw,{unique:!0}),f.createObjectStore("documentMutations"),jv(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=He.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),jv(e)),u=u.next(()=>function(f){const _=f.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tn.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",C)}(l))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,_){return _.store("mutations").qt().next(C=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kw,{unique:!0});const T=_.store("mutations"),S=C.map(k=>T.put(k));return He.waitFor(S)})}(e,l))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Qn(l))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(l)))),r<7&&i>=7&&(u=u.next(()=>this.Wn(l))),r<8&&i>=8&&(u=u.next(()=>this.zn(e,l))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Hn(l))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:Bo});_.createIndex("collectionPathOverlayIndex",xv,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Xh,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:Qh});_.createIndex("documentKeyIndex",BD),_.createIndex("collectionGroupIndex",kp)}(e)).next(()=>this.Jn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Np}).createIndex("sequenceNumberIndex",hs,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:ad}).createIndex("documentKeyIndex",Fm,{unique:!1})}(e)})),u}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Gm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>He.forEach(i,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(f=>He.forEach(f,_=>{ln(_.userId===l.userId);const C=nf(this.M,_);return Hm(e,l.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Wt((u,f)=>{const _=new yt(u),C=[0,ns(_)];l.push(t.get(C).next(T=>T?He.resolve():t.put({targetId:0,path:ns(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>He.waitFor(l))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Wa});const r=t.store("collectionParents"),i=new Fv,l=u=>{if(i.add(u)){const f=u.lastSegment(),_=u.popLast();return r.put({collectionId:f,parent:ns(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,f)=>{const _=new yt(u);return l(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,f,_],C)=>{const T=za(f);return l(T.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const l=$m(i),u=Bw(this.M,l);return t.put(u)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((l,u)=>{const f=t.store("remoteDocumentsV14"),_=(C=u,C.document?new ht(yt.fromString(C.document.name).popFirst(5)):C.noDocument?ht.fromSegments(C.noDocument.path):C.unknownDocument?ht.fromSegments(C.unknownDocument.path):Mt()).path.toArray();var C;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(T))}).next(()=>He.waitFor(i))}}function jv(n){n.createObjectStore("targetDocuments",{keyPath:$D}).createIndex("documentTargetsIndex",Av,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VD,{unique:!0}),n.createObjectStore("targetGlobal")}const Hp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gp{constructor(e,t,r,i,l,u,f,_,C,T,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=l,this.window=u,this.document=f,this.Xn=C,this.Zn=T,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=k=>Promise.resolve(),!Gp.vt())throw new nt(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gw(this,i),this.hs=t+"main",this.M=new Uw(_),this.ls=new Vo(this.hs,this.ts,new Ww(this.M)),this.fs=new zm(this.referenceDelegate,this.M),this.ds=new qw(this.M),this._s=new CM,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&Gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(je.FAILED_PRECONDITION,Hp);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new to(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,We.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,We.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,We.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Uc(e))return at("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return uf(e).get("owner").next(t=>He.resolve(this.bs(t)))}Vs(e){return qp(e).delete(this.clientId)}vs(){var e=this;return(0,We.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Bi(r,"clientMetadata");return i.qt().next(l=>{const u=e.Ds(l,18e5),f=l.filter(_=>-1===u.indexOf(_));return He.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?He.resolve(!0):uf(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new nt(je.FAILED_PRECONDITION,Hp);return!1}}return!(!this.networkEnabled||!this.inForeground)||qp(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&at("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,We.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Pv(t,to.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>qp(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return jw.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new KD(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return kv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){at("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=14===(u=this.ts)?ef:13===u?cd:12===u?Jh:11===u?ld:void Mt();var u;let f;return this.ls.runTransaction(e,i,l,_=>(f=new Pv(_,this.es?this.es.next():to.A),"readwrite-primary"===t?this.Es(f).next(C=>!!C||this.As(f)).next(C=>{if(!C)throw Gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new nt(je.FAILED_PRECONDITION,ud);return r(f)}).next(C=>this.Ps(f).next(()=>C)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(e){return uf(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new nt(je.FAILED_PRECONDITION,Hp)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uf(e).put("owner",t)}static vt(){return Vo.vt()}Rs(e){const t=uf(e);return t.get("owner").next(r=>this.bs(r)?(at("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):He.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return at("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Gr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uf(n){return Bi(n,"owner")}function qp(n){return Bi(n,"clientMetadata")}function Km(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Zw{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const l of t)l.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return ht.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):Ms(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new ht(t)).next(r=>{let i=Pp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let l=Pp();return this.indexManager.getCollectionParents(e,i).next(u=>He.forEach(u,f=>{const _=(C=t,T=f.child(i),new Nc(T,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,T;return this.zs(e,_,r).next(C=>{C.forEach((T,S)=>{l=l.insert(T,S)})})}).next(()=>l))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(l=>(i=l,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const u of l)for(const f of u.mutations){const _=f.key;let C=i.get(_);null==C&&(C=Or.newInvalidDocument(_),i=i.insert(_,C)),zh(f,C,u.localWriteTime),C.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((l,u)=>{dv(t,u)||(i=i.remove(l))}),i))}}class Qm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Zn(),i=Zn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Qm(e,t.fromCache,r,i)}}class Hv{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(tn.min())?this.ti(e,t):this.Zs.Ks(e,i).next(l=>{const u=this.ei(t,l);return(Cm(t)||Mp(t))&&this.ni(t.limitType,u,i,r)?this.ti(e,t):(um()<=yi.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aw(t)),this.Zs.Qs(e,t,_m(r,-1)).next(f=>(u.forEach(_=>{f=f.insert(_.key,_)}),f)))});var l}ei(e,t){let r=new kr(hv(e));return t.forEach((i,l)=>{dv(e,l)&&(r=r.add(l))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ti(e,t){return um()<=yi.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",aw(t)),this.Zs.Qs(e,t,fa.min())}}class Yw{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new Rr(pn),this.ri=new us(l=>Qu(l),Sp),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Zw(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function Gv(n,e,t,r){return new Yw(n,e,t,r)}function XD(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,We.Z)(function*(n,e){const t=pt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(l=>(i=l,t.ai(e),t.Bs.getAllMutationBatches(r))).next(l=>{const u=[],f=[];let _=Zn();for(const C of i){u.push(C.batchId);for(const T of C.mutations)_=_.add(T.key)}for(const C of l){f.push(C.batchId);for(const T of C.mutations)_=_.add(T.key)}return t.ci.Ks(r,_).next(C=>({hi:C,removedBatchIds:u,addedBatchIds:f}))})})}),qv.apply(this,arguments)}function JD(n,e){const t=pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.ui.newChangeBuffer({trackRemovals:!0});return function(u,f,_,C){const T=_.batch,S=T.keys();let k=He.resolve();return S.forEach(j=>{k=k.next(()=>C.getEntry(f,j)).next(oe=>{const Ve=_.docVersions.get(j);ln(null!==Ve),oe.version.compareTo(Ve)<0&&(T.applyToRemoteDocument(oe,_),oe.isValidDocument()&&(oe.setReadTime(_.commitVersion),C.addEntry(oe)))})}),k.next(()=>u.Bs.removeMutationBatch(f,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function zv(n){const e=pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function eS(n,e){const t=pt(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const f=[];e.targetChanges.forEach((C,T)=>{const S=i.get(T);if(!S)return;f.push(t.fs.removeMatchingKeys(l,C.removedDocuments,T).next(()=>t.fs.addMatchingKeys(l,C.addedDocuments,T)));let k=S.withSequenceNumber(l.currentSequenceNumber);var j,oe,Ve;e.targetMismatches.has(T)?k=k.withResumeToken(nr.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):C.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(C.resumeToken,r)),i=i.insert(T,k),oe=k,Ve=C,(0===(j=S).resumeToken.approximateByteSize()||oe.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(l,k))});let _=ds();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),f.push(ci(l,u,e.documentUpdates).next(C=>{_=C})),!r.isEqual(tn.min())){const C=t.fs.getLastRemoteSnapshotVersion(l).next(T=>t.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(C)}return He.waitFor(f).next(()=>u.apply(l)).next(()=>t.ci.Gs(l,_)).next(()=>_)}).then(l=>(t.ii=i,l))}function ci(n,e,t){let r=Zn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let l=ds();return t.forEach((u,f)=>{const _=i.get(u);f.isNoDocument()&&f.version.isEqual(tn.min())?(e.removeEntry(u,f.readTime),l=l.insert(u,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),l=l.insert(u,f)):at("LocalStore","Ignoring outdated watch update for ",u,". Current version:",_.version," Watch version:",f.version)}),l})}function Kw(n,e){const t=pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function df(n,e){const t=pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(l=>l?(i=l,He.resolve(i)):t.fs.allocateTargetId(r).next(u=>(i=new Sl(e,u,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function hf(n,e,t){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,We.Z)(function*(n,e,t){const r=pt(n),i=r.ii.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Uc(u))throw u;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),Xm.apply(this,arguments)}function Jm(n,e,t){const r=pt(n);let i=tn.min(),l=Zn();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,_,C){const T=pt(f),S=T.ri.get(C);return void 0!==S?He.resolve(T.ii.get(S)):T.fs.getTargetData(_,C)}(r,u,Lo(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(u,f.targetId).next(_=>{l=_})}).next(()=>r.si.Qs(u,e,t?i:tn.min(),t?l:Zn())).next(f=>(vd(r,wm(e),f),{documents:f,li:l})))}function Wv(n,e){const t=pt(n),r=pt(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(u=>u?u.target:null))}function Zv(n,e){const t=pt(n),r=t.oi.get(e)||tn.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,_m(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vd(t,e,i),i))}function vd(n,e,t){let r=tn.min();t.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(e,r)}function Yv(){return Yv=(0,We.Z)(function*(n,e,t,r){const i=pt(n);let l=Zn(),u=ds();for(const C of t){const T=e.fi(C.metadata.name);C.document&&(l=l.add(T));const S=e.di(C);S.setReadTime(e._i(C.metadata.readTime)),u=u.insert(T,S)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),_=yield df(i,(C=r,Lo(ed(yt.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>ci(C,f,u).next(T=>(f.apply(C),T)).next(T=>i.fs.removeMatchingKeysForTargetId(C,_.targetId).next(()=>i.fs.addMatchingKeys(C,l,_.targetId)).next(()=>i.ci.Gs(C,T)).next(()=>T)))}),Yv.apply(this,arguments)}function Qw(n,e){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,We.Z)(function*(n,e,t=Zn()){const r=yield df(n,Lo(Fp(e.bundledQuery))),i=pt(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const u=Ei(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i._s.saveNamedQuery(l,e);const f=r.withResumeToken(nr.EMPTY_BYTE_STRING,u);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(l,f).next(()=>i.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.fs.addMatchingKeys(l,t,r.targetId)).next(()=>i._s.saveNamedQuery(l,e))})}),Kv.apply(this,arguments)}class Xw{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return He.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Ei(r.createTime)}),He.resolve()}getNamedQuery(e,t){return He.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:Fp(r.bundledQuery),readTime:Ei(r.readTime)}),He.resolve();var r}}class bM{constructor(){this.overlays=new Rr(ht.comparator),this.gi=new Map}getOverlay(e,t){return He.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,l)=>{this.Xt(e,t,l)}),He.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),He.resolve()}getOverlaysForCollection(e,t,r){const i=Wh(),l=t.length+1,u=new ht(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const _=f.getNext().value,C=_.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&_.largestBatchId>r&&i.set(_.getKey(),_)}return He.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new Rr((C,T)=>C-T);const u=this.overlays.getIterator();for(;u.hasNext();){const C=u.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let T=l.get(C.largestBatchId);null===T&&(T=Wh(),l=l.insert(C.largestBatchId,T)),T.set(C.getKey(),C)}}const f=Wh(),_=l.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((C,T)=>f.set(C,T)),!(f.size()>=i)););return He.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Bm(t,r));let l=this.gi.get(t);void 0===l&&(l=Zn(),this.gi.set(t,l)),this.gi.set(t,l.add(r.key))}}class e_{constructor(){this.yi=new kr(ui.pi),this.Ii=new kr(ui.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new ui(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new ui(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new ht(new yt([])),r=new ui(t,e),i=new ui(t,e+1),l=[];return this.Ii.forEachInRange([r,i],u=>{this.Ai(u),l.push(u.key)}),l}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new ht(new yt([])),r=new ui(t,e),i=new ui(t,e+1);let l=Zn();return this.Ii.forEachInRange([r,i],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new ui(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return ht.comparator(e.key,t.key)||pn(e.vi,t.vi)}static Ti(e,t){return pn(e.vi,t.vi)||ht.comparator(e.key,t.key)}}class Za{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new kr(ui.pi)}checkEmpty(e){return He.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const l=this.Si;this.Si++;const u=new Um(l,t,r,i);this.Bs.push(u);for(const f of i)this.Di=this.Di.add(new ui(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return He.resolve(u)}lookupMutationBatch(e,t){return He.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),l=i<0?0:i;return He.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return He.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return He.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),i=new ui(t,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,i],u=>{const f=this.Ci(u.vi);l.push(f)}),He.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kr(pn);return t.forEach(i=>{const l=new ui(i,0),u=new ui(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,u],f=>{r=r.add(f.vi)})}),He.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;ht.isDocumentKey(l)||(l=l.child(""));const u=new ui(new ht(l),0);let f=new kr(pn);return this.Di.forEachWhile(_=>{const C=_.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(f=f.add(_.vi)),!0)},u),He.resolve(this.Ni(f))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ln(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return He.forEach(t.mutations,i=>{const l=new ui(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new ui(t,0),i=this.Di.firstAfterOrEqual(r);return He.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return He.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nS{constructor(e){this.Mi=e,this.docs=new Rr(ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,u=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return He.resolve(r?r.document.mutableCopy():Or.newInvalidDocument(t))}getEntries(e,t){let r=ds();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():Or.newInvalidDocument(i))}),He.resolve(r)}getAllFromCollection(e,t,r){let i=ds();const l=new ht(t.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:_}}=u.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||ID(nw(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return He.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Mt()}Oi(e,t){return He.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new rS(this)}getSize(e){return He.resolve(this.size)}}class rS extends Ym{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),He.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Ya{constructor(e){this.persistence=e,this.Fi=new us(t=>Qu(t),Sp),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.$i=0,this.Bi=new e_,this.targetCount=0,this.Li=gd.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),He.resolve()}getLastRemoteSnapshotVersion(e){return He.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return He.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),He.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),He.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new gd(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,He.resolve()}updateTargetData(e,t){return this.Tn(t),He.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,He.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.Fi.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Fi.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),He.waitFor(l).next(()=>i)}getTargetCount(e){return He.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return He.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),He.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(u=>{l.push(i.markPotentiallyOrphaned(e,u))}),He.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),He.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return He.resolve(r)}containsKey(e,t){return He.resolve(this.Bi.containsKey(t))}}class ma{constructor(e,t){this.Ui={},this.overlays={},this.es=new to(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Ya(this),this.indexManager=new YD,this.ds=new nS(r=>this.referenceDelegate.qi(r)),this.M=new Uw(t),this._s=new Xw(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new Za(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){at("MemoryPersistence","Starting transaction:",e);const i=new _a(this.es.next());return this.referenceDelegate.Ki(),r(i).next(l=>this.referenceDelegate.Gi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Qi(e,t){return He.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class _a extends dd{constructor(e){super(),this.currentSequenceNumber=e}}class t_{constructor(e){this.persistence=e,this.ji=new e_,this.Wi=null}static zi(e){return new t_(e)}get Hi(){if(this.Wi)return this.Wi;throw Mt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),He.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),He.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),He.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return He.forEach(this.Hi,r=>{const i=ht.fromPath(r);return this.Ji(e,i).next(l=>{l||t.removeEntry(i,tn.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return He.or([()=>He.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Qv(n,e){return`firestore_clients_${n}_${e}`}function Jw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Xv(n,e){return`firestore_targets_${n}_${e}`}class n_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let l,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(l=new nt(i.error.code,i.error.message))),u?new n_(e,t,i.state,l):(Gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new nt(r.error.code,r.error.message))),l?new zp(e,r.state,i):(Gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ff{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=Pm();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=Tp(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return i?new ff(e,l):(Gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Cd{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Cd(t.clientId,t.onlineState):(Gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jv{constructor(){this.activeTargetIds=Pm()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r_{constructor(e,t,r,i,l){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Rr(pn),this.started=!1,this.rr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=Qv(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Jv),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,We.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const l=e.getItem(Qv(e.persistenceKey,i));if(l){const u=ff.Yi(i,l);u&&(e.ir=e.ir.insert(u.clientId,u))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Xv(this.persistenceKey,e));if(r){const i=zp.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return at("SharedClientState","READ",e,t),t}setItem(e,t){at("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){at("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(at("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,We.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(l){let u=to.A;if(null!=l)try{const f=JSON.parse(l);ln("number"==typeof f),u=f}catch(f){Gr("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==to.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(l=>t.syncEngine.kr(l)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new n_(this.currentUser,e,t,r),l=Jw(this.persistenceKey,this.currentUser,e);this.setItem(l,i.Xi())}Ir(e){const t=Jw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=Xv(this.persistenceKey,e),l=new zp(e,t,r);this.setItem(i,l.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return ff.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return n_.Yi(new es(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return zp.Yi(i,t)}mr(e){return Cd.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,We.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);at("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),l=this.yr(r),u=[],f=[];return l.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{l.has(_)||f.push(_)}),this.syncEngine.Fr(u,f).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Pm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class eE{constructor(){this.$r=new Jv,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Jv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tE{Lr(e){}shutdown(){}}class e0{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const i_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class iS{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class nE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,l){const u=this.uo(e,t);at("RestConnection","Sending: ",u,r);const f={};return this.ao(f,i,l),this.co(e,u,f,r).then(_=>(at("RestConnection","Received: ",_),_),_=>{throw Mc("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}ho(e,t,r,i,l){return this.oo(e,t,r,i,l)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}uo(e,t){return`${this.io}/v1/${t}:${i_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((l,u)=>{const f=new vD;f.listenOnce(Ub.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Zy.NO_ERROR:const C=f.getResponseJson();at("Connection","XHR received:",JSON.stringify(C)),l(C);break;case Zy.TIMEOUT:at("Connection",'RPC "'+e+'" timed out'),u(new nt(je.DEADLINE_EXCEEDED,"Request time out"));break;case Zy.HTTP_ERROR:const T=f.getStatus();if(at("Connection",'RPC "'+e+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const k=function(j){const oe=j.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(oe)>=0?oe:je.UNKNOWN}(S.status);u(new nt(k,S.message))}else u(new nt(je.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new nt(je.UNAVAILABLE,"Connection failed."));break;default:Mt()}}finally{at("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Wy(),u=yD(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Vb({})),this.ao(f.initMessageHeaders,t,r),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");at("Connection","Creating WebChannel: "+_,f);const C=l.createWebChannel(_,f);let T=!1,S=!1;const k=new iS({Wr:oe=>{S?at("Connection","Not sending because WebChannel is closed:",oe):(T||(at("Connection","Opening WebChannel transport."),C.open(),T=!0),at("Connection","WebChannel sending:",oe),C.send(oe))},zr:()=>C.close()}),j=(oe,Ve,rt)=>{oe.listen(Ve,Gt=>{try{rt(Gt)}catch(qt){setTimeout(()=>{throw qt},0)}})};return j(C,bp.EventType.OPEN,()=>{S||at("Connection","WebChannel transport opened.")}),j(C,bp.EventType.CLOSE,()=>{S||(S=!0,at("Connection","WebChannel transport closed"),k.no())}),j(C,bp.EventType.ERROR,oe=>{S||(S=!0,Mc("Connection","WebChannel transport errored:",oe),k.no(new nt(je.UNAVAILABLE,"The operation could not be completed")))}),j(C,bp.EventType.MESSAGE,oe=>{var Ve;if(!S){const rt=oe.data[0];ln(!!rt);const Gt=rt,qt=Gt.error||(null===(Ve=Gt[0])||void 0===Ve?void 0:Ve.error);if(qt){at("Connection","WebChannel received error:",qt);const Bt=qt.status;let kt=function(kn){const Gi=Xr[kn];if(void 0!==Gi)return _v(Gi)}(Bt),gn=qt.message;void 0===kt&&(kt=je.INTERNAL,gn="Unknown error status: "+Bt+" with message "+qt.message),S=!0,k.no(new nt(kt,gn)),C.close()}else at("Connection","WebChannel received:",rt),k.so(rt)}}),j(u,Bb.STAT_EVENT,oe=>{oe.stat===xc.PROXY?at("Connection","Detected buffering proxy"):oe.stat===xc.NOPROXY&&at("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.eo()},0),k}}function t0(){return"undefined"!=typeof window?window:null}function pf(){return"undefined"!=typeof document?document:null}function Hc(n){return new pa(n,!0)}class s_{constructor(e,t,r=1e3,i=1.5,l=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&at("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class n0{constructor(e,t,r,i,l,u,f,_){this.Yn=e,this.Ro=r,this.Po=i,this.bo=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new s_(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,We.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,We.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,We.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===je.RESOURCE_EXHAUSTED?(Gr(t.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===je.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new nt(je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,We.Z)(function*(){e.state=0,e.start()}))}Ko(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rE extends n0{constructor(e,t,r,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=l}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function _M(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Mt(),i=e.targetChange.targetIds||[],l=function(_,C){return _.N?(ln(void 0===C||"string"==typeof C),nr.fromBase64String(C||"")):(ln(void 0===C||C instanceof Uint8Array),nr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(_){const C=void 0===_.code?je.UNKNOWN:_v(_.code);return new nt(C,_.message||"")}(u);t=new Cw(r,i,l,f||null)}else if("documentChange"in e){const r=e.documentChange,i=qa(n,r.document.name),l=Ei(r.document.updateTime),u=new xs({mapValue:{fields:r.document.fields}}),f=Or.newFoundDocument(i,l,u);t=new Tl(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=qa(n,r.document),l=r.readTime?Ei(r.readTime):tn.min(),u=Or.newNoDocument(i,l);t=new Tl([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=qa(n,r.document);t=new Tl([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Mt();{const r=e.filter,l=new _w(r.count||0);t=new Cv(r.targetId,l)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return tn.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?tn.min():l.readTime?Ei(l.readTime):tn.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Rm(this.M),t.addTarget=function(i,l){let u;const f=l.target;return u=Ap(f)?{documents:Dv(i,f)}:{query:FD(i,f)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=bv(i,l.resumeToken):l.snapshotVersion.compareTo(tn.min())>0&&(u.readTime=id(i,l.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function yM(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Rm(this.M),t.removeTarget=e,this.Fo(t)}}class iE extends n0{constructor(e,t,r,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Aw(n,e){return n&&n.length>0?(ln(void 0!==e),n.map(t=>function(r,i){let l=Ei(r.updateTime?r.updateTime:i);return l.isEqual(tn.min())&&(l=Ei(i)),new PD(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.Yo(r,t)}return ln(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Rm(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sd(this.M,r))};this.Fo(t)}}class sE extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new nt(je.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.oo(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(je.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ho(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new nt(je.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class oE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Gr(t),this.iu=!1):at("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class aE{constructor(e,t,r,i,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(f=>{r.enqueueAndForget((0,We.Z)(function*(){var _;Ml(u)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,We.Z)(function*(C){const T=pt(C);T.fu.add(4),yield mf(T),T.wu.set("Unknown"),T.fu.delete(4),yield gf(T)}),function(C){return _.apply(this,arguments)})(u))}))}),this.wu=new oE(r,i)}}function gf(n){return r0.apply(this,arguments)}function r0(){return r0=(0,We.Z)(function*(n){if(Ml(n))for(const e of n.du)yield e(!0)}),r0.apply(this,arguments)}function mf(n){return s0.apply(this,arguments)}function s0(){return s0=(0,We.Z)(function*(n){for(const e of n.du)yield e(!1)}),s0.apply(this,arguments)}function o_(n,e){const t=pt(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),l0(t)?a0(t):Zp(t).xo()&&o0(t,e))}function Wp(n,e){const t=pt(n),r=Zp(t);t.lu.delete(e),r.xo()&&lE(t,e),0===t.lu.size&&(r.xo()?r.Mo():Ml(t)&&t.wu.set("Unknown"))}function o0(n,e){n.mu.Z(e.targetId),Zp(n).jo(e)}function lE(n,e){n.mu.Z(e),Zp(n).Wo(e)}function a0(n){n.mu=new Yh({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Zp(n).start(),n.wu.ru()}function l0(n){return Ml(n)&&!Zp(n).Co()&&n.lu.size>0}function Ml(n){return 0===pt(n).fu.size}function cE(n){n.mu=void 0}function sS(n){return c0.apply(this,arguments)}function c0(){return c0=(0,We.Z)(function*(n){n.lu.forEach((e,t)=>{o0(n,e)})}),c0.apply(this,arguments)}function oS(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,We.Z)(function*(n,e){cE(n),l0(n)?(n.wu.au(e),a0(n)):n.wu.set("Unknown")}),u0.apply(this,arguments)}function aS(n,e,t){return d0.apply(this,arguments)}function d0(){return d0=(0,We.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Cw&&2===e.state&&e.cause)try{yield(r=(0,We.Z)(function*(i,l){const u=l.cause;for(const f of l.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield a_(n,r)}else if(e instanceof Tl?n.mu.ut(e):e instanceof Cv?n.mu._t(e):n.mu.ht(e),!t.isEqual(tn.min()))try{const r=yield zv(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const u=i.mu.yt(l);return u.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const C=i.lu.get(_);C&&i.lu.set(_,C.withResumeToken(f.resumeToken,l))}}),u.targetMismatches.forEach(f=>{const _=i.lu.get(f);if(!_)return;i.lu.set(f,_.withResumeToken(nr.EMPTY_BYTE_STRING,_.snapshotVersion)),lE(i,f);const C=new Sl(_.target,f,1,_.sequenceNumber);o0(i,C)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){at("RemoteStore","Failed to raise snapshot:",r),yield a_(n,r)}var r}),d0.apply(this,arguments)}function a_(n,e,t){return l_.apply(this,arguments)}function l_(){return l_=(0,We.Z)(function*(n,e,t){if(!Uc(e))throw e;n.fu.add(1),yield mf(n),n.wu.set("Offline"),t||(t=()=>zv(n.localStore)),n.asyncQueue.enqueueRetryable((0,We.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield gf(n)}))}),l_.apply(this,arguments)}function h0(n,e){return e().catch(t=>a_(n,t,e))}function bd(n){return c_.apply(this,arguments)}function c_(){return c_=(0,We.Z)(function*(n){const e=pt(n),t=Ut(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;uE(e);)try{const i=yield Kw(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,dE(e,i)}catch(i){yield a_(e,i)}f0(e)&&p0(e)}),c_.apply(this,arguments)}function uE(n){return Ml(n)&&n.hu.length<10}function dE(n,e){n.hu.push(e);const t=Ut(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function f0(n){return Ml(n)&&!Ut(n).Co()&&n.hu.length>0}function p0(n){Ut(n).start()}function hE(n){return u_.apply(this,arguments)}function u_(){return u_=(0,We.Z)(function*(n){Ut(n).Zo()}),u_.apply(this,arguments)}function fE(n){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,We.Z)(function*(n){const e=Ut(n);for(const t of n.hu)e.Jo(t.mutations)}),Pl.apply(this,arguments)}function lS(n,e,t){return g0.apply(this,arguments)}function g0(){return g0=(0,We.Z)(function*(n,e,t){const r=n.hu.shift(),i=Ov.from(r,e,t);yield h0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bd(n)}),g0.apply(this,arguments)}function _f(n,e){return pE.apply(this,arguments)}function pE(){return pE=(0,We.Z)(function*(n,e){var t;e&&Ut(n).Ho&&(yield(t=(0,We.Z)(function*(r,i){if(mv(l=i.code)&&l!==je.ABORTED){const u=r.hu.shift();Ut(r).ko(),yield h0(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield bd(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),f0(n)&&p0(n)}),pE.apply(this,arguments)}function d_(n,e){return gE.apply(this,arguments)}function gE(){return gE=(0,We.Z)(function*(n,e){const t=pt(n);t.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const r=Ml(t);t.fu.add(3),yield mf(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield gf(t)}),gE.apply(this,arguments)}function h_(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,We.Z)(function*(n,e){const t=pt(n);e?(t.fu.delete(2),yield gf(t)):e||(t.fu.add(2),yield mf(t),t.wu.set("Unknown"))}),f_.apply(this,arguments)}function Zp(n){return n.gu||(n.gu=function(e,t,r){const i=pt(e);return i.eu(),new rE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:sS.bind(null,n),Yr:oS.bind(null,n),Qo:aS.bind(null,n)}),n.du.push(function(){var e=(0,We.Z)(function*(t){t?(n.gu.ko(),l0(n)?a0(n):n.wu.set("Unknown")):(yield n.gu.stop(),cE(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Ut(n){return n.yu||(n.yu=function(e,t,r){const i=pt(e);return i.eu(),new iE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:hE.bind(null,n),Yr:_f.bind(null,n),Xo:fE.bind(null,n),Yo:lS.bind(null,n)}),n.du.push(function(){var e=(0,We.Z)(function*(t){t?(n.yu.ko(),yield bd(n)):(yield n.yu.stop(),n.hu.length>0&&(at("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class m0{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,l){const u=Date.now()+r,f=new m0(e,t,u,i,l);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nt(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yf(n,e){if(Gr("AsyncQueue",`${e}: ${n}`),Uc(n))return new nt(je.UNAVAILABLE,`${e}: ${n}`);throw n}class vf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ht.comparator(t.key,r.key):(t,r)=>ht.comparator(t.key,r.key),this.keyedMap=Pp(),this.sortedSet=new Rr(this.comparator)}static emptySet(e){return new vf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Yp{constructor(){this.pu=new Rr(ht.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Mt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cf{constructor(e,t,r,i,l,u,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Cf(e,t,vf.emptySet(t),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class p_{constructor(){this.Tu=void 0,this.listeners=[]}}class g_{constructor(){this.queries=new us(e=>uv(e),bm),this.onlineState="Unknown",this.Eu=new Set}}function Nr(n,e){return mE.apply(this,arguments)}function mE(){return mE=(0,We.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new p_),i)try{l.Tu=yield t.onListen(r)}catch(u){const f=yf(u,`Initialization of query '${aw(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.listeners.push(e),e.Au(t.onlineState),l.Tu&&e.Ru(l.Tu)&&__(t)}),mE.apply(this,arguments)}function m_(n,e){return _0.apply(this,arguments)}function _0(){return _0=(0,We.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const u=l.listeners.indexOf(e);u>=0&&(l.listeners.splice(u,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),_0.apply(this,arguments)}function cS(n,e){const t=pt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.Ru(i)&&(r=!0);u.Tu=i}}r&&__(t)}function _E(n,e,t){const r=pt(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function __(n){n.Eu.forEach(e=>{e.next()})}class y_{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Cf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Cf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class yE{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class vE{constructor(e){this.M=e}fi(e){return qa(this.M,e)}di(e){return e.metadata.exists?Sw(this.M,e.document,!1):Or.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Ei(e)}}class uS{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CE(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=yt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new vE(this.M);for(const i of e)if(i.metadata.queries){const l=r.fi(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||Zn()).add(l);t.set(u,f)}}return t}complete(){var e=this;return(0,We.Z)(function*(){const t=yield function tS(n,e,t,r){return Yv.apply(this,arguments)}(e.localStore,new vE(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield Qw(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function CE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bf{constructor(e){this.key=e}}class bE{constructor(e){this.key=e}}class wE{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Zn(),this.mutatedKeys=Zn(),this.Uu=hv(e),this.qu=new vf(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new Yp,i=t?t.qu:this.qu;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const _=Cm(this.query)&&i.size===this.query.limit?i.last():null,C=Mp(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const k=i.get(T),j=dv(this.query,S)?S:null,oe=!!k&&this.mutatedKeys.has(k.key),Ve=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let rt=!1;k&&j?k.data.isEqual(j.data)?oe!==Ve&&(r.track({type:3,doc:j}),rt=!0):this.ju(k,j)||(r.track({type:2,doc:j}),rt=!0,(_&&this.Uu(j,_)>0||C&&this.Uu(j,C)<0)&&(f=!0)):!k&&j?(r.track({type:0,doc:j}),rt=!0):k&&!j&&(r.track({type:1,doc:k}),rt=!0,(_||C)&&(f=!0)),rt&&(j?(u=u.add(j),l=Ve?l.add(T):l.delete(T)):(u=u.delete(T),l=l.delete(T)))}),Cm(this.query)||Mp(this.query))for(;u.size>this.query.limit;){const T=Cm(this.query)?u.last():u.first();u=u.delete(T.key),l=l.delete(T.key),r.track({type:1,doc:T})}return{qu:u,Qu:r,ni:f,mutatedKeys:l}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const l=e.Qu.Iu();l.sort((C,T)=>function(S,k){const j=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt()}};return j(S)-j(k)}(C.type,T.type)||this.Uu(C.doc,T.doc)),this.Wu(r);const u=t?this.zu():[],f=0===this.Lu.size&&this.current?1:0,_=f!==this.Bu;return this.Bu=f,0!==l.length||_?{snapshot:new Cf(this.query,e.qu,i,l,e.mutatedKeys,0===f,_,!1),Hu:u}:{Hu:u}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Yp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Zn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new bE(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new bf(r))}),t}Yu(e){this.$u=e.li,this.Lu=Zn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Cf.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class dS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class v_{constructor(e){this.key=e,this.Zu=!1}}class EE{constructor(e,t,r,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.ta={},this.ea=new us(f=>uv(f),bm),this.na=new Map,this.sa=new Set,this.ia=new Rr(ht.comparator),this.ra=new Map,this.oa=new e_,this.ua={},this.aa=new Map,this.ca=gd.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function IE(n,e){return C_.apply(this,arguments)}function C_(){return C_=(0,We.Z)(function*(n,e){const t=k0(n);let r,i;const l=t.ea.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.Xu();else{const u=yield df(t.localStore,Lo(e));t.isPrimaryClient&&o_(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield y0(t,e,r,"current"===f)}return i}),C_.apply(this,arguments)}function y0(n,e,t,r){return wd.apply(this,arguments)}function wd(){return wd=(0,We.Z)(function*(n,e,t,r){n.la=(T,S,k)=>{return(j=(0,We.Z)(function*(oe,Ve,rt,Gt){let qt=Ve.view.Gu(rt);qt.ni&&(qt=yield Jm(oe.localStore,Ve.query,!1).then(({documents:gn})=>Ve.view.Gu(gn,qt)));const Bt=Gt&&Gt.targetChanges.get(Ve.targetId),kt=Ve.view.applyChanges(qt,oe.isPrimaryClient,Bt);return I_(oe,Ve.targetId,kt.Hu),kt.snapshot}),function(oe,Ve,rt,Gt){return j.apply(this,arguments)})(n,T,S,k);var j};const i=yield Jm(n.localStore,e,!0),l=new wE(e,i.li),u=l.Gu(i.documents),f=Zh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=l.applyChanges(u,n.isPrimaryClient,f);I_(n,t,_.Hu);const C=new dS(e,t,l);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),_.snapshot}),wd.apply(this,arguments)}function Kp(n,e){return v0.apply(this,arguments)}function v0(){return v0=(0,We.Z)(function*(n,e){const t=pt(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(l=>!bm(l,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Wp(t.remoteStore,r.targetId),Ef(t,r.targetId)}).catch(_d))):(Ef(t,r.targetId),yield hf(t.localStore,r.targetId,!0))}),v0.apply(this,arguments)}function C0(){return C0=(0,We.Z)(function*(n,e,t){const r=Xp(n);try{const i=yield function(l,u){const f=pt(l),_=Qr.now(),C=u.reduce((S,k)=>S.add(k.key),Zn());let T;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>f.ci.Ks(S,C).next(k=>{T=k;const j=[];for(const oe of u){const Ve=pv(oe,T.get(oe.key));null!=Ve&&j.push(new Lc(oe.key,Ve,ED(Ve.value.mapValue),li.exists(!0)))}return f.Bs.addMutationBatch(S,_,j,u)})).then(S=>(S.applyToLocalDocumentSet(T),{batchId:S.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,f){let _=l.ua[l.currentUser.toKey()];_||(_=new Rr(pn)),_=_.insert(u,f),l.ua[l.currentUser.toKey()]=_}(r,i.batchId,t),yield Ol(r,i.changes),yield bd(r.remoteStore)}catch(i){const l=yf(i,"Failed to persist write");t.reject(l)}}),C0.apply(this,arguments)}function b0(n,e){return b_.apply(this,arguments)}function b_(){return b_=(0,We.Z)(function*(n,e){const t=pt(n);try{const r=yield eS(t.localStore,e);e.targetChanges.forEach((i,l)=>{const u=t.ra.get(l);u&&(ln(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Zu=!0:i.modifiedDocuments.size>0?ln(u.Zu):i.removedDocuments.size>0&&(ln(u.Zu),u.Zu=!1))}),yield Ol(t,r,e)}catch(r){yield _d(r)}}),b_.apply(this,arguments)}function w0(n,e,t){const r=pt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((l,u)=>{const f=u.view.Au(e);f.snapshot&&i.push(f.snapshot)}),function(l,u){const f=pt(l);f.onlineState=u;let _=!1;f.queries.forEach((C,T)=>{for(const S of T.listeners)S.Au(u)&&(_=!0)}),_&&__(f)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fS(n,e,t){return w_.apply(this,arguments)}function w_(){return w_=(0,We.Z)(function*(n,e,t){const r=pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),l=i&&i.key;if(l){let u=new Rr(ht.comparator);u=u.insert(l,Or.newNoDocument(l,tn.min()));const f=Zn().add(l),_=new Op(tn.min(),new Map,new kr(pn),u,f);yield b0(r,_),r.ia=r.ia.remove(l),r.ra.delete(e),I0(r)}else yield hf(r.localStore,e,!1).then(()=>Ef(r,e,t)).catch(_d)}),w_.apply(this,arguments)}function pS(n,e){return E0.apply(this,arguments)}function E0(){return E0=(0,We.Z)(function*(n,e){const t=pt(n),r=e.batch.batchId;try{const i=yield JD(t.localStore,e);wf(t,r,null),E_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ol(t,i)}catch(i){yield _d(i)}}),E0.apply(this,arguments)}function wM(n,e,t){return TE.apply(this,arguments)}function TE(){return TE=(0,We.Z)(function*(n,e,t){const r=pt(n);try{const i=yield function(l,u){const f=pt(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let C;return f.Bs.lookupMutationBatch(_,u).next(T=>(ln(null!==T),C=T.keys(),f.Bs.removeMutationBatch(_,T))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.ci.Ks(_,C))})}(r.localStore,e);wf(r,e,t),E_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ol(r,i)}catch(i){yield _d(i)}}),TE.apply(this,arguments)}function DE(){return DE=(0,We.Z)(function*(n,e){const t=pt(n);Ml(t.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const u=pt(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=yf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),DE.apply(this,arguments)}function E_(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function wf(n,e,t){const r=pt(n);let i=r.ua[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function Ef(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||SE(n,r)})}function SE(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Wp(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),I0(n))}function I_(n,e,t){for(const r of t)r instanceof bf?(n.oa.addReference(r.key,e),Qp(n,r)):r instanceof bE?(at("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||SE(n,r.key)):Mt()}function Qp(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(at("SyncEngine","New document in limbo: "+t),n.sa.add(r),I0(n))}function I0(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new ht(yt.fromString(e)),r=n.ca.next();n.ra.set(r,new v_(t)),n.ia=n.ia.insert(t,r),o_(n.remoteStore,new Sl(Lo(ed(t.path)),r,2,to.A))}}function Ol(n,e,t){return T0.apply(this,arguments)}function T0(){return T0=(0,We.Z)(function*(n,e,t){const r=pt(n),i=[],l=[],u=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,_)=>{u.push(r.la(_,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,C.fromCache?"not-current":"current"),i.push(C);const T=Qm.Ys(_.targetId,C);l.push(T)}}))}),yield Promise.all(u),r.ta.Qo(i),yield(f=(0,We.Z)(function*(_,C){const T=pt(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>He.forEach(C,k=>He.forEach(k.Hs,j=>T.persistence.referenceDelegate.addReference(S,k.targetId,j)).next(()=>He.forEach(k.Js,j=>T.persistence.referenceDelegate.removeReference(S,k.targetId,j)))))}catch(S){if(!Uc(S))throw S;at("LocalStore","Failed to update sequence numbers: "+S)}for(const S of C){const k=S.targetId;if(!S.fromCache){const j=T.ii.get(k),Ve=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);T.ii=T.ii.insert(k,Ve)}}}),function(_,C){return f.apply(this,arguments)})(r.localStore,l))}),T0.apply(this,arguments)}function gS(n,e){return D0.apply(this,arguments)}function D0(){return D0=(0,We.Z)(function*(n,e){const t=pt(n);if(!t.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const r=yield XD(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(u=>{u.forEach(f=>{f.reject(new nt(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ol(t,r.hi)}var i}),D0.apply(this,arguments)}function AE(n,e){const t=pt(n),r=t.ra.get(e);if(r&&r.Zu)return Zn().add(r.key);{let i=Zn();const l=t.na.get(e);if(!l)return i;for(const u of l){const f=t.ea.get(u);i=i.unionWith(f.view.Ku)}return i}}function mS(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,We.Z)(function*(n,e){const t=pt(n),r=yield Jm(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&I_(t,e.targetId,i.Hu),i}),S0.apply(this,arguments)}function If(n,e){return A0.apply(this,arguments)}function A0(){return A0=(0,We.Z)(function*(n,e){const t=pt(n);return Zv(t.localStore,e).then(r=>Ol(t,r))}),A0.apply(this,arguments)}function xE(n,e,t,r){return x0.apply(this,arguments)}function x0(){return x0=(0,We.Z)(function*(n,e,t,r){const i=pt(n),l=yield function(u,f){const _=pt(u),C=pt(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>C.fn(T,f).next(S=>S?_.ci.Ks(T,S):He.resolve(null)))}(i.localStore,e);var f;null!==l?("pending"===t?yield bd(i.remoteStore):"acknowledged"===t||"rejected"===t?(wf(i,e,r||null),E_(i,e),f=e,pt(pt(i.localStore).Bs)._n(f)):Mt(),yield Ol(i,l)):at("SyncEngine","Cannot apply mutation batch with id: "+e)}),x0.apply(this,arguments)}function M0(){return M0=(0,We.Z)(function*(n,e){const t=pt(n);if(k0(t),Xp(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield P0(t,r.toArray());t.ha=!0,yield h_(t.remoteStore,!0);for(const l of i)o_(t.remoteStore,l)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Ef(t,u),hf(t.localStore,u,!0))),Wp(t.remoteStore,u)}),yield i,yield P0(t,r),function(l){const u=pt(l);u.ra.forEach((f,_)=>{Wp(u.remoteStore,_)}),u.oa.bi(),u.ra=new Map,u.ia=new Rr(ht.comparator)}(t),t.ha=!1,yield h_(t.remoteStore,!1)}}),M0.apply(this,arguments)}function P0(n,e,t){return O0.apply(this,arguments)}function O0(){return O0=(0,We.Z)(function*(n,e,t){const r=pt(n),i=[],l=[];for(const u of e){let f;const _=r.na.get(u);if(_&&0!==_.length){f=yield df(r.localStore,Lo(_[0]));for(const C of _){const T=r.ea.get(C),S=yield mS(r,T);S.snapshot&&l.push(S.snapshot)}}else{const C=yield Wv(r.localStore,u);f=yield df(r.localStore,C),yield y0(r,T_(C),u,!1)}i.push(f)}return r.ta.Qo(l),i}),O0.apply(this,arguments)}function T_(n){return av(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _S(n){const e=pt(n);return pt(pt(e.localStore).persistence).Fs()}function PE(n,e,t,r){return D_.apply(this,arguments)}function D_(){return D_=(0,We.Z)(function*(n,e,t,r){const i=pt(n);if(i.ha)return void at("SyncEngine","Ignoring unexpected query state notification.");const l=i.na.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=yield Zv(i.localStore,wm(l[0])),f=Op.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ol(i,u,f);break}case"rejected":yield hf(i.localStore,e,!0),Ef(i,e,r);break;default:Mt()}}),D_.apply(this,arguments)}function yS(n,e,t){return R0.apply(this,arguments)}function R0(){return R0=(0,We.Z)(function*(n,e,t){const r=k0(n);if(r.ha){for(const i of e){if(r.na.has(i)){at("SyncEngine","Adding an already active target "+i);continue}const l=yield Wv(r.localStore,i),u=yield df(r.localStore,l);yield y0(r,T_(l),u.targetId,!1),o_(r.remoteStore,u)}for(const i of t)r.na.has(i)&&(yield hf(r.localStore,i,!1).then(()=>{Wp(r.remoteStore,i),Ef(r,i)}).catch(_d))}}),R0.apply(this,arguments)}function k0(n){const e=pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=b0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fS.bind(null,e),e.ta.Qo=cS.bind(null,e.eventManager),e.ta.fa=_E.bind(null,e.eventManager),e}function Xp(n){const e=pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wM.bind(null,e),e}class N0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,We.Z)(function*(){t.M=Hc(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return Gv(this.persistence,new Hv,e.initialUser,this.M)}wa(e){return new ma(t_.zi,this.M)}_a(e){return new eE}terminate(){var e=this;return(0,We.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OE extends N0{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,We.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield Xp(r.ya.syncEngine),yield bd(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return Gv(this.persistence,new Hv,e.initialUser,this.M)}ma(e){return new Hw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Km(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?no.withCacheSize(this.cacheSizeBytes):no.DEFAULT;return new Gp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,t0(),pf(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new eE}}class CS extends OE{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,We.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof r_&&(r.sharedClientState.syncEngine={Mr:xE.bind(null,i),Or:PE.bind(null,i),Fr:yS.bind(null,i),Fs:_S.bind(null,i),kr:If.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,We.Z)(function*(u){yield function ME(n,e){return M0.apply(this,arguments)}(r.ya.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}_a(e){const t=t0();if(!r_.vt(t))throw new nt(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Km(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new r_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class F0{initialize(e,t){var r=this;return(0,We.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>w0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=gS.bind(null,r.syncEngine),yield h_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new g_}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),r=new nE(e.databaseInfo);return new sE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=f=>w0(this.syncEngine,f,0),u=e0.vt()?new e0:new tE,new aE(t,r,i,l,u);var t,r,i,l,u}createSyncEngine(e,t){return function(r,i,l,u,f,_,C){const T=new EE(r,i,l,u,f,_);return C&&(T.ha=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,We.Z)(function*(t){const r=pt(t);at("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield mf(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function RE(n,e=10240){let t=0;return{read:()=>(0,We.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,We.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class S_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class bS{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Ui,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,We.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,We.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,We.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const l=yield e.ba(i);return new yE(JSON.parse(l),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,We.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,We.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,We.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class wS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,We.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new nt(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,We.Z)(function*(l,u){const f=pt(l),_=Rm(f.M)+"/documents",C={documents:u.map(j=>Rp(f.M,j))},T=yield f.ho("BatchGetDocuments",_,C),S=new Map;T.forEach(j=>{const oe=function mM(n,e){return"found"in e?function(t,r){ln(!!r.found);const i=qa(t,r.found.name),l=Ei(r.found.updateTime),u=new xs({mapValue:{fields:r.found.fields}});return Or.newFoundDocument(i,l,u)}(n,e):"missing"in e?function(t,r){ln(!!r.missing),ln(!!r.readTime);const i=qa(t,r.missing),l=Ei(r.readTime);return Or.newNoDocument(i,l)}(n,e):Mt()}(f.M,j);S.set(oe.key.toString(),oe)});const k=[];return u.forEach(j=>{const oe=S.get(j.toString());ln(!!oe),k.push(oe)}),k}),function(l,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Am(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,We.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=ht.fromPath(i);e.mutations.push(new gv(l,e.precondition(l)))}),yield(r=(0,We.Z)(function*(i,l){const u=pt(i),f=Rm(u.M)+"/documents",_={writes:l.map(C=>sd(u.M,C))};yield u.oo("Commit",f,_)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Mt();t=tn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new nt(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?li.updateTime(t):li.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tn.min()))throw new nt(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return li.updateTime(t)}return li.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ES{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new s_(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,We.Z)(function*(){const t=new wS(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.xa(l)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!Nh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mv(t)}return!1}}class kE{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=es.UNAUTHENTICATED,this.clientId=Wb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,We.Z)(function*(f){at("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(at("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,We.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nt(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,We.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=yf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function L0(n,e){return U0.apply(this,arguments)}function U0(){return U0=(0,We.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,We.Z)(function*(l){r.isEqual(l)||(yield XD(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),U0.apply(this,arguments)}function NE(n,e){return A_.apply(this,arguments)}function A_(){return A_=(0,We.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield B0(n);at("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>d_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>d_(e.remoteStore,l)),n.onlineComponents=e}),A_.apply(this,arguments)}function B0(n){return V0.apply(this,arguments)}function V0(){return V0=(0,We.Z)(function*(n){return n.offlineComponents||(at("FirestoreClient","Using default OfflineComponentProvider"),yield L0(n,new N0)),n.offlineComponents}),V0.apply(this,arguments)}function x_(n){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,We.Z)(function*(n){return n.onlineComponents||(at("FirestoreClient","Using default OnlineComponentProvider"),yield NE(n,new F0)),n.onlineComponents}),Jp.apply(this,arguments)}function M_(n){return B0(n).then(e=>e.persistence)}function P_(n){return B0(n).then(e=>e.localStore)}function O_(n){return x_(n).then(e=>e.remoteStore)}function $0(n){return x_(n).then(e=>e.syncEngine)}function Tf(n){return eg.apply(this,arguments)}function eg(){return eg=(0,We.Z)(function*(n){const e=yield x_(n),t=e.eventManager;return t.onListen=IE.bind(null,e.syncEngine),t.onUnlisten=Kp.bind(null,e.syncEngine),t}),eg.apply(this,arguments)}function j0(n,e,t={}){const r=new Ui;return n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return function(i,l,u,f,_){const C=new S_({next:S=>{l.enqueueAndForget(()=>m_(i,T));const k=S.docs.has(u);!k&&S.fromCache?_.reject(new nt(je.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&f&&"server"===f.source?_.reject(new nt(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new y_(ed(u.path),C,{includeMetadataChanges:!0,Cu:!0});return Nr(i,T)}(yield Tf(n),n.asyncQueue,e,t,r)})),r.promise}function H0(n,e,t={}){const r=new Ui;return n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return function(i,l,u,f,_){const C=new S_({next:S=>{l.enqueueAndForget(()=>m_(i,T)),S.fromCache&&"server"===f.source?_.reject(new nt(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new y_(u,C,{includeMetadataChanges:!0,Cu:!0});return Nr(i,T)}(yield Tf(n),n.asyncQueue,e,t,r)})),r.promise}const Ed=new Map;function Id(n,e,t){if(!t)throw new nt(je.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LE(n,e,t,r){if(!0===e&&!0===r)throw new nt(je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xS(n){if(!ht.isDocumentKey(n))throw new nt(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function G0(n){if(ht.isDocumentKey(n))throw new nt(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function k_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Mt()}function Ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new nt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=k_(n);throw new nt(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function UE(n,e){if(e<=0)throw new nt(je.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class BE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new nt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BE({}),this._settingsFrozen=!1,e instanceof $a?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new nt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(i.options.projectId)}(e))}get app(){if(!this._app)throw new nt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jb;switch(t.type){case"gapi":const r=t.client;return ln(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Gb(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new nt(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ed.get(e);t&&(at("ComponentProvider","Removing Datastore"),Ed.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class Ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ii(this.firestore,e,this._query)}}class Us extends Ii{constructor(e,t,r){super(e,t,ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new ht(e))}withConverter(e){return new Us(this.firestore,e,this._path)}}function $E(n,e,...t){if(n=(0,L.m9)(n),Id("collection","path",e),n instanceof Df){const r=yt.fromString(e,...t);return G0(r),new Us(n,null,r)}{if(!(n instanceof ar||n instanceof Us))throw new nt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return G0(r),new Us(n.firestore,null,r)}}function tg(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=Wb.R()),Id("doc","path",e),n instanceof Df){const r=yt.fromString(e,...t);return xS(r),new ar(n,null,new ht(r))}{if(!(n instanceof ar||n instanceof Us))throw new nt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return xS(r),new ar(n.firestore,n instanceof Us?n.converter:null,new ht(r))}}function HE(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof ar||n instanceof Us)&&(e instanceof ar||e instanceof Us)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function GE(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Ii&&e instanceof Ii&&n.firestore===e.firestore&&bm(n._query,e._query)&&n.converter===e.converter}class q0{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new s_(this,"async_queue_retry"),this.qa=()=>{const t=pf();t&&at("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=pf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=pf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Ui;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,We.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Uc(t))throw t;at("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Gr("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=m0.createAndSchedule(this,e,t,r,l=>this.ja(l));return this.Fa.push(i),i}Ka(){this.$a&&Mt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,We.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function z0(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class TM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fr extends Df{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new q0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||OS(this),this._firestoreClient.terminate()}}function Ir(n){return n._firestoreClient||OS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OS(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new fM(n._databaseId,l,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new kE(n._authCredentials,n._appCheckCredentials,n._queue,r)}function kS(n,e,t){const r=new Ui;return n.asyncQueue.enqueue((0,We.Z)(function*(){try{yield L0(n,t),yield NE(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===je.FAILED_PRECONDITION||l.code===je.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function ZE(n){if(n._initialized||n._terminated)throw new nt(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new nt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ka{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ka(nr.fromBase64String(e))}catch(t){throw new nt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ka(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Td{constructor(e){this._methodName=e}}class N_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pn(this._lat,e._lat)||pn(this._long,e._long)}}const LS=/^__.*__$/;class rg{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms):new nd(e,this.data,t,this.fieldTransforms)}}class Z0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt()}}class ig{constructor(e,t,r,i,l,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Ad(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Y0(this.Xa)&&LS.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class YE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Hc(e)}ac(e,t,r,i=!1){return new ig({Xa:e,methodName:t,uc:r,path:wi.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Gc(n){const e=n._freezeSettings(),t=Hc(n._databaseId);return new YE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function F_(n,e,t,r,i,l={}){const u=n.ac(l.merge||l.mergeFields?2:0,e,t,i);Sd("Data must be an object, but it was:",u,r);const f=QE(r,u);let _,C;if(l.merge)_=new Wu(u.fieldMask),C=u.fieldTransforms;else if(l.mergeFields){const T=[];for(const S of l.mergeFields){const k=X0(e,S,t);if(!u.contains(k))throw new nt(je.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);og(T,k)||T.push(k)}_=new Wu(T),C=u.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,C=u.fieldTransforms;return new rg(new xs(f),_,C)}class sg extends Td{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sg}}function KE(n,e,t){return new ig({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class K0 extends Td{_toFieldTransform(e){return new Gh(e.path,new td)}isEqual(e){return e instanceof K0}}class US extends Td{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=KE(this,e,!0),r=this.cc.map(l=>fs(l,t)),i=new Fc(r);return new Gh(e.path,i)}isEqual(e){return this===e}}class BS extends Td{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=KE(this,e,!0),r=this.cc.map(l=>fs(l,t)),i=new cs(r);return new Gh(e.path,i)}isEqual(e){return this===e}}class VS extends Td{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Hh(e.M,fv(e.M,this.hc));return new Gh(e.path,t)}isEqual(e){return this===e}}function Dd(n,e,t,r){const i=n.ac(1,e,t);Sd("Data must be an object, but it was:",i,r);const l=[],u=xs.empty();zu(r,(_,C)=>{const T=B_(e,_,t);C=(0,L.m9)(C);const S=i.sc(T);if(C instanceof sg)l.push(T);else{const k=fs(C,S);null!=k&&(l.push(T),u.set(T,k))}});const f=new Wu(l);return new Z0(u,f,i.fieldTransforms)}function Q0(n,e,t,r,i,l){const u=n.ac(1,e,t),f=[X0(e,r,t)],_=[i];if(l.length%2!=0)throw new nt(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)f.push(X0(e,l[k])),_.push(l[k+1]);const C=[],T=xs.empty();for(let k=f.length-1;k>=0;--k)if(!og(C,f[k])){const j=f[k];let oe=_[k];oe=(0,L.m9)(oe);const Ve=u.sc(j);if(oe instanceof sg)C.push(j);else{const rt=fs(oe,Ve);null!=rt&&(C.push(j),T.set(j,rt))}}const S=new Wu(C);return new Z0(T,S,u.fieldTransforms)}function L_(n,e,t,r=!1){return fs(t,n.ac(r?4:3,e))}function fs(n,e){if(U_(n=(0,L.m9)(n)))return Sd("Unsupported field value:",e,n),QE(n,e);if(n instanceof Td)return function(t,r){if(!Y0(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const u of t){let f=fs(u,r.ic(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qr.fromDate(t);return{timestampValue:id(r.M,i)}}if(t instanceof Qr){const i=new Qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:id(r.M,i)}}if(t instanceof N_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ka)return{bytesValue:bv(r.M,t._byteString)};if(t instanceof ar){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Om(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${k_(t)}`)}(n,e)}function QE(n,e){const t={};return Yb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zu(n,(r,i)=>{const l=fs(i,e.tc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function U_(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qr||n instanceof N_||n instanceof Ka||n instanceof ar||n instanceof Td)}function Sd(n,e,t){if(!U_(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=k_(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function X0(n,e,t){if((e=(0,L.m9)(e))instanceof Rl)return e._internalPath;if("string"==typeof e)return B_(n,e);throw Ad("Field path arguments must be of type string or ",n,!1,void 0,t)}const $S=new RegExp("[~\\*/\\[\\]]");function B_(n,e,t){if(e.search($S)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rl(...e.split("."))._internalPath}catch(r){throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ad(n,e,t,r,i){const l=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(l||u)&&(_+=" (found",l&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new nt(je.INVALID_ARGUMENT,f+n+_)}function og(n,e){return n.some(t=>t.isEqual(e))}class ag{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jS extends ag{data(){return super.data()}}function lg(n,e){return"string"==typeof e?B_(n,e):e instanceof Rl?e._internalPath:e._delegate._internalPath}class qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends ag{constructor(e,t,r,i,l,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sf extends ya{data(e={}){return super.data(e)}}class zc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sf(this._firestore,this._userDataWriter,r.key,r,new qc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Sf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new qc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new Sf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new qc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,C=-1;return 0!==u.type&&(_=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),C=l.indexOf(u.doc.key)),{type:HS(u.type),doc:f,oldIndex:_,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt()}}function GS(n,e){return n instanceof ya&&e instanceof ya?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof zc&&e instanceof zc&&n._firestore===e._firestore&&GE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function V_(n){if(Mp(n)&&0===n.explicitOrderBy.length)throw new nt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xd{}function kl(n,...e){for(const t of e)n=t._apply(n);return n}class J0 extends xd{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Gc(e.firestore),r=function(i,l,u,f,_,C,T){let S;if(_.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new nt(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){rI(T,C);const j=[];for(const oe of T)j.push(rC(f,i,oe));S={arrayValue:{values:j}}}else S=rC(f,i,T)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||rI(T,C),S=L_(u,"where",T,"in"===C||"not-in"===C);const k=qr.create(_,C,S);return function(j,oe){if(oe.S()){const rt=cv(j);if(null!==rt&&!rt.isEqual(oe.field))throw new nt(je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${rt.toString()}' and '${oe.field.toString()}'`);const Gt=lv(j);null!==Gt&&iC(0,oe.field,Gt)}const Ve=function(rt,Gt){for(const qt of rt.filters)if(Gt.indexOf(qt.op)>=0)return qt.op;return null}(j,function(rt){switch(rt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(oe.op));if(null!==Ve)throw new nt(je.INVALID_ARGUMENT,Ve===oe.op?`Invalid query. You cannot use more than one '${oe.op.toString()}' filter.`:`Invalid query. You cannot use '${oe.op.toString()}' filters with '${Ve.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Ii(e.firestore,e.converter,function(i,l){const u=i.filters.concat([l]);return new Nc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class qS extends xd{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new nt(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new nt(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Ju(i,l);return function(f,_){if(null===lv(f)){const C=cv(f);null!==C&&iC(0,C,_.field)}}(r,u),u}(e._query,this.lc,this._c);return new Ii(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new Nc(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class XE extends xd{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Ii(e.firestore,e.converter,DD(e._query,this.wc,this.mc))}}class $_ extends xd{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=nC(e,this.type,this.gc,this.yc);return new Ii(e.firestore,e.converter,(i=t,new Nc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class tC extends xd{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=nC(e,this.type,this.gc,this.yc);return new Ii(e.firestore,e.converter,(i=t,new Nc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function nC(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof ag)return function(i,l,u,f,_){if(!f)throw new nt(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const C=[];for(const T of jh(i))if(T.field.isKeyField())C.push(Ku(l,f.key));else{const S=f.data.field(T.field);if(Ip(S))throw new nt(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=T.field.canonicalString();throw new nt(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}C.push(S)}return new Ga(C,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Gc(n.firestore);return function(l,u,f,_,C,T){const S=l.explicitOrderBy;if(C.length>S.length)throw new nt(je.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let j=0;j<C.length;j++){const oe=C[j];if(S[j].field.isKeyField()){if("string"!=typeof oe)throw new nt(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof oe}`);if(!Ms(l)&&-1!==oe.indexOf("/"))throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${oe}' contains a slash.`);const Ve=l.path.child(yt.fromString(oe));if(!ht.isDocumentKey(Ve))throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const rt=new ht(Ve);k.push(Ku(u,rt))}else{const Ve=L_(f,_,oe);k.push(Ve)}}return new Ga(k,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function rC(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new nt(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ms(e)&&-1!==t.indexOf("/"))throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yt.fromString(t));if(!ht.isDocumentKey(r))throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ku(n,new ht(r))}if(t instanceof ar)return Ku(n,t._key);throw new nt(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${k_(t)}.`)}function rI(n,e){if(!Array.isArray(n)||0===n.length)throw new nt(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new nt(je.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function iC(n,e,t){if(!t.isEqual(e))throw new nt(je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sC{convertValue(e,t="none"){switch(Fh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mt()}}convertObject(e,t){const r={};return zu(e.fields,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new N_(Pr(e.latitude),Pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){const t=Pc(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yt.fromString(e);ln(Ow(r));const i=new $a(r.get(1),r.get(3)),l=new ht(r.popFirst(5));return i.isEqual(t)||Gr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Vi(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Af extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ka(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class iI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gc(e)}set(e,t,r){this._verifyNotCommitted();const i=Wc(e,this._firestore),l=Vi(i.converter,t,r),u=F_(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,li.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=Wc(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof Rl?Q0(this._dataReader,"WriteBatch.update",l._key,t,r,i):Dd(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,li.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wc(e,this._firestore);return this._mutations=this._mutations.concat(new Am(t._key,li.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wc(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new nt(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class va extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ka(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function oI(n,e,t){n=Ln(n,ar);const r=Ln(n.firestore,Fr),i=Vi(n.converter,e,t);return ug(r,[F_(Gc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,li.none())])}function j_(n,e,t,...r){n=Ln(n,ar);const i=Ln(n.firestore,Fr),l=Gc(i);let u;return u="string"==typeof(e=(0,L.m9)(e))||e instanceof Rl?Q0(l,"updateDoc",n._key,e,t,r):Dd(l,"updateDoc",n._key,e),ug(i,[u.toMutation(n._key,li.exists(!0))])}function cg(n,...e){var t,r,i;n=(0,L.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||z0(e[u])||(l=e[u],u++);const f={includeMetadataChanges:l.includeMetadataChanges};if(z0(e[u])){const S=e[u];e[u]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[u+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[u+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,C,T;if(n instanceof ar)C=Ln(n.firestore,Fr),T=ed(n._key.path),_={next:S=>{e[u]&&e[u](H_(C,n,S))},error:e[u+1],complete:e[u+2]};else{const S=Ln(n,Ii);C=Ln(S.firestore,Fr),T=S._query;const k=new va(C);_={next:j=>{e[u]&&e[u](new zc(C,k,S,j))},error:e[u+1],complete:e[u+2]},V_(n._query)}return function(S,k,j,oe){const Ve=new S_(oe),rt=new y_(k,Ve,j);return S.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return Nr(yield Tf(S),rt)})),()=>{Ve.Ia(),S.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return m_(yield Tf(S),rt)}))}}(Ir(C),T,f,_)}function ug(n,e){return function(t,r){const i=new Ui;return t.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return function hS(n,e,t){return C0.apply(this,arguments)}(yield $0(t),r,i)})),i.promise}(Ir(n),e)}function H_(n,e,t){const r=t.docs.get(e._key),i=new va(n);return new ya(n,i,e._key,r,new qc(t.hasPendingWrites,t.fromCache),e.converter)}class XS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gc(e)}get(e){const t=Wc(e,this._firestore),r=new Af(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Mt();const l=i[0];if(l.isFoundDocument())return new ag(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new ag(this._firestore,r,t._key,null,t.converter);throw Mt()})}set(e,t,r){const i=Wc(e,this._firestore),l=Vi(i.converter,t,r),u=F_(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const l=Wc(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof Rl?Q0(this._dataReader,"Transaction.update",l._key,t,r,i):Dd(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Wc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wc(e,this._firestore),r=new va(this._firestore);return super.get(e).then(i=>new ya(this._firestore,r,t._key,i._document,new qc(!1,!1),t.converter))}}function uC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new nt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function dC(){if("undefined"==typeof Uint8Array)throw new nt("unimplemented","Uint8Arrays are not available in this environment.")}function hC(){if(!function hm(){return"undefined"!=typeof atob}())throw new nt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){qu=vr.SDK_VERSION,(0,vr._registerComponent)(new Qi.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),l=new Fr(i,new Hb(t.getProvider("auth-internal")),new zb(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,vr.registerVersion)(wp,"3.4.8",n),(0,vr.registerVersion)(wp,"3.4.8","esm2017")}();class dg{constructor(e){this._delegate=e}static fromBase64String(e){return hC(),new dg(Ka.fromBase64String(e))}static fromUint8Array(e){return dC(),new dg(Ka.fromUint8Array(e))}toBase64(){return hC(),this._delegate.toBase64()}toUint8Array(){return dC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fC(n){return function pI(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class eA{enableIndexedDbPersistence(e,t){return function qE(n,e){ZE(n=Ln(n,Fr));const t=Ir(n),r=n._freezeSettings(),i=new F0;return kS(t,i,new OE(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function RS(n){ZE(n=Ln(n,Fr));const e=Ir(n),t=n._freezeSettings(),r=new F0;return kS(e,r,new CS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function zE(n){if(n._initialized&&!n._terminated)throw new nt(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ui;return n._queue.enqueueAndForgetEvenWhileRestricted((0,We.Z)(function*(){try{yield(t=(0,We.Z)(function*(r){if(!Vo.vt())return Promise.resolve();const i=r+"main";yield Vo.delete(i)}),function(r){return t.apply(this,arguments)})(Km(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $a||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function VE(n,e,t,r={}){var i;const l=(n=Ln(n,Df))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Mc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,f;if("string"==typeof r.mockUserToken)u=r.mockUserToken,f=es.MOCK_USER;else{u=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new nt(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new es(_)}n._authCredentials=new Qy(new $b(u,f))}}(this._delegate,e,t,r)}enableNetwork(){return function WE(n){return function IS(n){return n.asyncQueue.enqueue((0,We.Z)(function*(){const e=yield M_(n),t=yield O_(n);return e.setNetworkEnabled(!0),function(r){const i=pt(r);return i.fu.delete(0),gf(i)}(t)}))}(Ir(n=Ln(n,Fr)))}(this._delegate)}disableNetwork(){return function W0(n){return function FE(n){return n.asyncQueue.enqueue((0,We.Z)(function*(){const e=yield M_(n),t=yield O_(n);return e.setNetworkEnabled(!1),(r=(0,We.Z)(function*(i){const l=pt(i);l.fu.add(0),yield mf(l),l.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ir(n=Ln(n,Fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function DM(n){return function(e){const t=new Ui;return e.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return function EM(n,e){return DE.apply(this,arguments)}(yield $0(e),t)})),t.promise}(Ir(n=Ln(n,Fr)))}(this._delegate)}onSnapshotsInSync(e){return function aC(n,e){return function IM(n,e){const t=new S_(e);return n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return r=yield Tf(n),i=t,pt(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return r=yield Tf(n),i=t,void pt(r).Eu.delete(i);var r,i}))}}(Ir(n=Ln(n,Fr)),z0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new nt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fg(this,$E(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,tg(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bs(this,function jE(n,e){if(n=Ln(n,Df),Id("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new nt(je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ii(n,null,(t=e,new Nc(yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cI(n,e){return function SS(n,e){const t=new Ui;return n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){const r=yield(i=n,x_(i).then(l=>l.datastore));var i;new ES(n.asyncQueue,r,e,t).run()})),t.promise}(Ir(n=Ln(n,Fr)),t=>e(new XS(n,t)))}(this._delegate,t=>e(new gC(this,t)))}batch(){return Ir(this._delegate),new mI(new iI(this._delegate,e=>ug(this._delegate,e)))}loadBundle(e){return function NS(n,e){const t=Ir(n=Ln(n,Fr)),r=new TM;return function R_(n,e,t,r){const i=function(l,u){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,_=function(_,C){if(_ instanceof Uint8Array)return RE(_,C);if(_ instanceof ArrayBuffer)return RE(new Uint8Array(_),C);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new bS(_,u);var _}(t,Hc(e));n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){!function vS(n,e,t){const r=pt(n);var i;(i=(0,We.Z)(function*(l,u,f){try{const _=yield u.getMetadata();if(yield function(k,j){const oe=pt(k),Ve=Ei(j.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",rt=>oe._s.getBundleMetadata(rt,j.id)).then(rt=>!!rt&&rt.createTime.compareTo(Ve)>=0)}(l.localStore,_))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(k=_).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);f._updateProgress(CE(_));const C=new uS(_,l.localStore,u.M);let T=yield u.da();for(;T;){const k=yield C.ku(T);k&&f._updateProgress(k),T=yield u.da()}const S=yield C.complete();return yield Ol(l,S.Fu,void 0),yield function(k,j){const oe=pt(k);return oe.persistence.runTransaction("Save bundle","readwrite",Ve=>oe._s.saveBundleMetadata(Ve,j))}(l.localStore,_),f._completeWith(S.progress),Promise.resolve(S.Ou)}catch(_){return Mc("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var k}),function(l,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield $0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function FS(n,e){return function AS(n,e){return n.asyncQueue.enqueue((0,We.Z)(function*(){return function(t,r){const i=pt(t);return i.persistence.runTransaction("Get named query","readonly",l=>i._s.getNamedQuery(l,r))}(yield P_(n),e)}))}(Ir(n=Ln(n,Fr)),e).then(t=>t?new Ii(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Bs(this,t):null)}}class hg extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new dg(new Ka(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class gC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hg(e)}get(e){const t=Qa(e);return this._delegate.get(t).then(r=>new q_(this._firestore,new ya(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Qa(e);return r?(uC("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Qa(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Qa(e);return this._delegate.delete(t),this}}class mI{constructor(e){this._delegate=e}set(e,t,r){const i=Qa(e);return r?(uC("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Qa(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Qa(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Md{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Sf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new z_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Md.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new Md(e,new hg(e),t),i.set(t,l)),l}}Md.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hg(e)}static forPath(e,t,r){if(e.length%2!=0)throw new nt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new ar(t._delegate,r,new ht(e)))}static forKey(e,t,r){return new Ca(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fg(this.firestore,$E(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof ar&&HE(this._delegate,e)}set(e,t){t=uC("DocumentReference.set",t);try{return t?oI(this._delegate,e,t):oI(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?j_(this._delegate,e):j_(this._delegate,e,t,...r)}catch(i){throw ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function aI(n){return ug(Ln(n.firestore,Fr),[new Am(n._key,li.none())])}(this._delegate)}onSnapshot(...e){const t=tA(e),r=nA(e,i=>new q_(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cg(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function YS(n){n=Ln(n,ar);const e=Ln(n.firestore,Fr),t=Ir(e),r=new va(e);return function TS(n,e){const t=new Ui;return n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return(r=(0,We.Z)(function*(i,l,u){try{const f=yield function(_,C){const T=pt(_);return T.persistence.runTransaction("read document","readonly",S=>T.ci.Ls(S,C))}(i,l);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new nt(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=yf(f,`Failed to get document '${l} from cache`);u.reject(_)}}),function(i,l,u){return r.apply(this,arguments)})(yield P_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ya(e,r,n._key,i,new qc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function oC(n){n=Ln(n,ar);const e=Ln(n.firestore,Fr);return j0(Ir(e),n._key,{source:"server"}).then(t=>H_(e,n,t))}(this._delegate):function xM(n){n=Ln(n,ar);const e=Ln(n.firestore,Fr);return j0(Ir(e),n._key).then(t=>H_(e,n,t))}(this._delegate),t.then(r=>new q_(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function tA(n){for(const e of n)if("object"==typeof e&&!fC(e))return e;return{}}function nA(n,e){var t,r;let i;return i=fC(n[0])?n[0]:fC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class q_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GS(this._delegate,e._delegate)}}class z_ extends q_{data(e){const t=this._delegate.data(e);return function Ky(n,e){n||Mt()}(void 0!==t),t}}class Bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hg(e)}where(e,t,r){try{return new Bs(this.firestore,kl(this._delegate,function eC(n,e,t){const r=e,i=lg("where",n);return new J0(i,r,t)}(e,t,r)))}catch(i){throw ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Bs(this.firestore,kl(this._delegate,function zS(n,e="asc"){const t=e,r=lg("orderBy",n);return new qS(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bs(this.firestore,kl(this._delegate,function WS(n){return UE("limit",n),new XE("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Bs(this.firestore,kl(this._delegate,function JE(n){return UE("limitToLast",n),new XE("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bs(this.firestore,kl(this._delegate,function eI(...n){return new $_("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bs(this.firestore,kl(this._delegate,function tI(...n){return new $_("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bs(this.firestore,kl(this._delegate,function nI(...n){return new tC("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bs(this.firestore,kl(this._delegate,function ZS(...n){return new tC("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return GE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sI(n){n=Ln(n,Ii);const e=Ln(n.firestore,Fr),t=Ir(e),r=new va(e);return function DS(n,e){const t=new Ui;return n.asyncQueue.enqueueAndForget((0,We.Z)(function*(){return(r=(0,We.Z)(function*(i,l,u){try{const f=yield Jm(i,l,!0),_=new wE(l,f.li),C=_.Gu(f.documents),T=_.applyChanges(C,!1);u.resolve(T.snapshot)}catch(f){const _=yf(f,`Failed to execute query '${l} against cache`);u.reject(_)}}),function(i,l,u){return r.apply(this,arguments)})(yield P_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new zc(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function QS(n){n=Ln(n,Ii);const e=Ln(n.firestore,Fr),t=Ir(e),r=new va(e);return H0(t,n._query,{source:"server"}).then(i=>new zc(e,r,n,i))}(this._delegate):function KS(n){n=Ln(n,Ii);const e=Ln(n.firestore,Fr),t=Ir(e),r=new va(e);return V_(n._query),H0(t,n._query).then(i=>new zc(e,r,n,i))}(this._delegate),t.then(r=>new _I(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=tA(e),r=nA(e,i=>new _I(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cg(this._delegate,t,r)}withConverter(e){return new Bs(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}class PM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new z_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _I{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new z_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new PM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new z_(this._firestore,r))})}isEqual(e){return GS(this._delegate,e._delegate)}}class fg extends Bs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?tg(this._delegate):tg(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function lI(n,e){const t=Ln(n.firestore,Fr),r=tg(n),i=Vi(n.converter,e);return ug(t,[F_(Gc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,li.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return HE(this._delegate,e._delegate)}withConverter(e){return new fg(this.firestore,this._delegate.withConverter(e?Md.getInstance(this.firestore,e):null))}}function Qa(n){return Ln(n,ar)}class yI{constructor(...e){this._delegate=new Rl(...e)}static documentId(){return new yI(wi.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Rl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uI(){return new K0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zc(e)}static delete(){const e=function G_(){return new sg("deleteField")}();return e._methodName="FieldValue.delete",new Zc(e)}static arrayUnion(...e){const t=function JS(...n){return new US("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zc(t)}static arrayRemove(...e){const t=function lC(...n){return new BS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zc(t)}static increment(e){const t=function cC(n){return new VS("increment",n)}(e);return t._methodName="FieldValue.increment",new Zc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const mC={Firestore:pC,GeoPoint:N_,Timestamp:Qr,Blob:dg,Transaction:gC,WriteBatch:mI,DocumentReference:Ca,DocumentSnapshot:q_,Query:Bs,QueryDocumentSnapshot:z_,QuerySnapshot:_I,CollectionReference:fg,FieldPath:yI,FieldValue:Zc,setLogLevel:function gI(n){!function Yy(n){El.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function CI(n){(function vI(n,e){n.INTERNAL.registerComponent(new Qi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},mC)))})(n,(e,t)=>new pC(e,t,new eA)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Ks.Z);var ro=R(7579),pg=R(6451),gg=R(5363),Pd=R(8421);function Jr(n,e){return(0,er.e)((t,r)=>{let i=null,l=0,u=!1;const f=()=>u&&!i&&r.complete();t.subscribe((0,tr.x)(r,_=>{null==i||i.unsubscribe();let C=0;const T=l++;(0,Pd.Xf)(n(_,T)).subscribe(i=(0,tr.x)(r,S=>r.next(e?e(_,S,T,C++):S),()=>{i=null,f()}))},()=>{u=!0,f()}))})}var OM=R(6063);class bI extends ro.x{constructor(e=1/0,t=1/0,r=OM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:u}=this;t||(r.push(e),!i&&r.push(l.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let u=0;u<l.length&&!e.closed;u+=r?1:2)e.next(l[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const u=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)f=_;f&&r.splice(0,f+1)}}}var wI=R(3099);function W_(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,wI.B)({connector:()=>new bI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const _C=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var EI=R(5698);function iA(n){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,tr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function II(n=sA){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,tr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sA(){return new _C}function Od(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,l)=>n(i,l,r)):bs.y,(0,EI.q)(1),t?iA(e):II(()=>new _C))}var Nl=R(576);function TI(n,e){return(0,Nl.m)(e)?Jr(()=>n,e):Jr(()=>n)}var mg=R(9468);R(5867);const PI=new Map,OI={activated:!1,tokenObservers:[]},hA={initialized:!1,enabled:!1};function $i(n){return PI.get(n)||OI}function $o(n,e){PI.set(n,e)}function Z_(){return hA}class vC{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,We.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function CC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ps=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bC(n){if(!$i(n).activated)throw Ps.create("use-before-activation",{appName:n.name})}function BI(n,e){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,We.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const l={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,l)}catch(S){throw Ps.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==u.status)throw Ps.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(S){throw Ps.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const C=1e3*Number(_[1]),T=Date.now();return{token:f.attestationToken,expireTimeMillis:T+C,issuedAtTimeMillis:T}}),Y_.apply(this,arguments)}function _A(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const K_="firebase-app-check-store";let IC=null;function VI(){return IC||(IC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ps.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(K_,{keyPath:"compositeKey"})}}catch(t){e(Ps.create("storage-open",{originalErrorMessage:t.message}))}}),IC)}function X_(){return X_=(0,We.Z)(function*(n,e){const r=(yield VI()).transaction(K_,"readwrite"),l=r.objectStore(K_).put({compositeKey:n,value:e});return new Promise((u,f)=>{l.onsuccess=_=>{u()},r.onerror=_=>{var C;f(Ps.create("storage-set",{originalErrorMessage:null===(C=_.target.error)||void 0===C?void 0:C.message}))}})}),X_.apply(this,arguments)}const Rd=new yi.Yd("@firebase/app-check");function bA(n,e){return(0,L.hl)()?function vA(n,e){return function Yc(n,e){return X_.apply(this,arguments)}(function jI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wA(){return Z_().enabled}function DC(){return SC.apply(this,arguments)}function SC(){return SC=(0,We.Z)(function*(){const n=Z_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),SC.apply(this,arguments)}const IA={error:"UNKNOWN_ERROR"};function TA(n){return L.US.encodeString(JSON.stringify(n),!1)}function vg(n){return ey.apply(this,arguments)}function ey(){return ey=(0,We.Z)(function*(n,e=!1){const t=n.app;bC(t);const r=$i(t);let l,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&xC(_)&&(i=_)}if(!e&&i&&xC(i))return{token:i.token};let f,u=!1;if(wA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=BI(_A(t,yield DC()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),u=!0);const _=yield r.exchangeTokenPromise;return yield bA(t,_),$o(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Rd.warn(_.message):Rd.error(_),l=_}return i?(f={token:i.token},$o(t,Object.assign(Object.assign({},r),{token:i})),yield bA(t,i)):f=zI(l),u&&ny(t,f),f}),ey.apply(this,arguments)}function AC(n,e){const t=$i(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),$o(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function GI(n){const{app:e}=n,t=$i(e);let r=t.tokenRefresher;r||(r=function qI(n){const{app:e}=n;return new vC((0,We.Z)(function*(){let r;if(r=$i(e).token?yield vg(n,!0):yield vg(n),r.error)throw r.error}),()=>!0,()=>{const t=$i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),$o(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ny(n,e){const t=$i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function xC(n){return n.expireTimeMillis-Date.now()>0}function zI(n){return{token:TA(IA),error:n}}class MC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$i(this.app);for(const t of e)AC(this.app,t.next);return Promise.resolve()}}const M="app-check-internal";!function V(){(0,vr._registerComponent)(new Qi.wA("app-check",n=>function DA(n,e){return new MC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(M).initialize()})),(0,vr._registerComponent)(new Qi.wA(M,n=>function SA(n){return{getToken:e=>vg(n,e),addTokenListener:e=>function ty(n,e,t,r){const{app:i}=n,l=$i(i),u={next:t,error:r,type:e};if($o(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]})),l.token&&xC(l.token)){const f=l.token;Promise.resolve().then(()=>{t({token:f.token}),GI(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>GI(n))}(n,"INTERNAL",e),removeTokenListener:e=>AC(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vr.registerVersion)("@firebase/app-check","0.5.6")}();class Ye{constructor(){return(0,Cn.vb)("app-check")}}"undefined"!=typeof window&&window;var Pf=R(127);const Cg=new a.OlP("angularfire2.auth.use-emulator"),NA=new a.OlP("angularfire2.auth.settings"),FA=new a.OlP("angularfire2.auth.tenant-id"),LA=new a.OlP("angularfire2.auth.langugage-code"),UA=new a.OlP("angularfire2.auth.use-device-language"),BA=new a.OlP("angularfire.auth.persistence"),VA=(n,e,t,r,i,l,u,f)=>(0,Zr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,l&&_.useDeviceLanguage(),u)for(const[C,T]of Object.entries(u))_.settings[C]=T;return f&&_.setPersistence(f),_},[t,r,i,l,u,f]);let kC=(()=>{class n{constructor(t,r,i,l,u,f,_,C,T,S,k,j){const oe=new ro.x,Ve=Vt(void 0).pipe((0,gg.Q)(u.outsideAngular),Jr(()=>l.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,820)))),(0,At.U)(()=>(0,Zr.on)(t,l,r)),(0,At.U)(rt=>VA(rt,l,f,C,T,S,_,k)),W_({bufferSize:1,refCount:!1}));if(ni(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Vt(null);else{Ve.pipe(Od()).subscribe();const Gt=Ve.pipe(Jr(kt=>kt.getRedirectResult().then(gn=>gn,()=>null)),Cn.iC,W_({bufferSize:1,refCount:!1})),qt=Ve.pipe(Jr(kt=>new Pi.y(gn=>({unsubscribe:l.runOutsideAngular(()=>kt.onAuthStateChanged(kn=>gn.next(kn),kn=>gn.error(kn),()=>gn.complete()))})))),Bt=Ve.pipe(Jr(kt=>new Pi.y(gn=>({unsubscribe:l.runOutsideAngular(()=>kt.onIdTokenChanged(kn=>gn.next(kn),kn=>gn.error(kn),()=>gn.complete()))}))));this.authState=Gt.pipe(TI(qt),(0,mg.R)(u.outsideAngular),(0,gg.Q)(u.insideAngular)),this.user=Gt.pipe(TI(Bt),(0,mg.R)(u.outsideAngular),(0,gg.Q)(u.insideAngular)),this.idToken=this.user.pipe(Jr(kt=>kt?(0,Sn.D)(kt.getIdToken()):Vt(null))),this.idTokenResult=this.user.pipe(Jr(kt=>kt?(0,Sn.D)(kt.getIdTokenResult()):Vt(null))),this.credential=(0,pg.T)(Gt,oe,this.authState.pipe(ii(kt=>!kt))).pipe((0,At.U)(kt=>(null==kt?void 0:kt.user)?kt:null),(0,mg.R)(u.outsideAngular),(0,gg.Q)(u.insideAngular))}return(0,Zr.pX)(this,Ve,l,{spy:{apply:(rt,Gt,qt)=>{(rt.startsWith("signIn")||rt.startsWith("createUser"))&&qt.then(Bt=>oe.next(Bt))}}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Zr.Dh),a.LFG(Zr.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Cn.HU),a.LFG(Cg,8),a.LFG(NA,8),a.LFG(FA,8),a.LFG(LA,8),a.LFG(UA,8),a.LFG(BA,8),a.LFG(Ye,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LF=(()=>{class n{constructor(){Pf.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[kC]}),n})();function qM(n,e){return function UF(n,e=Yr.z){return new Pi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function $A(n,e){return qM(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function JI(n,e){return $A(n,e).pipe(ea(void 0),rh(),(0,At.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const _=i.find(T=>T.doc.ref.isEqual(u.ref)),C=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&C&&JSON.stringify(C.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),l}))}function zM(n,e,t){return JI(n,t).pipe(ta((r,i)=>function VF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function $F(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),Io(),(0,At.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function jA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function WM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ZM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=JI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ea(void 0),rh(),ii(([r,i])=>i.length>0||!r),(0,At.U)(([r,i])=>i),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ta((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WM(e);return zM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return $A(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new YM(this.ref.doc(e),this.afs)}}class YM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=XM(r,t);return new ZM(i,l,this.afs)}snapshotChanges(){return function BF(n,e){return qM(n,e).pipe(ea(void 0),rh(),(0,At.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Sn.D)(this.ref.get(e)).pipe(Cn.iC)}}class jF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?JI(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),Cn.iC):JI(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ta((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WM(e);return zM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return $A(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(Cn.iC)}}const KM=new a.OlP("angularfire2.enableFirestorePersistence"),QM=new a.OlP("angularfire2.firestore.persistenceSettings"),HF=new a.OlP("angularfire2.firestore.settings"),GF=new a.OlP("angularfire2.firestore.use-emulator");function XM(n,e=(t=>t)){return{query:e(n),ref:n}}let JM=(()=>{class n{constructor(t,r,i,l,u,f,_,C,T,S,k,j,oe,Ve,rt,Gt,qt){this.schedulers=_;const Bt=(0,Zr.on)(t,f,r),kt=T;S&&VA(Bt,f,k,oe,Ve,rt,j,Gt),[this.firestore,this.persistenceEnabled$]=(0,Zr.cc)(`${Bt.name}.firestore`,"AngularFirestore",Bt.name,()=>{const gn=f.runOutsideAngular(()=>Bt.firestore());if(l&&gn.settings(l),kt&&gn.useEmulator(...kt),i&&!ni(u)){const kn=()=>{try{return(0,Sn.D)(gn.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Gi){return"undefined"!=typeof console&&console.warn(Gi),Vt(!1)}};return[gn,f.runOutsideAngular(kn)]}return[gn,Vt(!1)]},[l,kt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:u}=XM(i,r),f=this.schedulers.ngZone.run(()=>l);return new ZM(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),l=this.firestore.collectionGroup(t);return new jF(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new YM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Zr.Dh),a.LFG(Zr.xv,8),a.LFG(KM,8),a.LFG(HF,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Cn.HU),a.LFG(QM,8),a.LFG(GF,8),a.LFG(kC,8),a.LFG(Cg,8),a.LFG(NA,8),a.LFG(FA,8),a.LFG(LA,8),a.LFG(UA,8),a.LFG(BA,8),a.LFG(Ye,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qF=(()=>{class n{constructor(){Pf.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:KM,useValue:!0},{provide:QM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[JM]}),n})();const eP_firebaseConfig={apiKey:"AIzaSyD-6DOdiXh4hf0uM2C_I6dLWz5ZQgo5byY",authDomain:"popexploreionic.firebaseapp.com",databaseURL:"https://popexploreionic-default-rtdb.europe-west1.firebasedatabase.app",projectId:"popexploreionic",storageBucket:"popexploreionic.appspot.com",messagingSenderId:"596279099707",appId:"1:596279099707:web:7e2b2078c17837cfbff71e"};class ba extends ro.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:zF}=Array,{getPrototypeOf:WF,prototype:ZF,keys:YF}=Object;const{isArray:QF}=Array;function HA(n){return(0,At.U)(e=>function XF(n,e){return QF(e)?n(...e):n(e)}(n,e))}var JF=R(9672);function eL(...n){const e=(0,Zs.yG)(n),t=(0,Zs.jO)(n),{args:r,keys:i}=function tP(n){if(1===n.length){const e=n[0];if(zF(e))return{args:e,keys:null};if(function KF(n){return n&&"object"==typeof n&&WF(n)===ZF}(e)){const t=YF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Sn.D)([],e);const l=new Pi.y(function tL(n,e,t=bs.y){return r=>{rP(e,()=>{const{length:i}=n,l=new Array(i);let u=i,f=i;for(let _=0;_<i;_++)rP(e,()=>{const C=(0,Sn.D)(n[_],e);let T=!1;C.subscribe((0,tr.x)(r,S=>{l[_]=S,T||(T=!0,f--),f||r.next(t(l.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>function nP(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,u):bs.y));return t?l.pipe(HA(t)):l}function rP(n,e,t){n?(0,JF.f)(t,n,e):e()}function eT(n,e){const t=(0,Nl.m)(n)?n:()=>n,r=i=>i.error(t());return new Pi.y(e?i=>e.schedule(r,0,i):r)}function iP(n){return new Pi.y(e=>{(0,Pd.Xf)(n()).subscribe(e)})}var ry=R(515),sP=R(727);function oP(){return(0,er.e)((n,e)=>{let t=null;n._refCount++;const r=(0,tr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,l=t;t=null,i&&(!l||i===l)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class nL extends Pi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,er.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sP.w0;const t=this.getSubject();e.add(this.source.subscribe((0,tr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sP.w0.EMPTY)}return e}refCount(){return oP()(this)}}function Of(n){return(0,er.e)((e,t)=>{let l,r=null,i=!1;r=e.subscribe((0,tr.x)(t,void 0,void 0,u=>{l=(0,Pd.Xf)(n(u,Of(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Os=R(5577);function NC(n,e){return(0,Nl.m)(e)?(0,Os.z)(n,e,1):(0,Os.z)(n,1)}function GA(n){return n<=0?()=>ry.E:(0,er.e)((e,t)=>{let r=[];e.subscribe((0,tr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var wa=R(8505);function qA(n){return(0,er.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class kd{constructor(e,t){this.id=e,this.url=t}}class tT extends kd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class FC extends kd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aP extends kd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class iL extends kd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sL extends kd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oL extends kd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aL extends kd{constructor(e,t,r,i,l){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lL extends kd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cL extends kd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lP{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cP{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uL{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dL{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hL{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fL{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xn="primary";class pL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function iy(n){return new pL(n)}const dP="ngNavigationCancelingError";function zA(n){const e=Error("NavigationCancelingError: "+n);return e[dP]=!0,e}function mL(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const u=r[l],f=n[l];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Kc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let l=0;l<t.length;l++)if(i=t[l],!hP(n[i],e[i]))return!1;return!0}function hP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,l)=>r[l]===i)}return n===e}function fP(n){return Array.prototype.concat.apply([],n)}function pP(n){return n.length>0?n[n.length-1]:null}function Rs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Qc(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,Sn.D)(Promise.resolve(n)):Vt(n)}const vL={exact:function _P(n,e,t){if(!wg(n.segments,e.segments)||!nT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_P(n.children[r],e.children[r],t))return!1;return!0},subset:yP},gP={exact:function CL(n,e){return Kc(n,e)},subset:function bL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hP(n[t],e[t]))},ignored:()=>!0};function mP(n,e,t){return vL[t.paths](n.root,e.root,t.matrixParams)&&gP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function yP(n,e,t){return vP(n,e,e.segments,t)}function vP(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!wg(i,t)||e.hasChildren()||!nT(i,t,r))}if(n.segments.length===t.length){if(!wg(n.segments,t)||!nT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!yP(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(wg(n.segments,i)&&nT(n.segments,i,r)&&n.children[xn])&&vP(n.children[xn],e,l,r)}}function nT(n,e,t){return e.every((r,i)=>gP[t](n[i].parameters,r.parameters))}class bg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iy(this.queryParams)),this._queryParamMap}toString(){return IL.serialize(this)}}class Bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Rs(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rT(this)}}class LC{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=iy(this.parameters)),this._parameterMap}toString(){return EP(this)}}function wg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class WA{}class CP{parse(e){const t=new RL(e);return new bg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${UC(e.root,!0)}`,r=function SL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${iT(t)}=${iT(i)}`).join("&"):`${iT(t)}=${iT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function TL(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const IL=new CP;function rT(n){return n.segments.map(e=>EP(e)).join("/")}function UC(n,e){if(!n.hasChildren())return rT(n);if(e){const t=n.children[xn]?UC(n.children[xn],!1):"",r=[];return Rs(n.children,(i,l)=>{l!==xn&&r.push(`${l}:${UC(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function EL(n,e){let t=[];return Rs(n.children,(r,i)=>{i===xn&&(t=t.concat(e(r,i)))}),Rs(n.children,(r,i)=>{i!==xn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===xn?[UC(n.children[xn],!1)]:[`${i}:${UC(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xn]?`${rT(n)}/${t[0]}`:`${rT(n)}/(${t.join("//")})`}}function bP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function iT(n){return bP(n).replace(/%3B/gi,";")}function ZA(n){return bP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sT(n){return decodeURIComponent(n)}function wP(n){return sT(n.replace(/\+/g,"%20"))}function EP(n){return`${ZA(n.path)}${function DL(n){return Object.keys(n).map(e=>`;${ZA(e)}=${ZA(n[e])}`).join("")}(n.parameters)}`}const AL=/^[^\/()?;=#]+/;function oT(n){const e=n.match(AL);return e?e[0]:""}const xL=/^[^=?&#]+/,PL=/^[^&#]+/;class RL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xn]=new Bn(e,t)),r}parseSegment(){const e=oT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new LC(sT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=oT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=oT(this.remaining);i&&(r=i,this.capture(r))}e[sT(t)]=sT(r)}parseQueryParam(e){const t=function ML(n){const e=n.match(xL);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function OL(n){const e=n.match(PL);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=wP(t),l=wP(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(l)}else e[i]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=oT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=xn);const u=this.parseChildren();t[l]=1===Object.keys(u).length?u[xn]:new Bn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class IP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=YA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=YA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=KA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return KA(e,this._root).map(t=>t.value)}}function YA(n,e){if(n===e.value)return e;for(const t of e.children){const r=YA(n,t);if(r)return r}return null}function KA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=KA(n,t);if(r.length)return r.unshift(e),r}return[]}class Nd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class TP extends IP{constructor(e,t){super(e),this.snapshot=t,QA(this,e)}toString(){return this.snapshot.toString()}}function DP(n,e){const t=function kL(n,e){const u=new aT([],{},{},"",{},xn,e,null,n.root,-1,{});return new AP("",new Nd(u,[]))}(n,e),r=new ba([new LC("",{})]),i=new ba({}),l=new ba({}),u=new ba({}),f=new ba(""),_=new Fd(r,i,u,f,l,xn,e,t.root);return _.snapshot=t.root,new TP(new Nd(_,[]),t)}class Fd{constructor(e,t,r,i,l,u,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>iy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>iy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function SP(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],l=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function NL(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class aT{constructor(e,t,r,i,l,u,f,_,C,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this.routeConfig=_,this._urlSegment=C,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AP extends IP{constructor(e,t){super(t),this.url=e,QA(this,t)}toString(){return xP(this._root)}}function QA(n,e){e.value._routerState=n,e.children.forEach(t=>QA(n,t))}function xP(n){const e=n.children.length>0?` { ${n.children.map(xP).join(", ")} } `:"";return`${n.value}${e}`}function XA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Kc(e.params,t.params)||n.params.next(t.params),function _L(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Kc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function JA(n,e){const t=Kc(n.params,e.params)&&function wL(n,e){return wg(n,e)&&n.every((t,r)=>Kc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||JA(n.parent,e.parent))}function BC(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function LL(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return BC(n,r,i);return BC(n,r)})}(n,e,t);return new Nd(r,i)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const u=l.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>BC(n,f)),u}}const r=function UL(n){return new Fd(new ba(n.url),new ba(n.params),new ba(n.queryParams),new ba(n.fragment),new ba(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(l=>BC(n,l));return new Nd(r,i)}}function lT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function VC(n){return"object"==typeof n&&null!=n&&n.outlets}function ex(n,e,t,r,i){let l={};if(r&&Rs(r,(f,_)=>{l[_]=Array.isArray(f)?f.map(C=>`${C}`):`${f}`}),n===e)return new bg(t,l,i);const u=MP(n,e,t);return new bg(u,l,i)}function MP(n,e,t){const r={};return Rs(n.children,(i,l)=>{r[l]=i===e?t:MP(i,e,t)}),new Bn(n.segments,r)}class PP{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&lT(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(VC);if(i&&i!==pP(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tx{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function OP(n,e,t){if(n||(n=new Bn([],{})),0===n.segments.length&&n.hasChildren())return cT(n,e,t);const r=function GL(n,e,t){let r=0,i=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return l;const u=n.segments[i],f=t[r];if(VC(f))break;const _=`${f}`,C=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&C&&"object"==typeof C&&void 0===C.outlets){if(!kP(_,C,u))return l;r+=2}else{if(!kP(_,{},u))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Bn(n.segments.slice(0,r.pathIndex),{});return l.children[xn]=new Bn(n.segments.slice(r.pathIndex),n.children),cT(l,0,i)}return r.match&&0===i.length?new Bn(n.segments,{}):r.match&&!n.hasChildren()?nx(n,e,t):r.match?cT(n,0,i):nx(n,e,t)}function cT(n,e,t){if(0===t.length)return new Bn(n.segments,{});{const r=function HL(n){return VC(n[0])?n[0].outlets:{[xn]:n}}(t),i={};return Rs(r,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[u]=OP(n.children[u],e,l))}),Rs(n.children,(l,u)=>{void 0===r[u]&&(i[u]=l)}),new Bn(n.segments,i)}}function nx(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const l=t[i];if(VC(l)){const _=qL(l.outlets);return new Bn(r,_)}if(0===i&&lT(t[0])){r.push(new LC(n.segments[e].path,RP(t[0]))),i++;continue}const u=VC(l)?l.outlets[xn]:`${l}`,f=i<t.length-1?t[i+1]:null;u&&f&&lT(f)?(r.push(new LC(u,RP(f))),i+=2):(r.push(new LC(u,{})),i++)}return new Bn(r,{})}function qL(n){const e={};return Rs(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=nx(new Bn([],{}),0,t))}),e}function RP(n){const e={};return Rs(n,(t,r)=>e[r]=`${t}`),e}function kP(n,e,t){return n==t.path&&Kc(e,t.parameters)}class WL{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),XA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=sy(t);e.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,i[u],r),delete i[u]}),Rs(i,(l,u)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(i===l)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=sy(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=sy(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=sy(t);e.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new fL(l.value.snapshot))}),e.children.length&&this.forwardEvent(new dL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(XA(i),i===l)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),XA(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=function ZL(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=_,u.outlet&&u.outlet.activateWith(i,_),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class rx{constructor(e,t){this.routes=e,this.module=t}}function Rf(n){return"function"==typeof n}function Eg(n){return n instanceof bg}const $C=Symbol("INITIAL_VALUE");function jC(){return Jr(n=>eL(n.map(e=>e.pipe((0,EI.q)(1),ea($C)))).pipe(ta((e,t)=>{let r=!1;return t.reduce((i,l,u)=>i!==$C?i:(l===$C&&(r=!0),r||!1!==l&&u!==t.length-1&&!Eg(l)?i:l),e)},$C),ii(e=>e!==$C),(0,At.U)(e=>Eg(e)?e:!0===e),(0,EI.q)(1)))}class e2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ig,this.attachRef=null}}class Ig{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new e2,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ix=(()=>{class n{constructor(t,r,i,l,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=l||xn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new t2(t,f,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Ig),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class t2{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fd?this.route:e===Ig?this.childContexts:this.parent.get(e,t)}}let NP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&a._UZ(0,"router-outlet")},directives:[ix],encapsulation:2}),n})();function FP(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];n2(r,r2(e,r))}}function n2(n,e){n.children&&FP(n.children,e)}function r2(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function sx(n){const e=n.children&&n.children.map(sx),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xn&&(t.component=NP),t}function Ja(n){return n.outlet||xn}function LP(n,e){const t=n.filter(r=>Ja(r)===e);return t.push(...n.filter(r=>Ja(r)!==e)),t}const UP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uT(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},UP):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||mL)(t,n,e);if(!l)return Object.assign({},UP);const u={};Rs(l.posParams,(_,C)=>{u[C]=_.path});const f=l.consumed.length>0?Object.assign(Object.assign({},u),l.consumed[l.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:f,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function dT(n,e,t,r,i="corrected"){if(t.length>0&&function o2(n,e,t){return t.some(r=>hT(n,e,r)&&Ja(r)!==xn)}(n,t,r)){const u=new Bn(e,function s2(n,e,t,r){const i={};i[xn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Ja(l)!==xn){const u=new Bn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Ja(l)]=u}return i}(n,e,r,new Bn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function a2(n,e,t){return t.some(r=>hT(n,e,r))}(n,t,r)){const u=new Bn(n.segments,function i2(n,e,t,r,i,l){const u={};for(const f of r)if(hT(n,t,f)&&!i[Ja(f)]){const _=new Bn([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===l?n.segments.length:e.length,u[Ja(f)]=_}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const l=new Bn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function hT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function BP(n,e,t,r){return!!(Ja(n)===r||r!==xn&&hT(e,t,n))&&("**"===n.path||uT(e,n,t).matched)}function VP(n,e,t){return 0===e.length&&!n.children[t]}class fT{constructor(e){this.segmentGroup=e||null}}class $P{constructor(e){this.urlTree=e}}function HC(n){return eT(new fT(n))}function jP(n){return eT(new $P(n))}function l2(n){return eT(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class d2{constructor(e,t,r,i,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(a.h0i)}apply(){const e=dT(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xn).pipe((0,At.U)(l=>this.createUrlTree(ox(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Of(l=>{if(l instanceof $P)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof fT?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xn).pipe((0,At.U)(i=>this.createUrlTree(ox(i),e.queryParams,e.fragment))).pipe(Of(i=>{throw i instanceof fT?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Bn([],{[xn]:e}):e;return new bg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(l=>new Bn([],l))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,Sn.D)(i).pipe(NC(l=>{const u=r.children[l],f=LP(t,l);return this.expandSegmentGroup(e,f,u,l).pipe((0,At.U)(_=>({segment:_,outlet:l})))}),ta((l,u)=>(l[u.outlet]=u.segment,l),{}),function rL(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,l)=>n(i,l,r)):bs.y,GA(1),t?iA(e):II(()=>new _C))}())}expandSegment(e,t,r,i,l,u){return(0,Sn.D)(r).pipe(NC(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,l,u).pipe(Of(C=>{if(C instanceof fT)return Vt(null);throw C}))),Od(f=>!!f),Of((f,_)=>{if(f instanceof _C||"EmptyError"===f.name)return VP(t,i,l)?Vt(new Bn([],{})):HC(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,l,u,f){return BP(i,t,l,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,l,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u):HC(t):HC(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jP(l):this.lineralizeSegments(r,l).pipe((0,Os.z)(u=>{const f=new Bn(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){const{matched:f,consumedSegments:_,remainingSegments:C,positionalParamSegments:T}=uT(t,i,l);if(!f)return HC(t);const S=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?jP(S):this.lineralizeSegments(i,S).pipe((0,Os.z)(k=>this.expandSegment(e,t,r,k.concat(C),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Vt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,At.U)(S=>(r._loadedConfig=S,new Bn(i,{})))):Vt(new Bn(i,{}));const{matched:u,consumedSegments:f,remainingSegments:_}=uT(t,r,i);return u?this.getChildConfig(e,r,i).pipe((0,Os.z)(T=>{const S=T.module,k=T.routes,{segmentGroup:j,slicedSegments:oe}=dT(t,f,_,k),Ve=new Bn(j.segments,j.children);if(0===oe.length&&Ve.hasChildren())return this.expandChildren(S,k,Ve).pipe((0,At.U)(Bt=>new Bn(f,Bt)));if(0===k.length&&0===oe.length)return Vt(new Bn(f,{}));const rt=Ja(r)===l;return this.expandSegment(S,Ve,k,oe,rt?xn:l,!0).pipe((0,At.U)(qt=>new Bn(f.concat(qt.segments),qt.children)))})):HC(t)}getChildConfig(e,t,r){return t.children?Vt(new rx(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Vt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Os.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,At.U)(l=>(t._loadedConfig=l,l))):function c2(n){return eT(zA(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Vt(new rx([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return Vt(!0);const l=i.map(u=>{const f=e.get(u);let _;if(function KL(n){return n&&Rf(n.canLoad)}(f))_=f.canLoad(t,r);else{if(!Rf(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}return Qc(_)});return Vt(l).pipe(jC(),(0,wa.b)(u=>{if(!Eg(u))return;const f=zA(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw f.url=u,f}),(0,At.U)(u=>!0===u))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Vt(r);if(i.numberOfChildren>1||!i.children[xn])return l2(e.redirectTo);i=i.children[xn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const l=this.createSegmentGroup(e,t.root,r,i);return new bg(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Rs(e,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=t[f]}else r[l]=i}),r}createSegmentGroup(e,t,r,i){const l=this.createSegments(e,t.segments,r,i);let u={};return Rs(t.children,(f,_)=>{u[_]=this.createSegmentGroup(e,f,r,i)}),new Bn(l,u)}createSegments(e,t,r,i){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,i):this.findOrReturn(l,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function ox(n){const e={};for(const r of Object.keys(n.children)){const l=ox(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function h2(n){if(1===n.numberOfChildren&&n.children[xn]){const e=n.children[xn];return new Bn(n.segments.concat(e.segments),e.children)}return n}(new Bn(n.segments,e))}class HP{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pT{constructor(e,t){this.component=e,this.route=t}}function p2(n,e,t){const r=n._root;return GC(r,e?e._root:null,t,[r.value])}function gT(n,e,t){const r=function m2(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function GC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=sy(e);return n.children.forEach(u=>{(function _2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const _=function y2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wg(n.url,e.url)||!Kc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JA(n,e)||!Kc(n.queryParams,e.queryParams);default:return!JA(n,e)}}(u,l,l.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new HP(r)):(l.data=u.data,l._resolvedData=u._resolvedData),GC(n,e,l.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new pT(f.outlet.component,u))}else u&&qC(e,f,i),i.canActivateChecks.push(new HP(r)),GC(n,null,l.component?f?f.children:null:t,r,i)})(u,l[u.value.outlet],t,r.concat([u.value]),i),delete l[u.value.outlet]}),Rs(l,(u,f)=>qC(u,t.getContext(f),i)),i}function qC(n,e,t){const r=sy(n),i=n.value;Rs(r,(l,u)=>{qC(l,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new pT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class S2{}function GP(n){return new Pi.y(e=>e.error(n))}class x2{constructor(e,t,r,i,l,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=u}recognize(){const e=dT(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xn);if(null===t)return null;const r=new aT([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Nd(r,t),l=new AP(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=SP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const u=t.children[l],f=LP(e,l),_=this.processSegmentGroup(f,u,l);if(null===_)return null;r.push(..._)}const i=qP(r);return function M2(n){n.sort((e,t)=>e.value.outlet===xn?-1:t.value.outlet===xn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const l of e){const u=this.processSegmentAgainstRoute(l,t,r,i);if(null!==u)return u}return VP(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!BP(e,t,r,i))return null;let l,u=[],f=[];if("**"===e.path){const j=r.length>0?pP(r).parameters:{};l=new aT(r,j,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ZP(e),Ja(e),e.component,e,zP(t),WP(t)+r.length,YP(e))}else{const j=uT(t,e,r);if(!j.matched)return null;u=j.consumedSegments,f=j.remainingSegments,l=new aT(u,j.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ZP(e),Ja(e),e.component,e,zP(t),WP(t)+u.length,YP(e))}const _=function P2(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:T}=dT(t,u,f,_.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);if(0===T.length&&C.hasChildren()){const j=this.processChildren(_,C);return null===j?null:[new Nd(l,j)]}if(0===_.length&&0===T.length)return[new Nd(l,[])];const S=Ja(e)===i,k=this.processSegment(_,C,T,S?xn:i);return null===k?null:[new Nd(l,k)]}}function O2(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qP(n){const e=[],t=new Set;for(const r of n){if(!O2(r)){e.push(r);continue}const i=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=qP(r.children);e.push(new Nd(r.value,i))}return e.filter(r=>!t.has(r))}function zP(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function WP(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ZP(n){return n.data||{}}function YP(n){return n.resolve||{}}function KP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ax(n){return Jr(e=>{const t=n(e);return t?(0,Sn.D)(t).pipe((0,At.U)(()=>e)):Vt(e)})}class V2 extends class B2{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lx=new a.OlP("ROUTES");class QP{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,At.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=l.create(e);return new rx(fP(u.injector.get(lx,void 0,a.XFs.Self|a.XFs.Optional)).map(sx),u)}),Of(l=>{throw t._loader$=void 0,l}));return t._loader$=new nL(i,()=>new ro.x).pipe(oP()),t._loader$}loadModuleFactory(e){return Qc(e()).pipe((0,Os.z)(t=>t instanceof a.YKP?Vt(t):(0,Sn.D)(this.compiler.compileModuleAsync(t))))}}class j2{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function H2(n){throw n}function G2(n,e,t){return e.parse("/")}function XP(n,e){return Vt(null)}const q2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},z2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ji=(()=>{class n{constructor(t,r,i,l,u,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ro.x,this.errorHandler=H2,this.malformedUriErrorHandler=G2,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:XP,afterPreactivation:XP},this.urlHandlingStrategy=new j2,this.routeReuseStrategy=new V2,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(a.h0i),this.console=u.get(a.c2e);const S=u.get(a.R0b);this.isNgZoneEnabled=S instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function yL(){return new bg(new Bn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new QP(u,f,k=>this.triggerEvent(new lP(k)),k=>this.triggerEvent(new cP(k))),this.routerState=DP(this.currentUrlTree,this.rootComponentType),this.transitions=new ba({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ii(i=>0!==i.id),(0,At.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Jr(i=>{let l=!1,u=!1;return Vt(i).pipe((0,wa.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Jr(f=>{const _=this.browserUrlTree.toString(),C=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return JP(f.source)&&(this.browserUrlTree=f.extractedUrl),Vt(f).pipe(Jr(S=>{const k=this.transitions.getValue();return r.next(new tT(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?ry.E:Promise.resolve(S)}),function f2(n,e,t,r){return Jr(i=>function u2(n,e,t,r,i){return new d2(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,At.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,wa.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function R2(n,e,t,r,i){return(0,Os.z)(l=>function A2(n,e,t,r,i="emptyOnly",l="legacy"){try{const u=new x2(n,e,t,r,i,l).recognize();return null===u?GP(new S2):Vt(u)}catch(u){return GP(u)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,i).pipe((0,At.U)(u=>Object.assign(Object.assign({},l),{targetSnapshot:u}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,wa.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(j,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new sL(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:j,source:oe,restoredState:Ve,extras:rt}=f,Gt=new tT(k,this.serializeUrl(j),oe,Ve);r.next(Gt);const qt=DP(j,this.rootComponentType).snapshot;return Vt(Object.assign(Object.assign({},f),{targetSnapshot:qt,urlAfterRedirects:j,extras:Object.assign(Object.assign({},rt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),ry.E}),ax(f=>{const{targetSnapshot:_,id:C,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:j}}=f;return this.hooks.beforePreactivation(_,{navigationId:C,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!j})}),(0,wa.b)(f=>{const _=new oL(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,At.U)(f=>Object.assign(Object.assign({},f),{guards:p2(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function v2(n,e){return(0,Os.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:u}}=t;return 0===u.length&&0===l.length?Vt(Object.assign(Object.assign({},t),{guardsResult:!0})):function C2(n,e,t,r){return(0,Sn.D)(n).pipe((0,Os.z)(i=>function D2(n,e,t,r,i){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?Vt(l.map(f=>{const _=gT(f,e,i);let C;if(function JL(n){return n&&Rf(n.canDeactivate)}(_))C=Qc(_.canDeactivate(n,e,t,r));else{if(!Rf(_))throw new Error("Invalid CanDeactivate guard");C=Qc(_(n,e,t,r))}return C.pipe(Od())})).pipe(jC()):Vt(!0)}(i.component,i.route,t,e,r)),Od(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Os.z)(f=>f&&function YL(n){return"boolean"==typeof n}(f)?function b2(n,e,t,r){return(0,Sn.D)(e).pipe(NC(i=>Eu(function E2(n,e){return null!==n&&e&&e(new uL(n)),Vt(!0)}(i.route.parent,r),function w2(n,e){return null!==n&&e&&e(new hL(n)),Vt(!0)}(i.route,r),function T2(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(u=>function g2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>iP(()=>Vt(u.guards.map(_=>{const C=gT(_,u.node,t);let T;if(function XL(n){return n&&Rf(n.canActivateChild)}(C))T=Qc(C.canActivateChild(r,n));else{if(!Rf(C))throw new Error("Invalid CanActivateChild guard");T=Qc(C(r,n))}return T.pipe(Od())})).pipe(jC())));return Vt(l).pipe(jC())}(n,i.path,t),function I2(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Vt(!0);const i=r.map(l=>iP(()=>{const u=gT(l,e,t);let f;if(function QL(n){return n&&Rf(n.canActivate)}(u))f=Qc(u.canActivate(e,n));else{if(!Rf(u))throw new Error("Invalid CanActivate guard");f=Qc(u(e,n))}return f.pipe(Od())}));return Vt(i).pipe(jC())}(n,i.route,t))),Od(i=>!0!==i,!0))}(r,l,n,e):Vt(f)),(0,At.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,wa.b)(f=>{if(Eg(f.guardsResult)){const C=zA(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw C.url=f.guardsResult,C}const _=new aL(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),ii(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),ax(f=>{if(f.guards.canActivateChecks.length)return Vt(f).pipe((0,wa.b)(_=>{const C=new lL(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}),Jr(_=>{let C=!1;return Vt(_).pipe(function k2(n,e){return(0,Os.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Vt(t);let l=0;return(0,Sn.D)(i).pipe(NC(u=>function N2(n,e,t,r){return function F2(n,e,t,r){const i=KP(n);if(0===i.length)return Vt({});const l={};return(0,Sn.D)(i).pipe((0,Os.z)(u=>function L2(n,e,t,r){const i=gT(n,e,r);return Qc(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,wa.b)(f=>{l[u]=f}))),GA(1),(0,Os.z)(()=>KP(l).length===i.length?Vt(l):ry.E))}(n._resolve,n,e,r).pipe((0,At.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),SP(n,t).resolve),null)))}(u.route,r,n,e)),(0,wa.b)(()=>l++),GA(1),(0,Os.z)(u=>l===i.length?Vt(t):ry.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,wa.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,wa.b)(_=>{const C=new cL(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}))}),ax(f=>{const{targetSnapshot:_,id:C,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:j}}=f;return this.hooks.afterPreactivation(_,{navigationId:C,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!j})}),(0,At.U)(f=>{const _=function FL(n,e,t){const r=BC(n,e._root,t?t._root:void 0);return new TP(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,wa.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new WL(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,wa.b)({next(){l=!0},complete(){l=!0}}),qA(()=>{var f;l||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Of(f=>{if(u=!0,function gL(n){return n&&n[dP]}(f)){const _=Eg(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const C=new aP(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(C),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||JP(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new iL(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(C){i.reject(C)}}return ry.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const l={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const _=Object.assign({},u);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(l.state=_)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,u,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){FP(t),this.config=t.map(sx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:l,fragment:u,queryParamsHandling:f,preserveFragment:_}=r,C=i||this.routerState.root,T=_?this.currentUrlTree.fragment:u;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=l||null}return null!==S&&(S=this.removeEmptyProps(S)),function BL(n,e,t,r,i){if(0===t.length)return ex(e.root,e.root,e.root,r,i);const l=function VL(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new PP(!0,0,n);let e=0,t=!1;const r=n.reduce((i,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return Rs(l.outlets,(_,C)=>{f[C]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===u?(l.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new PP(t,e,r)}(t);if(l.toRoot())return ex(e.root,e.root,new Bn([],{}),r,i);const u=function $L(n,e,t){if(n.isAbsolute)return new tx(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new tx(l,l===e.root,0)}const r=lT(n.commands[0])?0:1;return function jL(n,e,t){let r=n,i=e,l=t;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new tx(r,!1,i-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),f=u.processChildren?cT(u.segmentGroup,u.index,l.commands):OP(u.segmentGroup,u.index,l.commands);return ex(e.root,u.segmentGroup,f,r,i)}(C,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Eg(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function W2(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},q2):!1===r?Object.assign({},z2):r,Eg(t))return mP(this.currentUrlTree,t,i);const l=this.parseUrl(t);return mP(this.currentUrlTree,l,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const l=t[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new FC(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,l,u){var f,_;if(this.disposed)return Promise.resolve(!1);let C,T,S;u?(C=u.resolve,T=u.reject,S=u.promise):S=new Promise((oe,Ve)=>{C=oe,T=Ve});const k=++this.navigationId;let j;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),j=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):j=0,this.setTransition({id:k,targetPageId:j,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:C,reject:T,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(oe=>Promise.reject(oe))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(t,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new aP(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function JP(n){return"imperative"!==n}let Ea=(()=>{class n{constructor(t,r,i,l,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=l,this.el=u,this.commands=null,this.onChanges=new ro.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:oy(this.skipLocationChange),replaceUrl:oy(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:oy(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(ji),a.Y36(Fd),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&a.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),n})(),kf=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ro.x,this.subscription=t.events.subscribe(l=>{l instanceof FC&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,l,u){if(0!==t||r||i||l||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:oy(this.skipLocationChange),replaceUrl:oy(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:oy(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(ji),a.Y36(Fd),a.Y36(K))},n.\u0275dir=a.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&a.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&a.uIk("target",r.target)("href",r.href,a.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),n})();function oy(n){return""===n||!!n}class eO{}class tO{preload(e,t){return Vt(null)}}let nO=(()=>{class n{constructor(t,r,i,l){this.router=t,this.injector=i,this.preloadingStrategy=l,this.loader=new QP(i,r,_=>t.triggerEvent(new lP(_)),_=>t.triggerEvent(new cP(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof FC),NC(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(a.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const u=l._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(t,l)):l.children&&i.push(this.processRoutes(t,l.children));return(0,Sn.D)(i).pipe((0,fl.J)(),(0,At.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Vt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Os.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ji),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(eO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),cx=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof FC&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new uP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Tg=new a.OlP("ROUTER_CONFIGURATION"),rO=new a.OlP("ROUTER_FORROOT_GUARD"),Q2=[_e,{provide:WA,useClass:CP},{provide:ji,useFactory:function nU(n,e,t,r,i,l,u={},f,_){const C=new ji(null,n,e,t,r,i,fP(l));return f&&(C.urlHandlingStrategy=f),_&&(C.routeReuseStrategy=_),function rU(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,C),u.enableTracing&&C.events.subscribe(T=>{var S,k;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(k=console.groupEnd)||void 0===k||k.call(console)}),C},deps:[WA,Ig,_e,a.zs3,a.Sil,lx,Tg,[class $2{},new a.FiY],[class U2{},new a.FiY]]},Ig,{provide:Fd,useFactory:function iU(n){return n.routerState.root},deps:[ji]},nO,tO,class K2{preload(e,t){return t().pipe(Of(()=>Vt(null)))}},{provide:Tg,useValue:{enableTracing:!1}}];function X2(){return new a.PXZ("Router",ji)}let iO=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Q2,sO(t),{provide:rO,useFactory:tU,deps:[[ji,new a.FiY,new a.tp0]]},{provide:Tg,useValue:r||{}},{provide:K,useFactory:eU,deps:[Ee,[new a.tBr(qe),new a.FiY],Tg]},{provide:cx,useFactory:J2,deps:[ji,Wl,Tg]},{provide:eO,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:tO},{provide:a.PXZ,multi:!0,useFactory:X2},[ux,{provide:a.ip1,multi:!0,useFactory:sU,deps:[ux]},{provide:oO,useFactory:oU,deps:[ux]},{provide:a.tb,multi:!0,useExisting:oO}]]}}static forChild(t){return{ngModule:n,providers:[sO(t)]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(rO,8),a.LFG(ji,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function J2(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new cx(n,e,t)}function eU(n,e,t={}){return t.useHash?new Ae(n,e):new Ue(n,e)}function tU(n){return"guarded"}function sO(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:lx,multi:!0,useValue:n}]}let ux=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ro.x}appInitializer(){return this.injector.get(Y,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),l=this.injector.get(ji),u=this.injector.get(Tg);return"disabled"===u.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?Vt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Tg),i=this.injector.get(nO),l=this.injector.get(cx),u=this.injector.get(ji),f=this.injector.get(a.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),l.init(),u.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function sU(n){return n.appInitializer.bind(n)}function oU(n){return n.bootstrapListener.bind(n)}const oO=new a.OlP("Router Initializer");var lU=R(5032);const aO="@firebase/database";let dx="";function cO(n){dx=n}class dU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class hU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const uO=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dU(e)}}catch(e){}return new hU},Dg=uO("localStorage"),hx=uO("sessionStorage"),ay=new yi.Yd("@firebase/database"),dO=function(){let n=1;return function(){return n++}}(),hO=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},zC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=zC.apply(null,r):e+="object"==typeof r?(0,L.Pz)(r):r,e+=" "}return e};let Sg=null,fO=!0;const pO=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ay.logLevel=yi.in.VERBOSE,Sg=ay.log.bind(ay),e&&hx.set("logging_enabled",!0)):"function"==typeof n?Sg=n:(Sg=null,hx.remove("logging_enabled"))},gs=function(...n){if(!0===fO&&(fO=!1,null===Sg&&!0===hx.get("logging_enabled")&&pO(!0)),Sg){const e=zC.apply(null,n);Sg(e)}},WC=function(n){return function(...e){gs(n,...e)}},fx=function(...n){const e="FIREBASE INTERNAL ERROR: "+zC(...n);ay.error(e)},Xc=function(...n){const e=`FIREBASE FATAL ERROR: ${zC(...n)}`;throw ay.error(e),new Error(e)},io=function(...n){const e="FIREBASE WARNING: "+zC(...n);ay.warn(e)},mT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ld="[MIN_NAME]",Jc="[MAX_NAME]",Ag=function(n,e){if(n===e)return 0;if(n===Ld||e===Jc)return-1;if(e===Ld||n===Jc)return 1;{const t=_T(n),r=_T(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},gU=function(n,e){return n===e?0:n<e?-1:1},ZC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(e))},px=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Pz)(e[r]),t+=":",t+=px(n[e[r]]);return t+="}",t},gO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ms(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const mO=function(n){(0,L.hu)(!mT(n),"Invalid JSON number");const r=1023;let i,l,u,f,_;0===n?(l=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,u=Math.round(n/Math.pow(2,-1074))));const C=[];for(_=52;_;_-=1)C.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)C.push(l%2?1:0),l=Math.floor(l/2);C.push(i?1:0),C.reverse();const T=C.join("");let S="";for(_=0;_<64;_+=8){let k=parseInt(T.substr(_,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},vU=new RegExp("^-?(0*)\\d{1,10}$"),_O=-2147483648,gx=2147483647,_T=function(n){if(vU.test(n)){const e=Number(n);if(e>=_O&&e<=gx)return e}return null},ly=function(n){try{n()}catch(e){setTimeout(()=>{throw io("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},YC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class bU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){io(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(gs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',io(e)}}let KC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,IO="websocket",TO="long_polling";class _x{constructor(e,t,r,i,l=!1,u="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function DO(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===IO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==TO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function IU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ms(t,(l,u)=>{i.push(l+"="+u)}),r+i.join("&")}class TU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const yx={},vx={};function Cx(n){const e=n.toString();return yx[e]||(yx[e]=new TU),yx[e]}class SU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ly(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cy{constructor(e,t,r,i,l,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=WC(e),this.stats_=Cx(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),DO(t,TO,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new SU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bx((...l)=>{const[u,f,_,C,T]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&wO.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cy.forceAllow_=!0}static forceDisallow(){cy.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!cy.forceAllow_&&(cy.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=gO(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class bx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=dO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=bx.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){gs("frame writing exception"),f.stack&&gs(f.stack),gs(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gs("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{gs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let QC=null;"undefined"!=typeof MozWebSocket?QC=MozWebSocket:"undefined"!=typeof WebSocket&&(QC=WebSocket);let XC=(()=>{class n{constructor(t,r,i,l,u,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=WC(this.connId),this.stats_=Cx(r),this.connURL=n.connectionURL_(r,f,_,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,l){const u={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&wO.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),l&&(u.ac=l),DO(t,IO,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dg.set("previous_websocket_failure",!0);try{if((0,L.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${dx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new QC(this.connURL,[],l)}else this.mySock=new QC(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==QC&&!n.forceDisallow_}static previouslyFailed(){return Dg.isInMemoryStorage||!0===Dg.get("previous_websocket_failure")}markConnectionHealthy(){Dg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=gO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class wx{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[cy,XC]}initTransports_(e){const t=XC&&XC.isAvailable();let r=t&&!XC.previouslyFailed();if(e.webSocketOnly&&(t||io("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[XC];else{const i=this.transports_=[];for(const l of wx.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class BO{constructor(e,t,r,i,l,u,f,_,C,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=_,this.onKill_=C,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=WC("c:"+this.id+":"),this.transportManager_=new wx(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=YC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ZC("t",e),r=ZC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ZC("t",e),r=ZC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ZC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?fx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&io("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),YC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):YC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class VO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class $O{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let l=0;l<i.length;l++)if(i[l].callback===t&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class vT extends $O{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vT}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ir{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Kn(){return new ir("")}function Mn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Nf(n){return n.pieces_.length-n.pieceNum_}function Tr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ir(n.pieces_,e)}function Ix(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function JC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function GO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ir(e,0)}function zr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ir)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ir(t,0)}function Pn(n){return n.pieceNum_>=n.pieces_.length}function so(n,e){const t=Mn(n),r=Mn(e);if(null===t)return e;if(t===r)return so(Tr(n),Tr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function YU(n,e){const t=JC(n,0),r=JC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const l=Ag(t[i],r[i]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function Tx(n,e){if(Nf(n)!==Nf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function el(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Nf(n)>Nf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class KU{constructor(e,t){this.errorPrefix_=t,this.parts_=JC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);qO(this)}}function qO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xg(n))}function xg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Dx extends $O{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Dx}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const eb=1e3;let bT,Mg=(()=>{class n extends VO{constructor(t,r,i,l,u,f,_,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=WC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=eb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Dx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&vT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const l=++this.requestNumber_,u={r:l,a:t,b:r};this.log_((0,L.Pz)(u)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[l]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject},l={action:"g",request:i,onComplete:f=>{const _=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[u];void 0===f||l!==f||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,l){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const _={onComplete:l,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const C=_.d,T=_.s;n.warnOnListenWarnings_(C,r),(this.listens.get(i)&&this.listens.get(i).get(l))===t&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(i,l),t.onComplete&&t.onComplete(T,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();io(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const u=l.s,f=l.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,t._queryObject,r)}sendUnlisten_(t,r,i,l){this.log_("Unlisten on "+t+" for "+r);const u={p:t};l&&(u.q=i,u.t=l),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,l){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(t,r,i,l){this.putInternal("p",t,r,i,l)}merge(t,r,i,l){this.putInternal("m",t,r,i,l)}putInternal(t,r,i,l,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):fx("Unrecognized action received from server: "+(0,L.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=eb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=eb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=eb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,We.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,C=null;const T=function(){C?C.close():(_=!0,l())};t.realtime_={close:T,sendRequest:function(j){(0,L.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(j)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,oe]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);_?gs("getToken() completed but was canceled"):(gs("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=oe&&oe.token,C=new BO(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,l,Ve=>{io(Ve+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(j){t.log_("Failed to get token: "+j),_||(t.repoInfo_.nodeAdmin&&io(j),T())}}})()}interrupt(t){gs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){gs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=eb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>px(u)).join("$"):"default";const l=this.removeListen_(t,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const i=new ir(t).toString();let l;if(this.listens.has(i)){const u=this.listens.get(i);l=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(t,r){gs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){gs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+dx.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vT.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Rn(e,t)}}class CT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Rn(Ld,e),i=new Rn(Ld,t);return 0!==this.compare(r,i)}minPost(){return Rn.MIN}}class ZO extends CT{static get __EMPTY_NODE(){return bT}static set __EMPTY_NODE(e){bT=e}compare(e,t){return Ag(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Rn.MIN}maxPost(){return new Rn(Jc,bT)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Rn(e,bT)}toString(){return".key"}}const eu=new ZO;class wT{constructor(e,t,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Ax,Fl=(()=>{class n{constructor(t,r,i,l,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=l?l:Ho.EMPTY_NODE,this.right=null!=u?u:Ho.EMPTY_NODE}copy(t,r,i,l,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=l?l:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let l=this;const u=i(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,r,i),null):0===u?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ho.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,l;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ho.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ho{constructor(e,t=Ho.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ho(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fl.BLACK,null,null))}remove(e){return new Ho(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new wT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new wT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new wT(this.root_,null,this.comparator_,!0,e)}}function sB(n,e){return Ag(n.name,e.name)}function Sx(n,e){return Ag(n,e)}Ho.EMPTY_NODE=new class iB{copy(e,t,r,i,l){return this}insert(e,t,r){return new Fl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const YO=function(n){return"number"==typeof n?"number:"+mO(n):"string:"+n},KO=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===Ax||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===Ax||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let QO,XO,JO,uy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),KO(this.priorityNode_)}static set __childrenNodeConstructor(t){QO=t}static get __childrenNodeConstructor(){return QO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Pn(t)?this:".priority"===Mn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Mn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===Nf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Tr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+YO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?mO(this.value_):this.value_,this.lazyHash_=hO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(l>=0,"Unknown leaf type: "+r),(0,L.hu)(u>=0,"Unknown leaf type: "+i),l===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Lr=new class cB extends CT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),l=r.compareTo(i);return 0===l?Ag(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Rn.MIN}maxPost(){return new Rn(Jc,new uy("[PRIORITY-POST]",JO))}makePost(e,t){const r=XO(e);return new Rn(t,new uy("[PRIORITY-POST]",r))}toString(){return".priority"}},uB=Math.log(2);class dB{constructor(e){this.count=parseInt(Math.log(e+1)/uB,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ET=function(n,e,t,r){n.sort(e);const i=function(_,C){const T=C-_;let S,k;if(0===T)return null;if(1===T)return S=n[_],k=t?t(S):S,new Fl(k,S.node,Fl.BLACK,null,null);{const j=parseInt(T/2,10)+_,oe=i(_,j),Ve=i(j+1,C);return S=n[j],k=t?t(S):S,new Fl(k,S.node,Fl.BLACK,oe,Ve)}},f=function(_){let C=null,T=null,S=n.length;const k=function(oe,Ve){const rt=S-oe,Gt=S;S-=oe;const qt=i(rt+1,Gt),Bt=n[rt],kt=t?t(Bt):Bt;j(new Fl(kt,Bt.node,Ve,null,qt))},j=function(oe){C?(C.left=oe,C=oe):(T=oe,C=oe)};for(let oe=0;oe<_.count;++oe){const Ve=_.nextBitIsOne(),rt=Math.pow(2,_.count-(oe+1));Ve?k(rt,Fl.BLACK):(k(rt,Fl.BLACK),k(rt,Fl.RED))}return T}(new dB(n.length));return new Ho(r||e,f)};let xx;const dy={};class Ud{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(dy&&Lr,"ChildrenNode.ts has not been loaded"),xx=xx||new Ud({".priority":dy},{".priority":Lr}),xx}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ho?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==eu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=t.getIterator(Rn.Wrap);let f,u=l.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=l.getNext();f=i?ET(r,e.getCompare()):dy;const _=e.toString(),C=Object.assign({},this.indexSet_);C[_]=e;const T=Object.assign({},this.indexes_);return T[_]=f,new Ud(T,C)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,l)=>{const u=(0,L.DV)(this.indexSet_,l);if((0,L.hu)(u,"Missing index implementation for "+l),i===dy){if(u.isDefinedOn(e.node)){const f=[],_=t.getIterator(Rn.Wrap);let C=_.getNext();for(;C;)C.name!==e.name&&f.push(C),C=_.getNext();return f.push(e),ET(f,u.getCompare())}return dy}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new Rn(e.name,f))),_.insert(e,e.node)}});return new Ud(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===dy)return i;{const l=t.get(e.name);return l?i.remove(new Rn(e.name,l)):i}});return new Ud(r,this.indexSet_)}}let tb,bn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&KO(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tb||(tb=new n(new Ho(Sx),null,Ud.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?tb:r}}getChild(t){const r=Mn(t);return null===r?this:this.getImmediateChild(r).getChild(Tr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Rn(t,r);let l,u;r.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?tb:this.priorityNode_;return new n(l,f,u)}}updateChild(t,r){const i=Mn(t);if(null===i)return r;{(0,L.hu)(".priority"!==Mn(t)||1===Nf(t),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(Tr(t),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,l=0,u=!0;if(this.forEachChild(Lr,(f,_)=>{r[f]=_.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):u=!1}),!t&&u&&l<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+YO(this.getPriority().val())+":"),this.forEachChild(Lr,(r,i)=>{const l=i.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":hO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const l=this.resolveIndex_(i);if(l){const u=l.getPredecessorKey(new Rn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Rn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Rn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Rn.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Rn.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nb?-1:0}withIndex(t){if(t===eu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===eu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Lr),l=r.getIterator(Lr);let u=i.getNext(),f=l.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=l.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===eu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const nb=new class hB extends bn{constructor(){super(new Ho(Sx),bn.EMPTY_NODE,Ud.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return bn.EMPTY_NODE}isEmpty(){return!1}};function ei(n,e=null){if(null===n)return bn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new uy(n,ei(e));if(n instanceof Array){let t=bn.EMPTY_NODE;return ms(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const l=ei(i);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(ei(e))}{const t=[];let r=!1;if(ms(n,(u,f)=>{if("."!==u.substring(0,1)){const _=ei(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Rn(u,_)))}}),0===t.length)return bn.EMPTY_NODE;const l=ET(t,sB,u=>u.name,Sx);if(r){const u=ET(t,Lr.getCompare());return new bn(l,ei(e),new Ud({".priority":u},{".priority":Lr}))}return new bn(l,ei(e),Ud.Default)}}Object.defineProperties(Rn,{MIN:{value:new Rn(Ld,bn.EMPTY_NODE)},MAX:{value:new Rn(Jc,nb)}}),ZO.__EMPTY_NODE=bn.EMPTY_NODE,uy.__childrenNodeConstructor=bn,function oB(n){Ax=n}(nb),function lB(n){JO=n}(nb),function aB(n){XO=n}(ei);class Mx extends CT{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!Pn(e)&&".priority"!==Mn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),l=r.compareTo(i);return 0===l?Ag(e.name,t.name):l}makePost(e,t){const r=ei(e),i=bn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Rn(t,i)}maxPost(){const e=bn.EMPTY_NODE.updateChild(this.indexPath_,nb);return new Rn(Jc,e)}toString(){return JC(this.indexPath_,0).join("/")}}const Px=new class pB extends CT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ag(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Rn.MIN}maxPost(){return Rn.MAX}makePost(e,t){const r=ei(e);return new Rn(t,r)}toString(){return".value"}},hy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gB=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const l=new Array(8);for(i=7;i>=0;i--)l[i]=hy.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let u=l.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=hy.charAt(e[i]);return(0,L.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),nR=function(n){if(n===""+gx)return"-";const e=_T(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Jc;const l=hy.charAt(hy.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},rR=function(n){if(n===""+_O)return Ld;const e=_T(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+gx:(delete t[t.length-1],t.join("")):(t[t.length-1]=hy.charAt(hy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function iR(n){return{type:"value",snapshotNode:n}}function fy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function rb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ib(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Rx{constructor(e){this.index_=e}updateChild(e,t,r,i,l,u){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(rb(t,f)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(fy(t,r)):u.trackChildChange(ib(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Lr,(i,l)=>{t.hasChild(i)||r.trackChildChange(rb(i,l))}),t.isLeafNode()||t.forEachChild(Lr,(i,l)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(l)||r.trackChildChange(ib(i,l,u))}else r.trackChildChange(fy(i,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?bn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class sb{constructor(e){this.indexedFilter_=new Rx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=sb.getStartPost_(e),this.endPost_=sb.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,l,u){return this.matches(new Rn(t,r))||(r=bn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,l,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=bn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(bn.EMPTY_NODE);const l=this;return t.forEachChild(Lr,(u,f)=>{l.matches(new Rn(u,f))||(i=i.updateImmediateChild(u,bn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _B{constructor(e){this.rangedFilter_=new sb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,l,u){return this.rangedFilter_.matches(new Rn(t,r))||(r=bn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,l,u):this.fullLimitUpdateChild_(e,t,r,l,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=bn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;i=bn.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const f=l.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(f.name,f.node),u++}}else{let l,u,f,_;if(i=t.withIndex(this.index_),i=i.updatePriority(bn.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(k,j)=>S(j,k)}else _=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let C=0,T=!1;for(;_.hasNext();){const S=_.getNext();!T&&f(l,S)<=0&&(T=!0),T&&C<this.limit_&&f(S,u)<=0?C++:i=i.updateImmediateChild(S.name,bn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,l){let u;if(this.reverse_){const S=this.index_.getCompare();u=(k,j)=>S(j,k)}else u=this.index_.getCompare();const f=e;(0,L.hu)(f.numChildren()===this.limit_,"");const _=new Rn(t,r),C=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(f.hasChild(t)){const S=f.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=k&&(k.name===t||f.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const j=null==k?1:u(k,_);if(T&&!r.isEmpty()&&j>=0)return null!=l&&l.trackChildChange(ib(t,r,S)),f.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(rb(t,S));const Ve=f.updateImmediateChild(t,bn.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=l&&l.trackChildChange(fy(k.name,k.node)),Ve.updateImmediateChild(k.name,k.node)):Ve}}return r.isEmpty()?e:T&&u(C,_)>=0?(null!=l&&(l.trackChildChange(rb(C.name,C.node)),l.trackChildChange(fy(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(C.name,bn.EMPTY_NODE)):e}}class IT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ld}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Lr}copy(){const e=new IT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Nx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function TT(n,e){const t=n.copy();return t.index_=e,t}function sR(n){const e={};if(n.isDefault())return e;let t;return n.index_===Lr?t="$priority":n.index_===Px?t="$value":n.index_===eu?t="$key":((0,L.hu)(n.index_ instanceof Mx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Pz)(t),n.startSet_&&(e.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function oR(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Lr&&(e.i=n.index_.toString()),e}class DT extends VO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=WC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=DT.getListenId_(e,r),f={};this.listens_[u]=f;const _=sR(e._queryParams);this.restRequest_(l+".json",_,(C,T)=>{let S=T;if(404===C&&(S=null,C=null),null===C&&this.onDataUpdate_(l,S,!1,r),(0,L.DV)(this.listens_,u)===f){let k;k=C?401===C?"permission_denied":"rest_error:"+C:"ok",i(k,null)}})}unlisten(e,t){const r=DT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=sR(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(l,u)=>{let f=u;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(t.auth=i.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,L.cI)(f.responseText)}catch(C){io("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&io("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class EB{constructor(){this.rootNode_=bn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ST(){return{value:null,children:new Map}}function py(n,e,t){if(Pn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Mn(e);n.children.has(r)||n.children.set(r,ST()),py(n.children.get(r),e=Tr(e),t)}}function Fx(n,e){if(Pn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Lr,(r,i)=>{py(n,new ir(r),i)}),Fx(n,e)}}if(n.children.size>0){const t=Mn(e);return e=Tr(e),n.children.has(t)&&Fx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Lx(n,e,t){null!==n.value?t(e,n.value):function IB(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Lx(i,new ir(e.toString()+"/"+r),t)})}class TB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ms(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class AB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new TB(e);const r=1e4+2e4*Math.random();YC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ms(e,(i,l)=>{l>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=l,r=!0)}),r&&this.server_.reportStats(t),YC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var tl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(tl||(tl={})),tl))();function Vx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class AT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=tl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Pn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ir(e));return new AT(Kn(),t,this.revert)}}return(0,L.hu)(Mn(this.path)===e,"operationForChild called for unrelated child."),new AT(Tr(this.path),this.affectedTree,this.revert)}}class ob{constructor(e,t){this.source=e,this.path=t,this.type=tl.LISTEN_COMPLETE}operationForChild(e){return Pn(this.path)?new ob(this.source,Kn()):new ob(this.source,Tr(this.path))}}class Pg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=tl.OVERWRITE}operationForChild(e){return Pn(this.path)?new Pg(this.source,Kn(),this.snap.getImmediateChild(e)):new Pg(this.source,Tr(this.path),this.snap)}}class gy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=tl.MERGE}operationForChild(e){if(Pn(this.path)){const t=this.children.subtree(new ir(e));return t.isEmpty()?null:t.value?new Pg(this.source,Kn(),t.value):new gy(this.source,Kn(),t)}return(0,L.hu)(Mn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gy(this.source,Tr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ff{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Mn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class xB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ab(n,e,t,r,i,l){const u=r.filter(f=>f.type===t);u.sort((f,_)=>function OB(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new Rn(e.childName,e.snapshotNode),i=new Rn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),u.forEach(f=>{const _=function PB(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,l);i.forEach(C=>{C.respondsTo(f.type)&&e.push(C.createEvent(_,n.query_))})})}function xT(n,e){return{eventCache:n,serverCache:e}}function lb(n,e,t,r){return xT(new Ff(e,t,r),n.serverCache)}function lR(n,e,t,r){return xT(n.eventCache,new Ff(e,t,r))}function MT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Og(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let $x;class Ur{constructor(e,t=(()=>($x||($x=new Ho(gU)),$x))()){this.value=e,this.children=t}static fromObject(e){let t=new Ur(null);return ms(e,(r,i)=>{t=t.set(new ir(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Kn(),value:this.value};if(Pn(e))return null;{const r=Mn(e),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(Tr(e),t);return null!=l?{path:zr(new ir(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pn(e))return this;{const t=Mn(e),r=this.children.get(t);return null!==r?r.subtree(Tr(e)):new Ur(null)}}set(e,t){if(Pn(e))return new Ur(t,this.children);{const r=Mn(e),l=(this.children.get(r)||new Ur(null)).set(Tr(e),t),u=this.children.insert(r,l);return new Ur(this.value,u)}}remove(e){if(Pn(e))return this.children.isEmpty()?new Ur(null):new Ur(null,this.children);{const t=Mn(e),r=this.children.get(t);if(r){const i=r.remove(Tr(e));let l;return l=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&l.isEmpty()?new Ur(null):new Ur(this.value,l)}return this}}get(e){if(Pn(e))return this.value;{const t=Mn(e),r=this.children.get(t);return r?r.get(Tr(e)):null}}setTree(e,t){if(Pn(e))return t;{const r=Mn(e),l=(this.children.get(r)||new Ur(null)).setTree(Tr(e),t);let u;return u=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Ur(this.value,u)}}fold(e){return this.fold_(Kn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(zr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Kn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Pn(e))return null;{const l=Mn(e),u=this.children.get(l);return u?u.findOnPath_(Tr(e),zr(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Kn(),t)}foreachOnPath_(e,t,r){if(Pn(e))return this;{this.value&&r(t,this.value);const i=Mn(e),l=this.children.get(i);return l?l.foreachOnPath_(Tr(e),zr(t,i),r):new Ur(null)}}foreach(e){this.foreach_(Kn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(zr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ll{constructor(e){this.writeTree_=e}static empty(){return new Ll(new Ur(null))}}function cb(n,e,t){if(Pn(e))return new Ll(new Ur(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let l=r.value;const u=so(i,e);return l=l.updateChild(u,t),new Ll(n.writeTree_.set(i,l))}{const i=new Ur(t),l=n.writeTree_.setTree(e,i);return new Ll(l)}}}function jx(n,e,t){let r=n;return ms(t,(i,l)=>{r=cb(r,zr(e,i),l)}),r}function cR(n,e){if(Pn(e))return Ll.empty();{const t=n.writeTree_.setTree(e,new Ur(null));return new Ll(t)}}function Hx(n,e){return null!=Rg(n,e)}function Rg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(so(t.path,e)):null}function uR(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Lr,(r,i)=>{e.push(new Rn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Rn(r,i.value))}),e}function Lf(n,e){if(Pn(e))return n;{const t=Rg(n,e);return new Ll(null!=t?new Ur(t):n.writeTree_.subtree(e))}}function Gx(n){return n.writeTree_.isEmpty()}function my(n,e){return dR(Kn(),n.writeTree_,e)}function dR(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,l)=>{".priority"===i?((0,L.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=dR(zr(n,i),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(zr(n,".priority"),r)),t}}function PT(n,e){return mR(e,n)}function UB(n,e){if(n.snap)return el(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&el(zr(n.path,t),e))return!0;return!1}function VB(n){return n.visible}function hR(n,e,t){let r=Ll.empty();for(let i=0;i<n.length;++i){const l=n[i];if(e(l)){const u=l.path;let f;if(l.snap)el(t,u)?(f=so(t,u),r=cb(r,f,l.snap)):el(u,t)&&(f=so(u,t),r=cb(r,Kn(),l.snap.getChild(f)));else{if(!l.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(el(t,u))f=so(t,u),r=jx(r,f,l.children);else if(el(u,t))if(f=so(u,t),Pn(f))r=jx(r,Kn(),l.children);else{const _=(0,L.DV)(l.children,Mn(f));if(_){const C=_.getChild(Tr(f));r=cb(r,Kn(),C)}}}}}return r}function fR(n,e,t,r,i){if(r||i){const l=Lf(n.visibleWrites,e);return!i&&Gx(l)?t:i||null!=t||Hx(l,Kn())?my(hR(n.allWrites,function(C){return(C.visible||i)&&(!r||!~r.indexOf(C.writeId))&&(el(C.path,e)||el(e,C.path))},e),t||bn.EMPTY_NODE):null}{const l=Rg(n.visibleWrites,e);if(null!=l)return l;{const u=Lf(n.visibleWrites,e);return Gx(u)?t:null!=t||Hx(u,Kn())?my(u,t||bn.EMPTY_NODE):null}}}function OT(n,e,t,r){return fR(n.writeTree,n.treePath,e,t,r)}function qx(n,e){return function $B(n,e,t){let r=bn.EMPTY_NODE;const i=Rg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Lr,(l,u)=>{r=r.updateImmediateChild(l,u)}),r;if(t){const l=Lf(n.visibleWrites,e);return t.forEachChild(Lr,(u,f)=>{const _=my(Lf(l,new ir(u)),f);r=r.updateImmediateChild(u,_)}),uR(l).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return uR(Lf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function pR(n,e,t,r){return function jB(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=zr(e,t);if(Hx(n.visibleWrites,l))return null;{const u=Lf(n.visibleWrites,l);return Gx(u)?i.getChild(t):my(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function RT(n,e){return function GB(n,e){return Rg(n.visibleWrites,e)}(n.writeTree,zr(n.treePath,e))}function zx(n,e,t){return function HB(n,e,t,r){const i=zr(e,t),l=Rg(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(t)?my(Lf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function gR(n,e){return mR(zr(n.treePath,e),n.writeTree)}function mR(n,e){return{treePath:n,writeTree:e}}class ZB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,ib(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,rb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,fy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ib(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const _R=new class YB{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Wx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ff(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Og(this.viewCache_),l=function WB(n,e,t,r,i,l){return function qB(n,e,t,r,i,l,u){let f;const _=Lf(n.visibleWrites,e),C=Rg(_,Kn());if(null!=C)f=C;else{if(null==t)return[];f=my(_,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const T=[],S=u.getCompare(),k=l?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let j=k.getNext();for(;j&&T.length<i;)0!==S(j,r)&&T.push(j),j=k.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,l)}(this.writes_,i,t,1,r,e);return 0===l.length?null:l[0]}}function yR(n,e,t,r,i,l){const u=e.eventCache;if(null!=RT(r,t))return e;{let f,_;if(Pn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=Og(e),S=qx(r,C instanceof bn?C:bn.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,l)}else{const C=OT(r,Og(e));f=n.filter.updateFullNode(e.eventCache.getNode(),C,l)}else{const C=Mn(t);if(".priority"===C){(0,L.hu)(1===Nf(t),"Can't have a priority with additional path components");const T=u.getNode();_=e.serverCache.getNode();const S=pR(r,t,T,_);f=null!=S?n.filter.updatePriority(T,S):u.getNode()}else{const T=Tr(t);let S;if(u.isCompleteForChild(C)){_=e.serverCache.getNode();const k=pR(r,t,u.getNode(),_);S=null!=k?u.getNode().getImmediateChild(C).updateChild(T,k):u.getNode().getImmediateChild(C)}else S=zx(r,C,e.serverCache);f=null!=S?n.filter.updateChild(u.getNode(),C,S,T,i,l):u.getNode()}}return lb(e,f,u.isFullyInitialized()||Pn(t),n.filter.filtersNodes())}}function kT(n,e,t,r,i,l,u,f){const _=e.serverCache;let C;const T=u?n.filter:n.filter.getIndexedFilter();if(Pn(t))C=T.updateFullNode(_.getNode(),r,null);else if(T.filtersNodes()&&!_.isFiltered()){const j=_.getNode().updateChild(t,r);C=T.updateFullNode(_.getNode(),j,null)}else{const j=Mn(t);if(!_.isCompleteForPath(t)&&Nf(t)>1)return e;const oe=Tr(t),rt=_.getNode().getImmediateChild(j).updateChild(oe,r);C=".priority"===j?T.updatePriority(_.getNode(),rt):T.updateChild(_.getNode(),j,rt,oe,_R,null)}const S=lR(e,C,_.isFullyInitialized()||Pn(t),T.filtersNodes());return yR(n,S,t,i,new Wx(i,S,l),f)}function Zx(n,e,t,r,i,l,u){const f=e.eventCache;let _,C;const T=new Wx(i,e,l);if(Pn(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,u),_=lb(e,C,!0,n.filter.filtersNodes());else{const S=Mn(t);if(".priority"===S)C=n.filter.updatePriority(e.eventCache.getNode(),r),_=lb(e,C,f.isFullyInitialized(),f.isFiltered());else{const k=Tr(t),j=f.getNode().getImmediateChild(S);let oe;if(Pn(k))oe=r;else{const Ve=T.getCompleteChild(S);oe=null!=Ve?".priority"===Ix(k)&&Ve.getChild(GO(k)).isEmpty()?Ve:Ve.updateChild(k,r):bn.EMPTY_NODE}_=j.equals(oe)?e:lb(e,n.filter.updateChild(f.getNode(),S,oe,k,T,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function vR(n,e){return n.eventCache.isCompleteForChild(e)}function CR(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Yx(n,e,t,r,i,l,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,_=e;C=Pn(t)?r:new Ur(null).setTree(t,r);const T=e.serverCache.getNode();return C.children.inorderTraversal((S,k)=>{if(T.hasChild(S)){const oe=CR(0,e.serverCache.getNode().getImmediateChild(S),k);_=kT(n,_,new ir(S),oe,i,l,u,f)}}),C.children.inorderTraversal((S,k)=>{const j=!e.serverCache.isCompleteForChild(S)&&void 0===k.value;if(!T.hasChild(S)&&!j){const Ve=CR(0,e.serverCache.getNode().getImmediateChild(S),k);_=kT(n,_,new ir(S),Ve,i,l,u,f)}}),_}class iV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Rx(r.getIndex()),l=function yB(n){return n.loadsAllData()?new Rx(n.getIndex()):n.hasLimit()?new _B(n):new sb(n)}(r);this.processor_=function KB(n){return{filter:n}}(l);const u=t.serverCache,f=t.eventCache,_=i.updateFullNode(bn.EMPTY_NODE,u.getNode(),null),C=l.updateFullNode(bn.EMPTY_NODE,f.getNode(),null),T=new Ff(_,u.isFullyInitialized(),i.filtersNodes()),S=new Ff(C,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=xT(S,T),this.eventGenerator_=new xB(this.query_)}get query(){return this.query_}}function aV(n,e){const t=Og(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Pn(e)&&!t.getImmediateChild(Mn(e)).isEmpty())?t.getChild(e):null}function bR(n){return 0===n.eventRegistrations_.length}function wR(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const u=n.eventRegistrations_[l];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ER(n,e,t,r){e.type===tl.MERGE&&null!==e.source.queryId&&((0,L.hu)(Og(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(MT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function XB(n,e,t,r,i){const l=new ZB;let u,f;if(t.type===tl.OVERWRITE){const C=t;C.source.fromUser?u=Zx(n,e,C.path,C.snap,r,i,l):((0,L.hu)(C.source.fromServer,"Unknown source."),f=C.source.tagged||e.serverCache.isFiltered()&&!Pn(C.path),u=kT(n,e,C.path,C.snap,r,i,f,l))}else if(t.type===tl.MERGE){const C=t;C.source.fromUser?u=function eV(n,e,t,r,i,l,u){let f=e;return r.foreach((_,C)=>{const T=zr(t,_);vR(e,Mn(T))&&(f=Zx(n,f,T,C,i,l,u))}),r.foreach((_,C)=>{const T=zr(t,_);vR(e,Mn(T))||(f=Zx(n,f,T,C,i,l,u))}),f}(n,e,C.path,C.children,r,i,l):((0,L.hu)(C.source.fromServer,"Unknown source."),f=C.source.tagged||e.serverCache.isFiltered(),u=Yx(n,e,C.path,C.children,r,i,f,l))}else if(t.type===tl.ACK_USER_WRITE){const C=t;u=C.revert?function rV(n,e,t,r,i,l){let u;if(null!=RT(r,t))return e;{const f=new Wx(r,e,i),_=e.eventCache.getNode();let C;if(Pn(t)||".priority"===Mn(t)){let T;if(e.serverCache.isFullyInitialized())T=OT(r,Og(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof bn,"serverChildren would be complete if leaf node"),T=qx(r,S)}T=T,C=n.filter.updateFullNode(_,T,l)}else{const T=Mn(t);let S=zx(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=_.getImmediateChild(T)),C=null!=S?n.filter.updateChild(_,T,S,Tr(t),f,l):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,bn.EMPTY_NODE,Tr(t),f,l):_,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=OT(r,Og(e)),u.isLeafNode()&&(C=n.filter.updateFullNode(C,u,l)))}return u=e.serverCache.isFullyInitialized()||null!=RT(r,Kn()),lb(e,C,u,n.filter.filtersNodes())}}(n,e,C.path,r,i,l):function tV(n,e,t,r,i,l,u){if(null!=RT(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Pn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return kT(n,e,t,_.getNode().getChild(t),i,l,f,u);if(Pn(t)){let C=new Ur(null);return _.getNode().forEachChild(eu,(T,S)=>{C=C.set(new ir(T),S)}),Yx(n,e,t,C,i,l,f,u)}return e}{let C=new Ur(null);return r.foreach((T,S)=>{const k=zr(t,T);_.isCompleteForPath(k)&&(C=C.set(T,_.getNode().getChild(k)))}),Yx(n,e,t,C,i,l,f,u)}}(n,e,C.path,C.affectedTree,r,i,l)}else{if(t.type!==tl.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);u=function nV(n,e,t,r,i){const l=e.serverCache;return yR(n,lR(e,l.getNode(),l.isFullyInitialized()||Pn(t),l.isFiltered()),t,r,_R,i)}(n,e,t.path,r,l)}const _=l.getChanges();return function JB(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=MT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(iR(MT(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,i,e,t,r);return function QB(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,L.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,IR(n,l.changes,l.viewCache.eventCache.getNode(),null)}function IR(n,e,t,r){return function MB(n,e,t,r){const i=[],l=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function mB(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),ab(n,i,"child_removed",e,r,t),ab(n,i,"child_added",e,r,t),ab(n,i,"child_moved",l,r,t),ab(n,i,"child_changed",e,r,t),ab(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let NT,LT;class TR{constructor(){this.views=new Map}}function Kx(n,e,t,r){const i=e.source.queryId;if(null!==i){const l=n.views.get(i);return(0,L.hu)(null!=l,"SyncTree gave us an op for an invalid query."),ER(l,e,t,r)}{let l=[];for(const u of n.views.values())l=l.concat(ER(u,e,t,r));return l}}function DR(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let f=OT(t,i?r:null),_=!1;f?_=!0:r instanceof bn?(f=qx(t,r),_=!1):(f=bn.EMPTY_NODE,_=!1);const C=xT(new Ff(f,_,!1),new Ff(r,i,!1));return new iV(e,C)}return u}function SR(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Uf(n,e){let t=null;for(const r of n.views.values())t=t||aV(r,e);return t}function AR(n,e){return e._queryParams.loadsAllData()?FT(n):n.views.get(e._queryIdentifier)}function xR(n,e){return null!=AR(n,e)}function Bf(n){return null!=FT(n)}function FT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _V=1;class MR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ur(null),this.pendingWriteTree_=function zB(){return{visibleWrites:Ll.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qx(n,e,t,r,i){return function kB(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=cb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?_y(n,new Pg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Vf(n,e,t=!1){const r=function FB(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function LB(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,l=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&UB(f,r.path)?i=!1:el(r.path,f.path)&&(l=!0)),u--}return!!i&&(l?(function BB(n){n.visibleWrites=hR(n.allWrites,VB,Kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=cR(n.visibleWrites,r.path):ms(r.children,_=>{n.visibleWrites=cR(n.visibleWrites,zr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let l=new Ur(null);return null!=r.snap?l=l.set(Kn(),!0):ms(r.children,u=>{l=l.set(new ir(u),!0)}),_y(n,new AT(r.path,l,t))}return[]}function ub(n,e,t){return _y(n,new Pg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Xx(n,e,t,r){const i=e._path,l=n.syncPointTree_.get(i);let u=[];if(l&&("default"===e._queryIdentifier||xR(l,e))){const f=function pV(n,e,t,r){const i=e._queryIdentifier,l=[];let u=[];const f=Bf(n);if("default"===i)for(const[_,C]of n.views.entries())u=u.concat(wR(C,t,r)),bR(C)&&(n.views.delete(_),C.query._queryParams.loadsAllData()||l.push(C.query));else{const _=n.views.get(i);_&&(u=u.concat(wR(_,t,r)),bR(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||l.push(_.query)))}return f&&!Bf(n)&&l.push(new(function dV(){return(0,L.hu)(NT,"Reference.ts has not been loaded"),NT}())(e._repo,e._path)),{removed:l,events:u}}(l,e,t,r);(function hV(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=f.removed;u=f.events;const C=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(S,k)=>Bf(k));if(C&&!T){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const k=function TV(n){return n.fold((e,t,r)=>{if(t&&Bf(t))return[FT(t)];{let i=[];return t&&(i=SR(t)),ms(r,(l,u)=>{i=i.concat(u)}),i}})}(S);for(let j=0;j<k.length;++j){const oe=k[j],Ve=oe.query,rt=kR(n,oe);n.listenProvider_.startListening(db(Ve),BT(n,Ve),rt.hashFn,rt.onComplete)}}}!T&&_.length>0&&!r&&(C?n.listenProvider_.stopListening(db(e),null):_.forEach(S=>{const k=n.queryToTagMap.get(VT(S));n.listenProvider_.stopListening(db(S),k)})),function DV(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=VT(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,_)}return u}function PR(n,e,t){const r=e._path;let i=null,l=!1;n.syncPointTree_.foreachOnPath(r,(S,k)=>{const j=so(S,r);i=i||Uf(k,j),l=l||Bf(k)});let f,u=n.syncPointTree_.get(r);u?(l=l||Bf(u),i=i||Uf(u,Kn())):(u=new TR,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?f=!0:(f=!1,i=bn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((k,j)=>{const oe=Uf(j,Kn());oe&&(i=i.updateImmediateChild(k,oe))}));const _=xR(u,e);if(!_&&!e._queryParams.loadsAllData()){const S=VT(e);(0,L.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const k=function SV(){return _V++}();n.queryToTagMap.set(S,k),n.tagToQueryMap.set(k,S)}let T=function fV(n,e,t,r,i,l){const u=DR(n,e,r,i,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function lV(n,e){n.eventRegistrations_.push(e)}(u,t),function cV(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Lr,(l,u)=>{r.push(fy(l,u))}),t.isFullyInitialized()&&r.push(iR(t.getNode())),IR(n,r,t.getNode(),e)}(u,t)}(u,e,t,PT(n.pendingWriteTree_,r),i,f);if(!_&&!l){const S=AR(u,e);T=T.concat(function AV(n,e,t){const r=e._path,i=BT(n,e),l=kR(n,t),u=n.listenProvider_.startListening(db(e),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Bf(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((C,T,S)=>{if(!Pn(C)&&T&&Bf(T))return[FT(T).query];{let k=[];return T&&(k=k.concat(SR(T).map(j=>j.query))),ms(S,(j,oe)=>{k=k.concat(oe)}),k}});for(let C=0;C<_.length;++C){const T=_[C];n.listenProvider_.stopListening(db(T),BT(n,T))}}return u}(n,e,S))}return T}function UT(n,e,t){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,f)=>{const C=Uf(f,so(u,e));if(C)return C});return fR(i,e,l,t,!0)}function _y(n,e){return OR(e,n.syncPointTree_,null,PT(n.pendingWriteTree_,Kn()))}function OR(n,e,t,r){if(Pn(n.path))return RR(n,e,t,r);{const i=e.get(Kn());null==t&&null!=i&&(t=Uf(i,Kn()));let l=[];const u=Mn(n.path),f=n.operationForChild(u),_=e.children.get(u);if(_&&f){const C=t?t.getImmediateChild(u):null,T=gR(r,u);l=l.concat(OR(f,_,C,T))}return i&&(l=l.concat(Kx(i,n,r,t))),l}}function RR(n,e,t,r){const i=e.get(Kn());null==t&&null!=i&&(t=Uf(i,Kn()));let l=[];return e.children.inorderTraversal((u,f)=>{const _=t?t.getImmediateChild(u):null,C=gR(r,u),T=n.operationForChild(u);T&&(l=l.concat(RR(T,f,_,C)))}),i&&(l=l.concat(Kx(i,n,r,t))),l}function kR(n,e){const t=e.query,r=BT(n,t);return{hashFn:()=>(function sV(n){return n.viewCache_.serverCache.getNode()}(e)||bn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function bV(n,e,t){const r=Jx(n,t);if(r){const i=e1(r),l=i.path,u=i.queryId,f=so(l,e);return t1(n,l,new ob(Vx(u),f))}return[]}(n,t._path,r):function CV(n,e){return _y(n,new ob({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function yU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Xx(n,t,null,l)}}}}function BT(n,e){const t=VT(e);return n.queryToTagMap.get(t)}function VT(n){return n._path.toString()+"$"+n._queryIdentifier}function Jx(n,e){return n.tagToQueryMap.get(e)}function e1(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ir(n.substr(0,e))}}function t1(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),Kx(r,t,PT(n.pendingWriteTree_,e),null)}function db(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function mV(){return(0,L.hu)(LT,"Reference.ts has not been loaded"),LT}())(n._repo,n._path):n}class n1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new n1(t)}node(){return this.node_}}class r1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zr(this.path_,e);return new r1(this.syncTree_,t)}node(){return UT(this.syncTree_,this.path_)}}const NR=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?MV(n[".sv"],e,t):"object"==typeof n[".sv"]?PV(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},MV=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},PV=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},FR=function(n,e,t,r){return s1(e,new r1(t,n),r)},i1=function(n,e,t){return s1(n,new n1(e),t)};function s1(n,e,t){const r=n.getPriority().val(),i=NR(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,f=NR(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new uy(f,ei(i)):n}{const u=n;return l=u,i!==u.getPriority().val()&&(l=l.updatePriority(new uy(i))),u.forEachChild(Lr,(f,_)=>{const C=s1(_,e.getImmediateChild(f),t);C!==_&&(l=l.updateImmediateChild(f,C))}),l}}class o1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function $T(n,e){let t=e instanceof ir?e:new ir(e),r=n,i=Mn(t);for(;null!==i;){const l=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new o1(i,r,l),t=Tr(t),i=Mn(t)}return r}function kg(n){return n.node.value}function a1(n,e){n.node.value=e,l1(n)}function LR(n){return n.node.childCount>0}function jT(n,e){ms(n.node.children,(t,r)=>{e(new o1(t,n,r))})}function UR(n,e,t,r){t&&!r&&e(n),jT(n,i=>{UR(i,e,!0,r)}),t&&r&&e(n)}function hb(n){return new ir(null===n.parent?n.name:hb(n.parent)+"/"+n.name)}function l1(n){null!==n.parent&&function kV(n,e,t){const r=function OV(n){return void 0===kg(n)&&!LR(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,l1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,l1(n))}(n.parent,n.name,n)}const NV=/[\[\].#$\/\u0000-\u001F\u007F]/,FV=/[\[\].#$\u0000-\u001F\u007F]/,c1=10485760,HT=function(n){return"string"==typeof n&&0!==n.length&&!NV.test(n)},BR=function(n){return"string"==typeof n&&0!==n.length&&!FV.test(n)},fb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!mT(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},tu=function(n,e,t,r){r&&void 0===e||pb((0,L.gK)(n,"value"),e,t)},pb=function(n,e,t){const r=t instanceof ir?new KU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+xg(r));if("function"==typeof e)throw new Error(n+"contains a function "+xg(r)+" with contents = "+e.toString());if(mT(e))throw new Error(n+"contains "+e.toString()+" "+xg(r));if("string"==typeof e&&e.length>c1/3&&(0,L.ug)(e)>c1)throw new Error(n+"contains a string greater than "+c1+" utf8 bytes "+xg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,l=!1;if(ms(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!HT(u)))throw new Error(n+" contains an invalid key ("+u+") "+xg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function QU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),qO(n)})(r,u),pb(n,f,r),function XU(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+xg(r)+" in addition to actual children.")}},VR=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const l=[];ms(e,(u,f)=>{const _=new ir(u);if(pb(i,f,zr(t,_)),".priority"===Ix(_)&&!fb(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=JC(r);for(let u=0;u<l.length;u++)if((".priority"!==l[u]||u!==l.length-1)&&!HT(l[u]))throw new Error(n+"contains an invalid key ("+l[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(YU);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&el(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},u1=function(n,e,t){if(!t||void 0!==e){if(mT(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fb(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gb=function(n,e,t,r){if(!(r&&void 0===t||HT(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mb=function(n,e,t,r){if(!(r&&void 0===t||BR(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},nl=function(n,e){if(".info"===Mn(e))throw new Error(n+" failed = Can't modify data under /.info/")},$R=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!HT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),BR(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class VV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function GT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],l=i.getPath();null!==t&&!Tx(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(i)}t&&n.eventLists_.push(t)}function d1(n,e,t){GT(n,t),jR(n,r=>Tx(r,e))}function rl(n,e,t){GT(n,t),jR(n,r=>el(r,e)||el(e,r))}function jR(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?($V(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function $V(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Sg&&gs("event: "+t.toString()),ly(r)}}}const HR="repo_interrupt";class HV{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new VV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ST(),this.transactionQueueTree_=new o1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function GR(n){const t=n.infoData_.getNode(new ir(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _b(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:GR(n)})}function qR(n,e,t,r,i){n.dataUpdateCount++;const l=new ir(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const _=(0,L.UI)(t,C=>ei(C));u=function EV(n,e,t,r){const i=Jx(n,r);if(i){const l=e1(i),u=l.path,f=l.queryId,_=so(u,e),C=Ur.fromObject(t);return t1(n,u,new gy(Vx(f),_,C))}return[]}(n.serverSyncTree_,l,_,i)}else{const _=ei(t);u=function wV(n,e,t,r){const i=Jx(n,r);if(null!=i){const l=e1(i),u=l.path,f=l.queryId,_=so(u,e);return t1(n,u,new Pg(Vx(f),_,t))}return[]}(n.serverSyncTree_,l,_,i)}else if(r){const _=(0,L.UI)(t,C=>ei(C));u=function vV(n,e,t){const r=Ur.fromObject(t);return _y(n,new gy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,_)}else{const _=ei(t);u=ub(n.serverSyncTree_,l,_)}let f=l;u.length>0&&(f=vy(n,l)),rl(n.eventQueue_,f,u)}function zR(n,e){h1(n,"connected",e),!1===e&&function ZV(n){yy(n,"onDisconnectEvents");const e=_b(n),t=ST();Lx(n.onDisconnect_,Kn(),(i,l)=>{const u=FR(i,l,n.serverSyncTree_,e);py(t,i,u)});let r=[];Lx(t,Kn(),(i,l)=>{r=r.concat(ub(n.serverSyncTree_,i,l));const u=m1(n,i);vy(n,u)}),n.onDisconnect_=ST(),rl(n.eventQueue_,Kn(),r)}(n)}function h1(n,e,t){const r=new ir("/.info/"+e),i=ei(t);n.infoData_.updateSnapshot(r,i);const l=ub(n.infoSyncTree_,r,i);rl(n.eventQueue_,r,l)}function qT(n){return n.nextWriteId_++}function f1(n,e,t,r,i){yy(n,"set",{path:e.toString(),value:t,priority:r});const l=_b(n),u=ei(t,r),f=UT(n.serverSyncTree_,e),_=i1(u,f,l),C=qT(n),T=Qx(n.serverSyncTree_,e,_,C,!0);GT(n.eventQueue_,T),n.server_.put(e.toString(),u.val(!0),(k,j)=>{const oe="ok"===k;oe||io("set at "+e+" failed: "+k);const Ve=Vf(n.serverSyncTree_,C,!oe);rl(n.eventQueue_,e,Ve),$f(0,i,k,j)});const S=m1(n,e);vy(n,S),rl(n.eventQueue_,S,[])}function YV(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Fx(n.onDisconnect_,e),$f(0,t,r,i)})}function WR(n,e,t,r){const i=ei(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(l,u)=>{"ok"===l&&py(n.onDisconnect_,e,i),$f(0,r,l,u)})}function p1(n,e,t){let r;r=".info"===Mn(e._path)?Xx(n.infoSyncTree_,e,t):Xx(n.serverSyncTree_,e,t),d1(n.eventQueue_,e._path,r)}function ZR(n){n.persistentConnection_&&n.persistentConnection_.interrupt(HR)}function yy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gs(t,...e)}function $f(n,e,t,r){e&&ly(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let l=i;r&&(l+=": "+r);const u=new Error(l);u.code=i,e(u)}})}function g1(n,e,t){return UT(n.serverSyncTree_,e,t)||bn.EMPTY_NODE}function zT(n,e=n.transactionQueueTree_){if(e||WT(n,e),kg(e)){const t=KR(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function t$(n,e,t){const r=t.map(C=>C.currentWriteId),i=g1(n,e,r);let l=i;const u=i.hash();for(let C=0;C<t.length;C++){const T=t[C];(0,L.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=so(e,T.path);l=l.updateChild(S,T.currentOutputSnapshotRaw)}const f=l.val(!0),_=e;n.server_.put(_.toString(),f,C=>{yy(n,"transaction put response",{path:_.toString(),status:C});let T=[];if("ok"===C){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,T=T.concat(Vf(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();WT(n,$T(n.transactionQueueTree_,e)),zT(n,n.transactionQueueTree_),rl(n.eventQueue_,e,T);for(let k=0;k<S.length;k++)ly(S[k])}else{if("datastale"===C)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{io("transaction at "+_.toString()+" failed: "+C);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=C}vy(n,e)}},u)}(n,hb(e),t)}else LR(e)&&jT(e,t=>{zT(n,t)})}function vy(n,e){const t=YR(n,e),r=hb(t);return function n$(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],C=so(t,_.path);let S,T=!1;if((0,L.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,S=_.abortReason,i=i.concat(Vf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,S="maxretry",i=i.concat(Vf(n.serverSyncTree_,_.currentWriteId,!0));else{const k=g1(n,_.path,u);_.currentInputSnapshot=k;const j=e[f].update(k.val());if(void 0!==j){pb("transaction failed: Data returned ",j,_.path);let oe=ei(j);"object"==typeof j&&null!=j&&(0,L.r3)(j,".priority")||(oe=oe.updatePriority(k.getPriority()));const rt=_.currentWriteId,Gt=_b(n),qt=i1(oe,k,Gt);_.currentOutputSnapshotRaw=oe,_.currentOutputSnapshotResolved=qt,_.currentWriteId=qT(n),u.splice(u.indexOf(rt),1),i=i.concat(Qx(n.serverSyncTree_,_.path,qt,_.currentWriteId,_.applyLocally)),i=i.concat(Vf(n.serverSyncTree_,rt,!0))}else T=!0,S="nodata",i=i.concat(Vf(n.serverSyncTree_,_.currentWriteId,!0))}rl(n.eventQueue_,t,i),i=[],T&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}WT(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)ly(r[f]);zT(n,n.transactionQueueTree_)}(n,KR(n,t),r),r}function YR(n,e){let t,r=n.transactionQueueTree_;for(t=Mn(e);null!==t&&void 0===kg(r);)r=$T(r,t),t=Mn(e=Tr(e));return r}function KR(n,e){const t=[];return QR(n,e,t),t.sort((r,i)=>r.order-i.order),t}function QR(n,e,t){const r=kg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);jT(e,i=>{QR(n,i,t)})}function WT(n,e){const t=kg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,a1(e,t.length>0?t:void 0)}jT(e,r=>{WT(n,r)})}function m1(n,e){const t=hb(YR(n,e)),r=$T(n.transactionQueueTree_,e);return function RV(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{_1(n,i)}),_1(n,r),UR(r,i=>{_1(n,i)}),t}function _1(n,e){const t=kg(e);if(t){const r=[];let i=[],l=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,L.hu)(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):((0,L.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Vf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?a1(e,void 0):t.length=l+1,rl(n.eventQueue_,hb(e),i);for(let u=0;u<r.length;u++)ly(r[u])}}const y1=function(n,e){const t=s$(n),r=t.namespace;return"firebase.com"===t.domain&&Xc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Xc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&io("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _x(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ir(t.pathString)}},s$=function(n){let e="",t="",r="",i="",l="",u=!0,f="https",_=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(f=n.substring(0,C-1),n=n.substring(C+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function r$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(l){}e+="/"+i}return e}(n.substring(T,S)));const k=function i$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):io(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));C=e.indexOf(":"),C>=0?(u="https"===f||"wss"===f,_=parseInt(e.substring(C+1),10)):C=e.length;const j=e.slice(0,C);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const oe=e.indexOf(".");r=e.substring(0,oe).toLowerCase(),t=e.substring(oe+1),l=r}"ns"in k&&(l=k.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:l}};class XR{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class JR{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ek{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class tk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return YV(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){nl("OnDisconnect.remove",this._path);const e=new L.BH;return WR(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){nl("OnDisconnect.set",this._path),tu("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return WR(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){nl("OnDisconnect.setWithPriority",this._path),tu("OnDisconnect.setWithPriority",e,this._path,!1),u1("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function KV(n,e,t,r,i){const l=ei(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(u,f)=>{"ok"===u&&py(n.onDisconnect_,e,l),$f(0,i,u,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){nl("OnDisconnect.update",this._path),VR("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function QV(n,e,t,r){if((0,L.xb)(t))return gs("onDisconnect().update() called with empty data.  Don't do anything."),void $f(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,l)=>{"ok"===i&&ms(t,(u,f)=>{const _=ei(f);py(n.onDisconnect_,zr(e,u),_)}),$f(0,r,i,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Go{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Pn(this._path)?null:Ix(this._path)}get ref(){return new il(this._repo,this._path)}get _queryIdentifier(){const e=oR(this._queryParams),t=px(e);return"{}"===t?"default":t}get _queryObject(){return oR(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof Go))return!1;const t=this._repo===e._repo,r=Tx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ZU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ZT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function jf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===eu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ld)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Jc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Lr){if(null!=e&&!fb(e)||null!=t&&!fb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof Mx||n.getIndex()===Px,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function YT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class il extends Go{constructor(e,t){super(e,t,new IT,!1)}get parent(){const e=GO(this._path);return null===e?null:new il(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ng{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ir(e),r=Fg(this.ref,e);return new Ng(this._node.getChild(t),r,Lr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ng(i,Fg(this.ref,r),Lr)))}hasChild(e){const t=new ir(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nk(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?Fg(n._root,e):n._root}function rk(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=y1(e,n._repo.repoInfo_.nodeAdmin);$R("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Xc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),nk(n,t.path.toString())}function Fg(n,e){return null===Mn((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mb("child","path",t,!1)):mb("child","path",e,!1),new il(n._repo,zr(n._path,e));var t}function v1(n,e){n=(0,L.m9)(n),nl("set",n._path),tu("set",e,n._path,!1);const t=new L.BH;return f1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function u$(n,e){VR("update",e,n._path,!1);const t=new L.BH;return function WV(n,e,t,r){yy(n,"update",{path:e.toString(),value:t});let i=!0;const l=_b(n),u={};if(ms(t,(f,_)=>{i=!1,u[f]=FR(zr(e,f),ei(_),n.serverSyncTree_,l)}),i)gs("update() called with empty data.  Don't do anything."),$f(0,r,"ok",void 0);else{const f=qT(n),_=function yV(n,e,t,r){!function NB(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=jx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Ur.fromObject(t);return _y(n,new gy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,f);GT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(C,T)=>{const S="ok"===C;S||io("update at "+e+" failed: "+C);const k=Vf(n.serverSyncTree_,f,!S),j=k.length>0?vy(n,e):e;rl(n.eventQueue_,j,k),$f(0,r,C,T)}),ms(t,C=>{const T=m1(n,zr(e,C));vy(n,T)}),rl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function d$(n){return function zV(n,e){const t=function IV(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,T)=>{const S=so(C,t);r=r||Uf(T,S)});let i=n.syncPointTree_.get(t);i?r=r||Uf(i,Kn()):(i=new TR,n.syncPointTree_=n.syncPointTree_.set(t,i));const l=null!=r,u=l?new Ff(r,!0,!1):null;return function oV(n){return MT(n.viewCache_)}(DR(i,e,PT(n.pendingWriteTree_,e._path),l?u.getNode():bn.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=ei(r).withIndex(e._queryParams.getIndex()),l=ub(n.serverSyncTree_,e._path,i);return d1(n.eventQueue_,e._path,l),Promise.resolve(i)},r=>(yy(n,"get for query "+(0,L.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,L.m9)(n))._repo,n).then(e=>new Ng(e,new il(n._repo,n._path),n._queryParams.getIndex()))}class KT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new XR("value",this,new Ng(e.snapshotNode,new il(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JR(this,e,t):null}matches(e){return e instanceof KT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class QT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JR(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=Fg(new il(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new XR(e.type,this,new Ng(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof QT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function yb(n,e,t,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const _=t,C=(T,S)=>{p1(n._repo,n,f),_(T,S)};C.userCallback=t.userCallback,C.context=t.context,t=C}const u=new ek(t,l||void 0),f="value"===e?new KT(u):new QT(e,u);return function XV(n,e,t){let r;r=".info"===Mn(e._path)?PR(n.infoSyncTree_,e,t):PR(n.serverSyncTree_,e,t),d1(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>p1(n._repo,n,f)}function C1(n,e,t,r){return yb(n,"value",e,t,r)}function ik(n,e,t,r){return yb(n,"child_added",e,t,r)}function sk(n,e,t,r){return yb(n,"child_changed",e,t,r)}function ok(n,e,t,r){return yb(n,"child_moved",e,t,r)}function ak(n,e,t,r){return yb(n,"child_removed",e,t,r)}function lk(n,e,t){let r=null;const i=t?new ek(t):null;"value"===e?r=new KT(i):e&&(r=new QT(e,i)),p1(n._repo,n,r)}class Ul{}class ck extends Ul{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("endAt",this._value,e._path,!0);const t=Nx(e._queryParams,this._value,this._key);if(YT(t),jf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class f$ extends Ul{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("endBefore",this._value,e._path,!1);const t=function wB(n,e,t){let r,i;return n.index_===eu?("string"==typeof e&&(e=rR(e)),i=Nx(n,e,t)):(r=null==t?Ld:rR(t),i=Nx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(YT(t),jf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class uk extends Ul{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("startAt",this._value,e._path,!0);const t=kx(e._queryParams,this._value,this._key);if(YT(t),jf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class m$ extends Ul{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tu("startAfter",this._value,e._path,!1);const t=function bB(n,e,t){let r;if(n.index_===eu)"string"==typeof e&&(e=nR(e)),r=kx(n,e,t);else{let i;i=null==t?Jc:nR(t),r=kx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(YT(t),jf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Go(e._repo,e._path,t,e._orderByCalled)}}class y$ extends Ul{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Go(e._repo,e._path,function vB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class C$ extends Ul{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Go(e._repo,e._path,function CB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class w$ extends Ul{constructor(e){super(),this._path=e}_apply(e){ZT(e,"orderByChild");const t=new ir(this._path);if(Pn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Mx(t),i=TT(e._queryParams,r);return jf(i),new Go(e._repo,e._path,i,!0)}}class I$ extends Ul{_apply(e){ZT(e,"orderByKey");const t=TT(e._queryParams,eu);return jf(t),new Go(e._repo,e._path,t,!0)}}class D$ extends Ul{_apply(e){ZT(e,"orderByPriority");const t=TT(e._queryParams,Lr);return jf(t),new Go(e._repo,e._path,t,!0)}}class A$ extends Ul{_apply(e){ZT(e,"orderByValue");const t=TT(e._queryParams,Px);return jf(t),new Go(e._repo,e._path,t,!0)}}class M$ extends Ul{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(tu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ck(this._value,this._key)._apply(new uk(this._value,this._key)._apply(e))}}function Bl(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function uV(n){(0,L.hu)(!NT,"__referenceConstructor has already been defined"),NT=n})(il),function gV(n){(0,L.hu)(!LT,"__referenceConstructor has already been defined"),LT=n}(il);const b1={};function hk(n,e,t,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Xc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gs("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,C,u=y1(l,i),f=u.repoInfo;"undefined"!=typeof process&&process.env&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(_=!0,l=`http://${C}?ns=${f.namespace}`,u=y1(l,i),f=u.repoInfo):_=!u.repoInfo.secure;const T=i&&_?new KC(KC.OWNER):new wU(n.name,n.options,e);$R("Invalid Firebase Database URL",u),Pn(u.path)||Xc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function N$(n,e,t,r){let i=b1[e.name];i||(i={},b1[e.name]=i);let l=i[n.toURLString()];return l&&Xc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new HV(n,false,t,r),i[n.toURLString()]=l,l}(f,n,T,new bU(n.name,t));return new L$(S,n)}class L${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function GV(n,e,t){if(n.stats_=Cx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new DT(n.repoInfo_,(r,i,l,u)=>{qR(n,r,i,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>zR(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Mg(n.repoInfo_,e,(r,i,l,u)=>{qR(n,r,i,l,u)},r=>{zR(n,r)},r=>{!function qV(n,e){ms(e,(t,r)=>{h1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function DU(n,e){const t=n.toString();return vx[t]||(vx[t]=e()),vx[t]}(n.repoInfo_,()=>new AB(n.stats_,n.server_)),n.infoData_=new EB,n.infoSyncTree_=new MR({startListening:(r,i,l,u)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=ub(n.infoSyncTree_,r._path,_),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),h1(n,"connected",!1),n.serverSyncTree_=new MR({startListening:(r,i,l,u)=>(n.server_.listen(r,l,i,(f,_)=>{const C=u(f,_);rl(n.eventQueue_,r._path,C)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new il(this._repo,Kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function k$(n,e){const t=b1[e];(!t||t[n.key]!==n)&&Xc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ZR(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Xc("Cannot call "+e+" on a deleted database.")}}function $$(n,e){pO(n,e)}const H$={".sv":"timestamp"};class z${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Mg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function j$(n){cO(vr.SDK_VERSION),(0,vr._registerComponent)(new Qi.wA("database",(e,{instanceIdentifier:t})=>hk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)(aO,"0.12.8",n),(0,vr.registerVersion)(aO,"0.12.8","esm2017")}();const K$=new yi.Yd("@firebase/database-compat"),fk=function(n){K$.warn("FIREBASE WARNING: "+n)};class J${constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),l=>r(l)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let l=0;l<e.length;++l)i[""+l]=e[l];e=i,fk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class e3{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),mb("DataSnapshot.child","path",e,!1),new Hf(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Hf(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ks{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var l;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const u=ks.getCancelAndContextArgs_("Query.on",r,i),f=(C,T)=>{t.call(u.context,new Hf(this.database,C),T)};f.userCallback=t,f.context=u.context;const _=null===(l=u.cancel)||void 0===l?void 0:l.bind(u.context);switch(e){case"value":return C1(this._delegate,f,_),t;case"child_added":return ik(this._delegate,f,_),t;case"child_removed":return ak(this._delegate,f,_),t;case"child_changed":return sk(this._delegate,f,_),t;case"child_moved":return ok(this._delegate,f,_),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,lk(this._delegate,e,i)}else lk(this._delegate,e)}get(){return d$(this._delegate).then(e=>new Hf(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const l=ks.getCancelAndContextArgs_("Query.once",r,i),u=new L.BH,f=(C,T)=>{const S=new Hf(this.database,C);t&&t.call(l.context,S,T),u.resolve(S)};f.userCallback=t,f.context=l.context;const _=C=>{l.cancel&&l.cancel.call(l.context,C),u.reject(C)};switch(e){case"value":C1(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":ik(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":ak(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":sk(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":ok(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new ks(this.database,Bl(this._delegate,function v$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new y$(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new ks(this.database,Bl(this._delegate,function b$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new C$(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new ks(this.database,Bl(this._delegate,function E$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mb("orderByChild","path",n,!1),new w$(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new ks(this.database,Bl(this._delegate,function T$(){return new I$}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new ks(this.database,Bl(this._delegate,function S$(){return new D$}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new ks(this.database,Bl(this._delegate,function x$(){return new A$}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new ks(this.database,Bl(this._delegate,function g$(n=null,e){return gb("startAt","key",e,!0),new uk(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new ks(this.database,Bl(this._delegate,function _$(n,e){return gb("startAfter","key",e,!0),new m$(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new ks(this.database,Bl(this._delegate,function h$(n,e){return gb("endAt","key",e,!0),new ck(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new ks(this.database,Bl(this._delegate,function p$(n,e){return gb("endBefore","key",e,!0),new f$(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new ks(this.database,Bl(this._delegate,function P$(n,e){return gb("equalTo","key",e,!0),new M$(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ks))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ia(this.database,new il(this._delegate._repo,this._delegate._path))}}class Ia extends ks{constructor(e,t){super(e,new Go(t._repo,t._path,new IT,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ia(this.database,Fg(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ia(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Ia(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=v1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let l=0;l<e.length;++l)i[""+l]=e[l];e=i,fk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nl("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=u$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function c$(n,e,t){if(nl("setWithPriority",n._path),tu("setWithPriority",e,n._path,!1),u1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return f1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),l=>r(l)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function a$(n){return nl("remove",n._path),v1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function W$(n,e,t){var r;if(n=(0,L.m9)(n),nl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new L.BH,f=C1(n,()=>{});return function e$(n,e,t,r,i,l){yy(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:dO(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=g1(n,e,void 0);u.currentInputSnapshot=f;const _=u.update(f.val());if(void 0===_)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{pb("transaction failed: Data returned ",_,u.path),u.status=0;const C=$T(n.transactionQueueTree_,e),T=kg(C)||[];let S;T.push(u),a1(C,T),"object"==typeof _&&null!==_&&(0,L.r3)(_,".priority")?(S=(0,L.DV)(_,".priority"),(0,L.hu)(fb(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(UT(n.serverSyncTree_,e)||bn.EMPTY_NODE).getPriority().val();const k=_b(n),j=ei(_,S),oe=i1(j,f,k);u.currentOutputSnapshotRaw=j,u.currentOutputSnapshotResolved=oe,u.currentWriteId=qT(n);const Ve=Qx(n.serverSyncTree_,e,oe,u.currentWriteId,u.applyLocally);rl(n.eventQueue_,e,Ve),zT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,C,T)=>{let S=null;_?l.reject(_):(S=new Ng(T,new il(n._repo,n._path),Lr),l.resolve(new z$(C,S)))},f,i),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new e3(l.committed,new Hf(this.database,l.snapshot)));return t&&i.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function l$(n,e){n=(0,L.m9)(n),nl("setPriority",n._path),u1("setPriority",e,!1);const t=new L.BH;return f1(n._repo,zr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function o$(n,e){n=(0,L.m9)(n),nl("push",n._path),tu("push",e,n._path,!0);const t=GR(n._repo),r=gB(t),i=Fg(n,r),l=Fg(n,r);let u;return u=null!=e?v1(l,e).then(()=>l):Promise.resolve(l),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Ia(this.database,u));t&&i.then(()=>t(null),u=>t(u));const l=new Ia(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return nl("Reference.onDisconnect",this._delegate._path),new J$(new tk(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function U$(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Xc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new KC(KC.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);l=new KC(u)}!function R$(n,e,t,r){n.repoInfo_=new _x(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Ia){const t=rk(this._delegate,e.toString());return new Ia(this,t)}{const t=nk(this._delegate,e);return new Ia(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=rk(this._delegate,e);return new Ia(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function B$(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),ZR(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function V$(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function JV(n){n.persistentConnection_&&n.persistentConnection_.resume(HR)}(n._repo)}(this._delegate)}}vb.ServerValue={TIMESTAMP:function G$(){return H$}(),increment:n=>function q$(n){return{".sv":{increment:n}}}(n)};var n3=Object.freeze({__proto__:null,initStandalone:function t3({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){cO(t);const u=new Qi.zt("auth-internal",new Qi.H0("database-standalone"));return u.setComponent(new Qi.wA("auth-internal",()=>r,"PRIVATE")),{instance:new vb(hk(n,u,void 0,e,l),n),namespace:i}}});const r3=vb.ServerValue;function pk(n){return null==n}function gk(n){return"function"==typeof n.set}function mk(n,e){return gk(e)?e:n.ref(e)}function _k(n,e){if(function s3(n){return"string"==typeof n}(n))return e.stringCase();if(gk(n))return e.firebaseCase();if(function o3(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Cb(n,e,t="on",r=Yr.z){return new Pi.y(i=>{let l=null;return l=n[t](e,(u,f)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,At.U)(i=>{const{snapshot:l,prevKey:u}=i;let f=null;return l.exists()&&(f=l.key),{type:e,payload:l,prevKey:u,key:f}}),(0,wI.B)())}function yk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function c3(n,e){const{payload:t,prevKey:r,key:i}=e,l=yk(n,i),u=function l3(n,e){if(pk(e))return 0;{const t=yk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const C={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,C],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function vk(n){return(pk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Ck(n,e,t){return function a3(n,e,t){return Cb(n,"value","once",t).pipe(Jr(r=>{const i=[Vt(r)];return e.forEach(l=>i.push(Cb(n,l,"on",t))),(0,pg.T)(...i).pipe(ta(c3,[]))}),Io())}(n,e=vk(e),t)}function bk(n,e,t){const r=(e=vk(e)).map(i=>Cb(n,i,"on",t));return(0,pg.T)(...r)}function wk(n,e){return function(r,i){return _k(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function f3(n){return function(t){return t?_k(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Ek(n,e){return function(){return Cb(n,"value","on",e)}}!function i3(n){n.INTERNAL.registerComponent(new Qi.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new vb(i,r)},"PUBLIC").setServiceProps({Reference:Ia,Query:ks,Database:vb,DataSnapshot:Hf,enableLogging:$$,INTERNAL:n3,ServerValue:r3}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(Ks.Z);const m3=new a.OlP("angularfire2.realtimeDatabaseURL"),_3=new a.OlP("angularfire2.database.use-emulator");let XT=(()=>{class n{constructor(t,r,i,l,u,f,_,C,T,S,k,j,oe,Ve,rt){this.schedulers=f;const Gt=_,qt=(0,Zr.on)(t,u,r);C&&VA(qt,u,T,k,j,oe,S,Ve),this.database=(0,Zr.cc)(`${qt.name}.database.${i}`,"AngularFireDatabase",qt.name,()=>{const Bt=u.runOutsideAngular(()=>qt.database(i||void 0));return Gt&&Bt.useEmulator(...Gt),Bt},[Gt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>mk(this.database,t));let l=i;return r&&(l=r(i)),function p3(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:wk(r,"update"),set:wk(r,"set"),push:i=>r.push(i),remove:f3(r),snapshotChanges:i=>Ck(n,i,t).pipe(Cn.iC),stateChanges:i=>bk(n,i,t).pipe(Cn.iC),auditTrail:i=>function u3(n,e,t){return function h3(n,e,t){return function d3(n,e){return Cb(n,"value","on",e).pipe((0,At.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function cU(...n){const e=(0,Zs.jO)(n);return(0,er.e)((t,r)=>{const i=n.length,l=new Array(i);let u=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,Pd.Xf)(n[_]).subscribe((0,tr.x)(r,C=>{l[_]=C,!f&&!u[_]&&(u[_]=!0,(f=u.every(bs.y))&&(u=null))},lU.Z));t.subscribe((0,tr.x)(r,_=>{if(f){const C=[_,...l];r.next(e?e(...C):C)}}))})}(e),(0,At.U)(([i,l])=>{const u=i.lastKeyToLoad,f=l.map(_=>_.key);return{actions:l,lastKeyToLoad:u,loadedKeys:f}}),function uU(n){return(0,er.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,tr.x)(t,l=>(r||(r=!n(l,i++)))&&t.next(l)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,At.U)(i=>i.actions))}(n,bk(n,e).pipe(ta((i,l)=>[...i,l],[])),t)}(n,i,t).pipe(Cn.iC),valueChanges:(i,l)=>Ck(n,i,t).pipe((0,At.U)(f=>f.map(_=>l&&l.idField?Object.assign(Object.assign({},_.payload.val()),{[l.idField]:_.key}):_.payload.val())),Cn.iC)}}(l,this)}object(t){return function g3(n,e){return{query:n,snapshotChanges:()=>Ek(n,e.schedulers.outsideAngular)().pipe(Cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Ek(n,e.schedulers.outsideAngular)().pipe(Cn.iC,(0,At.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>mk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Zr.Dh),a.LFG(Zr.xv,8),a.LFG(m3,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Cn.HU),a.LFG(_3,8),a.LFG(kC,8),a.LFG(Cg,8),a.LFG(NA,8),a.LFG(FA,8),a.LFG(LA,8),a.LFG(UA,8),a.LFG(BA,8),a.LFG(Ye,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),y3=(()=>{class n{constructor(){Pf.Z.registerVersion("angularfire",Cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[XT]}),n})();const Ik="firebasestorage.googleapis.com",Tk="storageBucket";class di extends L.ZR{constructor(e,t){super(w1(e),`Firebase Storage: ${t} (${w1(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,di.prototype)}_codeEquals(e){return w1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function w1(n){return"storage/"+n}function E1(){return new di("unknown","An unknown error occurred, please check the error payload for server response.")}function Dk(){return new di("canceled","User canceled the upload/download.")}function Sk(){return new di("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Cy(n){return new di("invalid-argument",n)}function Ak(){return new di("app-deleted","The Firebase app was deleted.")}function xk(n){return new di("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bb(n,e){return new di("invalid-format","String does not match format '"+n+"': "+e)}function wb(n){throw new di("internal-error","Internal error: "+n)}class $s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$s.makeFromUrl(e,t)}catch(i){return new $s(e,"")}if(""===r.path)return r;throw function x3(n){return new di("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function C(kt){kt.path_=decodeURIComponent(kt.path)}const S=t.replace(/[.]/g,"\\."),Bt=[{regex:f,indices:{bucket:1,path:3},postModify:function l(kt){"/"===kt.path.charAt(kt.path.length-1)&&(kt.path_=kt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===Ik?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let kt=0;kt<Bt.length;kt++){const gn=Bt[kt],kn=gn.regex.exec(e);if(kn){let Da=kn[gn.indices.path];Da||(Da=""),r=new $s(kn[gn.indices.bucket],Da),gn.postModify(r);break}}if(null==r)throw function A3(n){return new di("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class R3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function JT(n){return"string"==typeof n||n instanceof String}function Mk(n){return I1()&&n instanceof Blob}function I1(){return"undefined"!=typeof Blob}function T1(n,e,t,r){if(r<e)throw Cy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Pk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Gf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Gf||(Gf={})),Gf))();class B3{constructor(e,t,r,i,l,u,f,_,C,T,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=_,this.timeout_=C,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,j)=>{this.resolve_=k,this.reject_=j,this.start_()})}start_(){const t=(r,i)=>{const l=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function F3(n){return void 0!==n}(_)?l():l(_)}catch(_){u(_)}else if(null!==f){const _=E1();_.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,_):_)}else u(i.canceled?this.appDelete_?Ak():Dk():function S3(){return new di("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new eD(!1,null,!0)):this.backoffId_=function k3(n,e,t){let r=1,i=null,l=null,u=!1,f=0;function _(){return 2===f}let C=!1;function T(...rt){C||(C=!0,e.apply(null,rt))}function S(rt){i=setTimeout(()=>{i=null,n(j,_())},rt)}function k(){l&&clearTimeout(l)}function j(rt,...Gt){if(C)return void k();if(rt)return k(),void T.call(null,rt,...Gt);if(_()||u)return k(),void T.call(null,rt,...Gt);let Bt;r<64&&(r*=2),1===f?(f=2,Bt=0):Bt=1e3*(r+Math.random()),S(Bt)}let oe=!1;function Ve(rt){oe||(oe=!0,k(),!C&&(null!==i?(rt||(f=2),clearTimeout(i),S(0)):rt||(f=1)))}return S(0),l=setTimeout(()=>{u=!0,Ve(!0)},t),Ve}((r,i)=>{if(i)return void r(!1,new eD(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===Gf.NO_ERROR,_=l.getStatus();if(!f||this.isRetryStatusCode_(_)){const T=l.getErrorCode()===Gf.ABORT;return void r(!1,new eD(!1,null,T))}const C=-1!==this.successCodes_.indexOf(_);r(!0,new eD(C,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function N3(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),l=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||l}}class eD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function z3(...n){const e=function q3(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(I1())return new Blob(n);throw new di("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ta={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class D1{constructor(e,t){this.data=e,this.contentType=t||null}}function S1(n,e){switch(n){case Ta.RAW:return new D1(Ok(e));case Ta.BASE64:case Ta.BASE64URL:return new D1(Rk(n,e));case Ta.DATA_URL:return new D1(function K3(n){const e=new kk(n);return e.base64?Rk(Ta.BASE64,e.rest):function Y3(n){let e;try{e=decodeURIComponent(n)}catch(t){throw bb(Ta.DATA_URL,"Malformed data URL.")}return Ok(e)}(e.rest)}(e),function Q3(n){return new kk(n).contentType}(e))}throw E1()}function Ok(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Rk(n,e){switch(n){case Ta.BASE64:{const i=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(i||l)throw bb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ta.BASE64URL:{const i=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(i||l)throw bb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Z3(n){return atob(n)}(e)}catch(i){throw bb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class kk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw bb(Ta.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function X3(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class nu{constructor(e,t){let r=0,i="";Mk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Mk(this.data_)){const i=function W3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new nu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new nu(r,!0)}}static getBlob(...e){if(I1()){const t=e.map(r=>r instanceof nu?r.data_:r);return new nu(z3.apply(null,t))}{const t=e.map(u=>JT(u)?S1(Ta.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let l=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)i[l++]=u[f]}),new nu(i,!0)}}uploadData(){return this.data_}}function A1(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function U3(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Nk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function t6(n,e){return e}class oo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||t6}}let tD=null;function Eb(){if(tD)return tD;const n=[];n.push(new oo("bucket")),n.push(new oo("generation")),n.push(new oo("metageneration")),n.push(new oo("name","fullPath",!0));const t=new oo("name");t.xform=function e(l,u){return function n6(n){return!JT(n)||n.length<2?n:Nk(n)}(u)},n.push(t);const i=new oo("size");return i.xform=function r(l,u){return void 0!==u?Number(u):u},n.push(i),n.push(new oo("timeCreated")),n.push(new oo("updated")),n.push(new oo("md5Hash",null,!0)),n.push(new oo("cacheControl",null,!0)),n.push(new oo("contentDisposition",null,!0)),n.push(new oo("contentEncoding",null,!0)),n.push(new oo("contentLanguage",null,!0)),n.push(new oo("contentType",null,!0)),n.push(new oo("metadata","customMetadata",!0)),tD=n,tD}function Fk(n,e,t){const r=A1(e);return null===r?null:function i6(n,e,t){const r={type:"file"},i=t.length;for(let l=0;l<i;l++){const u=t[l];r[u.local]=u.xform(r,e[u.server])}return function r6(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new $s(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}function x1(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}const Lk="prefixes";class ru{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function iu(n){if(!n)throw E1()}function nD(n,e){return function t(r,i){const l=Fk(n,i,e);return iu(null!==l),l}}function by(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function T3(){return new di("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function I3(){return new di("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function E3(n){return new di("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function D3(n){return new di("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Ib(n){const e=by(n);return function t(r,i){let l=e(r,i);return 404===r.getStatus()&&(l=function w3(n){return new di("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function Bk(n,e,t){const i=Bd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new ru(i,"GET",nD(n,t),u);return f.errorHandler=Ib(e),f}function u6(n,e,t,r,i){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),i&&(l.maxResults=i);const f=Bd(e.bucketOnlyServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,T=new ru(f,"GET",function l6(n,e){return function t(r,i){const l=function a6(n,e,t){const r=A1(t);return null===r?null:function o6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Lk])for(const i of t[Lk]){const l=i.replace(/\/$/,""),u=n._makeStorageReference(new $s(e,l));r.prefixes.push(u)}if(t.items)for(const i of t.items){const l=n._makeStorageReference(new $s(e,i.name));r.items.push(l)}return r}(n,e,r)}(n,e,i);return iu(null!==l),l}}(n,e.bucket),C);return T.urlParams=l,T.errorHandler=by(e),T}function $k(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function p6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class rD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function M1(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){iu(!1)}return iu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const y6={STATE_CHANGED:"state_changed"},ao={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function P1(n){switch(n){case"running":case"pausing":case"canceling":return ao.RUNNING;case"paused":return ao.PAUSED;case"success":return ao.SUCCESS;case"canceled":return ao.CANCELED;default:return ao.ERROR}}class v6{constructor(e,t,r){if(function L3(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function wy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class b6 extends class C6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw wb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw wb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Vl(){return new b6}class qk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Eb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function g6(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),u=$k(e,r,i),f={name:u.fullPath},_=Bd(l,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},S=x1(u,t),oe=new ru(_,"POST",function j(Ve){let rt;M1(Ve);try{rt=Ve.getResponseHeader("X-Goog-Upload-URL")}catch(Gt){iu(!1)}return iu(JT(rt)),rt},n.maxUploadRetryTime);return oe.urlParams=f,oe.headers=T,oe.body=S,oe.errorHandler=by(e),oe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vl,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function m6(n,e,t,r){const _=new ru(t,"POST",function l(C){const T=M1(C,["active","final"]);let S=null;try{S=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch(j){iu(!1)}S||iu(!1);const k=Number(S);return iu(!isNaN(k)),new rD(k,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=by(e),_}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(i,Vl,t,r);this._request=l,l.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new rD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let u;try{u=function _6(n,e,t,r,i,l,u,f){const _=new rD(0,0);if(u?(_.current=u.current,_.total=u.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function P3(){return new di("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const C=_.total-_.current;let T=C;i>0&&(T=Math.min(T,i));const S=_.current,oe={"X-Goog-Upload-Command":T===C?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},Ve=r.slice(S,S+T);if(null===Ve)throw Sk();const Bt=new ru(t,"POST",function rt(kt,gn){const kn=M1(kt,["active","final"]),Gi=_.current+T,Da=r.size();let uM;return uM="final"===kn?nD(e,l)(kt,gn):null,new rD(Gi,Da,"final"===kn,uM)},e.maxUploadRetryTime);return Bt.headers=oe,Bt.body=Ve.uploadData(),Bt.progressCallback=f||null,Bt.errorHandler=by(n),Bt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(u,Vl,i,l);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Bk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Vl,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function jk(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let Bt="";for(let kt=0;kt<2;kt++)Bt+=Math.random().toString().slice(2);return Bt}();u["Content-Type"]="multipart/related; boundary="+_;const C=$k(e,r,i),T=x1(C,t),j=nu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===j)throw Sk();const oe={name:C.fullPath},Ve=Bd(l,n.host,n._protocol),Gt=n.maxUploadRetryTime,qt=new ru(Ve,"POST",nD(n,t),Gt);return qt.urlParams=oe,qt.headers=u,qt.body=j.uploadData(),qt.errorHandler=by(e),qt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vl,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Dk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=P1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const l=new v6(t||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(P1(this._state)){case ao.SUCCESS:wy(this._resolve.bind(null,this.snapshot))();break;case ao.CANCELED:case ao.ERROR:wy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(P1(this._state)){case ao.RUNNING:case ao.PAUSED:e.next&&wy(e.next.bind(e,this.snapshot))();break;case ao.SUCCESS:e.complete&&wy(e.complete.bind(e))();break;default:e.error&&wy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Lg{constructor(e,t){this._service=e,this._location=t instanceof $s?t:$s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lg(e,t)}get root(){const e=new $s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nk(this._location.path)}get storage(){return this._service}get parent(){const e=function J3(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new $s(this._location.bucket,e);return new Lg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xk(e)}}function Wk(n,e,t){return O1.apply(this,arguments)}function O1(){return O1=(0,We.Z)(function*(n,e,t){const i=yield Zk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Wk(n,e,i.nextPageToken))}),O1.apply(this,arguments)}function Zk(n,e){null!=e&&"number"==typeof e.maxResults&&T1("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=u6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Vl)}function R6(n){n._throwIfRoot("getDownloadURL");const e=function d6(n,e,t){const i=Bd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new ru(i,"GET",function c6(n,e){return function t(r,i){const l=Fk(n,i,e);return iu(null!==l),function s6(n,e,t,r){const i=A1(e);if(null===i||!JT(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const u=encodeURIComponent;return l.split(",").map(C=>{const S=n.fullPath;return Bd("/b/"+u(n.bucket)+"/o/"+u(S),t,r)+Pk({alt:"media",token:C})})[0]}(l,i,n.host,n._protocol)}}(n,t),u);return f.errorHandler=Ib(e),f}(n.storage,n._location,Eb());return n.storage.makeRequestWithTokens(e,Vl).then(t=>{if(null===t)throw function O3(){return new di("no-download-url","The given file does not have any download URLs.")}();return t})}function Yk(n,e){const t=function e6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new $s(n._location.bucket,t);return new Lg(n.storage,r)}function Kk(n,e){if(n instanceof R1){const t=n;if(null==t._bucket)throw function M3(){return new di("no-default-bucket","No default bucket found. Did you set the '"+Tk+"' property when initializing the app?")}();const r=new Lg(t,t._bucket);return null!=e?Kk(r,e):r}return void 0!==e?Yk(n,e):n}function L6(n,e){if(e&&function N6(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof R1)return function F6(n,e){return new Lg(n,e)}(n,e);throw Cy("To use ref(service, url), the first argument must be a Storage instance.")}return Kk(n,e)}function Qk(n,e){const t=null==e?void 0:e[Tk];return null==t?null:$s.makeFromBucketSpec(t,n)}class R1{constructor(e,t,r,i,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=Ik,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?$s.makeFromBucketSpec(i,this._host):Qk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?$s.makeFromBucketSpec(this._url,e):Qk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){T1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){T1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,We.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,We.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new R3(Ak());{const l=function G3(n,e,t,r,i,l){const u=Pk(n.urlParams),f=n.url+u,_=Object.assign({},n.headers);return function j3(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function V3(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function $3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,l),function H3(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new B3(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,We.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,l).getPromise()})()}}const Xk="@firebase/storage";function tN(n,e){return L6(n=(0,L.m9)(n),e)}function Z6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new R1(t,r,i,e,vr.SDK_VERSION)}!function Y6(){(0,vr._registerComponent)(new Qi.wA("storage",Z6,"PUBLIC").setMultipleInstances(!0)),(0,vr.registerVersion)(Xk,"0.9.5",""),(0,vr.registerVersion)(Xk,"0.9.5","esm2017")}();class iD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class nN{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new iD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new iD(r,this,this._ref))},t)}on(e,t,r,i){let l;return t&&(l="function"==typeof t?u=>t(new iD(u,this,this._ref)):{next:t.next?u=>t.next(new iD(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,i||void 0)}}class rN{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Vd(e,this._service))}get items(){return this._delegate.items.map(e=>new Vd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Vd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function z6(n,e){return Yk(n,e)}(this._delegate,e);return new Vd(t,this.storage)}get root(){return new Vd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Vd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new nN(function B6(n,e,t){return function A6(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new qk(n,new nu(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ta.RAW,r){this._throwIfRoot("putString");const i=S1(t,e),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new nN(new qk(this._delegate,new nu(i.data,!0),l),this)}listAll(){return function H6(n){return function M6(n){const e={prefixes:[],items:[]};return Wk(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new rN(e,this.storage))}list(e){return function j6(n,e){return Zk(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new rN(t,this.storage))}getMetadata(){return function V6(n){return function P6(n){n._throwIfRoot("getMetadata");const e=Bk(n.storage,n._location,Eb());return n.storage.makeRequestWithTokens(e,Vl)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function $6(n,e){return function O6(n,e){n._throwIfRoot("updateMetadata");const t=function h6(n,e,t,r){const l=Bd(e.fullServerUrl(),n.host,n._protocol),f=x1(t,r),C=n.maxOperationRetryTime,T=new ru(l,"PATCH",nD(n,r),C);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=Ib(e),T}(n.storage,n._location,e,Eb());return n.storage.makeRequestWithTokens(t,Vl)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function G6(n){return R6(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function q6(n){return function k6(n){n._throwIfRoot("deleteObject");const e=function f6(n,e){const r=Bd(e.fullServerUrl(),n.host,n._protocol),f=new ru(r,"DELETE",function u(_,C){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Ib(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Vl)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xk(e)}}class iN{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sN(e))throw Cy("ref() expected a child path but got a URL, use refFromURL instead.");return new Vd(tN(this._delegate,e),this)}refFromURL(e){if(!sN(e))throw Cy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$s.makeFromUrl(e,this._delegate.host)}catch(t){throw Cy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vd(tN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function W6(n,e,t,r={}){!function U6(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function sN(n){return/^[A-Za-z]+:\/\//.test(n)}function J6(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new iN(t,r)}function oN(n){const e=function tj(n){return new Pi.y(e=>{const t=u=>e.next(u);t(n.snapshot);const l=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){l()}}).pipe(function v3(n,e=Yr.z){return(0,er.e)((t,r)=>{let i=null,l=null,u=null;const f=()=>{if(i){i.unsubscribe(),i=null;const C=l;l=null,r.next(C)}};function _(){const C=u+n,T=e.now();if(T<C)return i=this.schedule(void 0,C-T),void r.add(i);f()}t.subscribe((0,tr.x)(r,C=>{l=C,u=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{l=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,At.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function sD(n){return{getDownloadURL:()=>Vt(void 0).pipe(Cn.fc,Jr(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>Vt(void 0).pipe(Cn.fc,Jr(()=>n.getMetadata()),Cn.iC),delete:()=>(0,Sn.D)(n.delete()),child:e=>sD(n.child(e)),updateMetadata:e=>(0,Sn.D)(n.updateMetadata(e)),put:(e,t)=>oN(n.put(e,t)),putString:(e,t,r)=>oN(n.putString(e,t,r)),list:e=>(0,Sn.D)(n.list(e)),listAll:()=>(0,Sn.D)(n.listAll())}}!function ej(n){const e={TaskState:ao,TaskEvent:y6,StringFormat:Ta,Storage:iN,Reference:Vd};n.INTERNAL.registerComponent(new Qi.wA("storage-compat",J6,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(Ks.Z);const nj=new a.OlP("angularfire2.storageBucket"),rj=new a.OlP("angularfire2.storage.maxUploadRetryTime"),ij=new a.OlP("angularfire2.storage.maxOperationRetryTime"),sj=new a.OlP("angularfire2.storage.use-emulator");let k1=(()=>{class n{constructor(t,r,i,l,u,f,_,C,T,S){const k=(0,Zr.on)(t,u,r);this.storage=(0,Zr.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const j=u.runOutsideAngular(()=>k.storage(i||void 0)),oe=T;return oe&&j.useEmulator(...oe),_&&j.setMaxUploadRetryTime(_),C&&j.setMaxOperationRetryTime(C),j},[_,C])}ref(t){return sD(this.storage.ref(t))}refFromURL(t){return sD(this.storage.refFromURL(t))}upload(t,r,i){return sD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Zr.Dh),a.LFG(Zr.xv,8),a.LFG(nj,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Cn.HU),a.LFG(rj,8),a.LFG(ij,8),a.LFG(sj,8),a.LFG(Ye,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),aj=(()=>{class n{constructor(){Pf.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[k1],imports:[oj]}),n})(),su=(()=>{class n{constructor(t,r){this.storage=r,this.db=t}pushFileToStorage(t,r){const i=`${t}/${r.file.name}`,l=this.storage.ref(i),u=this.storage.upload(i,r.file);return u.snapshotChanges().pipe(qA(()=>{l.getDownloadURL().subscribe(f=>{r.url=f,r.name=r.file.name,this.saveFileData(t,r)})})).subscribe(),u.percentageChanges()}getFiles(t,r){return this.db.list(t,i=>i.limitToLast(r))}deleteFile(t,r){this.deleteFileDatabase(t,r.key).then(()=>{this.deleteFileStorage(t,r.name)}).catch(i=>console.log(i))}deleteFileDatabase(t,r){return this.db.list(t).remove(r)}deleteFileStorage(t,r){this.storage.ref(t).child(r).delete()}saveFileData(t,r){this.db.list(t).push(r)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(XT),a.LFG(k1))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),aH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[YN]]}),n})(),lH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[aH]}),n})();var gt=R(655),cH=R(1144);const uH=["addListener","removeListener"],dH=["addEventListener","removeEventListener"],hH=["on","off"];function iM(n,e,t,r){if((0,Nl.m)(t)&&(r=t,t=void 0),r)return iM(n,e,t).pipe(HA(r));const[i,l]=function gH(n){return(0,Nl.m)(n.addEventListener)&&(0,Nl.m)(n.removeEventListener)}(n)?dH.map(u=>f=>n[u](e,f,t)):function fH(n){return(0,Nl.m)(n.addListener)&&(0,Nl.m)(n.removeListener)}(n)?uH.map(fF(n,e)):function pH(n){return(0,Nl.m)(n.on)&&(0,Nl.m)(n.off)}(n)?hH.map(fF(n,e)):[];if(!i&&(0,cH.z)(n))return(0,Os.z)(u=>iM(u,e,t))((0,Pd.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Pi.y(u=>{const f=(..._)=>u.next(1<_.length?_:_[0]);return i(f),()=>l(f)})}function fF(n,e){return t=>r=>n[t](e,r)}R(1815),R(6447),R(3139);var sM=R(6254),xb=(R(3756),R(4318)),pF=(R(7726),R(599)),gF=(R(3509),R(2361));const yH=sM.i,Et=["*"],_F=n=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(n):"function"==typeof requestAnimationFrame?requestAnimationFrame(n):setTimeout(n),RH=(n,e)=>{const t=n.prototype;e.forEach(r=>{Object.defineProperty(t,r,{get(){return this.el[r]},set(i){this.z.runOutsideAngular(()=>this.el[r]=i)}})})},kH=(n,e)=>{const t=n.prototype;e.forEach(r=>{t[r]=function(){const i=arguments;return this.z.runOutsideAngular(()=>this.el[r].apply(this.el,i))}})},rr=(n,e,t)=>{t.forEach(r=>n[r]=iM(e,r))};function vt(n){return function(t){const{defineCustomElementFn:r,inputs:i,methods:l}=n;return void 0!==r&&r(),i&&RH(t,i),l&&kH(t,l),t}}let Hi=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement,rr(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Et,decls:1,vars:0,template:function(t,r){1&t&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,gt.gn)([vt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],n),n})(),Pb=(()=>{let n=class{constructor(t,r,i){this.z=i,t.detach(),this.el=r.nativeElement}};return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Et,decls:1,vars:0,template:function(t,r){1&t&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),n=(0,gt.gn)([vt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],n),n})();class vF{constructor(e={}){this.data=e}get(e){return this.data[e]}}let gD=(()=>{class n{constructor(t,r){this.zone=t,this.appRef=r}create(t,r,i){return new J4(t,r,i,this.appRef,this.zone)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.R0b),a.LFG(a.z2F))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class J4{constructor(e,t,r,i,l){this.resolver=e,this.injector=t,this.location=r,this.appRef=i,this.zone=l,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,t,r,i){return this.zone.run(()=>new Promise(l=>{l(eG(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,e,t,r,i))}))}removeViewFromDom(e,t){return this.zone.run(()=>new Promise(r=>{const i=this.elRefMap.get(t);if(i){i.destroy(),this.elRefMap.delete(t);const l=this.elEventsMap.get(t);l&&(l(),this.elEventsMap.delete(t))}r()}))}}const eG=(n,e,t,r,i,l,u,f,_,C,T)=>{const S=e.resolveComponentFactory(_),k=a.zs3.create({providers:nG(C),parent:t}),j=r?r.createComponent(S,r.length,k):S.create(k),oe=j.instance,Ve=j.location.nativeElement;if(C&&Object.assign(oe,C),T)for(const Gt of T)Ve.classList.add(Gt);const rt=CF(n,oe,Ve);return f.appendChild(Ve),r||i.attachView(j.hostView),j.changeDetectorRef.reattach(),l.set(Ve,j),u.set(Ve,rt),Ve},tG=[xb.L,xb.a,xb.b,xb.c,xb.d],CF=(n,e,t)=>n.run(()=>{const r=tG.filter(i=>"function"==typeof e[i]).map(i=>{const l=u=>e[i](u.detail);return t.addEventListener(i,l),()=>t.removeEventListener(i,l)});return()=>r.forEach(i=>i())}),bF=new a.OlP("NavParamsToken"),nG=n=>[{provide:bF,useValue:n},{provide:vF,useFactory:rG,deps:[bF]}],rG=n=>new vF(n),SF=new a.OlP("USERCONFIG");let dG=(()=>{class n{constructor(t,r){this.doc=t,this.backButton=new ro.x,this.keyboardDidShow=new ro.x,this.keyboardDidHide=new ro.x,this.pause=new ro.x,this.resume=new ro.x,this.resize=new ro.x,r.run(()=>{var i;let l;this.win=t.defaultView,this.backButton.subscribeWithPriority=function(u,f){return this.subscribe(_=>_.register(u,C=>r.run(()=>f(C))))},Dy(this.pause,t,"pause"),Dy(this.resume,t,"resume"),Dy(this.backButton,t,"ionBackButton"),Dy(this.resize,this.win,"resize"),Dy(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Dy(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(u=>{l=u}),(null===(i=this.win)||void 0===i?void 0:i.cordova)?t.addEventListener("deviceready",()=>{l("cordova")},{once:!0}):l("dom")})}is(t){return(0,sM.a)(this.win,t)}platforms(){return(0,sM.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(t){return hG(this.win.location.href,t)}isLandscape(){return!this.isPortrait()}isPortrait(){var t,r;return null===(r=(t=this.win).matchMedia)||void 0===r?void 0:r.call(t,"(orientation: portrait)").matches}testUserAgent(t){const r=this.win.navigator;return!!((null==r?void 0:r.userAgent)&&r.userAgent.indexOf(t)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ne),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hG=(n,e)=>{e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null},Dy=(n,e,t)=>{e&&e.addEventListener(t,r=>{n.next(null!=r?r.detail:void 0)})};let Ob=(()=>{class n{constructor(t,r,i,l){this.location=r,this.serializer=i,this.router=l,this.direction=AF,this.animated=xF,this.guessDirection="forward",this.lastNavId=-1,l&&l.events.subscribe(u=>{if(u instanceof tT){const f=u.restoredState?u.restoredState.navigationId:u.id;this.guessDirection=f<this.lastNavId?"back":"forward",this.guessAnimation=u.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?u.id:f}}),t.backButton.subscribeWithPriority(0,u=>{this.pop(),u()})}navigateForward(t,r={}){return this.setDirection("forward",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateBack(t,r={}){return this.setDirection("back",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}navigateRoot(t,r={}){return this.setDirection("root",r.animated,r.animationDirection,r.animation),this.navigate(t,r)}back(t={animated:!0,animationDirection:"back"}){return this.setDirection("back",t.animated,t.animationDirection,t.animation),this.location.back()}pop(){return(0,gt.mG)(this,void 0,void 0,function*(){let t=this.topOutlet;for(;t&&!(yield t.pop());)t=t.parentOutlet})}setDirection(t,r,i,l){this.direction=t,this.animated=fG(t,r,i),this.animationBuilder=l}setTopOutlet(t){this.topOutlet=t}consumeTransition(){let r,t="root";const i=this.animationBuilder;return"auto"===this.direction?(t=this.guessDirection,r=this.guessAnimation):(r=this.animated,t=this.direction),this.direction=AF,this.animated=xF,this.animationBuilder=void 0,{direction:t,animation:r,animationBuilder:i}}navigate(t,r){if(Array.isArray(t))return this.router.navigate(t,r);{const i=this.serializer.parse(t.toString());return void 0!==r.queryParams&&(i.queryParams=Object.assign({},r.queryParams)),void 0!==r.fragment&&(i.fragment=r.fragment),this.router.navigateByUrl(i,r)}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(dG),a.LFG(_e),a.LFG(WA),a.LFG(ji,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fG=(n,e,t)=>{if(!1!==e){if(void 0!==t)return t;if("forward"===n||"back"===n)return n;if("root"===n&&!0===e)return"forward"}},AF="auto",xF=void 0;let jd=(()=>{class n{constructor(t,r,i,l,u){this.locationStrategy=t,this.navCtrl=r,this.elementRef=i,this.router=l,this.routerLink=u,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var t;if(null===(t=this.routerLink)||void 0===t?void 0:t.urlTree){const r=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=r}}onClick(t){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(K),a.Y36(Ob),a.Y36(a.SBq),a.Y36(ji),a.Y36(Ea,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&a.NdJ("click",function(l){return r.onClick(l)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[a.TTD]}),n})(),Sy=(()=>{class n{constructor(t,r,i,l,u){this.locationStrategy=t,this.navCtrl=r,this.elementRef=i,this.router=l,this.routerLink=u,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var t;if(null===(t=this.routerLink)||void 0===t?void 0:t.urlTree){const r=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=r}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(K),a.Y36(Ob),a.Y36(a.SBq),a.Y36(ji),a.Y36(Ea,8))},n.\u0275dir=a.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(t,r){1&t&&a.NdJ("click",function(){return r.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[a.TTD]}),n})();class RF{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,t,r){return this.ctrl.dismiss(e,t,r)}getTop(){return this.ctrl.getTop()}}let wG=(()=>{class n extends RF{constructor(t,r,i){super(pF.m),this.angularDelegate=t,this.resolver=r,this.injector=i}create(t){return super.create(Object.assign(Object.assign({},t),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(gD),a.LFG(a._Vd),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),EG=(()=>{class n extends RF{constructor(t,r,i){super(pF.c),this.angularDelegate=t,this.resolver=r,this.injector=i}create(t){return super.create(Object.assign(Object.assign({},t),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(gD),a.LFG(a._Vd),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const IG=(n,e,t)=>()=>{if(e.defaultView&&"undefined"!=typeof window){(n=>{const e=window,t=e.Ionic;t&&t.config&&"Object"!==t.config.constructor.name||(e.Ionic=e.Ionic||{},e.Ionic.config=Object.assign(Object.assign({},e.Ionic.config),n))})(Object.assign(Object.assign({},n),{_zoneGate:l=>t.run(l)}));const i="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function _H(){var n=[];if("undefined"!=typeof window){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&n.push(R.e(6748).then(R.t.bind(R,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var r=new URL("b","http://a");return r.pathname="c%20d","http://a/c%20d"===r.href&&r.searchParams}catch(i){return!1}}()||"undefined"==typeof WeakMap)&&n.push(R.e(2214).then(R.t.bind(R,4144,23)))}return Promise.all(n)}().then(()=>((n,e)=>"undefined"==typeof window?Promise.resolve():(0,gF.p)().then(()=>(yH(),(0,gF.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal"]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),e))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:_F,jmp:l=>t.runOutsideAngular(l),ael(l,u,f,_){l[i](u,f,_)},rel(l,u,f,_){l.removeEventListener(u,f,_)}}))}};let TG=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:SF,useValue:t},{provide:a.ip1,useFactory:IG,multi:!0,deps:[SF,ne,a.R0b]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[gD,wG,EG],imports:[[Wo]]}),n})(),$l=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"menu"]],template:function(t,r){1&t&&(a.TgZ(0,"footer")(1,"div",0)(2,"nav")(3,"ul")(4,"li"),a._uU(5,"\xa9 2022 El grupito de PWM. Edwin Javier Ortiz Campos, M\xaa Elena Navarro Santana, Alejandro Rodr\xedguez Moreno."),a.qZA()()()()())},styles:['footer[_ngcontent-%COMP%]{background:#525252;bottom:0;right:0;width:100%;clear:both;content:"";display:table;position:fixed}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}}']}),n})();function DG(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",3)(1,"h1",4)(2,"a",5),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().onClick(l.key)}),a._uU(3),a.qZA()()()}if(2&n){const t=e.$implicit;a.Jzz("background-image: url(",t.url,");"),a.xp6(3),a.Oqu(t.localizacion)}}let SG=(()=>{class n{constructor(t){this.uploadService=t,this.percentage=0}ngOnInit(){this.selectedContinent=window.sessionStorage.getItem("selectedContinent"),this.selectedCountry=window.sessionStorage.getItem("selectedCountry"),this.photo=window.sessionStorage.getItem("photo"),this.uploadService.getFiles("/continentes/"+this.selectedContinent+"/listaPaises/"+this.selectedCountry+"/listaCasas",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.houses=t})}onClick(t){window.sessionStorage.setItem("selectedHouse",t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-lista-casas"]],decls:7,vars:5,consts:[[1,"page"],[1,"clase1"],["class","house",3,"style",4,"ngFor","ngForOf"],[1,"house"],[1,"tit1"],["routerLink","/reservarCasa",2,"color","white",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"h1"),a._uU(4),a.qZA()()(),a.YNc(5,DG,4,4,"div",2),a._UZ(6,"app-footer"),a.qZA()),2&t&&(a.xp6(2),a.Jzz("background-image: url(",r.photo,");"),a.xp6(2),a.Oqu(r.selectedCountry),a.xp6(1),a.Q6J("ngForOf",r.houses))},directives:[Hi,On,kf,Sy,$l],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background:grey;font-family:calibri}footer[_ngcontent-%COMP%]{background:#525252;padding:center;bottom:0;right:0;width:100%;clear:both;content:"";display:table}header[_ngcontent-%COMP%]{background:#525252;padding:center;top:0;right:0;width:100%;clear:both;content:"";display:table}.clase1[_ngcontent-%COMP%]{color:#fff;font-family:AvertaBold;padding:130px 180px 70px 70px;position:relative;width:auto;height:700px;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;text-align:right;font-size:40px;text-shadow:2px 2px 5px black}.menu[_ngcontent-%COMP%]{width:900px;margin:0 auto}.logo[_ngcontent-%COMP%]{width:70px;float:left;padding:8px}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%}.welcome[_ngcontent-%COMP%]{position:relative;width:auto;height:900px;background-repeat:no-repeat;background-attachment:scroll}video[_ngcontent-%COMP%]{width:100%;z-index:-1}video[_ngcontent-%COMP%]::-webkit-media-controls{display:none}.present[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;color:#fff;text-align:center;font-size:90px;padding-top:0;text-shadow:2px 2px 5px black}.prestex[_ngcontent-%COMP%]{position:absolute;text-align:center;color:red;text-align:right;font-size:70px;text-shadow:2px 2px 5px black}.house[_ngcontent-%COMP%]{width:auto;height:700px;background-repeat:no-repeat;background-attachment:scroll;background-position:center;background-size:cover;position:relative}.tit1[_ngcontent-%COMP%]{color:#fff;text-align:right;font-size:70px;padding-top:130px;padding-right:180px;text-shadow:2px 2px 5px black}.subtitulopiso1[_ngcontent-%COMP%]{color:#fff;font-size:30px;padding-right:170px;padding-top:0;text-align:right;text-shadow:2px 2px 5px black}@media screen and (max-width: 40em){.clase1[_ngcontent-%COMP%], .tit1[_ngcontent-%COMP%]{padding-right:0;text-align:left}}']}),n})(),AG=(()=>{class n{constructor(){}ngOnInit(){}onClick(t,r,i){window.sessionStorage.setItem("selectedContinent",t),window.sessionStorage.setItem("selectedCountry",r),window.sessionStorage.setItem("photo",i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-pag-principal"]],decls:20,vars:0,consts:[["controls","","autoplay","","muted",""],[1,"present"],[1,"prestex"],["src","https://firebasestorage.googleapis.com/v0/b/popexplore-99fb9.appspot.com/o/images%2Fplanet.mp4?alt=media&token=8e67dc4d-0d30-44ce-abcf-153a9a23da0e",2,"background-attachment","fixed"],[1,"country1"],[1,"tit1"],["routerLink","/pais",2,"color","aliceblue",3,"click"],[1,"subtitulocountry1"],[1,"country3"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"div")(2,"video",0)(3,"div",1)(4,"h1",2),a._uU(5,"Bienvenido, viajero"),a.qZA()(),a._UZ(6,"source",3),a.qZA()(),a.TgZ(7,"div",4)(8,"h1",5)(9,"a",6),a.NdJ("click",function(){return r.onClick("Europa","Italia","https://firebasestorage.googleapis.com/v0/b/popexplore-99fb9.appspot.com/o/images%2Fitaly.png?alt=media&token=3240d0b2-53d0-499e-b53d-1f27c0afc341")}),a._uU(10,"Italia"),a.qZA()(),a.TgZ(11,"p",7),a._uU(12,"Potresti avere l\xb4universo se io potessi avere l\xb4Italia."),a.qZA()(),a.TgZ(13,"div",8)(14,"h1",5)(15,"a",6),a.NdJ("click",function(){return r.onClick("Europa","Canarias","https://firebasestorage.googleapis.com/v0/b/popexplore-99fb9.appspot.com/o/images%2Fgrancanaria.jpg?alt=media&token=86ac2c20-dad7-4e1c-8b9a-5bf2edb999d6")}),a._uU(16,"Gran Canaria"),a.qZA()(),a.TgZ(17,"p",7),a._uU(18,"La costa del Guanarteme"),a.qZA()(),a._UZ(19,"app-footer"),a.qZA())},directives:[Hi,kf,Sy,$l],styles:['.menu[_ngcontent-%COMP%]{width:900px;margin:0 auto}.logo[_ngcontent-%COMP%]{width:70px;float:left;padding:8px;margin-top:10px}.fotoPerfil[_ngcontent-%COMP%]{width:50px;height:50px}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%}video[_ngcontent-%COMP%]{width:100%;z-index:-1}video[_ngcontent-%COMP%]::-webkit-media-controls{display:none}.present[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;font-family:AvertaBold;color:#fff;text-align:center;font-size:90px;padding-top:0;text-shadow:2px 2px 5px black;z-index:1}.prestex[_ngcontent-%COMP%]{position:absolute;text-align:center;font-family:AvertaBold;color:red;text-align:right;font-size:70px;text-shadow:2px 2px 5px black;z-index:1}.country1[_ngcontent-%COMP%]{position:relative;width:auto;height:700px;background-image:url(https://firebasestorage.googleapis.com/v0/b/popexplore-99fb9.appspot.com/o/images%2Fitaly.png?alt=media&token=3240d0b2-53d0-499e-b53d-1f27c0afc341);background-repeat:no-repeat;background-attachment:scroll}.country3[_ngcontent-%COMP%]{position:relative;width:auto;height:700px;background-image:url(https://firebasestorage.googleapis.com/v0/b/popexplore-99fb9.appspot.com/o/images%2Fgrancanaria.jpg?alt=media&token=86ac2c20-dad7-4e1c-8b9a-5bf2edb999d6);background-repeat:no-repeat;background-attachment:scroll}.tit1[_ngcontent-%COMP%]{font-family:AvertaBold;color:#fff;text-align:right;font-size:70px;padding-top:130px;padding-right:180px;text-shadow:2px 2px 5px black}.subtitulocountry1[_ngcontent-%COMP%]{color:#fff;font-family:Averta;font-size:30px;padding-right:170px;padding-top:0;text-align:right;text-shadow:2px 2px 5px black}@media screen and (max-width: 40em){.tit1[_ngcontent-%COMP%], .subtitulocountry1[_ngcontent-%COMP%]{padding-right:0;text-align:left}}']}),n})(),_D=(()=>{class n{constructor(t,r){this.basePath="/users",this.storage=r,this.db=t}pushFileToStorage(t){const r=`${this.basePath}/${t.file.name}`,i=this.storage.ref(r);return this.storage.upload(r,t.file).snapshotChanges().pipe(qA(()=>{i.getDownloadURL().subscribe(u=>{t.photoUrl=u,this.saveFileData(t)})})).subscribe(),!0}getFiles(t){return this.db.list(this.basePath,r=>r.limitToLast(t))}deleteFile(t){this.deleteFileDatabase(t.key).then(()=>{this.deleteFileStorage(t.name)}).catch(r=>console.log(r))}deleteFileDatabase(t){return this.db.list(this.basePath).remove(t)}deleteFileStorage(t){this.storage.ref(this.basePath).child(t).delete()}saveFileData(t){void 0!==window.sessionStorage.getItem("key")&&(this.key=window.sessionStorage.getItem("key"),this.deleteFileDatabase(this.key),window.sessionStorage.removeItem(this.key)),this.db.list(this.basePath).push(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(XT),a.LFG(k1))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xG(n,e){if(1&n&&(a.TgZ(0,"div"),a._UZ(1,"img",2),a.qZA()),2&n){const t=a.oxw().$implicit;a.xp6(1),a.s9C("src",t.photoUrl,a.LSH)}}function MG(n,e){1&n&&(a.TgZ(0,"div")(1,"h1",3)(2,"a",4),a._uU(3,"Atr\xe1s"),a.qZA()()())}function PG(n,e){1&n&&(a.TgZ(0,"div")(1,"h1",3)(2,"a",5),a._uU(3,"Ver reservas"),a.qZA()()())}function OG(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div")(1,"h1",3)(2,"a",6),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw().onClick(i.email,i.name,i.description,i.number,i.country1,i.country2,i.country3,i.userType,i.key,i.photoUrl)}),a._uU(3,"Editar perfil"),a.qZA()()()}}function RG(n,e){if(1&n&&(a.TgZ(0,"div")(1,"h1",7),a._uU(2),a.qZA(),a.TgZ(3,"h1",8),a._uU(4),a.qZA()()),2&n){const t=a.oxw().$implicit;a.xp6(2),a.Oqu(t.name),a.xp6(2),a.Oqu(t.userType)}}function kG(n,e){1&n&&a._UZ(0,"hr")}function NG(n,e){if(1&n&&(a.TgZ(0,"article")(1,"h1",9),a._uU(2,"Pa\xedses que me gustan"),a.qZA(),a.TgZ(3,"p",10),a._uU(4),a.qZA(),a.TgZ(5,"p",10),a._uU(6),a.qZA(),a.TgZ(7,"p",10),a._uU(8),a.qZA(),a.TgZ(9,"h1",9),a._uU(10,"Datos personales"),a.qZA(),a.TgZ(11,"p",10),a._uU(12),a.qZA()()),2&n){const t=a.oxw().$implicit;a.xp6(4),a.Oqu(t.country1),a.xp6(2),a.Oqu(t.country2),a.xp6(2),a.Oqu(t.country3),a.xp6(4),a.hij("Tel\xe9fono de contacto: ",t.number,"")}}function FG(n,e){1&n&&a._UZ(0,"hr")}function LG(n,e){if(1&n&&(a.TgZ(0,"div")(1,"h1",11),a._uU(2,"Acerca de m\xed"),a.qZA(),a.TgZ(3,"textarea",12),a._uU(4),a.qZA()()),2&n){const t=a.oxw().$implicit;a.xp6(4),a.Oqu(t.description)}}function UG(n,e){1&n&&(a.TgZ(0,"p"),a._uU(1,"\xa0"),a.qZA())}function BG(n,e){1&n&&a._UZ(0,"p")}function VG(n,e){1&n&&(a.TgZ(0,"p"),a._uU(1,"\xa0"),a.qZA())}function $G(n,e){1&n&&(a.TgZ(0,"p"),a._uU(1,"\xa0"),a.qZA())}function jG(n,e){if(1&n&&(a.TgZ(0,"ion-list"),a.YNc(1,xG,2,1,"div",1),a.YNc(2,MG,4,0,"div",1),a.YNc(3,PG,4,0,"div",1),a.YNc(4,OG,4,0,"div",1),a.YNc(5,RG,5,2,"div",1),a.YNc(6,kG,1,0,"hr",1),a.YNc(7,NG,13,4,"article",1),a.YNc(8,FG,1,0,"hr",1),a.YNc(9,LG,5,1,"div",1),a.YNc(10,UG,2,0,"p",1),a.YNc(11,BG,1,0,"p",1),a.YNc(12,VG,2,0,"p",1),a.YNc(13,$G,2,0,"p",1),a.qZA()),2&n){const t=e.$implicit,r=a.oxw();a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email),a.xp6(1),a.Q6J("ngIf",r.userLogged.email===t.email)}}let HG=(()=>{class n{constructor(t){this.userUploadService=t}ngOnInit(){this.userUploadService.getFiles(10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.fileUploads=t}),this.userLogged=JSON.parse(localStorage.getItem("user"))}onClick(t,r,i,l,u,f,_,C,T,S){window.sessionStorage.setItem("email",t),window.sessionStorage.setItem("name",r),window.sessionStorage.setItem("description",i),window.sessionStorage.setItem("number",l),window.sessionStorage.setItem("country1",u),window.sessionStorage.setItem("country2",f),window.sessionStorage.setItem("country3",_),window.sessionStorage.setItem("userType",C),window.sessionStorage.setItem("key",T),window.sessionStorage.setItem("photoUrl",S)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(_D))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-pag-perfil"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"phoper",3,"src"],[1,"atras"],["href","home",1,"atra"],["href","reservas",1,"atra"],["href","editarPerfil",1,"atra",3,"click"],[1,"name"],[1,"rolname"],[1,"moreInfo"],[1,"countries2"],[1,"acer"],["readonly","",1,"box"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content"),a.YNc(1,jG,14,13,"ion-list",0),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngForOf",r.fileUploads))},directives:[Hi,On,Pb,P],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;background-attachment:fixed}header[_ngcontent-%COMP%]{position:fixed;background:#525252;padding:center;top:0;right:0;width:100%;clear:both;content:"";display:table}.fotoPerfil[_ngcontent-%COMP%]{width:50px;height:50px}.menu[_ngcontent-%COMP%]{width:900px;margin:0 auto}.logo[_ngcontent-%COMP%]{width:70px;float:left;padding-left:8px;margin-top:10px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%}.phoper[_ngcontent-%COMP%]{width:200px;height:200px;float:left;border-radius:50%;background-repeat:no-repeat;background-attachment:scroll;background-size:cover;margin-top:100px;margin-left:20px;box-shadow:2px 2px 5px #000}.atras[_ngcontent-%COMP%]{font-size:20px;margin-left:1400px;margin-top:50px}.atra[_ngcontent-%COMP%]{color:#fff;text-shadow:2px 2px 5px black}.name[_ngcontent-%COMP%]{color:#fff;font-size:50px;text-shadow:2px 2px 5px black;margin-left:300px;margin-top:130px}.rolname[_ngcontent-%COMP%]{color:#fff;font-size:30px;text-shadow:2px 2px 5px black;margin-left:300px}hr[_ngcontent-%COMP%]{width:80%;height:8px;margin:100px auto;background-color:#666;border:0 none}.moreInfo[_ngcontent-%COMP%]{color:#fff;font-size:70px;text-shadow:2px 2px 5px black;margin-left:300px;margin-top:50px}.countries2[_ngcontent-%COMP%]{color:#fff;font-size:40px;text-shadow:2px 2px 5px black;margin-left:300px;margin-top:50px}.acer[_ngcontent-%COMP%]{color:#fff;font-size:30px;text-shadow:2px 2px 5px black;text-align:center;margin-top:80px}.edit[_ngcontent-%COMP%]{color:#000;font-size:15px;text-shadow:2px 2px 5px black;float:right;margin-top:20px;margin-right:50px}form[_ngcontent-%COMP%]{display:block}.box[_ngcontent-%COMP%]{background-color:#3c3c3c;display:block;margin-left:auto;margin-right:auto;width:800px;height:200px;box-shadow:1px 1px 10px red;resize:none;color:#fff;font-weight:700}.footer[_ngcontent-%COMP%]{position:relative;bottom:0;width:100%;height:60px;background:#525252}@media screen and (max-width: 40em){.phoper[_ngcontent-%COMP%]{clear:both;float:none;padding:0;margin-left:0;margin-top:0}.atras[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .rolname[_ngcontent-%COMP%], .moreInfo[_ngcontent-%COMP%], .countries2[_ngcontent-%COMP%]{padding:0;clear:both;float:none;margin-left:0;margin-top:0}}']}),n})();function GG(n,e){1&n&&(a.TgZ(0,"h2"),a._uU(1,"Europa"),a.qZA())}function qG(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div"),a.YNc(1,GG,2,0,"h2",7),a.TgZ(2,"h3"),a._uU(3),a.qZA(),a.TgZ(4,"a",8),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().onSelect("Europa",l.key,l.imagenPortada)}),a._UZ(5,"img",9),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA()()}if(2&n){const t=e.$implicit,r=e.index;a.xp6(1),a.Q6J("ngIf",0==r),a.xp6(2),a.Oqu(t.key),a.xp6(2),a.s9C("src",t.imagenPortada,a.LSH),a.xp6(2),a.Oqu(t.detalles)}}function zG(n,e){1&n&&(a.TgZ(0,"h2"),a._uU(1,"Asia"),a.qZA())}function WG(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div"),a.YNc(1,zG,2,0,"h2",7),a.TgZ(2,"h3"),a._uU(3),a.qZA(),a.TgZ(4,"a",8),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().onSelect("Asia",l.key,l.imagenPortada)}),a._UZ(5,"img",9),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA()()}if(2&n){const t=e.$implicit,r=e.index;a.xp6(1),a.Q6J("ngIf",0==r),a.xp6(2),a.Oqu(t.key),a.xp6(2),a.s9C("src",t.imagenPortada,a.LSH),a.xp6(2),a.Oqu(t.detalles)}}function ZG(n,e){1&n&&(a.TgZ(0,"h2"),a._uU(1,"\xc1frica"),a.qZA())}function YG(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div"),a.YNc(1,ZG,2,0,"h2",7),a.TgZ(2,"h3"),a._uU(3),a.qZA(),a.TgZ(4,"a",8),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().onSelect("\xc1frica",l.key,l.imagenPortada)}),a._UZ(5,"img",9),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA()()}if(2&n){const t=e.$implicit,r=e.index;a.xp6(1),a.Q6J("ngIf",0==r),a.xp6(2),a.Oqu(t.key),a.xp6(2),a.s9C("src",t.imagenPortada,a.LSH),a.xp6(2),a.Oqu(t.detalles)}}function KG(n,e){1&n&&(a.TgZ(0,"h2"),a._uU(1,"Ocean\xeda"),a.qZA())}function QG(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div"),a.YNc(1,KG,2,0,"h2",7),a.TgZ(2,"h3"),a._uU(3),a.qZA(),a.TgZ(4,"a",8),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().onSelect("Ocean\xeda",l.key,l.imagenPortada)}),a._UZ(5,"img",9),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA()()}if(2&n){const t=e.$implicit,r=e.index;a.xp6(1),a.Q6J("ngIf",0==r),a.xp6(2),a.Oqu(t.key),a.xp6(2),a.s9C("src",t.imagenPortada,a.LSH),a.xp6(2),a.Oqu(t.detalles)}}function XG(n,e){1&n&&(a.TgZ(0,"h2"),a._uU(1,"Am\xe9rica"),a.qZA())}function JG(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div"),a.YNc(1,XG,2,0,"h2",7),a.TgZ(2,"h3"),a._uU(3),a.qZA(),a.TgZ(4,"a",8),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().onSelect("Am\xe9rica",l.key,l.imagenPortada)}),a._UZ(5,"img",9),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA()()}if(2&n){const t=e.$implicit,r=e.index;a.xp6(1),a.Q6J("ngIf",0==r),a.xp6(2),a.Oqu(t.key),a.xp6(2),a.s9C("src",t.imagenPortada,a.LSH),a.xp6(2),a.Oqu(t.detalles)}}let eq=(()=>{class n{constructor(t){this.uploadService=t}ngOnInit(){this.uploadService.getFiles("/continentes/\xc1frica/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesAfrica=t}),this.uploadService.getFiles("/continentes/Ocean\xeda/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesOceania=t}),this.uploadService.getFiles("/continentes/Europa/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesEurope=t}),this.uploadService.getFiles("/continentes/Am\xe9rica/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesAmerica=t}),this.uploadService.getFiles("/continentes/Asia/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesAsia=t})}onSelect(t,r,i){window.sessionStorage.setItem("selectedCountry",r),window.sessionStorage.setItem("selectedContinent",t),window.sessionStorage.setItem("photo",i)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-lista-paises"]],decls:13,vars:5,consts:[[1,"wrapper"],["id","col1"],[4,"ngFor","ngForOf"],["id","col2"],["id","col3"],["id","col4"],["id","col5"],[4,"ngIf"],["routerLink","/pais",3,"click"],["width","300px","height","150px",3,"src"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"div",0)(2,"section",1),a.YNc(3,qG,8,4,"div",2),a.qZA(),a.TgZ(4,"section",3),a.YNc(5,WG,8,4,"div",2),a.qZA(),a.TgZ(6,"section",4),a.YNc(7,YG,8,4,"div",2),a.qZA(),a.TgZ(8,"section",5),a.YNc(9,QG,8,4,"div",2),a.qZA(),a.TgZ(10,"section",6),a.YNc(11,JG,8,4,"div",2),a.qZA()(),a._UZ(12,"app-footer"),a.qZA()),2&t&&(a.xp6(3),a.Q6J("ngForOf",r.countriesEurope),a.xp6(2),a.Q6J("ngForOf",r.countriesAsia),a.xp6(2),a.Q6J("ngForOf",r.countriesAfrica),a.xp6(2),a.Q6J("ngForOf",r.countriesOceania),a.xp6(2),a.Q6J("ngForOf",r.countriesAmerica))},directives:[Hi,On,P,kf,Sy,$l],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto;color:#fff}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{float:left;width:17%}#col2[_ngcontent-%COMP%]{float:left;width:17%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:17%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%], #col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0}#col5[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0;padding-bottom:150px}}']}),n})(),Wf=(()=>{class n{constructor(t,r,i,l){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=l,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{window.location.reload(),this.router.navigate(["home"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload(),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(JM),a.LFG(kC),a.LFG(ji),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tq=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-iniciar-sesion"]],decls:34,vars:0,consts:[[1,"center"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Email","required","",1,"formControl",2,"color","black"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl",2,"color","black"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",2,"color","black",3,"click"],[1,"forgotPassword"],["routerLink","/forgot"],[1,"redirectToLogin"],["routerLink","/registrar",1,"redirect"]],template:function(t,r){if(1&t){const i=a.EpF();a.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),a._UZ(4,"br")(5,"br"),a.TgZ(6,"h3"),a._uU(7,"Iniciar Sesi\xf3n"),a.qZA(),a._UZ(8,"br")(9,"br"),a.TgZ(10,"div",3),a._UZ(11,"input",4,5),a.qZA(),a._UZ(13,"br")(14,"br"),a.TgZ(15,"div",3),a._UZ(16,"input",6,7),a.qZA(),a._UZ(18,"br")(19,"br"),a.TgZ(20,"div",3)(21,"input",8),a.NdJ("click",function(){a.CHM(i);const u=a.MAs(12),f=a.MAs(17);return r.authService.SignIn(u.value,f.value)}),a.qZA()(),a._UZ(22,"br")(23,"br"),a.TgZ(24,"div",9)(25,"span",10),a._uU(26,"Si olvid\xf3 su contrase\xf1a, pulse aqu\xed"),a.qZA()()(),a._UZ(27,"br")(28,"br"),a.TgZ(29,"div",11)(30,"span"),a._uU(31,"Si no tiene, cree una cuenta: "),a.TgZ(32,"span",12),a._uU(33," Registrarse"),a.qZA()()()()()()}},directives:[Hi,Ea,jd],styles:["body[_ngcontent-%COMP%]{background-color:gray}body[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.class1[_ngcontent-%COMP%]{text-align:center;color:#fff}input[_ngcontent-%COMP%]{width:10%;text-align:center}.center[_ngcontent-%COMP%], .left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-align:center;color:#fff}@media screen and (max-width: 40em){.displayTableCell[_ngcontent-%COMP%]{padding-bottom:200px}input[_ngcontent-%COMP%]{width:50%}}"]}),n})();class cM{constructor(e,t,r,i,l,u,f,_){this.email=e,this.number=i,this.name=t,this.description=r,this.country1=l,this.country2=u,this.country3=f,this.userType=""===_?"Hu\xe9sped":"Anfitri\xf3n"}}let nq=(()=>{class n{constructor(t,r){this.authService=t,this.userUploadService=r}selectFile(t){this.selectedFiles=t.target.files}upload(t,r,i,l,u,f,_,C){if(this.selectedFiles){const T=this.selectedFiles.item(0);this.selectedFiles=void 0,T&&(this.currentFileUploadUsers=new cM(t,r,i,l,u,f,_,C),this.currentFileUploadUsers.file=T,this.userUploadService.pushFileToStorage(this.currentFileUploadUsers))}}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wf),a.Y36(_D))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-registrar-cuenta"]],decls:70,vars:0,consts:[[1,"center"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl",2,"color","black"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl",2,"color","black"],["userPwd",""],["type","text","placeholder","Nombre","required","",1,"formControl",2,"color","black"],["userName",""],["type","text","placeholder","Pa\xeds de inter\xe9s 1","required","",1,"formControl",2,"color","black"],["userFirstCountry",""],["type","text","placeholder","Pa\xeds de inter\xe9s 2",1,"formControl",2,"color","black"],["userSecondCountry",""],["type","text","placeholder","Pa\xeds de inter\xe9s 3",1,"formControl",2,"color","black"],["userThirdCountry",""],["type","text","placeholder","Phone Number",1,"formControl",2,"color","black"],["userNumber",""],["type","text","placeholder","Breve descripci\xf3n",1,"formControl",2,"color","black"],["userDescription",""],["type","file","required","",1,"text-nowrap","text-truncate",2,"color","white",3,"change"],["type","text","placeholder","Por defecto, no",2,"color","black"],["userType",""],["type","button","value","Sign Up",1,"btn","btnPrimary",2,"color","black",3,"click"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(t,r){if(1&t){const i=a.EpF();a.TgZ(0,"ion-content"),a._UZ(1,"br")(2,"br"),a.TgZ(3,"div",0)(4,"div",1)(5,"div",2),a._UZ(6,"br")(7,"br"),a.TgZ(8,"h3"),a._uU(9,"Crear cuenta"),a.qZA(),a._UZ(10,"br")(11,"br"),a.TgZ(12,"div",3),a._UZ(13,"input",4,5),a.qZA(),a._UZ(15,"br")(16,"br"),a.TgZ(17,"div",3),a._UZ(18,"input",6,7),a.qZA(),a._UZ(20,"br")(21,"br"),a.TgZ(22,"div",3),a._UZ(23,"input",8,9),a.qZA(),a._UZ(25,"br")(26,"br"),a.TgZ(27,"div",3),a._UZ(28,"input",10,11),a.qZA(),a._UZ(30,"br")(31,"br"),a.TgZ(32,"div",3),a._UZ(33,"input",12,13),a.qZA(),a._UZ(35,"br")(36,"br"),a.TgZ(37,"div",3),a._UZ(38,"input",14,15),a.qZA(),a._UZ(40,"br")(41,"br"),a.TgZ(42,"div",3),a._UZ(43,"input",16,17),a.qZA(),a._UZ(45,"br")(46,"br"),a.TgZ(47,"div",3),a._UZ(48,"input",18,19),a.qZA(),a._UZ(50,"br")(51,"br"),a.TgZ(52,"input",20),a.NdJ("change",function(u){return r.selectFile(u)}),a.qZA(),a._UZ(53,"br")(54,"br"),a._uU(55," \xbfSubir\xe1s casas? "),a._UZ(56,"input",21,22)(58,"br")(59,"br"),a.TgZ(60,"div",3)(61,"input",23),a.NdJ("click",function(){a.CHM(i);const u=a.MAs(14),f=a.MAs(19);return r.authService.SignUp(u.value,f.value)})("click",function(){a.CHM(i);const u=a.MAs(14),f=a.MAs(24),_=a.MAs(49),C=a.MAs(44),T=a.MAs(29),S=a.MAs(34),k=a.MAs(39),j=a.MAs(57);return r.upload(u.value,f.value,_.value,C.value,T.value,S.value,k.value,j.value)}),a.qZA()()(),a._UZ(62,"br")(63,"br"),a.TgZ(64,"div",24)(65,"span"),a._uU(66,"Si ya tienes una cuenta "),a.TgZ(67,"span",25),a._uU(68,"Inicie sesi\xf3n"),a.qZA()()()()(),a._UZ(69,"app-footer"),a.qZA()}},directives:[Hi,Ea,jd,$l],styles:["body[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.class1[_ngcontent-%COMP%]{text-align:center;color:#fff}input[_ngcontent-%COMP%]{width:10%;text-align:center}.center[_ngcontent-%COMP%], .left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-align:center;color:#fff}@media screen and (max-width: 40em){.displayTableCell[_ngcontent-%COMP%]{padding-bottom:200px}input[_ngcontent-%COMP%]{width:50%}}"]}),n})(),rq=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-olvidar-cuenta"]],decls:29,vars:0,consts:[[1,"center"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email","required","",1,"formControl",2,"color","black"],["passwordResetEmail",""],["type","submit","value","Resetear contrase\xf1a",1,"btn","btnPrimary",2,"color","black",3,"click"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(t,r){if(1&t){const i=a.EpF();a.TgZ(0,"ion-content"),a._UZ(1,"br")(2,"br"),a.TgZ(3,"div",0)(4,"div",1)(5,"div",2),a._UZ(6,"br")(7,"br"),a.TgZ(8,"h3"),a._uU(9,"Cambiar contrase\xf1a"),a.qZA(),a._UZ(10,"br")(11,"br"),a.TgZ(12,"p",3),a._uU(13,"Introduzca su email para requerir un cambio de contrase\xf1a."),a.qZA(),a._UZ(14,"br")(15,"br"),a.TgZ(16,"div",4),a._UZ(17,"input",5,6),a.qZA(),a._UZ(19,"br")(20,"br"),a.TgZ(21,"div",4)(22,"input",7),a.NdJ("click",function(){a.CHM(i);const u=a.MAs(18);return r.authService.ForgotPassword(u.value)}),a.qZA()()(),a._UZ(23,"br")(24,"br"),a.TgZ(25,"div",8)(26,"span",9),a._uU(27,"Volver a inicio de sesi\xf3n"),a.qZA()()()(),a._UZ(28,"app-footer"),a.qZA()}},directives:[Hi,Ea,jd,$l],styles:["body[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.class1[_ngcontent-%COMP%]{text-align:center;color:#fff}input[_ngcontent-%COMP%]{width:10%;text-align:center}.center[_ngcontent-%COMP%], .left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-align:center;color:#fff}@media screen and (max-width: 40em){.displayTableCell[_ngcontent-%COMP%]{padding-bottom:200px}input[_ngcontent-%COMP%]{width:50%}}"]}),n})();function iq(n,e){if(1&n&&(a.TgZ(0,"section")(1,"div",2)(2,"h1"),a._uU(3),a.qZA(),a.TgZ(4,"h6")(5,"a",3),a._uU(6,"Ver casas disponibles"),a.qZA()()(),a.TgZ(7,"div",4)(8,"div"),a._UZ(9,"img",5),a.qZA(),a.TgZ(10,"div",6)(11,"h2",7),a._uU(12,"Historia"),a.qZA(),a._UZ(13,"br")(14,"br"),a.TgZ(15,"p"),a._uU(16),a.qZA()()(),a.TgZ(17,"div",8)(18,"h1"),a._uU(19),a.qZA()(),a.TgZ(20,"div",9)(21,"div"),a._UZ(22,"img",10),a.qZA(),a.TgZ(23,"div",11)(24,"h2",12),a._uU(25,"Gastronom\xeda"),a.qZA(),a._UZ(26,"br")(27,"br"),a.TgZ(28,"p"),a._uU(29),a.qZA()()(),a._UZ(30,"app-footer"),a.qZA()),2&n){const t=a.oxw().$implicit,r=a.oxw();a.xp6(1),a.Jzz("background-image: url(",t.imagenPortada,");"),a.xp6(2),a.Oqu(t.key),a.xp6(6),a.s9C("src",t.imagenSegunda,a.LSH),a.xp6(7),a.Oqu(t.descripcionUno),a.xp6(1),a.Jzz("background-image: url(",t.imagenPortada,");"),a.xp6(2),a.hij("Gastronom\xeda de ",r.selectedCountry,""),a.xp6(3),a.s9C("src",t.imagenComida,a.LSH),a.xp6(7),a.Oqu(t.descripcionDos)}}function sq(n,e){if(1&n&&(a.TgZ(0,"ion-list"),a.YNc(1,iq,31,12,"section",1),a.qZA()),2&n){const t=e.$implicit,r=a.oxw();a.xp6(1),a.Q6J("ngIf",t.key===r.selectedCountry)}}let oq=(()=>{class n{constructor(t){this.uploadService=t,this.percentage=0}ngOnInit(){this.selectedContinent=window.sessionStorage.getItem("selectedContinent"),this.selectedCountry=window.sessionStorage.getItem("selectedCountry"),this.uploadService.getFiles("/continentes/"+this.selectedContinent+"/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countries=t})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-pais"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"clase1"],["routerLink","/listaCasas",2,"color","white"],[1,"clase2"],["id","image",3,"src"],["id","descripcion"],[1,"subtitulo"],[1,"imagen_gastronomia"],[1,"clase3"],["id","image2",3,"src"],["id","descripcion2"],[1,"subtitulo2"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content"),a.YNc(1,sq,2,1,"ion-list",0),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngForOf",r.countries))},directives:[Hi,On,Pb,P,kf,Sy,$l],styles:[".clase1[_ngcontent-%COMP%]{color:#fff;font-family:AvertaBold;padding:130px 180px 70px 70px;position:relative;width:auto;height:700px;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;text-align:right;font-size:40px;text-shadow:2px 2px 5px black}.clase2[_ngcontent-%COMP%]{padding:2% 2% 180px}#descripcion[_ngcontent-%COMP%]{color:#fff;font-family:Averta;font-size:20px;padding-right:50%;text-align:justify;text-shadow:2px 2px 5px black}#image[_ngcontent-%COMP%]{float:right;margin-right:5%;margin-top:5%;margin-bottom:5%;padding-left:20px;width:600px;padding-bottom:100px;height:450px}#image2[_ngcontent-%COMP%]{float:right;margin-right:5%;margin-top:5%;margin-bottom:5%;padding-left:20px;width:600px;height:450px}.subtitulo[_ngcontent-%COMP%], .subtitulo2[_ngcontent-%COMP%]{text-align:center;font-family:AvertaBold;color:#fff}#descripcion2[_ngcontent-%COMP%]{color:#fff;font-family:Averta;font-size:20px;padding-right:50%;text-align:justify;text-shadow:2px 2px 5px black;padding-bottom:50px}.clase3[_ngcontent-%COMP%]{padding:2% 2% 300px}.imagen_gastronomia[_ngcontent-%COMP%]{color:#fff;font-family:AvertaBold;padding:130px 180px 70px 70px;position:relative;width:auto;height:700px;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;text-align:right;font-size:40px;text-shadow:2px 2px 5px black}@media screen and (max-width: 40em){.clase1[_ngcontent-%COMP%]{padding-right:0;text-align:left}.clase3[_ngcontent-%COMP%]{padding-bottom:300px}.imagen_gastronomia[_ngcontent-%COMP%]{padding-right:0;text-align:left}#descripcion2[_ngcontent-%COMP%], #descripcion[_ngcontent-%COMP%], #image[_ngcontent-%COMP%], #image2[_ngcontent-%COMP%]{clear:both;float:none;padding:0}.imagen_gastronomia[_ngcontent-%COMP%]{font-size:20px}}"]}),n})();class aq{constructor(e,t,r,i,l,u,f){this.name=e,this.url=t,this.email=r,this.key=i,this.urlPais=l,this.continente=u,this.pais=f}}let kF=(()=>{class n{constructor(t){this.db=t}getFiles(t,r){return this.db.list(t,i=>i.limitToLast(r))}deleteFileDatabase(t,r){return this.db.list(t).remove(r)}saveFileData(t,r){this.db.list(t).push(r)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(XT))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"section")(1,"div",2)(2,"h1"),a._uU(3),a.qZA()(),a.TgZ(4,"div",3)(5,"div"),a._UZ(6,"img",4),a.qZA(),a.TgZ(7,"div",5)(8,"h2",6),a._uU(9,"Informaci\xf3n sobre el piso"),a.qZA(),a._UZ(10,"br")(11,"br"),a.TgZ(12,"p"),a._uU(13),a._UZ(14,"br")(15,"br"),a._uU(16),a._UZ(17,"br")(18,"br"),a._uU(19),a.qZA()()(),a.TgZ(20,"div",7)(21,"div",8)(22,"h2",9),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit,l=a.oxw();return l.onClick(i.localizacion,i.url,l.selectedHouse,l.photo)}),a.TgZ(23,"a",10),a._uU(24,"Reservar este piso"),a.qZA()(),a._UZ(25,"br")(26,"br"),a.qZA()(),a._UZ(27,"app-footer"),a.qZA()}if(2&n){const t=a.oxw().$implicit,r=a.oxw();a.xp6(1),a.Jzz("background-image: url(",r.photo,");"),a.xp6(2),a.Oqu(t.localizacion),a.xp6(3),a.s9C("src",t.url,a.LSH),a.xp6(7),a.hij(" Este piso se encuentra en ",t.localizacion," "),a.xp6(3),a.hij(" Dispone de ",t.numHabitaciones," "),a.xp6(3),a.hij(" El precio de este piso es de ",t.precio," ")}}function cq(n,e){if(1&n&&(a.TgZ(0,"ion-list"),a.YNc(1,lq,28,8,"section",1),a.qZA()),2&n){const t=e.$implicit,r=a.oxw();a.xp6(1),a.Q6J("ngIf",t.key===r.selectedHouse)}}let uq=(()=>{class n{constructor(t){this.uploadService=t,this.percentage=0}ngOnInit(){this.selectedContinent=window.sessionStorage.getItem("selectedContinent"),this.selectedCountry=window.sessionStorage.getItem("selectedCountry"),this.photo=window.sessionStorage.getItem("photo"),this.selectedHouse=window.sessionStorage.getItem("selectedHouse"),this.uploadService.getFiles("/continentes/"+this.selectedContinent+"/listaPaises/"+this.selectedCountry+"/listaCasas/",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.houses=t}),this.userLogged=JSON.parse(localStorage.getItem("user"))}onClick(t,r,i,l){this.currentFileUploadReservas=new aq(t,r,this.userLogged.email,i,l,this.selectedContinent,this.selectedCountry),this.uploadService.saveFileData("/reservas/",this.currentFileUploadReservas)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(kF))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-reserva-casa"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"clase1"],[1,"clase2"],["id","image",2,"width","600px","height","450px",3,"src"],["id","descripcion"],[1,"subtitulo"],[1,"clase3"],["id","descripcion2"],["routerLink","/reservado",1,"subtitulo2",3,"click"],[2,"color","white"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content"),a.YNc(1,cq,2,1,"ion-list",0),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngForOf",r.houses))},directives:[Hi,On,Pb,P,Ea,jd,$l],styles:[".clase1[_ngcontent-%COMP%]{color:#fff;font-family:AvertaBold;padding:130px 180px 70px 70px;position:relative;width:auto;height:700px;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;text-align:right;font-size:40px;text-shadow:2px 2px 5px black}.clase2[_ngcontent-%COMP%]{padding:2%}#descripcion[_ngcontent-%COMP%]{float:center;color:#fff;font-family:Averta;font-size:20px;padding-right:50%;text-align:justify;text-shadow:2px 2px 5px black}#image[_ngcontent-%COMP%], #image2[_ngcontent-%COMP%]{float:right;margin-right:5%;margin-top:5%;margin-bottom:5%;width:600px;height:450px}.subtitulo[_ngcontent-%COMP%], .subtitulo2[_ngcontent-%COMP%]{text-align:center;font-family:AvertaBold;color:#fff}#descripcion2[_ngcontent-%COMP%]{float:center;color:#fff;font-family:Averta;font-size:20px;padding-right:50%;text-align:justify;text-shadow:2px 2px 5px black}.clase3[_ngcontent-%COMP%]{padding:2%}.imagen_gastronomia[_ngcontent-%COMP%]{color:#fff;font-family:AvertaBold;padding:130px 180px 70px 70px;position:relative;width:auto;height:700px;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;text-align:right;font-size:40px;text-shadow:2px 2px 5px black}@media screen and (max-width: 40em){#descripcion2[_ngcontent-%COMP%], #descripcion[_ngcontent-%COMP%], #image[_ngcontent-%COMP%], #image2[_ngcontent-%COMP%]{clear:both;float:none;padding:0}.clase1[_ngcontent-%COMP%]{font-size:20px;padding-right:0;text-align:left}.clase3[_ngcontent-%COMP%]{padding-bottom:200px}}"]}),n})();function dq(n,e){if(1&n&&(a.TgZ(0,"section")(1,"div",2)(2,"h1"),a._uU(3),a.qZA()(),a.TgZ(4,"div",3)(5,"div"),a._UZ(6,"img",4),a.qZA(),a.TgZ(7,"div",5)(8,"h2",6),a._uU(9,"Ha reservado con \xe9xito el piso"),a.qZA(),a._UZ(10,"br")(11,"br"),a.TgZ(12,"p"),a._uU(13),a._UZ(14,"br")(15,"br"),a._uU(16),a.qZA()()(),a._UZ(17,"app-footer"),a.qZA()),2&n){const t=a.oxw().$implicit,r=a.oxw();a.xp6(1),a.Jzz("background-image: url(",r.photo,");"),a.xp6(2),a.Oqu(t.localizacion),a.xp6(3),a.s9C("src",t.url,a.LSH),a.xp6(7),a.hij(" Este piso se encuentra en ",t.localizacion," "),a.xp6(3),a.hij(" Dispone de ",t.numHabitaciones," ")}}function hq(n,e){if(1&n&&(a.TgZ(0,"ion-list"),a.YNc(1,dq,18,7,"section",1),a.qZA()),2&n){const t=e.$implicit,r=a.oxw();a.xp6(1),a.Q6J("ngIf",t.key===r.selectedHouse)}}let fq=(()=>{class n{constructor(t){this.uploadService=t,this.percentage=0}ngOnInit(){this.selectedContinent=window.sessionStorage.getItem("selectedContinent"),this.selectedCountry=window.sessionStorage.getItem("selectedCountry"),this.photo=window.sessionStorage.getItem("photo"),this.selectedHouse=window.sessionStorage.getItem("selectedHouse"),this.uploadService.getFiles("/continentes/"+this.selectedContinent+"/listaPaises/"+this.selectedCountry+"/listaCasas/",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.houses=t})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-casa-reservada"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"clase1"],[1,"clase2"],["id","image",2,"width","600px","height","450px",3,"src"],["id","descripcion"],[1,"subtitulo"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content"),a.YNc(1,hq,2,1,"ion-list",0),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngForOf",r.houses))},directives:[Hi,On,Pb,P,$l],styles:[".clase1[_ngcontent-%COMP%]{color:#fff;font-family:AvertaBold;padding:130px 180px 70px 70px;position:relative;width:auto;height:700px;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;text-align:right;font-size:40px;text-shadow:2px 2px 5px black}.clase2[_ngcontent-%COMP%]{padding:2%}#descripcion[_ngcontent-%COMP%]{float:center;color:#fff;font-family:Averta;font-size:20px;padding-right:50%;text-align:justify;text-shadow:2px 2px 5px black}#image[_ngcontent-%COMP%], #image2[_ngcontent-%COMP%]{float:right;margin-right:5%;margin-top:5%;margin-bottom:5%;width:600px;height:450px}.subtitulo[_ngcontent-%COMP%], .subtitulo2[_ngcontent-%COMP%]{text-align:center;font-family:AvertaBold;color:#fff}#descripcion2[_ngcontent-%COMP%]{float:center;color:#fff;font-family:Averta;font-size:20px;padding-right:50%;text-align:justify;text-shadow:2px 2px 5px black}.clase3[_ngcontent-%COMP%]{padding:2%}.imagen_gastronomia[_ngcontent-%COMP%]{color:#fff;font-family:AvertaBold;padding:130px 180px 70px 70px;position:relative;width:auto;height:700px;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;text-align:right;font-size:40px;text-shadow:2px 2px 5px black}@media screen and (max-width: 40em){#descripcion2[_ngcontent-%COMP%], #descripcion[_ngcontent-%COMP%], #image[_ngcontent-%COMP%], #image2[_ngcontent-%COMP%]{clear:both;float:none;padding:0}.clase1[_ngcontent-%COMP%]{font-size:20px;padding-right:0;text-align:left}.clase2[_ngcontent-%COMP%]{padding-bottom:300px}}"]}),n})(),pq=(()=>{class n{constructor(t){this.router=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(ji))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-upload-house"]],decls:25,vars:0,consts:[[2,"text-align","center","color","white"],["id","col1"],["type","hidden","value","Europa"],["Pais",""],["routerLink","/upload/europe","src","https://firebasestorage.googleapis.com/v0/b/popexploreionic.appspot.com/o/images%2FEurope_on_the_globe_(red).svg.png?alt=media&token=81be70c8-5171-4aea-b148-8cfb2919e95a"],["id","col2"],["type","hidden","value","Africa"],["routerLink","/upload/africa","src","https://firebasestorage.googleapis.com/v0/b/popexploreionic.appspot.com/o/images%2F1200px-Africa_on_the_globe_(red).svg.png?alt=media&token=c8f2ae94-feaf-4d28-b548-320fe7fa617f"],["id","col3"],["type","hidden","value","Oceania"],["routerLink","/upload/oceania","src","https://firebasestorage.googleapis.com/v0/b/popexploreionic.appspot.com/o/images%2F1200px-Oceania_on_the_globe_(red)_(Polynesia_centered).svg.png?alt=media&token=873a23c0-511f-4443-8c39-fa60c173c383"],["id","col4"],["type","hidden","value","Asia"],["routerLink","/upload/asia","src","https://firebasestorage.googleapis.com/v0/b/popexploreionic.appspot.com/o/images%2F1200px-Asia_on_the_globe_(red).svg.png?alt=media&token=129d775b-01c7-475e-bd85-c5f60c880d11"],["id","col5"],["type","hidden","value","America"],["routerLink","/upload/america","src","https://firebasestorage.googleapis.com/v0/b/popexploreionic.appspot.com/o/images%2F1200px-Americas_on_the_globe_(red).svg.png?alt=media&token=97f77854-a74f-43a7-b53a-d2e1945b9762"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"h1",0),a._uU(2,"Seleccione en que continente desea publicar su casa de entre las opciones disponibles"),a.qZA(),a._UZ(3,"br")(4,"br"),a.TgZ(5,"section",1),a._UZ(6,"input",2,3)(8,"img",4),a.qZA(),a.TgZ(9,"section",5),a._UZ(10,"input",6,3)(12,"img",7),a.qZA(),a.TgZ(13,"section",8),a._UZ(14,"input",9,3)(16,"img",10),a.qZA(),a.TgZ(17,"section",11),a._UZ(18,"input",12,3)(20,"img",13),a.qZA(),a.TgZ(21,"section",14),a._UZ(22,"input",15,3)(24,"img",16),a.qZA()())},directives:[Hi,Ea,jd],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{margin-left:20px;float:left;width:16%}#col2[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%], #col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0}#col5[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0;padding-bottom:200px}}']}),n})();function gq(n,e){if(1&n&&(a.TgZ(0,"div",4)(1,"p",9),a._uU(2,"Se le ha enviado un email a "),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a._uU(5,"."),a.qZA(),a.TgZ(6,"p",9),a._uU(7,"Compruebe su correo para verificar la cuenta."),a.qZA()()),2&n){const t=e.ngIf;a.xp6(4),a.Oqu(t.email)}}let mq=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-verificar-cuenta"]],decls:23,vars:1,consts:[[1,"center"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),a._UZ(4,"br")(5,"br"),a.TgZ(6,"h3"),a._uU(7,"Gracias por registrarse"),a.qZA(),a._UZ(8,"br")(9,"br"),a.YNc(10,gq,8,1,"div",3),a._UZ(11,"br")(12,"br"),a.TgZ(13,"div",4)(14,"button",5),a.NdJ("click",function(){return r.authService.SendVerificationMail()}),a._UZ(15,"i",6),a._uU(16," Reenviar correo de verificaci\xf3n "),a.qZA()()(),a._UZ(17,"br")(18,"br"),a.TgZ(19,"div",7)(20,"span",8),a._uU(21,"Volver a inicio de sesi\xf3n"),a.qZA()()()(),a._UZ(22,"app-footer"),a.qZA()),2&t&&(a.xp6(10),a.Q6J("ngIf",r.authService.userData))},directives:[Hi,P,Ea,jd,$l],styles:["body[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.class1[_ngcontent-%COMP%]{text-align:center;color:#fff}input[_ngcontent-%COMP%]{width:10%;text-align:center}.center[_ngcontent-%COMP%], .left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-align:center;color:#fff}"]}),n})(),Hd=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Wf),a.LFG(ji))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _q{constructor(e,t,r,i){this.file=e,this.numHabitaciones=t,this.precio=r,this.localizacion=i}}let Rb=(()=>{class n{constructor(t){this.uploadService=t,this.percentage=0}selectFile(t){this.selectedFiles=t.target.files}upload(t,r,i,l){if(this.selectedFiles){const u=this.selectedFiles.item(0);this.selectedFiles=void 0,u&&(this.currentFileUploadHouses=new _q(u,r,i,l),this.uploadService.pushFileToStorage(t,this.currentFileUploadHouses).subscribe(f=>{this.percentage=Math.round(f||0)},f=>{console.log(f)}))}}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-upload-form"]],inputs:{selectedCountry:"selectedCountry",selectedContinent:"selectedContinent"},decls:17,vars:2,consts:[[2,"color","white"],["type","text","required","","placeholder","Describa que habitaciones tiene",2,"color","black"],["numHabit",""],["type","text","required","","placeholder","Cuanto cuesta por noche (indique moneda)",2,"color","black"],["price",""],["type","text","required","","placeholder","Indique la localizaci\xf3n",2,"color","black"],["location",""],["type","file",1,"text-nowrap","text-truncate",2,"color","white",3,"change"],[1,"btn",3,"disabled","click"]],template:function(t,r){if(1&t){const i=a.EpF();a.TgZ(0,"label",0)(1,"div"),a._uU(2),a.qZA(),a._UZ(3,"br")(4,"input",1,2)(6,"br")(7,"input",3,4)(9,"br")(10,"input",5,6)(12,"br"),a.qZA(),a.TgZ(13,"label")(14,"input",7),a.NdJ("change",function(u){return r.selectFile(u)}),a.qZA()(),a.TgZ(15,"button",8),a.NdJ("click",function(){a.CHM(i);const u=a.MAs(5),f=a.MAs(8),_=a.MAs(11);return r.upload("/continentes/"+r.selectedContinent+"/listaPaises/"+r.selectedCountry+"/listaCasas",u.value,f.value,_.value)}),a._uU(16,"Upload"),a.qZA()}2&t&&(a.xp6(2),a.hij("Pa\xeds elegido: ",r.selectedCountry,""),a.xp6(13),a.Q6J("disabled",!r.selectedFiles))},styles:["@media screen and (max-width: 40em){.btn[_ngcontent-%COMP%]{padding-bottom:200px}}"]}),n})();function yq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"section",3)(1,"img",4),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().selectCountry(l.key)}),a.qZA()()}if(2&n){const t=e.$implicit;a.xp6(1),a.s9C("src",t.imagenSegunda,a.LSH)}}let vq=(()=>{class n{constructor(t){this.uploadService=t,this.continent="\xc1frica",this.percentage=0}ngOnInit(){this.uploadService.getFiles("/continentes/\xc1frica/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesAfrica=t})}selectFile(t){this.selectedFiles=t}selectCountry(t){this.selectedCountry=t}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-up-africa"]],decls:7,vars:3,consts:[[2,"text-align","center","color","white"],["id","col1",4,"ngFor","ngForOf"],[3,"selectedCountry","selectedContinent"],["id","col1"],[2,"width","300px","height","250px",3,"src","click"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"h1",0),a._uU(2,"Seleccione en que pa\xeds subir\xe1 la casa"),a.qZA(),a._UZ(3,"br")(4,"br"),a.YNc(5,yq,2,1,"section",1),a._UZ(6,"app-upload-form",2),a.qZA()),2&t&&(a.xp6(5),a.Q6J("ngForOf",r.countriesAfrica),a.xp6(1),a.Q6J("selectedCountry",r.selectedCountry)("selectedContinent",r.continent))},directives:[Hi,On,Rb],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{margin-left:20px;float:left;width:30%}#col2[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0}#col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0}}']}),n})();function Cq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"section",3)(1,"img",4),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().selectCountry(l.key)}),a.qZA()()}if(2&n){const t=e.$implicit;a.xp6(1),a.s9C("src",t.imagenSegunda,a.LSH)}}let bq=(()=>{class n{constructor(t){this.uploadService=t,this.continent="Europa",this.percentage=0}ngOnInit(){this.uploadService.getFiles("/continentes/"+this.continent+"/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesEurope=t})}selectFile(t){this.selectedFiles=t}selectCountry(t){this.selectedCountry=t}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-up-europe"]],decls:7,vars:3,consts:[[2,"text-align","center","color","white"],["id","col1",4,"ngFor","ngForOf"],[3,"selectedCountry","selectedContinent"],["id","col1"],[2,"width","300px","height","250px",3,"src","click"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"h1",0),a._uU(2,"Seleccione en que pa\xeds subir\xe1 la casa"),a.qZA(),a._UZ(3,"br")(4,"br"),a.YNc(5,Cq,2,1,"section",1),a._UZ(6,"app-upload-form",2),a.qZA()),2&t&&(a.xp6(5),a.Q6J("ngForOf",r.countriesEurope),a.xp6(1),a.Q6J("selectedCountry",r.selectedCountry)("selectedContinent",r.continent))},directives:[Hi,On,Rb],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{margin-left:20px;float:left;width:30%}#col2[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0}#col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0}}']}),n})();function wq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"section",3)(1,"img",4),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().selectCountry(l.key)}),a.qZA()()}if(2&n){const t=e.$implicit;a.xp6(1),a.s9C("src",t.imagenSegunda,a.LSH)}}let Eq=(()=>{class n{constructor(t){this.uploadService=t,this.continent="Asia",this.percentage=0}ngOnInit(){this.uploadService.getFiles("/continentes/"+this.continent+"/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesAsia=t})}selectFile(t){this.selectedFiles=t}selectCountry(t){this.selectedCountry=t}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-up-asia"]],decls:7,vars:3,consts:[[2,"text-align","center","color","white"],["id","col1",4,"ngFor","ngForOf"],[3,"selectedCountry","selectedContinent"],["id","col1"],[2,"width","300px","height","250px",3,"src","click"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"h1",0),a._uU(2,"Seleccione en que pa\xeds subir\xe1 la casa"),a.qZA(),a._UZ(3,"br")(4,"br"),a.YNc(5,wq,2,1,"section",1),a._UZ(6,"app-upload-form",2),a.qZA()),2&t&&(a.xp6(5),a.Q6J("ngForOf",r.countriesAsia),a.xp6(1),a.Q6J("selectedCountry",r.selectedCountry)("selectedContinent",r.continent))},directives:[Hi,On,Rb],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{margin-left:20px;float:left;width:30%}#col2[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0}#col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0}}']}),n})();function Iq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"section",3)(1,"img",4),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().selectCountry(l.key)}),a.qZA()()}if(2&n){const t=e.$implicit;a.xp6(1),a.s9C("src",t.imagenSegunda,a.LSH)}}let Tq=(()=>{class n{constructor(t){this.uploadService=t,this.continent="Am\xe9rica",this.percentage=0}ngOnInit(){this.uploadService.getFiles("/continentes/"+this.continent+"/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesAmerica=t})}selectFile(t){this.selectedFiles=t}selectCountry(t){this.selectedCountry=t}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-up-america"]],decls:7,vars:3,consts:[[2,"text-align","center","color","white"],["id","col1",4,"ngFor","ngForOf"],[3,"selectedCountry","selectedContinent"],["id","col1"],[2,"width","300px","height","250px",3,"src","click"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"h1",0),a._uU(2,"Seleccione en que pa\xeds subir\xe1 la casa"),a.qZA(),a._UZ(3,"br")(4,"br"),a.YNc(5,Iq,2,1,"section",1),a._UZ(6,"app-upload-form",2),a.qZA()),2&t&&(a.xp6(5),a.Q6J("ngForOf",r.countriesAmerica),a.xp6(1),a.Q6J("selectedCountry",r.selectedCountry)("selectedContinent",r.continent))},directives:[Hi,On,Rb],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{margin-left:20px;float:left;width:30%}#col2[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0}#col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0}}']}),n})();function Dq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"section",3)(1,"img",4),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().selectCountry(l.key)}),a.qZA()()}if(2&n){const t=e.$implicit;a.xp6(1),a.s9C("src",t.imagenSegunda,a.LSH)}}let Sq=(()=>{class n{constructor(t){this.uploadService=t,this.continent="Ocean\xeda",this.percentage=0}ngOnInit(){this.uploadService.getFiles("/continentes/"+this.continent+"/listaPaises",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.countriesOceania=t})}selectFile(t){this.selectedFiles=t}selectCountry(t){this.selectedCountry=t}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(su))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-up-oceania"]],decls:7,vars:3,consts:[[2,"text-align","center","color","white"],["id","col1",4,"ngFor","ngForOf"],[3,"selectedCountry","selectedContinent"],["id","col1"],[2,"width","300px","height","250px",3,"src","click"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"h1",0),a._uU(2,"Seleccione en que pa\xeds subir\xe1 la casa"),a.qZA(),a._UZ(3,"br")(4,"br"),a.YNc(5,Dq,2,1,"section",1),a._UZ(6,"app-upload-form",2),a.qZA()),2&t&&(a.xp6(5),a.Q6J("ngForOf",r.countriesOceania),a.xp6(1),a.Q6J("selectedCountry",r.selectedCountry)("selectedContinent",r.continent))},directives:[Hi,On,Rb],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{margin-left:20px;float:left;width:30%}#col2[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0}#col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0}}']}),n})();function Aq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"img",5),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw().onClick(i.name,i.url,i.key,i.urlPais,i.continente,i.pais)}),a.qZA()}if(2&n){const t=a.oxw().$implicit;a.s9C("src",t.url,a.LSH)}}function xq(n,e){if(1&n&&(a.TgZ(0,"p",6),a._uU(1),a.qZA()),2&n){const t=a.oxw().$implicit;a.xp6(1),a.Oqu(t.name)}}function Mq(n,e){if(1&n&&(a.TgZ(0,"section",2),a.YNc(1,Aq,1,1,"img",3),a.YNc(2,xq,2,1,"p",4),a.qZA()),2&n){const t=e.$implicit,r=a.oxw();a.xp6(1),a.Q6J("ngIf",t.email===r.userLogged.email),a.xp6(1),a.Q6J("ngIf",t.email===r.userLogged.email)}}const Pq=[{path:"home",component:AG},{path:"listaCasas",component:SG},{path:"perfilUsuario",component:HG,canActivate:[Hd]},{path:"reservas",component:(()=>{class n{constructor(t){this.uploadService=t}ngOnInit(){this.uploadService.getFiles("/reservas/",10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.reservas=t}),this.userLogged=JSON.parse(localStorage.getItem("user"))}onClick(t,r,i,l,u,f){window.sessionStorage.setItem("selectedCountry",f),window.sessionStorage.setItem("selectedHouse",i),window.sessionStorage.setItem("photo",l),window.sessionStorage.setItem("selectedContinent",u)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(kF))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-ver-reservas"]],decls:5,vars:1,consts:[[2,"text-align","center","color","white","padding-bottom","30px","padding-top","10px"],["id","col1",4,"ngFor","ngForOf"],["id","col1"],["style","width: 300px; height: 250px;","routerLink","/reservado",3,"src","click",4,"ngIf"],["style","color: white;",4,"ngIf"],["routerLink","/reservado",2,"width","300px","height","250px",3,"src","click"],[2,"color","white"]],template:function(t,r){1&t&&(a.TgZ(0,"ion-content")(1,"h1",0),a._uU(2,"Estas son sus reservas"),a.qZA(),a.YNc(3,Mq,3,2,"section",1),a._UZ(4,"app-footer"),a.qZA()),2&t&&(a.xp6(3),a.Q6J("ngForOf",r.reservas))},directives:[Hi,On,P,Ea,jd,$l],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/b8/4f/41/b84f4195a6d33c93d01111287c0c7b7e.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;color:#fff}div.wrapper[_ngcontent-%COMP%]{max-width:1220px;margin:0 auto}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px;padding:25px 0;float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%;display:block;font-weight:700;text-decoration:none;color:#000;border-right:1px solid #bababa}img[_ngcontent-%COMP%]{max-width:100%}#col1[_ngcontent-%COMP%]{margin-left:20px;float:left;width:30%}#col2[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}#col3[_ngcontent-%COMP%]{margin-left:4%;float:left;width:16%}#col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{float:left;width:16%;margin-left:4%}@media screen and (max-width: 40em){footer[_ngcontent-%COMP%]{visibility:hidden}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:36%}#col1[_ngcontent-%COMP%]{clear:both;float:none;width:100%;margin-left:0;margin-bottom:150px}#col2[_ngcontent-%COMP%], #col3[_ngcontent-%COMP%], #col4[_ngcontent-%COMP%], #col5[_ngcontent-%COMP%]{clear:both;float:none;width:50%;margin-left:0}}']}),n})(),canActivate:[Hd]},{path:"listaPaises",component:eq},{path:"login",component:tq},{path:"registrar",component:nq},{path:"forgot",component:rq},{path:"pais",component:oq},{path:"reservarCasa",component:uq},{path:"reservado",component:fq,canActivate:[Hd]},{path:"upload",component:pq,canActivate:[Hd]},{path:"upload/africa",component:vq,canActivate:[Hd]},{path:"upload/europe",component:bq,canActivate:[Hd]},{path:"upload/asia",component:Eq,canActivate:[Hd]},{path:"upload/america",component:Tq,canActivate:[Hd]},{path:"upload/oceania",component:Sq,canActivate:[Hd]},{path:"verify",component:mq},{path:"editarPerfil",component:(()=>{class n{constructor(t,r){this.authService=t,this.userUploadService=r}ngOnInit(){this.name=window.sessionStorage.getItem("name"),this.description=window.sessionStorage.getItem("description"),this.number=window.sessionStorage.getItem("number"),this.country1=window.sessionStorage.getItem("country1"),this.country2=window.sessionStorage.getItem("country2"),this.country3=window.sessionStorage.getItem("country3"),this.photoUrl=window.sessionStorage.getItem("photoUrl")}selectFile(t){this.selectedFiles=t.target.files}upload(t,r,i,l,u,f,_){if(""===t&&(t=this.name),""===r&&(r=this.description),""===i&&(i=this.number),""===l&&(l=this.country1),""===u&&(u=this.country2),""===f&&(f=this.country3),this.email=window.sessionStorage.getItem("email"),this.selectedFiles){const C=this.selectedFiles.item(0);this.selectedFiles=void 0,C&&(this.currentFileUploadUsers=new cM(this.email,t,r,i,l,u,f,_),this.currentFileUploadUsers.file=C,this.userUploadService.pushFileToStorage(this.currentFileUploadUsers))}else this.currentFileUploadUsers=new cM(this.email,t,r,i,l,u,f,_),this.currentFileUploadUsers.photoUrl=this.photoUrl,this.userUploadService.saveFileData(this.currentFileUploadUsers)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wf),a.Y36(_D))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-editar-perfil"]],decls:60,vars:6,consts:[[1,"center"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text",1,"formControl",2,"color","black",3,"placeholder"],["userName",""],["userFirstCountry",""],["userSecondCountry",""],["userThirdCountry",""],["userNumber",""],["userDescription",""],["type","file",1,"text-nowrap","text-truncate",2,"color","white",3,"change"],["type","text","placeholder","Por defecto, no",2,"color","black"],["userType",""],["type","button","value","Editar perfil",1,"btn","btnPrimary",2,"color","black",3,"click"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(t,r){if(1&t){const i=a.EpF();a.TgZ(0,"ion-content"),a._UZ(1,"br")(2,"br"),a.TgZ(3,"div",0)(4,"div",1)(5,"div",2),a._UZ(6,"br")(7,"br"),a.TgZ(8,"h3"),a._uU(9,"Editar perfil"),a.qZA(),a._UZ(10,"br")(11,"br"),a.TgZ(12,"div",3),a._UZ(13,"input",4,5),a.qZA(),a._UZ(15,"br")(16,"br"),a.TgZ(17,"div",3),a._UZ(18,"input",4,6),a.qZA(),a._UZ(20,"br")(21,"br"),a.TgZ(22,"div",3),a._UZ(23,"input",4,7),a.qZA(),a._UZ(25,"br")(26,"br"),a.TgZ(27,"div",3),a._UZ(28,"input",4,8),a.qZA(),a._UZ(30,"br")(31,"br"),a.TgZ(32,"div",3),a._UZ(33,"input",4,9),a.qZA(),a._UZ(35,"br")(36,"br"),a.TgZ(37,"div",3),a._UZ(38,"input",4,10),a.qZA(),a._UZ(40,"br")(41,"br"),a.TgZ(42,"input",11),a.NdJ("change",function(u){return r.selectFile(u)}),a.qZA(),a._UZ(43,"br")(44,"br"),a._uU(45," \xbfSubir\xe1s casas? "),a._UZ(46,"input",12,13)(48,"br")(49,"br"),a.TgZ(50,"div",3)(51,"input",14),a.NdJ("click",function(){a.CHM(i);const u=a.MAs(14),f=a.MAs(39),_=a.MAs(34),C=a.MAs(19),T=a.MAs(24),S=a.MAs(29),k=a.MAs(47);return r.upload(u.value,f.value,_.value,C.value,T.value,S.value,k.value)}),a.qZA()()(),a._UZ(52,"br")(53,"br"),a.TgZ(54,"div",15)(55,"span"),a._uU(56,"Si ya tienes una cuenta "),a.TgZ(57,"span",16),a._uU(58,"Inicie sesi\xf3n"),a.qZA()()()()(),a._UZ(59,"app-footer"),a.qZA()}2&t&&(a.xp6(13),a.s9C("placeholder",r.name),a.xp6(5),a.s9C("placeholder",r.country1),a.xp6(5),a.s9C("placeholder",r.country2),a.xp6(5),a.s9C("placeholder",r.country3),a.xp6(5),a.s9C("placeholder",r.number),a.xp6(5),a.s9C("placeholder",r.description))},directives:[Hi,Ea,jd,$l],styles:["body[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.class1[_ngcontent-%COMP%]{text-align:center;color:#fff}input[_ngcontent-%COMP%]{width:10%;text-align:center}.center[_ngcontent-%COMP%], .left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{text-align:center;color:#fff}@media screen and (max-width: 40em){.displayTableCell[_ngcontent-%COMP%]{padding-bottom:200px}input[_ngcontent-%COMP%]{width:50%}}"]}),n})()},{path:"",redirectTo:"/home",pathMatch:"full"}];let Oq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[iO.forRoot(Pq)],iO]}),n})();function Rq(n,e){1&n&&(a.TgZ(0,"li",8)(1,"a",9),a._uU(2,"Explora el mundo "),a.qZA()())}function kq(n,e){1&n&&(a.TgZ(0,"li",8)(1,"a",10),a._uU(2,"| Mi perfil "),a.qZA()())}function Nq(n,e){1&n&&(a.TgZ(0,"li",8)(1,"a",11),a._uU(2,"| SubirCasa"),a.qZA()())}function Fq(n,e){1&n&&(a.TgZ(0,"li",12)(1,"a",13),a._uU(2,"Iniciar sesi\xf3n"),a.qZA()())}function Lq(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"li",12)(1,"a",3)(2,"span",14),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).authService.SignOut()}),a._uU(3,"Cerrar Sesi\xf3n"),a.qZA()()()}}function Uq(n,e){if(1&n&&(a.TgZ(0,"div",2)(1,"a",3),a._UZ(2,"img",4),a.qZA(),a.TgZ(3,"nav")(4,"ul"),a.YNc(5,Rq,3,0,"li",5),a.YNc(6,kq,3,0,"li",5),a.YNc(7,Nq,3,0,"li",6),a.YNc(8,Fq,3,0,"li",7),a.YNc(9,Lq,4,0,"li",7),a.qZA()()()),2&n){const t=a.oxw(),r=t.index,i=t.$implicit,l=a.oxw();a.xp6(5),a.Q6J("ngIf",!l.authService.isLoggedIn&&0===r||i.email===l.userLogged.email),a.xp6(1),a.Q6J("ngIf",l.authService.isLoggedIn&&i.email===l.userLogged.email),a.xp6(1),a.Q6J("ngIf",l.authService.isLoggedIn&&"Anfitri\xf3n"===i.userType&&i.email===l.userLogged.email),a.xp6(1),a.Q6J("ngIf",!l.authService.isLoggedIn),a.xp6(1),a.Q6J("ngIf",l.authService.isLoggedIn&&i.email===l.userLogged.email)}}function Bq(n,e){if(1&n&&(a.TgZ(0,"header"),a.YNc(1,Uq,10,5,"div",1),a.qZA()),2&n){const t=e.$implicit,r=e.index,i=a.oxw();a.xp6(1),a.Q6J("ngIf",!i.authService.isLoggedIn&&0===r||t.email===i.userLogged.email)}}let Vq=(()=>{class n{constructor(t,r){this.userUploadService=t,this.authService=r}ngOnInit(){this.userUploadService.getFiles(10).snapshotChanges().pipe((0,At.U)(t=>t.map(r=>Object.assign({key:r.payload.key},r.payload.val())))).subscribe(t=>{this.fileUploads=t}),this.userLogged=JSON.parse(localStorage.getItem("user"))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(_D),a.Y36(Wf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-header"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","menu",4,"ngIf"],[1,"menu"],["routerLink","/home"],["src","https://firebasestorage.googleapis.com/v0/b/popexplore-99fb9.appspot.com/o/images%2FLogo.png?alt=media&token=bb81b284-22a3-447e-918c-1a50355c54bd",1,"logo"],["style","margin-top: 10px; float:left;","class","otrosItems",4,"ngIf"],["style","margin-top: 10px;float:left;","class","otrosItems",4,"ngIf"],["style","margin-top: 10px;float:left;","class","iniciarSesion",4,"ngIf"],[1,"otrosItems",2,"margin-top","10px","float","left"],["routerLink","/listaPaises"],["routerLink","/perfilUsuario"],["routerLink","/upload"],[1,"iniciarSesion",2,"margin-top","10px","float","left"],["routerLink","/login"],[3,"click"]],template:function(t,r){1&t&&a.YNc(0,Bq,2,1,"header",0),2&t&&a.Q6J("ngForOf",r.fileUploads)},directives:[On,P,kf,Sy],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background:grey;font-family:calibri}header[_ngcontent-%COMP%]{background:#525252;top:0;right:0;width:100%;clear:both;content:"";display:table}.menu[_ngcontent-%COMP%]{width:900px;margin:0 auto}.logo[_ngcontent-%COMP%]{width:70px;float:left;padding:8px;margin-top:10px}.fotoPerfil[_ngcontent-%COMP%]{width:50px;height:50px;clear:both;float:right;border-radius:50%}nav[_ngcontent-%COMP%]{float:left}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:5px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}.otrosItems[_ngcontent-%COMP%]{padding-top:25px}.iniciarSesion[_ngcontent-%COMP%]{padding-left:250px;padding-top:25px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:block;content:"";width:0%;background-color:#3c3c3c;height:5px;top:0;position:relative;transition:width .5s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{width:100%}.welcome[_ngcontent-%COMP%]{position:relative;width:auto;height:900px;background-image:url(/src/assets/images/grancanaria.jpg);background-repeat:no-repeat;background-attachment:scroll}video[_ngcontent-%COMP%]{width:100%;z-index:-1}video[_ngcontent-%COMP%]::-webkit-media-controls{display:none}.present[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;font-family:AvertaBold;color:#fff;text-align:center;font-size:90px;padding-top:0;text-shadow:2px 2px 5px black;z-index:1}.prestex[_ngcontent-%COMP%]{position:absolute;text-align:center;font-family:AvertaBold;color:red;text-align:right;font-size:70px;text-shadow:2px 2px 5px black;z-index:1}.country1[_ngcontent-%COMP%]{position:relative;width:auto;height:700px;background-image:url(/src/assets/images/italy.png);background-repeat:no-repeat;background-attachment:scroll}.country2[_ngcontent-%COMP%]{position:relative;width:auto;height:700px;background-image:url(/src/assets/images/mongolia.jpg);background-repeat:no-repeat;background-attachment:scroll}.country3[_ngcontent-%COMP%]{position:relative;width:auto;height:700px;background-image:url(/src/assets/images/grancanaria.jpg);background-repeat:no-repeat;background-attachment:scroll}.tit1[_ngcontent-%COMP%]{font-family:AvertaBold;color:#fff;text-align:right;font-size:70px;padding-top:130px;padding-right:180px;text-shadow:2px 2px 5px black}.subtitulocountry1[_ngcontent-%COMP%]{color:#fff;font-family:Averta;font-size:30px;padding-right:170px;padding-top:0;text-align:right;text-shadow:2px 2px 5px black}@media screen and (max-width: 40em){.iniciarSesion[_ngcontent-%COMP%]{padding-left:0;clear:both}.fotoPerfil[_ngcontent-%COMP%]{margin-right:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}']}),n})(),$q=(()=>{class n{constructor(){this.title="PopExplore"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&a._UZ(0,"app-header")(1,"router-outlet")},directives:[Vq,ix],styles:[""]}),n})(),jq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[$q]}),n.\u0275inj=a.cJS({providers:[Wf],imports:[[Zr.hO.initializeApp(eP_firebaseConfig),qF,dl,Oq,LF,y3,aj,lH,TG.forRoot()]]}),n})();(0,a.G48)(),gu().bootstrapModule(jq).catch(n=>console.error(n))},5867:(wt,$e,R)=>{"use strict";R.d($e,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=R(9681);(0,a.registerVersion)("firebase","9.6.11","app")},127:(wt,$e,R)=>{"use strict";R.d($e,{Z:()=>a.Z});var a=R(3942);a.Z.registerVersion("firebase","9.6.11","app-compat")},820:(wt,$e,R)=>{"use strict";R.r($e);var a=R(5861),le=R(3942),F=R(2090),Te=R(9681),he=R(655),de=R(1877),ne=R(4859);const Pe=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},J=function ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},K=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new de.Yd("@firebase/auth");function Ue(y,...p){qe.logLevel<=de.in.ERROR&&qe.error(`Auth (${Te.SDK_VERSION}): ${y}`,...p)}function Ae(y,...p){throw be(y,...p)}function _e(y,...p){return be(y,...p)}function ye(y,p,m){const b=Object.assign(Object.assign({},J()),{[p]:m});return new F.LL("auth","Firebase",b).create(p,{appName:y.name})}function ue(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ae(y,"argument-error"),ye(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function be(y,...p){if("string"!=typeof y){const m=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(m,...b)}return K.create(y,...p)}function Q(y,p,...m){if(!y)throw be(p,...m)}function q(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Ue(p),new Error(p)}function re(y,p){y||q(p)}const Z=new Map;function $(y){re(y instanceof Function,"Expected a class definition");let p=Z.get(y);return p?(re(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Z.set(y,p),p)}function st(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function dt(){return"http:"===Ne()||"https:"===Ne()}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Be{constructor(p,m){this.shortDelay=p,this.longDelay=m,re(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Ce(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fe(y,p){re(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ze{static initialize(p,m,b){this.fetchImpl=p,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ot=new Be(3e4,6e4);function Ke(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function mt(y,p,m,b){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,a.Z)(function*(y,p,m,b,A={}){return Xt(y,A,(0,a.Z)(function*(){let N={},ve={};b&&("GET"===p?ve=b:N={body:JSON.stringify(b)});const Le=(0,F.xO)(Object.assign({key:y.config.apiKey},ve)).slice(1),ut=yield y._getAdditionalHeaders();return ut["Content-Type"]="application/json",y.languageCode&&(ut["X-Firebase-Locale"]=y.languageCode),ze.fetch()($n(y,y.config.apiHost,m,Le),Object.assign({method:p,headers:ut,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Xt(y,p,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,a.Z)(function*(y,p,m){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},Oe),p);try{const A=new Wr(y),N=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const ve=yield N.json();if("needConfirmation"in ve)throw lr(y,"account-exists-with-different-credential",ve);if(N.ok&&!("errorMessage"in ve))return ve;{const Le=N.ok?ve.errorMessage:ve.error.message,[ut,St]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ut)throw lr(y,"credential-already-in-use",ve);if("EMAIL_EXISTS"===ut)throw lr(y,"email-already-in-use",ve);const Wt=b[ut]||ut.toLowerCase().replace(/[_\s]+/g,"-");if(St)throw ye(y,Wt,St);Ae(y,Wt)}}catch(A){if(A instanceof F.ZR)throw A;Ae(y,"network-request-failed")}})).apply(this,arguments)}function zt(y,p,m,b){return vn.apply(this,arguments)}function vn(){return(vn=(0,a.Z)(function*(y,p,m,b,A={}){const N=yield mt(y,p,m,b,A);return"mfaPendingCredential"in N&&Ae(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function $n(y,p,m,b){const A=`${p}${m}?${b}`;return y.config.emulator?Fe(y.config,A):`${y.config.apiScheme}://${A}`}class Wr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(_e(this.auth,"network-request-failed")),ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(y,p,m){const b={appName:y.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const A=_e(y,p,b);return A.customData._tokenResponse=m,A}function Br(){return(Br=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Un(y,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function jn(y,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Tn(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ns(){return(Ns=(0,a.Z)(function*(y,p=!1){const m=(0,F.m9)(y),b=yield m.getIdToken(p),A=It(b);Q(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,ve=null==N?void 0:N.sign_in_provider;return{claims:A,token:b,authTime:Tn(un(A.auth_time)),issuedAtTime:Tn(un(A.iat)),expirationTime:Tn(un(A.exp)),signInProvider:ve||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function un(y){return 1e3*Number(y)}function It(y){const[p,m,b]=y.split(".");if(void 0===p||void 0===m||void 0===b)return Ue("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(m);return A?JSON.parse(A):(Ue("Failed to decode base64 JWT payload"),null)}catch(A){return Ue("Caught error parsing JWT payload as JSON",A),null}}function Gn(y,p){return ti.apply(this,arguments)}function ti(){return(ti=(0,a.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(b){throw b instanceof F.ZR&&Yt(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function Yt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class rs{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,a.Z)(function*(){yield m.iteration()}),b)}iteration(){var p=this;return(0,a.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class Dr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tn(this.lastLoginAt),this.creationTime=Tn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gr(y){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,a.Z)(function*(y){var p;const m=y.auth,b=yield y.getIdToken(),A=yield Gn(y,jn(m,{idToken:b}));Q(null==A?void 0:A.users.length,m,"internal-error");const N=A.users[0];y._notifyReloadListener(N);const ve=(null===(p=N.providerUserInfo)||void 0===p?void 0:p.length)?Xe(N.providerUserInfo):[],Le=Ct(y.providerData,ve),Wt=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==Le?void 0:Le.length)),Rt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Le,metadata:new Dr(N.createdAt,N.lastLoginAt),isAnonymous:Wt};Object.assign(y,Rt)})).apply(this,arguments)}function dn(){return(dn=(0,a.Z)(function*(y){const p=(0,F.m9)(y);yield gr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ct(y,p){return[...y.filter(b=>!p.some(A=>A.providerId===b.providerId)),...p]}function Xe(y){return y.map(p=>{var{providerId:m}=p,b=(0,he._T)(p,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ft(){return(Ft=(0,a.Z)(function*(y,p){const m=yield Xt(y,{},(0,a.Z)(function*(){const b=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:N}=y.config,ve=$n(y,A,"/v1/token",`key=${N}`),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",ze.fetch()(ve,{method:"POST",headers:Le,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class fn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Q(p.idToken,"internal-error"),Q(void 0!==p.idToken,"internal-error"),Q(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function jt(y){const p=It(y);return Q(p,"internal-error"),Q(void 0!==p.exp,"internal-error"),Q(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var b=this;return(0,a.Z)(function*(){return Q(!b.accessToken||b.refreshToken,p,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var b=this;return(0,a.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:ve}=yield function bt(y,p){return Ft.apply(this,arguments)}(p,m);b.updateTokensAndExpiration(A,N,Number(ve))})()}updateTokensAndExpiration(p,m,b){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,m){const{refreshToken:b,accessToken:A,expirationTime:N}=m,ve=new fn;return b&&(Q("string"==typeof b,"internal-error",{appName:p}),ve.refreshToken=b),A&&(Q("string"==typeof A,"internal-error",{appName:p}),ve.accessToken=A),N&&(Q("number"==typeof N,"internal-error",{appName:p}),ve.expirationTime=N),ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new fn,this.toJSON())}_performRefresh(){return q("not implemented")}}function Jt(y,p){Q("string"==typeof y||void 0===y,"internal-error",{appName:p})}class te{constructor(p){var{uid:m,auth:b,stsTokenManager:A}=p,N=(0,he._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Dr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,a.Z)(function*(){const b=yield Gn(m,m.stsTokenManager.getToken(m.auth,p));return Q(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(p){return function Ti(y){return Ns.apply(this,arguments)}(this,p)}reload(){return function Sr(y){return dn.apply(this,arguments)}(this)}_assign(p){this!==p&&(Q(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new te(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var b=this;return(0,a.Z)(function*(){let A=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield gr(b)),yield b.auth._persistUserIfCurrent(b),A&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,a.Z)(function*(){const m=yield p.getIdToken();return yield Gn(p,function Ot(y,p){return Br.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var b,A,N,ve,Le,ut,St,Wt;const Rt=null!==(b=m.displayName)&&void 0!==b?b:void 0,Er=null!==(A=m.email)&&void 0!==A?A:void 0,Ss=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,ua=null!==(ve=m.photoURL)&&void 0!==ve?ve:void 0,ju=null!==(Le=m.tenantId)&&void 0!==Le?Le:void 0,Ac=null!==(ut=m._redirectEventId)&&void 0!==ut?ut:void 0,Hu=null!==(St=m.createdAt)&&void 0!==St?St:void 0,Cp=null!==(Wt=m.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:da,emailVerified:wl,isAnonymous:Ph,providerData:Oh,stsTokenManager:Fo}=m;Q(da&&Fo,p,"internal-error");const om=fn.fromJSON(this.name,Fo);Q("string"==typeof da,p,"internal-error"),Jt(Rt,p.name),Jt(Er,p.name),Q("boolean"==typeof wl,p,"internal-error"),Q("boolean"==typeof Ph,p,"internal-error"),Jt(Ss,p.name),Jt(ua,p.name),Jt(ju,p.name),Jt(Ac,p.name),Jt(Hu,p.name),Jt(Cp,p.name);const Rh=new te({uid:da,auth:p,email:Er,emailVerified:wl,displayName:Rt,isAnonymous:Ph,photoURL:ua,phoneNumber:Ss,tenantId:ju,stsTokenManager:om,createdAt:Hu,lastLoginAt:Cp});return Oh&&Array.isArray(Oh)&&(Rh.providerData=Oh.map(am=>Object.assign({},am))),Ac&&(Rh._redirectEventId=Ac),Rh}static _fromIdTokenResponse(p,m,b=!1){return(0,a.Z)(function*(){const A=new fn;A.updateFromServerResponse(m);const N=new te({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:b});return yield gr(N),N})()}}const ae=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(m,b){var A=this;return(0,a.Z)(function*(){A.storage[m]=b})()}_get(m){var b=this;return(0,a.Z)(function*(){const A=b.storage[m];return void 0===A?null:A})()}_remove(m){var b=this;return(0,a.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return y.type="NONE",y})();function Re(y,p,m){return`firebase:${y}:${p}:${m}`}class De{constructor(p,m,b){this.persistence=p,this.auth=m,this.userKey=b;const{config:A,name:N}=this.auth;this.fullUserKey=Re(this.userKey,A.apiKey,N),this.fullPersistenceKey=Re("persistence",A.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,a.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?te._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,a.Z)(function*(){if(m.persistence===p)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,b="authUser"){return(0,a.Z)(function*(){if(!m.length)return new De($(ae),p,b);const A=(yield Promise.all(m.map(function(){var St=(0,a.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return St.apply(this,arguments)}}()))).filter(St=>St);let N=A[0]||$(ae);const ve=Re(b,p.config.apiKey,p.name);let Le=null;for(const St of m)try{const Wt=yield St._get(ve);if(Wt){const Rt=te._fromJSON(p,Wt);St!==N&&(Le=Rt),N=St;break}}catch(Wt){}const ut=A.filter(St=>St._shouldAllowMigration);return N._shouldAllowMigration&&ut.length?(N=ut[0],Le&&(yield N._set(ve,Le.toJSON())),yield Promise.all(m.map(function(){var St=(0,a.Z)(function*(Wt){if(Wt!==N)try{yield Wt._remove(ve)}catch(Rt){}});return function(Wt){return St.apply(this,arguments)}}())),new De(N,p,b)):new De(N,p,b)})()}}function ct(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(_n(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if($t(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(rn(p))return"Blackberry";if(Nn(p))return"Webos";if(mn(p))return"Safari";if((p.includes("chrome/")||mr(p))&&!p.includes("edge/"))return"Chrome";if(Qn(p))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function $t(y=(0,F.z$)()){return/firefox\//i.test(y)}function mn(y=(0,F.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function mr(y=(0,F.z$)()){return/crios\//i.test(y)}function _n(y=(0,F.z$)()){return/iemobile/i.test(y)}function Qn(y=(0,F.z$)()){return/android/i.test(y)}function rn(y=(0,F.z$)()){return/blackberry/i.test(y)}function Nn(y=(0,F.z$)()){return/webos/i.test(y)}function _r(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function qi(y=(0,F.z$)()){return _r(y)||Qn(y)||Nn(y)||rn(y)||/windows phone/i.test(y)||_n(y)}function Di(y,p=[]){let m;switch(y){case"Browser":m=ct((0,F.z$)());break;case"Worker":m=`${ct((0,F.z$)())}-${y}`;break;default:m=y}const b=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${Te.SDK_VERSION}/${b}`}class Vr{constructor(p,m,b){this.app=p,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sn(this),this.idTokenSubscription=new sn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,m){var b=this;return m&&(this._popupRedirectResolver=$(m)),this._initializationPromise=this.queue((0,a.Z)(function*(){var A,N;if(!b._deleted&&(b.persistenceManager=yield De.create(b,p),!b._deleted)){if(null===(A=b._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(ve){}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(N=b.currentUser)||void 0===N?void 0:N.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,a.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,a.Z)(function*(){var b;let A=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,ve=null==A?void 0:A._redirectEventId,Le=yield m.tryRedirectSignIn(p);(!N||N===ve)&&(null==Le?void 0:Le.user)&&(A=Le.user)}return A?A._redirectEventId?(Q(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===A._redirectEventId?m.directlySetCurrentUser(A):m.reloadAndSetCurrentUserOrClear(A)):m.reloadAndSetCurrentUserOrClear(A):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,a.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(A){yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,a.Z)(function*(){try{yield gr(p)}catch(b){if("auth/network-request-failed"!==b.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function xe(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,a.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,a.Z)(function*(){const b=p?(0,F.m9)(p):null;return b&&Q(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,a.Z)(function*(){if(!m._deleted)return p&&Q(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,a.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,a.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,a.Z)(function*(){yield m.assertedPersistence.setPersistence($(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,m,b){return this.registerStateListener(this.authStateSubscription,p,m,b)}onIdTokenChanged(p,m,b){return this.registerStateListener(this.idTokenSubscription,p,m,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var b=this;return(0,a.Z)(function*(){const A=yield b.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,a.Z)(function*(){if(!m.redirectPersistenceManager){const b=p&&$(p)||m._popupRedirectResolver;Q(b,m,"argument-error"),m.redirectPersistenceManager=yield De.create(m,[$(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,a.Z)(function*(){var b,A;return m._isInitialized&&(yield m.queue((0,a.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,a.Z)(function*(){if(p===m.currentUser)return m.queue((0,a.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,b,A){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),ve=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(ve,this,"internal-error"),ve.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,b,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,a.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Di(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,a.Z)(function*(){var m;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(b["X-Firebase-Client"]=A),b})()}}function tt(y){return(0,F.m9)(y)}class sn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(m=>this.observer=m)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dr(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function wn(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class En{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return q("not implemented")}_getIdTokenResponse(p){return q("not implemented")}_linkToIdToken(p,m){return q("not implemented")}_getReauthenticationResolver(p){return q("not implemented")}}function Xn(y,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:resetPassword",Ke(y,p))})).apply(this,arguments)}function en(y,p){return _s.apply(this,arguments)}function _s(){return(_s=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ai(y,p){return ys.apply(this,arguments)}function ys(){return(ys=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:update",Ke(y,p))})).apply(this,arguments)}function On(){return(On=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signInWithPassword",Ke(y,p))})).apply(this,arguments)}function xi(y,p){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:sendOobCode",Ke(y,p))})).apply(this,arguments)}function P(y,p){return U.apply(this,arguments)}function U(){return(U=(0,a.Z)(function*(y,p){return xi(y,p)})).apply(this,arguments)}function fe(y,p){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,a.Z)(function*(y,p){return xi(y,p)})).apply(this,arguments)}function B(y,p){return z.apply(this,arguments)}function z(){return(z=(0,a.Z)(function*(y,p){return xi(y,p)})).apply(this,arguments)}function we(y,p){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,a.Z)(function*(y,p){return xi(y,p)})).apply(this,arguments)}function Qe(){return(Qe=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signInWithEmailLink",Ke(y,p))})).apply(this,arguments)}function Lt(){return(Lt=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signInWithEmailLink",Ke(y,p))})).apply(this,arguments)}class on extends En{constructor(p,m,b,A=null){super("password",b),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new on(p,m,"password")}static _fromEmailAndCode(p,m,b=null){return new on(p,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,a.Z)(function*(){switch(m.signInMethod){case"password":return function pi(y,p){return On.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ze(y,p){return Qe.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ae(p,"internal-error")}})()}_linkToIdToken(p,m){var b=this;return(0,a.Z)(function*(){switch(b.signInMethod){case"password":return en(p,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function _t(y,p){return Lt.apply(this,arguments)}(p,{idToken:m,email:b._email,oobCode:b._password});default:Ae(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function cn(y,p){return zi.apply(this,arguments)}function zi(){return(zi=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signInWithIdp",Ke(y,p))})).apply(this,arguments)}class Ar extends En{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Ar(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:A}=m,N=(0,he._T)(m,["providerId","signInMethod"]);if(!b||!A)return null;const ve=new Ar(b,A);return ve.idToken=N.idToken||void 0,ve.accessToken=N.accessToken||void 0,ve.secret=N.secret,ve.nonce=N.nonce,ve.pendingToken=N.pendingToken||null,ve}_getIdTokenResponse(p){return cn(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,cn(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,cn(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,F.xO)(m)}return p}}function sl(y,p){return jl.apply(this,arguments)}function jl(){return(jl=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:sendVerificationCode",Ke(y,p))})).apply(this,arguments)}function fo(){return(fo=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ke(y,p))})).apply(this,arguments)}function Gd(){return(Gd=(0,a.Z)(function*(y,p){const m=yield zt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ke(y,p));if(m.temporaryProof)throw lr(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const $g={USER_NOT_FOUND:"user-not-found"};function qd(){return(qd=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ke(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),$g)})).apply(this,arguments)}class Sa extends En{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Sa({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Sa({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function ho(y,p){return fo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Vg(y,p){return Gd.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function jg(y,p){return qd.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:b,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:b,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:b,phoneNumber:A,temporaryProof:N}=p;return b||m||A||N?new Sa({verificationId:m,verificationCode:b,phoneNumber:A,temporaryProof:N}):null}}class qo{constructor(p){var m,b,A,N,ve,Le;const ut=(0,F.zd)((0,F.pd)(p)),St=null!==(m=ut.apiKey)&&void 0!==m?m:null,Wt=null!==(b=ut.oobCode)&&void 0!==b?b:null,Rt=function Ay(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=ut.mode)&&void 0!==A?A:null);Q(St&&Wt&&Rt,"argument-error"),this.apiKey=St,this.operation=Rt,this.code=Wt,this.continueUrl=null!==(N=ut.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(ve=ut.languageCode)&&void 0!==ve?ve:null,this.tenantId=null!==(Le=ut.tenantId)&&void 0!==Le?Le:null}static parseLink(p){const m=function Hl(y){const p=(0,F.zd)((0,F.pd)(y)).link,m=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,b=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(b?(0,F.zd)((0,F.pd)(b)).link:null)||b||m||p||y}(p);try{return new qo(m)}catch(b){return null}}}let ou=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,b){return on._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const A=qo.parseLink(b);return Q(A,"argument-error"),on._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class po{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Wi extends po{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Aa extends Wi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Q("providerId"in m&&"signInMethod"in m,"argument-error"),Ar._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Q(p.idToken||p.accessToken,"argument-error"),Ar._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Aa.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Aa.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:A,pendingToken:N,nonce:ve,providerId:Le}=p;if(!b&&!A&&!m&&!N||!Le)return null;try{return new Aa(Le)._credential({idToken:m,accessToken:b,nonce:ve,pendingToken:N})}catch(ut){return null}}}let zo=(()=>{class y extends Wi{constructor(){super("facebook.com")}static credential(m){return Ar._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ol=(()=>{class y extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Ar._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:A}=m;if(!b&&!A)return null;try{return y.credential(b,A)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),zd=(()=>{class y extends Wi{constructor(){super("github.com")}static credential(m){return Ar._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Wo extends En{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return cn(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,cn(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,cn(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:A,pendingToken:N}=m;return b&&A&&N&&b===A?new Wo(b,N):null}static _create(p,m){return new Wo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class os extends po{constructor(p){Q(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return os.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return os.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Wo.fromJSON(p);return Q(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:b}=p;if(!m||!b)return null;try{return Wo._create(b,m)}catch(A){return null}}}let Gl=(()=>{class y extends Wi{constructor(){super("twitter.com")}static credential(m,b){return Ar._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:A}=m;if(!b||!A)return null;try{return y.credential(b,A)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ql(y,p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signUp",Ke(y,p))})).apply(this,arguments)}class ni{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,b,A=!1){return(0,a.Z)(function*(){const N=yield te._fromIdTokenResponse(p,b,A),ve=Yf(b);return new ni({user:N,providerId:ve,_tokenResponse:b,operationType:m})})()}static _forOperation(p,m,b){return(0,a.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const A=Yf(b);return new ni({user:p,providerId:A,_tokenResponse:b,operationType:m})})()}}function Yf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Wd(){return(Wd=(0,a.Z)(function*(y){var p;const m=tt(y);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new ni({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield ql(m,{returnSecureToken:!0}),A=yield ni._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Wl extends F.ZR{constructor(p,m,b,A){var N;super(m.code,m.message),this.operationType=b,this.user=A,Object.setPrototypeOf(this,Wl.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,m,b,A){return new Wl(p,m,b,A)}}function Zl(y,p,m,b){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Wl._fromErrorAndOperation(y,N,p,b):N})}function Gs(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function au(){return(au=(0,a.Z)(function*(y,p){const m=(0,F.m9)(y);yield mo(!0,m,p);const{providerUserInfo:b}=yield Un(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=Gs(b||[]);return m.providerData=m.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Jn(y,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,a.Z)(function*(y,p,m=!1){const b=yield Gn(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return ni._forOperation(y,"link",b)})).apply(this,arguments)}function mo(y,p,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,a.Z)(function*(y,p,m){yield gr(p);const A=!1===y?"provider-already-linked":"no-such-provider";Q(Gs(p.providerData).has(m)===y,p.auth,A)})).apply(this,arguments)}function Zd(y,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,a.Z)(function*(y,p,m=!1){const{auth:b}=y,A="reauthenticate";try{const N=yield Gn(y,Zl(b,A,p,y),m);Q(N.idToken,b,"internal-error");const ve=It(N.idToken);Q(ve,b,"internal-error");const{sub:Le}=ve;return Q(y.uid===Le,b,"user-mismatch"),ni._forOperation(y,A,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ae(b,"user-mismatch"),N}})).apply(this,arguments)}function Yo(y,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,a.Z)(function*(y,p,m=!1){const b="signIn",A=yield Zl(y,b,p),N=yield ni._fromIdTokenResponse(y,b,A);return m||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function xr(y,p){return ll.apply(this,arguments)}function ll(){return(ll=(0,a.Z)(function*(y,p){return Yo(tt(y),p)})).apply(this,arguments)}function vs(y,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,a.Z)(function*(y,p){const m=(0,F.m9)(y);return yield mo(!1,m,p.providerId),Jn(m,p)})).apply(this,arguments)}function _o(y,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,a.Z)(function*(y,p){return Zd((0,F.m9)(y),p)})).apply(this,arguments)}function Yl(y,p){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,a.Z)(function*(y,p){return zt(y,"POST","/v1/accounts:signInWithCustomToken",Ke(y,p))})).apply(this,arguments)}function vo(){return(vo=(0,a.Z)(function*(y,p){const m=tt(y),b=yield Yl(m,{token:p,returnSecureToken:!0}),A=yield ni._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ht{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Kl._fromServerResponse(p,m):Ae(p,"internal-error")}}class Kl extends Ht{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Kl(m)}}function cl(y,p,m){var b;Q((null===(b=m.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),Q(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Q(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Q(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Xl(){return(Xl=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y),A={requestType:"PASSWORD_RESET",email:p};m&&cl(b,A,m),yield fe(b,A)})).apply(this,arguments)}function lu(){return(lu=(0,a.Z)(function*(y,p,m){yield Xn((0,F.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Je(){return(Je=(0,a.Z)(function*(y,p){yield Ai((0,F.m9)(y),{oobCode:p})})).apply(this,arguments)}function yn(y,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,a.Z)(function*(y,p){const m=(0,F.m9)(y),b=yield Xn(m,{oobCode:p}),A=b.requestType;switch(Q(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(b.mfaInfo,m,"internal-error");default:Q(b.email,m,"internal-error")}let N=null;return b.mfaInfo&&(N=Ht._fromServerResponse(tt(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function Ma(){return(Ma=(0,a.Z)(function*(y,p){const{data:m}=yield yn((0,F.m9)(y),p);return m.email})).apply(this,arguments)}function Ki(){return(Ki=(0,a.Z)(function*(y,p,m){const b=tt(y),A=yield ql(b,{returnSecureToken:!0,email:p,password:m}),N=yield ni._fromIdTokenResponse(b,"signIn",A);return yield b._updateCurrentUser(N.user),N})).apply(this,arguments)}function Yd(){return(Yd=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y),A={requestType:"EMAIL_SIGNIN",email:p};Q(m.handleCodeInApp,b,"argument-error"),m&&cl(b,A,m),yield B(b,A)})).apply(this,arguments)}function Co(){return(Co=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y),A=ou.credentialWithLink(p,m||st());return Q(A._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),xr(b,A)})).apply(this,arguments)}function ri(y,p){return as.apply(this,arguments)}function as(){return(as=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:createAuthUri",Ke(y,p))})).apply(this,arguments)}function bo(){return(bo=(0,a.Z)(function*(y,p){const b={identifier:p,continueUri:dt()?st():"http://localhost"},{signinMethods:A}=yield ri((0,F.m9)(y),b);return A||[]})).apply(this,arguments)}function pu(){return(pu=(0,a.Z)(function*(y,p){const m=(0,F.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&cl(m.auth,A,p);const{email:N}=yield P(m.auth,A);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function rc(){return(rc=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&cl(b.auth,N,m);const{email:ve}=yield we(b.auth,N);ve!==y.email&&(yield y.reload())})).apply(this,arguments)}function gu(y,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,a.Z)(function*(y,p){return mt(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function mu(){return(mu=(0,a.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const b=(0,F.m9)(y),N={idToken:yield b.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},ve=yield Gn(b,gu(b.auth,N));b.displayName=ve.displayName||null,b.photoURL=ve.photoUrl||null;const Le=b.providerData.find(({providerId:ut})=>"password"===ut);Le&&(Le.displayName=b.displayName,Le.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ve)})).apply(this,arguments)}function yu(y,p,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,a.Z)(function*(y,p,m){const{auth:b}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const ve=yield Gn(y,en(b,N));yield y._updateTokensIfNecessary(ve,!0)})).apply(this,arguments)}class Qo{constructor(p,m,b={}){this.isNewUser=p,this.providerId=m,this.profile=b}}class Xd extends Qo{constructor(p,m,b,A){super(p,m,b),this.username=A}}class Jd extends Qo{constructor(p,m){super(p,"facebook.com",m)}}class Xo extends Xd{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class wo extends Qo{constructor(p,m){super(p,"google.com",m)}}class vu extends Xd{constructor(p,m,b){super(p,"twitter.com",m,b)}}function _i(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Qd(y){var p,m;if(!y)return null;const{providerId:b}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const ve=null===(m=null===(p=It(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(ve)return new Qo(N,"anonymous"!==ve&&"custom"!==ve?ve:null)}if(!b)return null;switch(b){case"facebook.com":return new Jd(N,A);case"github.com":return new Xo(N,A);case"google.com":return new wo(N,A);case"twitter.com":return new vu(N,A,y.screenName||null);case"custom":case"anonymous":return new Qo(N,null);default:return new Qo(N,b,A)}}(m)}class zs{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new zs("enroll",p)}static _fromMfaPendingCredential(p){return new zs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,b;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return zs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return zs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class hl{constructor(p,m,b){this.session=p,this.hints=m,this.signInResolver=b}static _fromError(p,m){const b=tt(p),A=m.customData._serverResponse,N=(A.mfaInfo||[]).map(Le=>Ht._fromServerResponse(b,Le));Q(A.mfaPendingCredential,b,"internal-error");const ve=zs._fromMfaPendingCredential(A.mfaPendingCredential);return new hl(ve,N,function(){var Le=(0,a.Z)(function*(ut){const St=yield ut._process(b,ve);delete A.mfaInfo,delete A.mfaPendingCredential;const Wt=Object.assign(Object.assign({},A),{idToken:St.idToken,refreshToken:St.refreshToken});switch(m.operationType){case"signIn":const Rt=yield ni._fromIdTokenResponse(b,m.operationType,Wt);return yield b._updateCurrentUser(Rt.user),Rt;case"reauthenticate":return Q(m.user,b,"internal-error"),ni._forOperation(m.user,m.operationType,Wt);default:Ae(b,"internal-error")}});return function(ut){return Le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,a.Z)(function*(){return m.signInResolver(p)})()}}function jr(y,p){return mt(y,"POST","/v2/accounts/mfaEnrollment:start",Ke(y,p))}class Ws{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>Ht._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Ws(p)}getSession(){var p=this;return(0,a.Z)(function*(){return zs._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var b=this;return(0,a.Z)(function*(){const A=p,N=yield b.getSession(),ve=yield Gn(b.user,A._process(b.user.auth,N,m));return yield b.user._updateTokensIfNecessary(ve),b.user.reload()})()}unenroll(p){var m=this;return(0,a.Z)(function*(){const b="string"==typeof p?p:p.uid,A=yield m.user.getIdToken(),N=yield Gn(m.user,function Gg(y,p){return mt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ke(y,p))}(m.user.auth,{idToken:A,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ve})=>ve!==b),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(ve){if("auth/user-token-expired"!==ve.code)throw ve}})()}}const Oa=new WeakMap,wu="__sak";class Jo{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(wu,"1"),this.storage.removeItem(wu),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Yr=(()=>{class y extends Jo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nh(){const y=(0,F.z$)();return mn(y)||_r(y)}()&&function ur(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=qi(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const A=this.storage.getItem(b),N=this.localCache[b];A!==N&&m(b,N,A)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((Le,ut,St)=>{this.notifyListeners(Le,St)});const A=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(A);if(m.newValue!==Le)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!b)return}const N=()=>{const Le=this.storage.getItem(A);!b&&this.localCache[A]===Le||this.notifyListeners(A,Le)},ve=this.storage.getItem(A);!function Hs(){return(0,F.w1)()&&10===document.documentMode}()||ve===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,b){this.localCache[m]=b;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var A=()=>super._set,N=this;return(0,a.Z)(function*(){yield A().call(N,m,b),N.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,A=this;return(0,a.Z)(function*(){const N=yield b().call(A,m);return A.localCache[m]=JSON.stringify(N),N})()}_remove(m){var b=()=>super._remove,A=this;return(0,a.Z)(function*(){yield b().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),Sn=(()=>{class y extends Jo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return y.type="SESSION",y})();let Vt=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(N=>N.isListeningto(m));if(b)return b;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,a.Z)(function*(){const A=m,{eventId:N,eventType:ve,data:Le}=A.data,ut=b.handlersMap[ve];if(!(null==ut?void 0:ut.size))return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:ve});const St=Array.from(ut).map(function(){var Rt=(0,a.Z)(function*(Er){return Er(A.origin,Le)});return function(Er){return Rt.apply(this,arguments)}}()),Wt=yield function Zs(y){return Promise.all(y.map(function(){var p=(0,a.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return p.apply(this,arguments)}}()))}(St);A.ports[0].postMessage({status:"done",eventId:N,eventType:ve,response:Wt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Cn(y="",p=10){let m="";for(let b=0;b<p;b++)m+=Math.floor(10*Math.random());return y+m}class fl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,b=50){var A=this;return(0,a.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let ve,Le;return new Promise((ut,St)=>{const Wt=Cn("",20);N.port1.start();const Rt=setTimeout(()=>{St(new Error("unsupported_event"))},b);Le={messageChannel:N,onMessage(Er){const Ss=Er;if(Ss.data.eventId===Wt)switch(Ss.data.status){case"ack":clearTimeout(Rt),ve=setTimeout(()=>{St(new Error("timeout"))},3e3);break;case"done":clearTimeout(ve),ut(Ss.data.response);break;default:clearTimeout(Rt),clearTimeout(ve),St(new Error("invalid_response"))}}},A.handlers.add(Le),N.port1.addEventListener("message",Le.onMessage),A.target.postMessage({eventType:p,eventId:Wt,data:m},[N.port2])}).finally(()=>{Le&&A.removeMessageHandler(Le)})})()}}function qn(){return window}function er(){return void 0!==qn().WorkerGlobalScope&&"function"==typeof qn().importScripts}function tr(){return(tr=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Iu="firebaseLocalStorageDb",bs="firebaseLocalStorage",Io="fbase_key";class Ys{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ii(y,p){return y.transaction([bs],p?"readwrite":"readonly").objectStore(bs)}function Ks(){const y=indexedDB.open(Iu,1);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(bs,{keyPath:Io})}catch(A){m(A)}}),y.addEventListener("success",(0,a.Z)(function*(){const b=y.result;b.objectStoreNames.contains(bs)?p(b):(b.close(),yield function ws(){const y=indexedDB.deleteDatabase(Iu);return new Ys(y).toPromise()}(),p(yield Ks()))}))})}function We(y,p,m){return vr.apply(this,arguments)}function vr(){return(vr=(0,a.Z)(function*(y,p,m){const b=ii(y,!0).put({[Io]:p,value:m});return new Ys(b).toPromise()})).apply(this,arguments)}function yi(){return(yi=(0,a.Z)(function*(y,p){const m=ii(y,!1).get(p),b=yield new Ys(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function L(y,p){const m=ii(y,!0).delete(p);return new Ys(m).toPromise()}const ls=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,a.Z)(function*(){return m.db||(m.db=yield Ks()),m.db})()}_withRetries(m){var b=this;return(0,a.Z)(function*(){let A=0;for(;;)try{const N=yield b._openDb();return yield m(N)}catch(N){if(A++>3)throw N;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,a.Z)(function*(){return er()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,a.Z)(function*(){m.receiver=Vt._getInstance(function At(){return er()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,a.Z)(function*(A,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(A,N){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,a.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,a.Z)(function*(){var b,A;if(m.activeServiceWorker=yield function ea(){return tr.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new fl(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(b=N[0])||void 0===b?void 0:b.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,a.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function rh(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ks();return yield We(m,wu,"1"),yield L(m,wu),!0}catch(m){}return!1})()}_withPendingWrite(m){var b=this;return(0,a.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var A=this;return(0,a.Z)(function*(){return A._withPendingWrite((0,a.Z)(function*(){return yield A._withRetries(N=>We(N,m,b)),A.localCache[m]=b,A.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,a.Z)(function*(){const A=yield b._withRetries(N=>function Qi(y,p){return yi.apply(this,arguments)}(N,m));return b.localCache[m]=A,A})()}_remove(m){var b=this;return(0,a.Z)(function*(){return b._withPendingWrite((0,a.Z)(function*(){return yield b._withRetries(A=>L(A,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,a.Z)(function*(){const b=yield m._withRetries(ve=>{const Le=ii(ve,!1).getAll();return new Ys(Le).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:ve,value:Le}of b)N.add(ve),JSON.stringify(m.localCache[ve])!==JSON.stringify(Le)&&(m.notifyListeners(ve,Le),A.push(ve));for(const ve of Object.keys(m.localCache))m.localCache[ve]&&!N.has(ve)&&(m.notifyListeners(ve,null),A.push(ve));return A})()}notifyListeners(m,b){this.localCache[m]=b;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function nn(y,p){return mt(y,"POST","/v2/accounts/mfaSignIn:start",Ke(y,p))}function Oi(){return(Oi=(0,a.Z)(function*(y){return(yield mt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Do(y){return new Promise((p,m)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=p,b.onerror=A=>{const N=_e("internal-error");N.customData=A,m(N)},b.type="text/javascript",b.charset="UTF-8",function ih(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(b)})}function oc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Hn=1e12;class ac{constructor(p){this.auth=p,this.counter=Hn,this._widgets=new Map}render(p,m){const b=this.counter;return this._widgets.set(b,new Hr(p,this.auth.name,m||{})),this.counter++,b}reset(p){var m;const b=p||Hn;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Hn))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,a.Z)(function*(){var b;return null===(b=m._widgets.get(p||Hn))||void 0===b||b.execute(),""})()}}class Hr{constructor(p,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;Q(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xi(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lc=oc("rcb"),zg=new Be(3e4,6e4);class Xf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qn().grecaptcha}load(p,m=""){return Q(function My(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(qn().grecaptcha):new Promise((b,A)=>{const N=qn().setTimeout(()=>{A(_e(p,"network-request-failed"))},zg.get());qn()[lc]=()=>{qn().clearTimeout(N),delete qn()[lc];const Le=qn().grecaptcha;if(!Le)return void A(_e(p,"internal-error"));const ut=Le.render;Le.render=(St,Wt)=>{const Rt=ut(St,Wt);return this.counter++,Rt},this.hostLanguage=m,b(Le)},Do(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:lc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),A(_e(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!qn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jf{load(p){return(0,a.Z)(function*(){return new ac(p)})()}clearedOneInstance(){}}const cc="recaptcha",uc={theme:"light",type:"image"};class ep{constructor(p,m=Object.assign({},uc),b){this.parameters=m,this.type=cc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tt(b),this.isInvisible="invisible"===this.parameters.size,Q("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;Q(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jf:new Xf,this.validateStartingState()}verify(){var p=this;return(0,a.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(m)||new Promise(N=>{const ve=Le=>{!Le||(p.tokenChangeListeners.delete(ve),N(Le))};p.tokenChangeListeners.add(ve),p.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof p)p(m);else if("string"==typeof p){const b=qn()[p];"function"==typeof b&&b(m)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,a.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,a.Z)(function*(){Q(dt()&&!er(),p.auth,"internal-error"),yield function Ri(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function sc(y){return Oi.apply(this,arguments)}(p.auth);Q(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qs{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Sa._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function hr(){return(hr=(0,a.Z)(function*(y,p,m){const b=tt(y),A=yield Kr(b,p,(0,F.m9)(m));return new Qs(A,N=>xr(b,N))})).apply(this,arguments)}function Ao(){return(Ao=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y);yield mo(!1,b,"phone");const A=yield Kr(b.auth,p,(0,F.m9)(m));return new Qs(A,N=>vs(b,N))})).apply(this,arguments)}function hc(){return(hc=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y),A=yield Kr(b.auth,p,(0,F.m9)(m));return new Qs(A,N=>_o(b,N))})).apply(this,arguments)}function Kr(y,p,m){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,a.Z)(function*(y,p,m){var b;const A=yield m.verify();try{let N;if(Q("string"==typeof A,y,"argument-error"),Q(m.type===cc,y,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const ve=N.session;if("phoneNumber"in N)return Q("enroll"===ve.type,y,"internal-error"),(yield jr(y,{idToken:ve.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Q("signin"===ve.type,y,"internal-error");const Le=(null===(b=N.multiFactorHint)||void 0===b?void 0:b.uid)||N.multiFactorUid;return Q(Le,y,"missing-multi-factor-info"),(yield nn(y,{mfaPendingCredential:ve.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ve}=yield sl(y,{phoneNumber:N.phoneNumber,recaptchaToken:A});return ve}}finally{m._reset()}})).apply(this,arguments)}function xo(){return(xo=(0,a.Z)(function*(y,p){yield Jn((0,F.m9)(y),p)})).apply(this,arguments)}let si=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=tt(m)}verifyPhoneNumber(m,b){return Kr(this.auth,m,(0,F.m9)(b))}static credential(m,b){return Sa._fromVerification(m,b)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:A}=m;return b&&A?Sa._fromTokenResponse(b,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Es(y,p){return p?$(p):(Q(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ra extends En{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return cn(p,this._buildIdpRequest())}_linkToIdToken(p,m){return cn(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return cn(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function fc(y){return Yo(y.auth,new ra(y),y.bypassAuthState)}function oh(y){const{auth:p,user:m}=y;return Q(m,p,"internal-error"),Zd(m,new ra(y),y.bypassAuthState)}function Du(y){return ka.apply(this,arguments)}function ka(){return(ka=(0,a.Z)(function*(y){const{auth:p,user:m}=y;return Q(m,p,"internal-error"),Jn(m,new ra(y),y.bypassAuthState)})).apply(this,arguments)}class vi{constructor(p,m,b,A,N=!1){this.auth=p,this.resolver=b,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,a.Z)(function*(b,A){p.pendingPromise={resolve:b,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(b,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,a.Z)(function*(){const{urlResponse:b,sessionId:A,postBody:N,tenantId:ve,error:Le,type:ut}=p;if(Le)return void m.reject(Le);const St={auth:m.auth,requestUri:b,sessionId:A,tenantId:ve||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ut)(St))}catch(Wt){m.reject(Wt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return fc;case"linkViaPopup":case"linkViaRedirect":return Du;case"reauthViaPopup":case"reauthViaRedirect":return oh;default:Ae(this.auth,"internal-error")}}resolve(p){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pc=new Be(2e3,1e4);function ah(){return(ah=(0,a.Z)(function*(y,p,m){const b=tt(y);ue(y,p,po);const A=Es(b,m);return new Xs(b,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Na(){return(Na=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y);ue(b.auth,p,po);const A=Es(b.auth,m);return new Xs(b.auth,"reauthViaPopup",p,A,b).executeNotNull()})).apply(this,arguments)}function Su(){return(Su=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y);ue(b.auth,p,po);const A=Es(b.auth,m);return new Xs(b.auth,"linkViaPopup",p,A,b).executeNotNull()})).apply(this,arguments)}let Xs=(()=>{class y extends vi{constructor(m,b,A,N,ve){super(m,b,N,ve),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,a.Z)(function*(){const b=yield m.execute();return Q(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,a.Z)(function*(){re(1===m.filter.length,"Popup operations only handle one event");const b=Cn();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(_e(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,A;this.pollId=(null===(A=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,pc.get())};m()}}return y.currentPopupAction=null,y})();const Ci=new Map;class Au extends vi{constructor(p,m,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,a.Z)(function*(){let b=Ci.get(m.auth._key());if(!b){try{const N=(yield function sa(y,p){return xu.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;b=()=>Promise.resolve(N)}catch(A){b=()=>Promise.reject(A)}Ci.set(m.auth._key(),b)}return m.bypassAuthState||Ci.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,b=this;return(0,a.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(b,p);if("unknown"!==p.type){if(p.eventId){const A=yield b.auth._redirectUserForId(p.eventId);if(A)return b.user=A,m().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function xu(){return(xu=(0,a.Z)(function*(y,p){const m=D(p),b=I(y);if(!(yield b._isAvailable()))return!1;const A="true"===(yield b._get(m));return yield b._remove(m),A})).apply(this,arguments)}function oa(y,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,a.Z)(function*(y,p){return I(y)._set(D(p),"true")})).apply(this,arguments)}function I(y){return $(y._redirectPersistence)}function D(y){return Re("pendingRedirect",y.config.apiKey,y.name)}function Se(){return(Se=(0,a.Z)(function*(y,p,m){const b=tt(y);ue(y,p,po);const A=Es(b,m);return yield oa(A,b),A._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Dt(){return(Dt=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y);ue(b.auth,p,po);const A=Es(b.auth,m);yield oa(A,b.auth);const N=yield br(b);return A._openRedirect(b.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function In(){return(In=(0,a.Z)(function*(y,p,m){const b=(0,F.m9)(y);ue(b.auth,p,po);const A=Es(b.auth,m);yield mo(!1,b,p.providerId),yield oa(A,b.auth);const N=yield br(b);return A._openRedirect(b.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function Mr(){return(Mr=(0,a.Z)(function*(y,p){return yield tt(y)._initializationPromise,fr(y,p,!1)})).apply(this,arguments)}function fr(y,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,a.Z)(function*(y,p,m=!1){const b=tt(y),A=Es(b,p),ve=yield new Au(b,A,m).execute();return ve&&!m&&(delete ve.user._redirectEventId,yield b._persistUserIfCurrent(ve.user),yield b._setRedirectUser(null,p)),ve})).apply(this,arguments)}function br(y){return zn.apply(this,arguments)}function zn(){return(zn=(0,a.Z)(function*(y){const p=Cn(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Fs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(m=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function np(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wg(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var b;if(p.error&&!Wg(p)){const A=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(_e(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const b=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aa(p))}saveEventToCache(p){this.cachedEventUids.add(aa(p)),this.lastProcessedEventTime=Date.now()}}function aa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Wg({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function ch(y){return gc.apply(this,arguments)}function gc(){return(gc=(0,a.Z)(function*(y,p={}){return mt(y,"GET","/v1/projects",p)})).apply(this,arguments)}const uh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rp=/^https?/;function Ro(){return(Ro=(0,a.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield ch(y);for(const m of p)try{if(mc(m))return}catch(b){}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function mc(y){const p=st(),{protocol:m,hostname:b}=new URL(p);if(y.startsWith("chrome-extension://")){const ve=new URL(y);return""===ve.hostname&&""===b?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&ve.hostname===b}if(!rp.test(m))return!1;if(uh.test(y))return b===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(b)}const Oy=new Be(3e4,6e4);function dh(){const y=qn().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let _c=null;function Ry(y){return _c=_c||function hh(y){return new Promise((p,m)=>{var b,A,N;function ve(){dh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{dh(),m(_e(y,"network-request-failed"))},timeout:Oy.get()})}if(null===(A=null===(b=qn().gapi)||void 0===b?void 0:b.iframes)||void 0===A?void 0:A.Iframe)p(gapi.iframes.getContext());else{if(!(null===(N=qn().gapi)||void 0===N?void 0:N.load)){const Le=oc("iframefcb");return qn()[Le]=()=>{gapi.load?ve():m(_e(y,"network-request-failed"))},Do(`https://apis.google.com/js/api.js?onload=${Le}`).catch(ut=>m(ut))}ve()}}).catch(p=>{throw _c=null,p})}(y),_c}const ky=new Be(5e3,15e3),Pu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function la(y){const p=y.config;Q(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?Fe(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:y.name,v:Te.SDK_VERSION},A=fh.get(y.config.apiHost);A&&(b.eid=A);const N=y._getFrameworks();return N.length&&(b.fw=N.join(",")),`${m}?${(0,F.xO)(b).slice(1)}`}function ip(){return ip=(0,a.Z)(function*(y){const p=yield Ry(y),m=qn().gapi;return Q(m,y,"internal-error"),p.open({where:document.body,url:la(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pu,dontclear:!0},b=>new Promise(function(){var A=(0,a.Z)(function*(N,ve){yield b.restyle({setHideOnLeave:!1});const Le=_e(y,"network-request-failed"),ut=qn().setTimeout(()=>{ve(Le)},ky.get());function St(){qn().clearTimeout(ut),N(b)}b.ping(St).then(St,()=>{ve(Le)})});return function(N,ve){return A.apply(this,arguments)}}()))}),ip.apply(this,arguments)}const Ou={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yc{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function gh(y,p,m,b,A,N){Q(y.config.authDomain,y,"auth-domain-config-required"),Q(y.config.apiKey,y,"invalid-api-key");const ve={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:b,v:Te.SDK_VERSION,eventId:A};if(p instanceof po){p.setDefaultLanguage(y.languageCode),ve.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(ve.customParameters=JSON.stringify(p.getCustomParameters()));for(const[ut,St]of Object.entries(N||{}))ve[ut]=St}if(p instanceof Wi){const ut=p.getScopes().filter(St=>""!==St);ut.length>0&&(ve.scopes=ut.join(","))}y.tenantId&&(ve.tid=y.tenantId);const Le=ve;for(const ut of Object.keys(Le))void 0===Le[ut]&&delete Le[ut];return`${function ku({config:y}){return y.emulator?Fe(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(Le).slice(1)}`}const Is="webStorageSupport";class lp extends class Fy{constructor(p){this.factorId=p}_process(p,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,b);case"signin":return this._finalizeSignIn(p,m.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new lp(p)}_finalizeEnroll(p,m,b){return function eh(y,p){return mt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ke(y,p))}(p,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function na(y,p){return mt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ke(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _h=(()=>{class y{constructor(){}static assertion(m){return lp._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var cp="@firebase/auth",up="0.19.12";class yh{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,a.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(b=>{var A;p((null===(A=b)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pl(){return window}function Ua(){return(Ua=(0,a.Z)(function*(y,p,m){var b;const{BuildInfo:A}=pl();re(p.sessionId,"AuthEvent did not contain a session ID");const N=yield fp(p.sessionId),ve={};return _r()?ve.ibi=A.packageName:Qn()?ve.apn=A.packageName:Ae(y,"operation-not-supported-in-this-environment"),A.displayName&&(ve.appDisplayName=A.displayName),ve.sessionId=N,gh(y,m,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,ve)})).apply(this,arguments)}function Ts(){return(Ts=(0,a.Z)(function*(y){const{BuildInfo:p}=pl(),m={};_r()?m.iosBundleId=p.packageName:Qn()?m.androidPackageName=p.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield ch(y,m)})).apply(this,arguments)}function Ba(){return(Ba=(0,a.Z)(function*(y,p,m){const{cordova:b}=pl();let A=()=>{};try{yield new Promise((N,ve)=>{let Le=null;function ut(){var Rt;N();const Er=null===(Rt=b.plugins.browsertab)||void 0===Rt?void 0:Rt.close;"function"==typeof Er&&Er(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function St(){Le||(Le=window.setTimeout(()=>{ve(_e(y,"redirect-cancelled-by-user"))},2e3))}function Wt(){"visible"===(null==document?void 0:document.visibilityState)&&St()}p.addPassiveListener(ut),document.addEventListener("resume",St,!1),Qn()&&document.addEventListener("visibilitychange",Wt,!1),A=()=>{p.removePassiveListener(ut),document.removeEventListener("resume",St,!1),document.removeEventListener("visibilitychange",Wt,!1),Le&&window.clearTimeout(Le)}})}finally{A()}})).apply(this,arguments)}function fp(y){return bc.apply(this,arguments)}function bc(){return(bc=(0,a.Z)(function*(y){const p=wc(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wc(y){if(re(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let b=0;b<y.length;b++)m[b]=y.charCodeAt(b);return m}!function Nu(y){(0,Te._registerComponent)(new ne.wA("auth",(p,{options:m})=>{const b=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:N,authDomain:ve}=b.options;return((Le,ut)=>{Q(N&&!N.includes(":"),"invalid-api-key",{appName:Le.name}),Q(!(null==ve?void 0:ve.includes(":")),"argument-error",{appName:Le.name});const St={apiKey:N,authDomain:ve,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Di(y)},Wt=new Vr(Le,ut,St);return function pe(y,p){const m=(null==p?void 0:p.persistence)||[],b=(Array.isArray(m)?m:[m]).map($);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(Wt,m),Wt})(b,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,b)=>{p.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new ne.wA("auth-internal",p=>{const m=tt(p.getProvider("auth").getImmediate());return new yh(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(cp,up,function vh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,Te.registerVersion)(cp,up,"esm2017")}("Browser");class pp extends Fs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,a.Z)(function*(){yield p.initPromise})()}}function gp(y){return ko.apply(this,arguments)}function ko(){return(ko=(0,a.Z)(function*(y){const p=yield ca()._get(Js(y));return p&&(yield ca()._remove(Js(y))),p})).apply(this,arguments)}function Uy(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*p.length);y.push(p.charAt(b))}return y.join("")}function ca(){return $(Yr)}function Js(y){return Re("authEvent",y.config.apiKey,y.name)}function ml(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...m]=y.split("?");return(0,F.zd)(m.join("?"))}function Jg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Vu(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function em(y=(0,F.z$)()){return!("file:"!==Vu()&&"ionic:"!==Vu()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function bi(){try{const y=self.localStorage,p=Cn();if(y)return y.setItem(p,"1"),y.removeItem(p),!function Ls(y=(0,F.z$)()){return function Fb(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function wh(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return Ic()&&(0,F.hl)()}return!1}function Ic(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $u(){return(function $y(){return"http:"===Vu()||"https:"===Vu()}()||(0,F.ru)()||em())&&!function jy(){return(0,F.b$)()||(0,F.UG)()}()&&bi()&&!Ic()}function Va(){return em()&&"undefined"!=typeof document}function yl(){return(yl=(0,a.Z)(function*(){return!!Va()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Ds={LOCAL:"local",NONE:"none",SESSION:"session"},Tc=Q,Ih="persistence";function Dc(y){return Th.apply(this,arguments)}function Th(){return(Th=(0,a.Z)(function*(y){yield y._initializationPromise;const p=Dh(),m=Re(Ih,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())})).apply(this,arguments)}function Dh(){var y;try{return(null===(y=function Eh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const Hy=Q;class No{constructor(){this.browserResolver=$(class vc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sn,this._completeRedirectFn=fr}_openPopup(p,m,b,A){var N=this;return(0,a.Z)(function*(){var ve;re(null===(ve=N.eventManagers[p._key()])||void 0===ve?void 0:ve.manager,"_initialize() not called before _openPopup()");const Le=gh(p,m,b,st(),A);return function ap(y,p,m,b=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),ve=Math.max((window.screen.availWidth-b)/2,0).toString();let Le="";const ut=Object.assign(Object.assign({},Ou),{width:b.toString(),height:A.toString(),top:N,left:ve}),St=(0,F.z$)().toLowerCase();m&&(Le=mr(St)?"_blank":m),$t(St)&&(p=p||"http://localhost",ut.scrollbars="yes");const Wt=Object.entries(ut).reduce((Er,[Ss,ua])=>`${Er}${Ss}=${ua},`,"");if(function uo(y=(0,F.z$)()){var p;return _r(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(St)&&"_self"!==Le)return function Ru(y,p){const m=document.createElement("a");m.href=y,m.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(p||"",Le),new yc(null);const Rt=window.open(p||"",Le,Wt);Q(Rt,y,"popup-blocked");try{Rt.focus()}catch(Er){}return new yc(Rt)}(p,Le,Cn())})()}_openRedirect(p,m,b,A){var N=this;return(0,a.Z)(function*(){return yield N._originValidation(p),function Eu(y){qn().location.href=y}(gh(p,m,b,st(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:N}=this.eventManagers[m];return A?Promise.resolve(A):(re(N,"If manager is not set, promise should be"),N)}const b=this.initAndGetManager(p);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(p){var m=this;return(0,a.Z)(function*(){const b=yield function Ny(y){return ip.apply(this,arguments)}(p),A=new Fs(p);return b.register("authEvent",N=>(Q(null==N?void 0:N.authEvent,p,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=b,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Is,{type:Is},A=>{var N;const ve=null===(N=null==A?void 0:A[0])||void 0===N?void 0:N[Is];void 0!==ve&&m(!!ve),Ae(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Py(y){return Ro.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return qi()||mn()||_r()}}),this.cordovaResolver=$(class pr{constructor(){this._redirectPersistence=Sn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fr}_initialize(p){var m=this;return(0,a.Z)(function*(){const b=p._key();let A=m.eventManagers.get(b);return A||(A=new pp(p),m.eventManagers.set(b,A),m.attachCallbackListeners(p,A)),A})()}_openPopup(p){Ae(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,b,A){var N=this;return(0,a.Z)(function*(){!function hp(y){var p,m,b,A,N,ve,Le,ut,St,Wt;const Rt=pl();Q("function"==typeof(null===(p=null==Rt?void 0:Rt.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(void 0!==(null===(m=null==Rt?void 0:Rt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q("function"==typeof(null===(N=null===(A=null===(b=null==Rt?void 0:Rt.cordova)||void 0===b?void 0:b.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(ut=null===(Le=null===(ve=null==Rt?void 0:Rt.cordova)||void 0===ve?void 0:ve.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===ut?void 0:ut.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(Wt=null===(St=null==Rt?void 0:Rt.cordova)||void 0===St?void 0:St.InAppBrowser)||void 0===Wt?void 0:Wt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const ve=yield N._initialize(p);yield ve.initialized(),ve.resetRedirect(),function Fa(){Ci.clear()}(),yield N._originValidation(p);const Le=function Lu(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Uy(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(p,b,A);yield function Uu(y,p){return ca()._set(Js(y),p)}(p,Le);const ut=yield function Ch(y,p,m){return Ua.apply(this,arguments)}(p,Le,m),St=yield function Cc(y){const{cordova:p}=pl();return new Promise(m=>{p.plugins.browsertab.isAvailable(b=>{let A=null;b?p.plugins.browsertab.openUrl(y):A=p.InAppBrowser.open(y,function is(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(ut);return function Qg(y,p,m){return Ba.apply(this,arguments)}(p,ve,St)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function dp(y){return Ts.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:b,handleOpenURL:A,BuildInfo:N}=pl(),ve=setTimeout((0,a.Z)(function*(){yield gp(p),m.onEvent(Jg())}),500),Le=function(){var Wt=(0,a.Z)(function*(Rt){clearTimeout(ve);const Er=yield gp(p);let Ss=null;Er&&(null==Rt?void 0:Rt.url)&&(Ss=function Xg(y,p){var m,b;const A=function gl(y){const p=ml(y),m=p.link?decodeURIComponent(p.link):void 0,b=ml(m).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ml(A).link||A||b||m||y}(p);if(A.includes("/__/auth/callback")){const N=ml(A),ve=N.firebaseError?function Bu(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(N.firebaseError)):null,Le=null===(b=null===(m=null==ve?void 0:ve.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],ut=Le?_e(Le):null;return ut?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ut,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Er,Rt.url)),m.onEvent(Ss||Jg())});return function(Er){return Wt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,Le);const ut=A,St=`${N.packageName.toLowerCase()}://`;pl().handleOpenURL=function(){var Wt=(0,a.Z)(function*(Rt){if(Rt.toLowerCase().startsWith(St)&&Le({url:Rt}),"function"==typeof ut)try{ut(Rt)}catch(Er){console.error(Er)}});return function(Rt){return Wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Sn,this._completeRedirectFn=fr}_initialize(p){var m=this;return(0,a.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,b,A){var N=this;return(0,a.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(p,m,b,A)})()}_openRedirect(p,m,b,A){var N=this;return(0,a.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(p,m,b,A)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Va()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,a.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Li(){return yl.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function tm(y){return y.unwrap()}function vl(y){return xh(y)}function xh(y){const{_tokenResponse:p}=y instanceof F.ZR?y.customData:y;if(!p)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return si.credentialFromResult(y);const m=p.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=ol;break;case"facebook.com":b=zo;break;case"github.com":b=zd;break;case"twitter.com":b=Gl;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:ve,pendingToken:Le,nonce:ut}=p;return N||ve||A||Le?Le?m.startsWith("saml.")?Wo._create(m,Le):Ar._fromParams({providerId:m,signInMethod:m,pendingToken:Le,idToken:A,accessToken:N}):new Aa(m).credential({idToken:A,accessToken:N,rawNonce:ut}):null}return y instanceof F.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function ai(y,p){return p.catch(m=>{throw m instanceof F.ZR&&function Ah(y,p){var m;const b=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Gy(y,function ic(y,p){var m;const b=(0,F.m9)(y),A=p;return Q(p.customData.operationType,b,"argument-error"),Q(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),hl._fromError(b,A)}(y,p));else if(b){const A=xh(p),N=p;A&&(N.credential=A,N.tenantId=b.tenantId||void 0,N.email=b.email||void 0,N.phoneNumber=b.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:vl(m),additionalUserInfo:_i(m),user:Wn.getOrCreate(A)}})}function Cl(y,p){return bl.apply(this,arguments)}function bl(){return(bl=(0,a.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:b=>ai(y,m.confirm(b))}})).apply(this,arguments)}class Gy{constructor(p,m){this.resolver=m,this.auth=function Sh(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ai(tm(this.auth),this.resolver.resolveSignIn(p))}}class Wn{constructor(p){this._delegate=p,this.multiFactor=function th(y){const p=(0,F.m9)(y);return Oa.has(p)||Oa.set(p,Ws._fromUser(p)),Oa.get(p)}(p)}static getOrCreate(p){return Wn.USER_MAP.has(p)||Wn.USER_MAP.set(p,new Wn(p)),Wn.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,a.Z)(function*(){return ai(m.auth,vs(m._delegate,p))})()}linkWithPhoneNumber(p,m){var b=this;return(0,a.Z)(function*(){return Cl(b.auth,function dc(y,p,m){return Ao.apply(this,arguments)}(b._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,a.Z)(function*(){return ai(m.auth,function lh(y,p,m){return Su.apply(this,arguments)}(m._delegate,p,No))})()}linkWithRedirect(p){var m=this;return(0,a.Z)(function*(){return yield Dc(tt(m.auth)),function xt(y,p,m){return function Kt(y,p,m){return In.apply(this,arguments)}(y,p,m)}(m._delegate,p,No)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,a.Z)(function*(){return ai(m.auth,_o(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Cl(this.auth,function tp(y,p,m){return hc.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return ai(this.auth,function ia(y,p,m){return Na.apply(this,arguments)}(this._delegate,p,No))}reauthenticateWithRedirect(p){var m=this;return(0,a.Z)(function*(){return yield Dc(tt(m.auth)),function ke(y,p,m){return function it(y,p,m){return Dt.apply(this,arguments)}(y,p,m)}(m._delegate,p,No)})()}sendEmailVerification(p){return function Cs(y,p){return pu.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,a.Z)(function*(){return yield function al(y,p){return au.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function _u(y,p){return yu((0,F.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function Kd(y,p){return yu((0,F.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function sh(y,p){return xo.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function dl(y,p){return mu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function nc(y,p,m){return rc.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wn.USER_MAP=new WeakMap;const Sc=Q;let yp=(()=>{class y{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;Sc(A,"invalid-api-key",{appName:m.name}),Sc(A,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?No:void 0;this._delegate=b.initialize({options:{persistence:qy(A,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function Dn(y,p,m){const b=tt(y);Q(b._canInitEmulator,b,"emulator-config-failed"),Q(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),N=dr(p),{host:ve,port:Le}=function $r(y){const p=dr(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(b);if(A){const N=A[1];return{host:N,port:wn(b.substr(N.length+1))}}{const[N,ve]=b.split(":");return{host:N,port:wn(ve)}}}(p);b.config.emulator={url:`${N}//${ve}${null===Le?"":`:${Le}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ve,port:Le,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Si(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,b)}applyActionCode(m){return function cu(y,p){return Je.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return yn(this._delegate,m)}confirmPasswordReset(m,b){return function Jl(y,p,m){return lu.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var A=this;return(0,a.Z)(function*(){return ai(A._delegate,function Pa(y,p,m){return Ki.apply(this,arguments)}(A._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function tc(y,p){return bo.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function fu(y,p){const m=qo.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,a.Z)(function*(){Sc($u(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function an(y,p){return Mr.apply(this,arguments)}(m._delegate,No);return b?ai(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function By(y,p){tt(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,b,A){const{next:N,error:ve,complete:Le}=nm(m,b,A);return this._delegate.onAuthStateChanged(N,ve,Le)}onIdTokenChanged(m,b,A){const{next:N,error:ve,complete:Le}=nm(m,b,A);return this._delegate.onIdTokenChanged(N,ve,Le)}sendSignInLinkToEmail(m,b){return function hu(y,p,m){return Yd.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function Ql(y,p,m){return Xl.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,a.Z)(function*(){let A;switch(function mp(y,p){Tc(Object.values(Ds).includes(p),y,"invalid-persistence-type"),(0,F.b$)()?Tc(p!==Ds.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Tc(p===Ds.NONE,y,"unsupported-persistence-type"):Ic()?Tc(p===Ds.NONE||p===Ds.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Tc(p===Ds.NONE||bi(),y,"unsupported-persistence-type")}(b._delegate,m),m){case Ds.SESSION:A=Sn;break;case Ds.LOCAL:A=(yield $(ls)._isAvailable())?ls:Yr;break;case Ds.NONE:A=ae;break;default:return Ae("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return ai(this._delegate,function zl(y){return Wd.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return ai(this._delegate,xr(this._delegate,m))}signInWithCustomToken(m){return ai(this._delegate,function yo(y,p){return vo.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return ai(this._delegate,function du(y,p,m){return xr((0,F.m9)(y),ou.credential(p,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return ai(this._delegate,function ec(y,p,m){return Co.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Cl(this._delegate,function ki(y,p,m){return hr.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,a.Z)(function*(){return Sc($u(),b._delegate,"operation-not-supported-in-this-environment"),ai(b._delegate,function Mo(y,p,m){return ah.apply(this,arguments)}(b._delegate,m,No))})()}signInWithRedirect(m){var b=this;return(0,a.Z)(function*(){return Sc($u(),b._delegate,"operation-not-supported-in-this-environment"),yield Dc(b._delegate),function O(y,p,m){return function G(y,p,m){return Se.apply(this,arguments)}(y,p,m)}(b._delegate,m,No)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function or(y,p){return Ma.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ds,y})();function nm(y,p,m){let b=y;"function"!=typeof y&&({next:b,error:p,complete:m}=y);const A=b;return{next:ve=>A(ve&&Wn.getOrCreate(ve)),error:p,complete:m}}function qy(y,p){const m=function _p(y,p){const m=Dh();if(!m)return[];const b=Re(Ih,y,p);switch(m.getItem(b)){case Ds.NONE:return[ae];case Ds.LOCAL:return[ls,Sn];case Ds.SESSION:return[Sn];default:return[]}}(y,p);if("undefined"!=typeof self&&!m.includes(ls)&&m.push(ls),"undefined"!=typeof window)for(const b of[Yr,Sn])m.includes(b)||m.push(b);return m.includes(ae)||m.push(ae),m}class vp{constructor(){this.providerId="phone",this._delegate=new si(tm(le.Z.auth()))}static credential(p,m){return si.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}vp.PHONE_SIGN_IN_METHOD=si.PHONE_SIGN_IN_METHOD,vp.PROVIDER_ID=si.PROVIDER_ID;const rm=Q;class im{constructor(p,m,b=le.Z.app()){var A;rm(null===(A=b.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new ep(p,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Mh(y){y.INTERNAL.registerComponent(new ne.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new yp(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ou,FacebookAuthProvider:zo,GithubAuthProvider:zd,GoogleAuthProvider:ol,OAuthProvider:Aa,SAMLAuthProvider:os,PhoneAuthProvider:vp,PhoneMultiFactorGenerator:_h,RecaptchaVerifier:im,TwitterAuthProvider:Gl,Auth:yp,AuthCredential:En,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(le.Z)},8306:(wt,$e,R)=>{"use strict";R.d($e,{y:()=>Y});var a=R(930),le=R(727),F=R(8822),Te=R(4671);var ne=R(2416),Ee=R(576),ge=R(2806);let Y=(()=>{class ce{constructor(J){J&&(this._subscribe=J)}lift(J){const K=new ce;return K.source=this,K.operator=J,K}subscribe(J,K,X){const qe=function ie(ce){return ce&&ce instanceof a.Lv||function ee(ce){return ce&&(0,Ee.m)(ce.next)&&(0,Ee.m)(ce.error)&&(0,Ee.m)(ce.complete)}(ce)&&(0,le.Nn)(ce)}(J)?J:new a.Hp(J,K,X);return(0,ge.x)(()=>{const{operator:Ue,source:Ae}=this;qe.add(Ue?Ue.call(qe,Ae):Ae?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(J){try{return this._subscribe(J)}catch(K){J.error(K)}}forEach(J,K){return new(K=W(K))((X,qe)=>{const Ue=new a.Hp({next:Ae=>{try{J(Ae)}catch(_e){qe(_e),Ue.unsubscribe()}},error:qe,complete:X});this.subscribe(Ue)})}_subscribe(J){var K;return null===(K=this.source)||void 0===K?void 0:K.subscribe(J)}[F.L](){return this}pipe(...J){return function de(ce){return 0===ce.length?Te.y:1===ce.length?ce[0]:function(J){return ce.reduce((K,X)=>X(K),J)}}(J)(this)}toPromise(J){return new(J=W(J))((K,X)=>{let qe;this.subscribe(Ue=>qe=Ue,Ue=>X(Ue),()=>K(qe))})}}return ce.create=Pe=>new ce(Pe),ce})();function W(ce){var Pe;return null!==(Pe=null!=ce?ce:ne.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(wt,$e,R)=>{"use strict";R.d($e,{x:()=>ne});var a=R(8306),le=R(727);const Te=(0,R(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=R(8737),de=R(2806);let ne=(()=>{class ge extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const ee=new Ee(this,this);return ee.operator=W,ee}_throwIfClosed(){if(this.closed)throw new Te}next(W){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(W)}})}error(W){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:ee}=this;for(;ee.length;)ee.shift().error(W)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:ee,isStopped:ie,observers:ce}=this;return ee||ie?le.Lc:(this.currentObservers=null,ce.push(W),new le.w0(()=>{this.currentObservers=null,(0,he.P)(ce,W)}))}_checkFinalizedStatuses(W){const{hasError:ee,thrownError:ie,isStopped:ce}=this;ee?W.error(ie):ce&&W.complete()}asObservable(){const W=new a.y;return W.source=this,W}}return ge.create=(Y,W)=>new Ee(Y,W),ge})();class Ee extends ne{constructor(Y,W){super(),this.destination=Y,this.source=W}next(Y){var W,ee;null===(ee=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===ee||ee.call(W,Y)}error(Y){var W,ee;null===(ee=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===ee||ee.call(W,Y)}complete(){var Y,W;null===(W=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===W||W.call(Y)}_subscribe(Y){var W,ee;return null!==(ee=null===(W=this.source)||void 0===W?void 0:W.subscribe(Y))&&void 0!==ee?ee:le.Lc}}},930:(wt,$e,R)=>{"use strict";R.d($e,{Hp:()=>J,Lv:()=>ee});var a=R(576),le=R(727),F=R(2416),Te=R(7849),he=R(5032);const de=ge("C",void 0,void 0);function ge(Ae,_e,ye){return{kind:Ae,value:_e,error:ye}}var Y=R(3410),W=R(2806);class ee extends le.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,le.Nn)(_e)&&_e.add(this)):this.destination=Ue}static create(_e,ye,ue){return new J(_e,ye,ue)}next(_e){this.isStopped?qe(function Ee(Ae){return ge("N",Ae,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?qe(function ne(Ae){return ge("E",void 0,Ae)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?qe(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ie=Function.prototype.bind;function ce(Ae,_e){return ie.call(Ae,_e)}class Pe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ye}=this;if(ye.next)try{ye.next(_e)}catch(ue){K(ue)}}error(_e){const{partialObserver:ye}=this;if(ye.error)try{ye.error(_e)}catch(ue){K(ue)}else K(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ye){K(ye)}}}class J extends ee{constructor(_e,ye,ue){let be;if(super(),(0,a.m)(_e)||!_e)be={next:null!=_e?_e:void 0,error:null!=ye?ye:void 0,complete:null!=ue?ue:void 0};else{let Q;this&&F.v.useDeprecatedNextContext?(Q=Object.create(_e),Q.unsubscribe=()=>this.unsubscribe(),be={next:_e.next&&ce(_e.next,Q),error:_e.error&&ce(_e.error,Q),complete:_e.complete&&ce(_e.complete,Q)}):be=_e}this.destination=new Pe(be)}}function K(Ae){F.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ae):(0,Te.h)(Ae)}function qe(Ae,_e){const{onStoppedNotification:ye}=F.v;ye&&Y.z.setTimeout(()=>ye(Ae,_e))}const Ue={closed:!0,next:he.Z,error:function X(Ae){throw Ae},complete:he.Z}},727:(wt,$e,R)=>{"use strict";R.d($e,{Lc:()=>de,w0:()=>he,Nn:()=>ne});var a=R(576);const F=(0,R(3888).d)(ge=>function(W){ge(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((ee,ie)=>`${ie+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var Te=R(8737);class he{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const ce of W)ce.remove(this);else W.remove(this);const{initialTeardown:ee}=this;if((0,a.m)(ee))try{ee()}catch(ce){Y=ce instanceof F?ce.errors:[ce]}const{_finalizers:ie}=this;if(ie){this._finalizers=null;for(const ce of ie)try{Ee(ce)}catch(Pe){Y=null!=Y?Y:[],Pe instanceof F?Y=[...Y,...Pe.errors]:Y.push(Pe)}}if(Y)throw new F(Y)}}add(Y){var W;if(Y&&Y!==this)if(this.closed)Ee(Y);else{if(Y instanceof he){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(Y)}}_hasParent(Y){const{_parentage:W}=this;return W===Y||Array.isArray(W)&&W.includes(Y)}_addParent(Y){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(Y),W):W?[W,Y]:Y}_removeParent(Y){const{_parentage:W}=this;W===Y?this._parentage=null:Array.isArray(W)&&(0,Te.P)(W,Y)}remove(Y){const{_finalizers:W}=this;W&&(0,Te.P)(W,Y),Y instanceof he&&Y._removeParent(this)}}he.EMPTY=(()=>{const ge=new he;return ge.closed=!0,ge})();const de=he.EMPTY;function ne(ge){return ge instanceof he||ge&&"closed"in ge&&(0,a.m)(ge.remove)&&(0,a.m)(ge.add)&&(0,a.m)(ge.unsubscribe)}function Ee(ge){(0,a.m)(ge)?ge():ge.unsubscribe()}},2416:(wt,$e,R)=>{"use strict";R.d($e,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,$e,R)=>{"use strict";R.d($e,{E:()=>le});const le=new(R(8306).y)(he=>he.complete())},8996:(wt,$e,R)=>{"use strict";R.d($e,{D:()=>_e});var a=R(8421),le=R(5363),F=R(9468),de=R(8306),Ee=R(2202),ge=R(576),Y=R(9672);function ee(ye,ue){if(!ye)throw new Error("Iterable cannot be null");return new de.y(be=>{(0,Y.f)(be,ue,()=>{const Q=ye[Symbol.asyncIterator]();(0,Y.f)(be,ue,()=>{Q.next().then(q=>{q.done?be.complete():be.next(q.value)})},0,!0)})})}var ie=R(3670),ce=R(8239),Pe=R(1144),J=R(6495),K=R(2206),X=R(4532),qe=R(3260);function _e(ye,ue){return ue?function Ae(ye,ue){if(null!=ye){if((0,ie.c)(ye))return function Te(ye,ue){return(0,a.Xf)(ye).pipe((0,F.R)(ue),(0,le.Q)(ue))}(ye,ue);if((0,Pe.z)(ye))return function ne(ye,ue){return new de.y(be=>{let Q=0;return ue.schedule(function(){Q===ye.length?be.complete():(be.next(ye[Q++]),be.closed||this.schedule())})})}(ye,ue);if((0,ce.t)(ye))return function he(ye,ue){return(0,a.Xf)(ye).pipe((0,F.R)(ue),(0,le.Q)(ue))}(ye,ue);if((0,K.D)(ye))return ee(ye,ue);if((0,J.T)(ye))return function W(ye,ue){return new de.y(be=>{let Q;return(0,Y.f)(be,ue,()=>{Q=ye[Ee.h](),(0,Y.f)(be,ue,()=>{let q,re;try{({value:q,done:re}=Q.next())}catch(Z){return void be.error(Z)}re?be.complete():be.next(q)},0,!0)}),()=>(0,ge.m)(null==Q?void 0:Q.return)&&Q.return()})}(ye,ue);if((0,qe.L)(ye))return function Ue(ye,ue){return ee((0,qe.Q)(ye),ue)}(ye,ue)}throw(0,X.z)(ye)}(ye,ue):(0,a.Xf)(ye)}},8421:(wt,$e,R)=>{"use strict";R.d($e,{Xf:()=>ie});var a=R(655),le=R(1144),F=R(8239),Te=R(8306),he=R(3670),de=R(2206),ne=R(4532),Ee=R(6495),ge=R(3260),Y=R(576),W=R(7849),ee=R(8822);function ie(Ae){if(Ae instanceof Te.y)return Ae;if(null!=Ae){if((0,he.c)(Ae))return function ce(Ae){return new Te.y(_e=>{const ye=Ae[ee.L]();if((0,Y.m)(ye.subscribe))return ye.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,le.z)(Ae))return function Pe(Ae){return new Te.y(_e=>{for(let ye=0;ye<Ae.length&&!_e.closed;ye++)_e.next(Ae[ye]);_e.complete()})}(Ae);if((0,F.t)(Ae))return function J(Ae){return new Te.y(_e=>{Ae.then(ye=>{_e.closed||(_e.next(ye),_e.complete())},ye=>_e.error(ye)).then(null,W.h)})}(Ae);if((0,de.D)(Ae))return X(Ae);if((0,Ee.T)(Ae))return function K(Ae){return new Te.y(_e=>{for(const ye of Ae)if(_e.next(ye),_e.closed)return;_e.complete()})}(Ae);if((0,ge.L)(Ae))return function qe(Ae){return X((0,ge.Q)(Ae))}(Ae)}throw(0,ne.z)(Ae)}function X(Ae){return new Te.y(_e=>{(function Ue(Ae,_e){var ye,ue,be,Q;return(0,a.mG)(this,void 0,void 0,function*(){try{for(ye=(0,a.KL)(Ae);!(ue=yield ye.next()).done;)if(_e.next(ue.value),_e.closed)return}catch(q){be={error:q}}finally{try{ue&&!ue.done&&(Q=ye.return)&&(yield Q.call(ye))}finally{if(be)throw be.error}}_e.complete()})})(Ae,_e).catch(ye=>_e.error(ye))})}},6451:(wt,$e,R)=>{"use strict";R.d($e,{T:()=>de});var a=R(8189),le=R(8421),F=R(515),Te=R(7669),he=R(8996);function de(...ne){const Ee=(0,Te.yG)(ne),ge=(0,Te._6)(ne,1/0),Y=ne;return Y.length?1===Y.length?(0,le.Xf)(Y[0]):(0,a.J)(ge)((0,he.D)(Y,Ee)):F.E}},5403:(wt,$e,R)=>{"use strict";R.d($e,{x:()=>le});var a=R(930);function le(Te,he,de,ne,Ee){return new F(Te,he,de,ne,Ee)}class F extends a.Lv{constructor(he,de,ne,Ee,ge,Y){super(he),this.onFinalize=ge,this.shouldUnsubscribe=Y,this._next=de?function(W){try{de(W)}catch(ee){he.error(ee)}}:super._next,this._error=Ee?function(W){try{Ee(W)}catch(ee){he.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ne?function(){try{ne()}catch(W){he.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(wt,$e,R)=>{"use strict";R.d($e,{U:()=>F});var a=R(4482),le=R(5403);function F(Te,he){return(0,a.e)((de,ne)=>{let Ee=0;de.subscribe((0,le.x)(ne,ge=>{ne.next(Te.call(he,ge,Ee++))}))})}},8189:(wt,$e,R)=>{"use strict";R.d($e,{J:()=>F});var a=R(5577),le=R(4671);function F(Te=1/0){return(0,a.z)(le.y,Te)}},5577:(wt,$e,R)=>{"use strict";R.d($e,{z:()=>Ee});var a=R(4004),le=R(8421),F=R(4482),Te=R(9672),he=R(5403),ne=R(576);function Ee(ge,Y,W=1/0){return(0,ne.m)(Y)?Ee((ee,ie)=>(0,a.U)((ce,Pe)=>Y(ee,ce,ie,Pe))((0,le.Xf)(ge(ee,ie))),W):("number"==typeof Y&&(W=Y),(0,F.e)((ee,ie)=>function de(ge,Y,W,ee,ie,ce,Pe,J){const K=[];let X=0,qe=0,Ue=!1;const Ae=()=>{Ue&&!K.length&&!X&&Y.complete()},_e=ue=>X<ee?ye(ue):K.push(ue),ye=ue=>{ce&&Y.next(ue),X++;let be=!1;(0,le.Xf)(W(ue,qe++)).subscribe((0,he.x)(Y,Q=>{null==ie||ie(Q),ce?_e(Q):Y.next(Q)},()=>{be=!0},void 0,()=>{if(be)try{for(X--;K.length&&X<ee;){const Q=K.shift();Pe?(0,Te.f)(Y,Pe,()=>ye(Q)):ye(Q)}Ae()}catch(Q){Y.error(Q)}}))};return ge.subscribe((0,he.x)(Y,_e,()=>{Ue=!0,Ae()})),()=>{null==J||J()}}(ee,ie,ge,W)))}},5363:(wt,$e,R)=>{"use strict";R.d($e,{Q:()=>Te});var a=R(9672),le=R(4482),F=R(5403);function Te(he,de=0){return(0,le.e)((ne,Ee)=>{ne.subscribe((0,F.x)(Ee,ge=>(0,a.f)(Ee,he,()=>Ee.next(ge),de),()=>(0,a.f)(Ee,he,()=>Ee.complete(),de),ge=>(0,a.f)(Ee,he,()=>Ee.error(ge),de)))})}},3099:(wt,$e,R)=>{"use strict";R.d($e,{B:()=>de});var a=R(8996),le=R(5698),F=R(7579),Te=R(930),he=R(4482);function de(Ee={}){const{connector:ge=(()=>new F.x),resetOnError:Y=!0,resetOnComplete:W=!0,resetOnRefCountZero:ee=!0}=Ee;return ie=>{let ce=null,Pe=null,J=null,K=0,X=!1,qe=!1;const Ue=()=>{null==Pe||Pe.unsubscribe(),Pe=null},Ae=()=>{Ue(),ce=J=null,X=qe=!1},_e=()=>{const ye=ce;Ae(),null==ye||ye.unsubscribe()};return(0,he.e)((ye,ue)=>{K++,!qe&&!X&&Ue();const be=J=null!=J?J:ge();ue.add(()=>{K--,0===K&&!qe&&!X&&(Pe=ne(_e,ee))}),be.subscribe(ue),ce||(ce=new Te.Hp({next:Q=>be.next(Q),error:Q=>{qe=!0,Ue(),Pe=ne(Ae,Y,Q),be.error(Q)},complete:()=>{X=!0,Ue(),Pe=ne(Ae,W),be.complete()}}),(0,a.D)(ye).subscribe(ce))})(ie)}}function ne(Ee,ge,...Y){return!0===ge?(Ee(),null):!1===ge?null:ge(...Y).pipe((0,le.q)(1)).subscribe(()=>Ee())}},9468:(wt,$e,R)=>{"use strict";R.d($e,{R:()=>le});var a=R(4482);function le(F,Te=0){return(0,a.e)((he,de)=>{de.add(F.schedule(()=>he.subscribe(de),Te))})}},5698:(wt,$e,R)=>{"use strict";R.d($e,{q:()=>Te});var a=R(515),le=R(4482),F=R(5403);function Te(he){return he<=0?()=>a.E:(0,le.e)((de,ne)=>{let Ee=0;de.subscribe((0,F.x)(ne,ge=>{++Ee<=he&&(ne.next(ge),he<=Ee&&ne.complete())}))})}},8505:(wt,$e,R)=>{"use strict";R.d($e,{b:()=>he});var a=R(576),le=R(4482),F=R(5403),Te=R(4671);function he(de,ne,Ee){const ge=(0,a.m)(de)||ne||Ee?{next:de,error:ne,complete:Ee}:de;return ge?(0,le.e)((Y,W)=>{var ee;null===(ee=ge.subscribe)||void 0===ee||ee.call(ge);let ie=!0;Y.subscribe((0,F.x)(W,ce=>{var Pe;null===(Pe=ge.next)||void 0===Pe||Pe.call(ge,ce),W.next(ce)},()=>{var ce;ie=!1,null===(ce=ge.complete)||void 0===ce||ce.call(ge),W.complete()},ce=>{var Pe;ie=!1,null===(Pe=ge.error)||void 0===Pe||Pe.call(ge,ce),W.error(ce)},()=>{var ce,Pe;ie&&(null===(ce=ge.unsubscribe)||void 0===ce||ce.call(ge)),null===(Pe=ge.finalize)||void 0===Pe||Pe.call(ge)}))}):Te.y}},4408:(wt,$e,R)=>{"use strict";R.d($e,{o:()=>he});var a=R(727);class le extends a.w0{constructor(ne,Ee){super()}schedule(ne,Ee=0){return this}}const F={setInterval(de,ne,...Ee){const{delegate:ge}=F;return(null==ge?void 0:ge.setInterval)?ge.setInterval(de,ne,...Ee):setInterval(de,ne,...Ee)},clearInterval(de){const{delegate:ne}=F;return((null==ne?void 0:ne.clearInterval)||clearInterval)(de)},delegate:void 0};var Te=R(8737);class he extends le{constructor(ne,Ee){super(ne,Ee),this.scheduler=ne,this.work=Ee,this.pending=!1}schedule(ne,Ee=0){if(this.closed)return this;this.state=ne;const ge=this.id,Y=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(Y,ge,Ee)),this.pending=!0,this.delay=Ee,this.id=this.id||this.requestAsyncId(Y,this.id,Ee),this}requestAsyncId(ne,Ee,ge=0){return F.setInterval(ne.flush.bind(ne,this),ge)}recycleAsyncId(ne,Ee,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return Ee;F.clearInterval(Ee)}execute(ne,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ne,Ee);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ne,Ee){let Y,ge=!1;try{this.work(ne)}catch(W){ge=!0,Y=W||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:ne,scheduler:Ee}=this,{actions:ge}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(ge,this),null!=ne&&(this.id=this.recycleAsyncId(Ee,ne,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,$e,R)=>{"use strict";R.d($e,{v:()=>F});var a=R(6063);class le{constructor(he,de=le.now){this.schedulerActionCtor=he,this.now=de}schedule(he,de=0,ne){return new this.schedulerActionCtor(this,he).schedule(ne,de)}}le.now=a.l.now;class F extends le{constructor(he,de=le.now){super(he,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:de}=this;if(this._active)return void de.push(he);let ne;this._active=!0;do{if(ne=he.execute(he.state,he.delay))break}while(he=de.shift());if(this._active=!1,ne){for(;he=de.shift();)he.unsubscribe();throw ne}}}},4986:(wt,$e,R)=>{"use strict";R.d($e,{z:()=>F});var a=R(4408);const F=new(R(7565).v)(a.o)},6063:(wt,$e,R)=>{"use strict";R.d($e,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(wt,$e,R)=>{"use strict";R.d($e,{z:()=>a});const a={setTimeout(le,F,...Te){const{delegate:he}=a;return(null==he?void 0:he.setTimeout)?he.setTimeout(le,F,...Te):setTimeout(le,F,...Te)},clearTimeout(le){const{delegate:F}=a;return((null==F?void 0:F.clearTimeout)||clearTimeout)(le)},delegate:void 0}},2202:(wt,$e,R)=>{"use strict";R.d($e,{h:()=>le});const le=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,$e,R)=>{"use strict";R.d($e,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,$e,R)=>{"use strict";R.d($e,{_6:()=>de,jO:()=>Te,yG:()=>he});var a=R(576);function F(ne){return ne[ne.length-1]}function Te(ne){return(0,a.m)(F(ne))?ne.pop():void 0}function he(ne){return function le(ne){return ne&&(0,a.m)(ne.schedule)}(F(ne))?ne.pop():void 0}function de(ne,Ee){return"number"==typeof F(ne)?ne.pop():Ee}},8737:(wt,$e,R)=>{"use strict";function a(le,F){if(le){const Te=le.indexOf(F);0<=Te&&le.splice(Te,1)}}R.d($e,{P:()=>a})},3888:(wt,$e,R)=>{"use strict";function a(le){const Te=le(he=>{Error.call(he),he.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}R.d($e,{d:()=>a})},2806:(wt,$e,R)=>{"use strict";R.d($e,{O:()=>Te,x:()=>F});var a=R(2416);let le=null;function F(he){if(a.v.useDeprecatedSynchronousErrorHandling){const de=!le;if(de&&(le={errorThrown:!1,error:null}),he(),de){const{errorThrown:ne,error:Ee}=le;if(le=null,ne)throw Ee}}else he()}function Te(he){a.v.useDeprecatedSynchronousErrorHandling&&le&&(le.errorThrown=!0,le.error=he)}},9672:(wt,$e,R)=>{"use strict";function a(le,F,Te,he=0,de=!1){const ne=F.schedule(function(){Te(),de?le.add(this.schedule(null,he)):this.unsubscribe()},he);if(le.add(ne),!de)return ne}R.d($e,{f:()=>a})},4671:(wt,$e,R)=>{"use strict";function a(le){return le}R.d($e,{y:()=>a})},1144:(wt,$e,R)=>{"use strict";R.d($e,{z:()=>a});const a=le=>le&&"number"==typeof le.length&&"function"!=typeof le},2206:(wt,$e,R)=>{"use strict";R.d($e,{D:()=>le});var a=R(576);function le(F){return Symbol.asyncIterator&&(0,a.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(wt,$e,R)=>{"use strict";function a(le){return"function"==typeof le}R.d($e,{m:()=>a})},3670:(wt,$e,R)=>{"use strict";R.d($e,{c:()=>F});var a=R(8822),le=R(576);function F(Te){return(0,le.m)(Te[a.L])}},6495:(wt,$e,R)=>{"use strict";R.d($e,{T:()=>F});var a=R(2202),le=R(576);function F(Te){return(0,le.m)(null==Te?void 0:Te[a.h])}},8239:(wt,$e,R)=>{"use strict";R.d($e,{t:()=>le});var a=R(576);function le(F){return(0,a.m)(null==F?void 0:F.then)}},3260:(wt,$e,R)=>{"use strict";R.d($e,{L:()=>Te,Q:()=>F});var a=R(655),le=R(576);function F(he){return(0,a.FC)(this,arguments,function*(){const ne=he.getReader();try{for(;;){const{value:Ee,done:ge}=yield(0,a.qq)(ne.read());if(ge)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(Ee)}}finally{ne.releaseLock()}})}function Te(he){return(0,le.m)(null==he?void 0:he.getReader)}},4482:(wt,$e,R)=>{"use strict";R.d($e,{A:()=>le,e:()=>F});var a=R(576);function le(Te){return(0,a.m)(null==Te?void 0:Te.lift)}function F(Te){return he=>{if(le(he))return he.lift(function(de){try{return Te(de,this)}catch(ne){this.error(ne)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(wt,$e,R)=>{"use strict";function a(){}R.d($e,{Z:()=>a})},7849:(wt,$e,R)=>{"use strict";R.d($e,{h:()=>F});var a=R(2416),le=R(3410);function F(Te){le.z.setTimeout(()=>{const{onUnhandledError:he}=a.v;if(!he)throw Te;he(Te)})}},4532:(wt,$e,R)=>{"use strict";function a(le){return new TypeError(`You provided ${null!==le&&"object"==typeof le?"an invalid object":`'${le}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d($e,{z:()=>a})},863:(wt,$e,R)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,8592,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,8592,5652],"./ion-card_5.entry.js":[388,8592,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,8592,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime_3.entry.js":[4959,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,8592,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,8592,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,8592,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function le(F){if(!R.o(a,F))return Promise.resolve().then(()=>{var de=new Error("Cannot find module '"+F+"'");throw de.code="MODULE_NOT_FOUND",de});var Te=a[F],he=Te[0];return Promise.all(Te.slice(1).map(R.e)).then(()=>R(he))}le.keys=()=>Object.keys(a),le.id=863,wt.exports=le},655:(wt,$e,R)=>{"use strict";function Te(q,re){var Z={};for(var $ in q)Object.prototype.hasOwnProperty.call(q,$)&&re.indexOf($)<0&&(Z[$]=q[$]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var me=0;for($=Object.getOwnPropertySymbols(q);me<$.length;me++)re.indexOf($[me])<0&&Object.prototype.propertyIsEnumerable.call(q,$[me])&&(Z[$[me]]=q[$[me]])}return Z}function he(q,re,Z,$){var st,me=arguments.length,pe=me<3?re:null===$?$=Object.getOwnPropertyDescriptor(re,Z):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pe=Reflect.decorate(q,re,Z,$);else for(var dt=q.length-1;dt>=0;dt--)(st=q[dt])&&(pe=(me<3?st(pe):me>3?st(re,Z,pe):st(re,Z))||pe);return me>3&&pe&&Object.defineProperty(re,Z,pe),pe}function Ee(q,re,Z,$){return new(Z||(Z=Promise))(function(pe,st){function dt(xe){try{Ce($.next(xe))}catch(Be){st(Be)}}function Ne(xe){try{Ce($.throw(xe))}catch(Be){st(Be)}}function Ce(xe){xe.done?pe(xe.value):function me(pe){return pe instanceof Z?pe:new Z(function(st){st(pe)})}(xe.value).then(dt,Ne)}Ce(($=$.apply(q,re||[])).next())})}function K(q){return this instanceof K?(this.v=q,this):new K(q)}function X(q,re,Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,$=Z.apply(q,re||[]),pe=[];return me={},st("next"),st("throw"),st("return"),me[Symbol.asyncIterator]=function(){return this},me;function st(Fe){$[Fe]&&(me[Fe]=function(ze){return new Promise(function(Oe,ot){pe.push([Fe,ze,Oe,ot])>1||dt(Fe,ze)})})}function dt(Fe,ze){try{!function Ne(Fe){Fe.value instanceof K?Promise.resolve(Fe.value.v).then(Ce,xe):Be(pe[0][2],Fe)}($[Fe](ze))}catch(Oe){Be(pe[0][3],Oe)}}function Ce(Fe){dt("next",Fe)}function xe(Fe){dt("throw",Fe)}function Be(Fe,ze){Fe(ze),pe.shift(),pe.length&&dt(pe[0][0],pe[0][1])}}function Ue(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,re=q[Symbol.asyncIterator];return re?re.call(q):(q=function ee(q){var re="function"==typeof Symbol&&Symbol.iterator,Z=re&&q[re],$=0;if(Z)return Z.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&$>=q.length&&(q=void 0),{value:q&&q[$++],done:!q}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),Z={},$("next"),$("throw"),$("return"),Z[Symbol.asyncIterator]=function(){return this},Z);function $(pe){Z[pe]=q[pe]&&function(st){return new Promise(function(dt,Ne){!function me(pe,st,dt,Ne){Promise.resolve(Ne).then(function(Ce){pe({value:Ce,done:dt})},st)}(dt,Ne,(st=q[pe](st)).done,st.value)})}}}R.d($e,{FC:()=>X,KL:()=>Ue,_T:()=>Te,gn:()=>he,mG:()=>Ee,qq:()=>K})},5e3:(wt,$e,R)=>{"use strict";R.d($e,{$8M:()=>oc,$Z:()=>Al,AFp:()=>vI,AaK:()=>Ee,CHM:()=>uu,CRH:()=>nI,CZH:()=>mC,CqO:()=>jp,EJc:()=>rA,EpF:()=>Hw,F$t:()=>Ww,F4k:()=>Gw,FYo:()=>G0,FiY:()=>Fi,G48:()=>wC,Gf:()=>tI,GfV:()=>Df,GkF:()=>Uv,Gpc:()=>W,Hsn:()=>jv,JOm:()=>Le,Jzz:()=>Ml,LFG:()=>xt,LSH:()=>_l,Lbi:()=>Pd,MAs:()=>Bm,NdJ:()=>Ym,OlP:()=>Cr,Oqu:()=>pf,PXZ:()=>hA,Q6J:()=>$c,QGY:()=>Bv,Qsj:()=>k_,R0b:()=>Vs,RDi:()=>Gs,Rgc:()=>Sd,SBq:()=>Id,Sil:()=>sA,Suo:()=>tC,TTD:()=>zo,TgZ:()=>zm,VLi:()=>kM,X6Q:()=>pA,XFs:()=>Ot,Xpm:()=>Jt,Y36:()=>cf,YKP:()=>PS,YNc:()=>Um,Yjl:()=>mr,Yz7:()=>Oe,ZZ4:()=>ny,_Bn:()=>FE,_UZ:()=>Wm,_Vd:()=>R_,_c5:()=>AA,_uU:()=>t0,aQg:()=>MC,c2e:()=>bI,cJS:()=>Ke,cg1:()=>d_,dDg:()=>uA,deG:()=>Xf,dqk:()=>Yt,eFA:()=>$o,ekj:()=>ui,g9A:()=>gg,h0i:()=>ng,hGG:()=>xA,hij:()=>Hc,iGM:()=>eI,ifc:()=>un,ip1:()=>Zc,kL8:()=>h_,lG2:()=>mn,n5z:()=>ih,oAB:()=>De,oxw:()=>$v,q4F:()=>VE,qLn:()=>ai,qOj:()=>Sv,qZA:()=>xl,s9C:()=>Hp,sBO:()=>gA,sIi:()=>kp,s_b:()=>og,soG:()=>W_,tBr:()=>zn,tb:()=>Jr,tp0:()=>aa,uIk:()=>xv,vHH:()=>Pe,vpe:()=>fs,wAp:()=>Ut,xp6:()=>Kb,z2F:()=>vC,zSh:()=>yv,zs3:()=>pa});var a=R(7579),le=R(727),F=R(8306),Te=R(6451),he=R(3099);function de(s){for(let o in s)if(s[o]===de)return o;throw Error("Could not find renamed property on target object.")}function ne(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function Ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Y=de({__forward_ref__:de});function W(s){return s.__forward_ref__=W,s.toString=function(){return Ee(this())},s}function ee(s){return ie(s)?s():s}function ie(s){return"function"==typeof s&&s.hasOwnProperty(Y)&&s.__forward_ref__===W}class Pe extends Error{constructor(o,c){super(function J(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,c)),this.code=o}}function K(s){return"string"==typeof s?s:null==s?"":String(s)}function X(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():K(s)}function _e(s,o){const c=o?` in ${o}`:"";throw new Pe(-201,`No provider for ${X(s)} found${c}`)}function Ce(s,o){null==s&&function xe(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Oe(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ke(s){return{providers:s.providers||[],imports:s.imports||[]}}function mt(s){return Qt(s,vn)||Qt(s,Wr)}function Qt(s,o){return s.hasOwnProperty(o)?s[o]:null}function zt(s){return s&&(s.hasOwnProperty($n)||s.hasOwnProperty(lr))?s[$n]:null}const vn=de({\u0275prov:de}),$n=de({\u0275inj:de}),Wr=de({ngInjectableDef:de}),lr=de({ngInjectorDef:de});var Ot=(()=>((Ot=Ot||{})[Ot.Default=0]="Default",Ot[Ot.Host=1]="Host",Ot[Ot.Self=2]="Self",Ot[Ot.SkipSelf=4]="SkipSelf",Ot[Ot.Optional=8]="Optional",Ot))();let Br;function sr(s){const o=Br;return Br=s,o}function jn(s,o,c){const d=mt(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&Ot.Optional?null:void 0!==o?o:void _e(Ee(s),"Injector")}function Tn(s){return{toString:s}.toString()}var cr=(()=>((cr=cr||{})[cr.OnPush=0]="OnPush",cr[cr.Default=1]="Default",cr))(),un=(()=>{return(s=un||(un={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",un;var s})();const It="undefined"!=typeof globalThis&&globalThis,jt="undefined"!=typeof window&&window,Gn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yt=It||"undefined"!=typeof global&&global||jt||Gn,gr={},Nt=[],Sr=de({\u0275cmp:de}),dn=de({\u0275dir:de}),Ct=de({\u0275pipe:de}),Xe=de({\u0275mod:de}),bt=de({\u0275fac:de}),Ft=de({__NG_ELEMENT_ID__:de});let fn=0;function Jt(s){return Tn(()=>{const c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===cr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Nt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||un.Emulated,id:"c",styles:s.styles||Nt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,g=s.features,v=s.pipes;return d.id+=fn++,d.inputs=$t(s.inputs,c),d.outputs=$t(s.outputs),g&&g.forEach(w=>w(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(H):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(ae):null,d})}function H(s){return _n(s)||function Qn(s){return s[dn]||null}(s)}function ae(s){return function rn(s){return s[Ct]||null}(s)}const Re={};function De(s){return Tn(()=>{const o={type:s.type,bootstrap:s.bootstrap||Nt,declarations:s.declarations||Nt,imports:s.imports||Nt,exports:s.exports||Nt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Re[s.id]=s.type),o})}function $t(s,o){if(null==s)return gr;const c={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),c[h]=d,o&&(o[h]=g)}return c}const mn=Jt;function mr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function _n(s){return s[Sr]||null}function Nn(s,o){const c=s[Xe]||null;if(!c&&!0===o)throw new Error(`Type ${Ee(s)} does not have '\u0275mod' property.`);return c}const P=19,U=20;function B(s){return Array.isArray(s)&&"object"==typeof s[1]}function z(s){return Array.isArray(s)&&!0===s[1]}function we(s){return 0!=(8&s.flags)}function Ge(s){return 2==(2&s.flags)}function Ze(s){return 1==(1&s.flags)}function Qe(s){return null!==s.template}function _t(s){return 0!=(512&s[2])}function Wi(s,o){return s.hasOwnProperty(bt)?s[bt]:null}class Aa{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function zo(){return ol}function ol(s){return s.type.prototype.ngOnChanges&&(s.setInput=Hg),zd}function zd(){const s=go(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===gr)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Hg(s,o,c,d){const h=go(s)||function os(s,o){return s[Wo]=o}(s,{previous:gr,current:null}),g=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[c],E=v[w];g[w]=new Aa(E&&E.currentValue,o,v===gr),s[d]=o}zo.ngInherit=!0;const Wo="__ngSimpleChanges__";function go(s){return s[Wo]||null}let Zl;function Gs(s){Zl=s}function Jn(s){return!!s.listen}const xa={createRenderer:(s,o)=>function al(){return void 0!==Zl?Zl:"undefined"!=typeof document?document:void 0}()};function Vn(s){for(;Array.isArray(s);)s=s[0];return s}function Yo(s,o){return Vn(o[s])}function gi(s,o){return Vn(o[s.index])}function ll(s,o){return s.data[o]}function mi(s,o){const c=o[s];return B(c)?c:c[0]}function _o(s){return 4==(4&s[2])}function qs(s){return 128==(128&s[2])}function Yi(s,o){return null==o?null:s[o]}function yo(s){s[18]=0}function vo(s,o){s[5]+=o;let c=s,d=s[3];for(;null!==d&&(1===o&&1===c[5]||-1===o&&0===c[5]);)d[5]+=o,c=d,d=d[3]}const Ht={lFrame:Qo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Jl(){return Ht.bindingsEnabled}function Je(){return Ht.lFrame.lView}function yn(){return Ht.lFrame.tView}function uu(s){return Ht.lFrame.contextLView=s,s[8]}function or(){let s=Ma();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ma(){return Ht.lFrame.currentTNode}function Ki(s,o){const c=Ht.lFrame;c.currentTNode=s,c.isParent=o}function du(){return Ht.lFrame.isParent}function hu(){Ht.lFrame.isParent=!1}function ec(){return Ht.isInCheckNoChangesMode}function Co(s){Ht.isInCheckNoChangesMode=s}function bo(){return Ht.lFrame.bindingIndex++}function Cs(s){const o=Ht.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function rc(s,o){const c=Ht.lFrame;c.bindingIndex=c.bindingRootIndex=s,ul(o)}function ul(s){Ht.lFrame.currentDirectiveIndex=s}function mu(){return Ht.lFrame.currentQueryIndex}function _u(s){Ht.lFrame.currentQueryIndex=s}function Kd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function yu(s,o,c){if(c&Ot.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||c&Ot.Host||(h=Kd(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const d=Ht.lFrame=Qd();return d.currentTNode=o,d.lView=s,!0}function Ko(s){const o=Qd(),c=s[1];Ht.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Qd(){const s=Ht.lFrame,o=null===s?null:s.child;return null===o?Qo(s):o}function Qo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Xd(){const s=Ht.lFrame;return Ht.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Jd=Xd;function Xo(){const s=Xd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function _i(){return Ht.lFrame.selectedIndex}function Eo(s){Ht.lFrame.selectedIndex=s}function yr(){const s=Ht.lFrame;return ll(s.tView,s.selectedIndex)}function zs(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const g=s.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:x,ngOnDestroy:M}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-c,v),w&&((s.contentHooks||(s.contentHooks=[])).push(c,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,w)),E&&(s.viewHooks||(s.viewHooks=[])).push(-c,E),x&&((s.viewHooks||(s.viewHooks=[])).push(c,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,x)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(c,M)}}function hl(s,o,c){eh(s,o,3,c)}function ic(s,o,c,d){(3&s[2])===c&&eh(s,o,c,d)}function jr(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function eh(s,o,c,d){const g=null!=d?d:-1,v=o.length-1;let w=0;for(let E=void 0!==d?65535&s[18]:0;E<v;E++)if("number"==typeof o[E+1]){if(w=o[E],null!=d&&w>=d)break}else o[E]<0&&(s[18]+=65536),(w<g||-1==g)&&(Gg(s,c,o,E),s[18]=(4294901760&s[18])+E+2),E++}function Gg(s,o,c,d){const h=c[d]<0,g=c[d+1],w=s[h?-c[d]:c[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Oa{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Pi(s,o,c){const d=Jn(s);let h=0;for(;h<c.length;){const g=c[h];if("number"==typeof g){if(0!==g)break;h++;const v=c[h++],w=c[h++],E=c[h++];d?s.setAttribute(o,w,E,v):o.setAttributeNS(v,w,E)}else{const v=g,w=c[++h];Zs(v)?d&&s.setProperty(o,v,w):d?s.setAttribute(o,v,w):o.setAttribute(v,w),h++}}return h}function Sn(s){return 3===s||4===s||6===s}function Zs(s){return 64===s.charCodeAt(0)}function Vt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?c=h:0===c||Cn(s,c,h,null,-1===c||2===c?o[++d]:null)}}return s}function Cn(s,o,c,d,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===c){if(null===d)return void(null!==h&&(s[g+1]=h));if(d===s[g+1])return void(s[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,c),null!==d&&s.splice(g++,0,d),null!==h&&s.splice(g++,0,h)}function fl(s){return-1!==s}function qn(s){return 32767&s}function er(s,o){let c=function Eu(s){return s>>16}(s),d=o;for(;c>0;)d=d[15],c--;return d}let ea=!0;function tr(s){const o=ea;return ea=s,o}let ta=0;function Io(s,o){const c=ii(s,o);if(-1!==c)return c;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Ys(d.data,s),Ys(o,null),Ys(d.blueprint,null));const h=ws(s,o),g=s.injectorIndex;if(fl(h)){const v=qn(h),w=er(h,o),E=w[1].data;for(let x=0;x<8;x++)o[g+x]=w[v+x]|E[v+x]}return o[g+8]=h,g}function Ys(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ii(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ws(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,h=o;for(;null!==h;){const g=h[1],v=g.type;if(d=2===v?g.declTNode:1===v?h[6]:null,null===d)return-1;if(c++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function Ks(s,o,c){!function bs(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Ft)&&(d=c[Ft]),null==d&&(d=c[Ft]=ta++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,c)}function vr(s,o,c){if(c&Ot.Optional)return s;_e(o,"NodeInjector")}function Qi(s,o,c,d){if(c&Ot.Optional&&void 0===d&&(d=null),0==(c&(Ot.Self|Ot.Host))){const h=s[9],g=sr(void 0);try{return h?h.get(o,d,c&Ot.Optional):jn(o,d,c&Ot.Optional)}finally{sr(g)}}return vr(d,o,c)}function yi(s,o,c,d=Ot.Default,h){if(null!==s){const g=function nn(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ft)?s[Ft]:void 0;return"number"==typeof o?o>=0?255&o:Tu:o}(c);if("function"==typeof g){if(!yu(o,s,d))return d&Ot.Host?vr(h,c,d):Qi(o,c,d,h);try{const v=g(d);if(null!=v||d&Ot.Optional)return v;_e(c)}finally{Jd()}}else if("number"==typeof g){let v=null,w=ii(s,o),E=-1,x=d&Ot.Host?o[16][6]:null;for((-1===w||d&Ot.SkipSelf)&&(E=-1===w?ws(s,o):o[w+8],-1!==E&&sc(d,!1)?(v=o[1],w=qn(E),o=er(E,o)):w=-1);-1!==w;){const M=o[1];if(na(g,w,M.data)){const V=To(w,o,c,v,d,x);if(V!==L)return V}E=o[w+8],-1!==E&&sc(d,o[1].data[w+8]===x)&&na(g,w,o)?(v=M,w=qn(E),o=er(E,o)):w=-1}}}return Qi(o,c,d,h)}const L={};function Tu(){return new Oi(or(),Je())}function To(s,o,c,d,h,g){const v=o[1],w=v.data[s+8],M=Tt(w,v,c,null==d?Ge(w)&&ea:d!=v&&0!=(3&w.type),h&Ot.Host&&g===w);return null!==M?ls(o,v,M,w):L}function Tt(s,o,c,d,h){const g=s.providerIndexes,v=o.data,w=1048575&g,E=s.directiveStart,M=g>>20,se=h?w+M:s.directiveEnd;for(let Me=d?w:w+M;Me<se;Me++){const Ye=v[Me];if(Me<E&&c===Ye||Me>=E&&Ye.type===c)return Me}if(h){const Me=v[E];if(Me&&Qe(Me)&&Me.type===c)return E}return null}function ls(s,o,c,d){let h=s[c];const g=o.data;if(function th(s){return s instanceof Oa}(h)){const v=h;v.resolving&&function qe(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${s}${c}`)}(X(g[c]));const w=tr(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?sr(v.injectImpl):null;yu(s,d,Ot.Default);try{h=s[c]=v.factory(void 0,g,s,d),o.firstCreatePass&&c>=d.directiveStart&&function bu(s,o,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(d){const v=ol(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,v)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,h),g&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,g),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,g))}(c,g[c],o)}finally{null!==E&&sr(E),tr(w),v.resolving=!1,Jd()}}return h}function na(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function sc(s,o){return!(s&Ot.Self||s&Ot.Host&&o)}class Oi{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return yi(this._tNode,this._lView,o,d,c)}}function ih(s){return Tn(()=>{const o=s.prototype.constructor,c=o[bt]||Do(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const g=h[bt]||Do(h);if(g&&g!==c)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Do(s){return ie(s)?()=>{const o=Do(ee(s));return o&&o()}:Wi(s)}function oc(s){return function We(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const g=c[h];if(Sn(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(g===o)return c[h+1];h+=2}}}return null}(or(),s)}const Ra="__parameters__";function Xi(s,o,c){return Tn(()=>{const d=function Hr(s){return function(...c){if(s){const d=s(...c);for(const h in d)this[h]=d[h]}}}(o);function h(...g){if(this instanceof h)return d.apply(this,g),this;const v=new h(...g);return w.annotation=v,w;function w(E,x,M){const V=E.hasOwnProperty(Ra)?E[Ra]:Object.defineProperty(E,Ra,{value:[]})[Ra];for(;V.length<=M;)V.push(null);return(V[M]=V[M]||[]).push(v),E}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Cr{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Oe({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xf=new Cr("AnalyzeForEntryComponents");function Kr(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(o===s&&(o=s.slice(0,c)),Kr(d,o)):o!==s&&o.push(d)}return o}function Ni(s,o){s.forEach(c=>Array.isArray(c)?Ni(c,o):o(c))}function sh(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function xo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function si(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}function vi(s,o,c){let d=Mo(s,o);return d>=0?s[1|d]=c:(d=~d,function fc(s,o,c,d){let h=s.length;if(h==o)s.push(c,d);else if(1===h)s.push(d,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=d}}(s,d,o,c)),d}function pc(s,o){const c=Mo(s,o);if(c>=0)return s[1|c]}function Mo(s,o){return function ia(s,o,c){let d=0,h=s.length>>c;for(;h!==d;){const g=d+(h-d>>1),v=s[g<<c];if(o===v)return g<<c;v>o?h=g:d=g+1}return~(h<<c)}(s,o,1)}const oa={},Po="__NG_DI_FLAG__",Fa="ngTempTokenPath",D=/\n/gm,G="__source",Se=de({provide:String,useValue:de});let ke;function it(s){const o=ke;return ke=s,o}function Dt(s,o=Ot.Default){if(void 0===ke)throw new Pe(203,"");return null===ke?jn(s,void 0,o):ke.get(s,o&Ot.Optional?null:void 0,o)}function xt(s,o=Ot.Default){return(function Un(){return Br}()||Dt)(ee(s),o)}const In=xt;function an(s){const o=[];for(let c=0;c<s.length;c++){const d=ee(s[c]);if(Array.isArray(d)){if(0===d.length)throw new Pe(900,"");let h,g=Ot.Default;for(let v=0;v<d.length;v++){const w=d[v],E=fr(w);"number"==typeof E?-1===E?h=w.token:g|=E:h=w}o.push(xt(h,g))}else o.push(xt(d))}return o}function Mr(s,o){return s[Po]=o,s.prototype[Po]=o,s}function fr(s){return s[Po]}const zn=Mr(Xi("Inject",s=>({token:s})),-1),Fi=Mr(Xi("Optional"),8),aa=Mr(Xi("SkipSelf"),4);class ap{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Is(s){return s instanceof ap?s.changingThisBreaksApplicationSecurity:s}const pl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ch=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function _l(s){const o=function Ls(){const s=Je();return s&&s[12]}();return o?o.sanitize(wr.URL,s)||"":function vc(s,o){const c=function mh(s){return s instanceof ap&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}(s,"URL")?Is(s):function Ua(s){return(s=String(s)).match(pl)||s.match(Ch)?s:"unsafe:"+s}(K(s))}const Va="__ngContext__";function Li(s,o){s[Va]=o}function Eh(s){const o=function yl(s){return s[Va]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function vl(s){return s.ngOriginalError}function xh(s,...o){s.error(...o)}class ai{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),d=function Ah(s){return s&&s.ngErrorLogger||xh}(o);d(this._console,"ERROR",o),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&vl(o);for(;c&&vl(c);)c=vl(c);return c||null}}const im=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Yt))();function m(s){return s instanceof Function?s():s}var Le=(()=>((Le=Le||{})[Le.Important=1]="Important",Le[Le.DashCase=2]="DashCase",Le))();function St(s,o){return undefined(s,o)}function Er(s){const o=s[3];return z(o)?o[3]:o}function ju(s){return Hu(s[13])}function Ac(s){return Hu(s[4])}function Hu(s){for(;null!==s&&!z(s);)s=s[4];return s}function da(s,o,c,d,h){if(null!=d){let g,v=!1;z(d)?g=d:B(d)&&(v=!0,d=d[0]);const w=Vn(d);0===s&&null!==c?null==h?Vb(o,c,w):xc(o,c,w,h||null,!0):1===s&&null!==c?xc(o,c,w,h||null,!0):2===s?function ln(s,o,c){const d=wp(s,o);d&&function vD(s,o,c,d){Jn(s)?s.removeChild(o,c,d):o.removeChild(c)}(s,d,o,c)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function Ui(s,o,c,d,h){const g=c[7];g!==Vn(c)&&da(o,s,d,g,h);for(let w=10;w<c.length;w++){const E=c[w];pt(E[1],E,s,o,d,g)}}(o,s,g,c,h)}}function Fo(s,o,c){if(Jn(s))return s.createElement(o,c);{const d=null!==c?function Wl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(c):null;return null===d?s.createElement(o):s.createElementNS(d,o)}}function zy(s,o){const c=s[9],d=c.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,vo(h,-1)),c.splice(d,1)}function cm(s,o){if(s.length<=10)return;const c=10+o,d=s[c];if(d){const h=d[17];null!==h&&h!==s&&zy(h,d),o>0&&(s[c-1][4]=d[4]);const g=xo(s,10+o);!function om(s,o){pt(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const v=g[P];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Gu(s,o){if(!(256&o[2])){const c=o[11];Jn(c)&&c.destroyNode&&pt(s,o,c,3,null,null),function Lb(s){let o=s[13];if(!o)return Wy(s[1],s);for(;o;){let c=null;if(B(o))c=o[13];else{const d=o[10];d&&(c=d)}if(!c){for(;o&&!o[4]&&o!==s;)B(o)&&Wy(o[1],o),o=o[3];null===o&&(o=s),B(o)&&Wy(o[1],o),c=o&&o[4]}o=c}}(o)}}function Wy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Zy(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const h=o[c[d]];if(!(h instanceof Oa)){const g=c[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=h[g[v]],E=g[v+1];try{E.call(w)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function yD(s,o){const c=s.cleanup,d=o[7];let h=-1;if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const v=c[g+1],w="function"==typeof v?v(o):Vn(o[v]),E=d[h=c[g+2]],x=c[g+3];"boolean"==typeof x?w.removeEventListener(c[g],E,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),g+=2}else{const v=d[h=c[g+1]];c[g].call(v)}if(null!==d){for(let g=h+1;g<d.length;g++)d[g]();o[7]=null}}(s,o),1===o[1].type&&Jn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&z(o[3])){c!==o[3]&&zy(c,o);const d=o[P];null!==d&&d.detachView(s)}}}function Ub(s,o,c){return function Bb(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===un.None||h===un.Emulated)return null}return gi(d,c)}(s,o.parent,c)}function xc(s,o,c,d,h){Jn(s)?s.insertBefore(o,c,d,h):o.insertBefore(c,d,h)}function Vb(s,o,c){Jn(s)?s.appendChild(o,c):o.appendChild(c)}function bp(s,o,c,d,h){null!==d?xc(s,o,c,d,h):Vb(s,o,c)}function wp(s,o){return Jn(s)?s.parentNode(o):o.parentNode}function qu(s,o,c){return um(s,o,c)}let um=function El(s,o,c){return 40&s.type?gi(s,c):null};function Gr(s,o,c,d){const h=Ub(s,d,o),g=o[11],w=qu(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(c))for(let E=0;E<c.length;E++)bp(g,h,c[E],w,!1);else bp(g,h,c,w,!1)}function Mc(s,o){if(null!==o){const c=o.type;if(3&c)return gi(o,s);if(4&c)return Mt(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return Mc(s,d);{const h=s[o.index];return z(h)?Mt(-1,h):Vn(h)}}if(32&c)return St(o,s)()||Vn(s[o.index]);{const d=dm(s,o);return null!==d?Array.isArray(d)?d[0]:Mc(Er(s[16]),d):Mc(s,o.next)}}return null}function dm(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Mt(s,o){const c=10+s+1;if(c<o.length){const d=o[c],h=d[1].firstChild;if(null!==h)return Mc(d,h)}return o[7]}function Ky(s,o,c,d,h,g,v){for(;null!=c;){const w=d[c.index],E=c.type;if(v&&0===o&&(w&&Li(Vn(w),d),c.flags|=4),64!=(64&c.flags))if(8&E)Ky(s,o,c.child,d,h,g,!1),da(o,s,h,w,g);else if(32&E){const x=St(c,d);let M;for(;M=x();)da(o,s,h,M,g);da(o,s,h,w,g)}else 16&E?nt(s,o,d,c,h,g):da(o,s,h,w,g);c=v?c.projectionNext:c.next}}function pt(s,o,c,d,h,g){Ky(c,d,s.firstChild,o,h,g,!1)}function nt(s,o,c,d,h,g){const v=c[16],E=v[6].projection[d.projection];if(Array.isArray(E))for(let x=0;x<E.length;x++)da(o,s,h,E[x],g);else Ky(s,o,E,v[3],h,g,!0)}function jb(s,o,c){Jn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function Qy(s,o,c){Jn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function Hb(s,o,c){let d=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===d||s.charCodeAt(h+g)<=32)return h}c=h+1}}const Gb="ng-template";function qb(s,o,c){let d=0;for(;d<s.length;){let h=s[d++];if(c&&"class"===h){if(h=s[d],-1!==Hb(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function zb(s){return 4===s.type&&s.value!==Gb}function hM(s,o,c){return o===(4!==s.type||c?s.value:Gb)}function to(s,o,c){let d=4;const h=s.attrs||[],g=function Zb(s){for(let o=0;o<s.length;o++)if(Sn(s[o]))return o;return s.length}(h);let v=!1;for(let w=0;w<o.length;w++){const E=o[w];if("number"!=typeof E){if(!v)if(4&d){if(d=2|1&d,""!==E&&!hM(s,E,c)||""===E&&1===o.length){if(ha(d))return!1;v=!0}}else{const x=8&d?E:o[++w];if(8&d&&null!==s.attrs){if(!qb(s.attrs,x,c)){if(ha(d))return!1;v=!0}continue}const V=Wb(8&d?"class":E,h,zb(s),c);if(-1===V){if(ha(d))return!1;v=!0;continue}if(""!==x){let se;se=V>g?"":h[V+1].toLowerCase();const Me=8&d?se:null;if(Me&&-1!==Hb(Me,x,0)||2&d&&x!==se){if(ha(d))return!1;v=!0}}}}else{if(!v&&!ha(d)&&!ha(E))return!1;if(v&&ha(E))continue;v=!1,d=E|1&d}}return ha(d)||v}function ha(s){return 0==(1&s)}function Wb(s,o,c,d){if(null===o)return-1;let h=0;if(d||!c){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function Qr(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function pn(s,o,c=!1){for(let d=0;d<o.length;d++)if(to(s,o[d],c))return!0;return!1}function tn(s,o){e:for(let c=0;c<o.length;c++){const d=o[c];if(s.length===d.length){for(let h=0;h<s.length;h++)if(s[h]!==d[h])continue e;return!0}}return!1}function Xy(s,o){return s?":not("+o.trim()+")":o}function zu(s){let o=s[0],c=1,d=2,h="",g=!1;for(;c<s.length;){let v=s[c];if("string"==typeof v)if(2&d){const w=s[++c];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!ha(v)&&(o+=Xy(g,h),h=""),d=v,g=g||!ha(d);c++}return""!==h&&(o+=Xy(g,h)),o}const yt={};function Kb(s){wi(yn(),Je(),_i()+s,ec())}function wi(s,o,c,d){if(!d)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&hl(o,g,c)}else{const g=s.preOrderHooks;null!==g&&ic(o,g,0,c)}Eo(c)}function hm(s,o){return s<<17|o<<2}function nr(s){return s>>17&32767}function Pr(s){return 2|s}function As(s){return(131068&s)>>2}function Ip(s,o){return-131069&s|o<<2}function Zu(s){return 1|s}function Ap(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const h=c[d],g=c[d+1];if(-1!==g){const v=s.data[g];_u(h),v.contentQueries(2,o[g],g)}}}function Vh(s,o,c,d,h,g,v,w,E,x){const M=o.blueprint.slice();return M[0]=h,M[2]=140|d,yo(M),M[3]=M[15]=s,M[8]=c,M[10]=v||s&&s[10],M[11]=w||s&&s[11],M[12]=E||s&&s[12]||null,M[9]=x||s&&s[9]||null,M[6]=g,M[16]=2==o.type?s[16]:M,M}function qr(s,o,c,d,h){let g=s.data[o];if(null===g)g=function iv(s,o,c,d,h){const g=Ma(),v=du(),E=s.data[o]=function Cm(s,o,c,d,h,g){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,c,o,d,h);return null===s.firstChild&&(s.firstChild=E),null!==g&&(v?null==g.child&&null!==E.parent&&(g.child=E):null===g.next&&(g.next=E)),E}(s,o,c,d,h),function pu(){return Ht.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=c,g.value=d,g.attrs=h;const v=function Pa(){const s=Ht.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Ki(g,!0),g}function $h(s,o,c,d){if(0===c)return-1;const h=o.length;for(let g=0;g<c;g++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function xp(s,o,c){Ko(o);try{const d=s.viewQuery;null!==d&&Sm(1,d,c);const h=s.template;null!==h&&iw(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ap(s,o),s.staticViewQueries&&Sm(2,s.viewQuery,c);const g=s.components;null!==g&&function rw(s,o){for(let c=0;c<o.length;c++)Tm(s,o[c])}(o,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Xo()}}function Xu(s,o,c,d){const h=o[2];if(256==(256&h))return;Ko(o);const g=ec();try{yo(o),function tc(s){return Ht.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&iw(s,o,c,2,d);const v=3==(3&h);if(!g)if(v){const x=s.preOrderCheckHooks;null!==x&&hl(o,x,null)}else{const x=s.preOrderHooks;null!==x&&ic(o,x,0,null),jr(o,0)}if(function PD(s){for(let o=ju(s);null!==o;o=Ac(o)){if(!o[2])continue;const c=o[9];for(let d=0;d<c.length;d++){const h=c[d],g=h[3];0==(1024&h[2])&&vo(g,1),h[2]|=1024}}}(o),function MD(s){for(let o=ju(s);null!==o;o=Ac(o))for(let c=10;c<o.length;c++){const d=o[c],h=d[1];qs(d)&&Xu(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&Ap(s,o),!g)if(v){const x=s.contentCheckHooks;null!==x&&hl(o,x)}else{const x=s.contentHooks;null!==x&&ic(o,x,1),jr(o,1)}!function Sp(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const h=c[d];if(h<0)Eo(~h);else{const g=h,v=c[++d],w=c[++d];rc(v,g),w(2,o[g])}}}finally{Eo(-1)}}(s,o);const w=s.components;null!==w&&function ym(s,o){for(let c=0;c<o.length;c++)li(s,o[c])}(o,w);const E=s.viewQuery;if(null!==E&&Sm(2,E,d),!g)if(v){const x=s.viewCheckHooks;null!==x&&hl(o,x)}else{const x=s.viewHooks;null!==x&&ic(o,x,2),jr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,vo(o[3],-1))}finally{Xo()}}function TD(s,o,c,d){const h=o[10],g=!ec(),v=_o(o);try{g&&!v&&h.begin&&h.begin(),v&&xp(s,o,d),Xu(s,o,c,d)}finally{g&&!v&&h.end&&h.end()}}function iw(s,o,c,d,h){const g=_i(),v=2&d;try{Eo(-1),v&&o.length>U&&wi(s,o,U,ec()),c(d,h)}finally{Eo(g)}}function sw(s,o,c){if(we(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,c[g],g)}}}function sv(s,o,c){!Jl()||(function lw(s,o,c,d){const h=c.directiveStart,g=c.directiveEnd;s.firstCreatePass||Io(c,o),Li(d,o);const v=c.initialInputs;for(let w=h;w<g;w++){const E=s.data[w],x=Qe(E);x&&hw(o,c,E);const M=ls(o,s,w,c);Li(M,o),null!==v&&Hh(0,w-h,M,E,0,v),x&&(mi(c.index,o)[8]=M)}}(s,o,c,gi(c,o)),128==(128&c.flags)&&function cw(s,o,c){const d=c.directiveStart,h=c.directiveEnd,v=c.index,w=function gu(){return Ht.lFrame.currentDirectiveIndex}();try{Eo(v);for(let E=d;E<h;E++){const x=s.data[E],M=o[E];ul(E),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&fv(x,M)}}finally{Eo(-1),ul(w)}}(s,o,c))}function Ga(s,o,c=gi){const d=o.localNames;if(null!==d){let h=o.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],w=-1===v?c(o,s):s[v];s[h++]=w}}}function Ju(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=vm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function vm(s,o,c,d,h,g,v,w,E,x){const M=U+d,V=M+h,se=function ow(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:yt);return c}(M,V),Me="function"==typeof x?x():x;return se[1]={type:s,blueprint:se,template:c,queries:null,viewQuery:w,declTNode:o,data:se.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:Me,incompleteFirstPass:!1}}function ed(s,o,c,d){const h=_w(o);null===c?h.push(d):(h.push(c),s.firstCreatePass&&Xr(s).push(d,h.length-1))}function Mp(s,o,c){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(o,h):c[d]=[o,h]}return c}function Ms(s,o,c,d,h,g,v,w){const E=gi(o,c);let M,x=o.inputs;!w&&null!=x&&(M=x[d])?(_v(s,c,M,d,h),Ge(o)&&function jh(s,o){const c=mi(o,s);16&c[2]||(c[2]|=64)}(c,o.index)):3&o.type&&(d=function cv(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,o.value||"",d):h,Jn(g)?g.setProperty(E,d,h):Zs(d)||(E.setProperty?E.setProperty(d,h):E[d]=h))}function wm(s,o,c,d){let h=!1;if(Jl()){const g=function Em(s,o,c){const d=s.directiveRegistry;let h=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];pn(c,v.selectors,!1)&&(h||(h=[]),Ks(Io(c,o),s,v.type),Qe(v)?(uw(s,c),h.unshift(v)):h.push(v))}return h}(s,o,c),v=null===d?null:{"":-1};if(null!==g){h=!0,td(c,s.data.length,g.length);for(let M=0;M<g.length;M++){const V=g[M];V.providersResolver&&V.providersResolver(V)}let w=!1,E=!1,x=$h(s,o,g.length,null);for(let M=0;M<g.length;M++){const V=g[M];c.mergedAttrs=Vt(c.mergedAttrs,V.hostAttrs),Fc(s,c,o,x,V),dw(x,V,v),null!==V.contentQueries&&(c.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(c.flags|=128);const se=V.type.prototype;!w&&(se.ngOnChanges||se.ngOnInit||se.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),w=!0),!E&&(se.ngOnChanges||se.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),E=!0),x++}!function lv(s,o){const d=o.directiveEnd,h=s.data,g=o.attrs,v=[];let w=null,E=null;for(let x=o.directiveStart;x<d;x++){const M=h[x],V=M.inputs,se=null===g||zb(o)?null:fw(V,g);v.push(se),w=Mp(V,x,w),E=Mp(M.outputs,x,E)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=E}(s,c)}v&&function AD(s,o,c){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=c[o[h+1]];if(null==g)throw new Pe(-301,!1);d.push(o[h],g)}}}(c,d,v)}return c.mergedAttrs=Vt(c.mergedAttrs,c.attrs),h}function hv(s,o,c,d,h,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const E=~o.index;(function SD(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(w)!=E&&w.push(E),w.push(d,h,v)}}function fv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function uw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function dw(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;Qe(o)&&(c[""]=s)}}function td(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function Fc(s,o,c,d,h){s.data[d]=h;const g=h.factory||(h.factory=Wi(h.type)),v=new Oa(g,Qe(h),null);s.blueprint[d]=v,c[d]=v,hv(s,o,0,d,$h(s,c,h.hostVars,yt),h)}function hw(s,o,c){const d=gi(o,s),h=Ju(c),g=s[10],v=zh(s,Vh(s,h,null,c.onPush?64:16,d,o,g,g.createRenderer(d,c),null,null));s[o.index]=v}function cs(s,o,c,d,h,g){const v=gi(s,o);!function Im(s,o,c,d,h,g,v){if(null==g)Jn(s)?s.removeAttribute(o,h,c):o.removeAttribute(h);else{const w=null==v?K(g):v(g,d||"",h);Jn(s)?s.setAttribute(o,h,w,c):c?o.setAttributeNS(c,h,w):o.setAttribute(h,w)}}(o[11],v,g,s.value,c,d,h)}function Hh(s,o,c,d,h,g){const v=g[o];if(null!==v){const w=d.setInput;for(let E=0;E<v.length;){const x=v[E++],M=v[E++],V=v[E++];null!==w?d.setInput(c,V,x,M):c[M]=V}}}function fw(s,o){let c=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return c}function Gh(s,o,c,d){return new Array(s,!0,!1,o,null,0,d,c,null,null)}function li(s,o){const c=mi(o,s);if(qs(c)){const d=c[1];80&c[2]?Xu(d,c,d.template,c[8]):c[5]>0&&qh(c)}}function qh(s){for(let d=ju(s);null!==d;d=Ac(d))for(let h=10;h<d.length;h++){const g=d[h];if(1024&g[2]){const v=g[1];Xu(v,g,v.template,g[8])}else g[5]>0&&qh(g)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const h=mi(c[d],s);qs(h)&&h[5]>0&&qh(h)}}function Tm(s,o){const c=mi(o,s),d=c[1];(function OD(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(d,c),xp(d,c,c[8])}function zh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function pv(s){for(;s;){s[2]|=64;const o=Er(s);if(_t(s)&&!o)return s;s=o}return null}function nd(s,o,c){const d=o[10];d.begin&&d.begin();try{Xu(s,o,s.template,c)}catch(h){throw mv(o,h),h}finally{d.end&&d.end()}}function Lc(s){!function Dm(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],d=Eh(c),h=d[1];TD(h,d,h.template,c)}}(s[8])}function Sm(s,o,c){_u(0),o(s,c)}const gv=(()=>Promise.resolve(null))();function _w(s){return s[7]||(s[7]=[])}function Xr(s){return s.cleanup||(s.cleanup=[])}function mv(s,o){const c=s[9],d=c?c.get(ai,null):null;d&&d.handleError(o)}function _v(s,o,c,d,h){for(let g=0;g<c.length;){const v=c[g++],w=c[g++],E=o[v],x=s.data[v];null!==x.setInput?x.setInput(E,h,d,w):E[w]=h}}function us(s,o,c){const d=Yo(o,s);!function Ph(s,o,c){Jn(s)?s.setValue(o,c):o.textContent=c}(s[11],d,c)}function Rr(s,o,c){let d=c?s.styles:null,h=c?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?h=ge(h,w):2==g&&(d=ge(d,w+": "+o[++v]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=h:s.classesWithoutHost=h}const Mm=new Cr("INJECTOR",-1);class rd{get(o,c=oa){if(c===oa){const d=new Error(`NullInjectorError: No provider for ${Ee(o)}!`);throw d.name="NullInjectorError",d}return c}}const yv=new Cr("Set Injector scope."),ds={},RD={};let Pp;function Wh(){return void 0===Pp&&(Pp=new rd),Pp}function yw(s,o=null,c=null,d){const h=vw(s,o,c,d);return h._resolveInjectorDefTypes(),h}function vw(s,o=null,c=null,d){return new Zn(s,c,o||Wh(),d)}class Zn{constructor(o,c,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];c&&Ni(c,w=>this.processProvider(w,o,c)),Ni([o],w=>this.processInjectorType(w,[],g)),this.records.set(Mm,Tl(void 0,this));const v=this.records.get(yv);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:Ee(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=oa,d=Ot.Default){this.assertNotDestroyed();const h=it(this),g=sr(void 0);try{if(!(d&Ot.SkipSelf)){let w=this.records.get(o);if(void 0===w){const E=function ND(s){return"function"==typeof s||"object"==typeof s&&s instanceof Cr}(o)&&mt(o);w=E&&this.injectableDefInScope(E)?Tl(vv(o),ds):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(d&Ot.Self?Wh():this.parent).get(o,c=d&Ot.Optional&&c===oa?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[Fa]=v[Fa]||[]).unshift(Ee(o)),h)throw v;return function Oo(s,o,c,d){const h=s[Fa];throw o[G]&&h.unshift(o[G]),s.message=function br(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=Ee(o);if(Array.isArray(o))h=o.map(Ee).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):Ee(w)))}h=`{${g.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${s.replace(D,"\n  ")}`}("\n"+s.message,h,c,d),s.ngTokenPath=h,s[Fa]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{sr(g),it(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(Ee(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(o,c,d){if(!(o=ee(o)))return!1;let h=zt(o);const g=null==h&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==d.indexOf(v);if(void 0!==g&&(h=zt(g)),null==h)return!1;if(null!=h.imports&&!w){let M;d.push(v);try{Ni(h.imports,V=>{this.processInjectorType(V,c,d)&&(void 0===M&&(M=[]),M.push(V))})}finally{}if(void 0!==M)for(let V=0;V<M.length;V++){const{ngModule:se,providers:Me}=M[V];Ni(Me,Ye=>this.processProvider(Ye,se,Me||Nt))}}this.injectorDefTypes.add(v);const E=Wi(v)||(()=>new v);this.records.set(v,Tl(E,ds));const x=h.providers;if(null!=x&&!w){const M=o;Ni(x,V=>this.processProvider(V,M,x))}return void 0!==g&&void 0!==o.providers}processProvider(o,c,d){let h=Yh(o=ee(o))?o:ee(o&&o.provide);const g=function Op(s,o,c){return Cv(s)?Tl(void 0,s.useValue):Tl(Zh(s),ds)}(o);if(Yh(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Tl(void 0,ds,!0),v.factory=()=>an(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,g)}hydrate(o,c){return c.value===ds&&(c.value=RD,c.value=c.factory()),"object"==typeof c.value&&c.value&&function kD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ee(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function vv(s){const o=mt(s),c=null!==o?o.factory:Wi(s);if(null!==c)return c;if(s instanceof Cr)throw new Pe(204,!1);if(s instanceof Function)return function Pm(s){const o=s.length;if(o>0)throw si(o,"?"),new Pe(204,!1);const c=function Xt(s){const o=s&&(s[vn]||s[Wr]);if(o){const c=function hn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Pe(204,!1)}function Zh(s,o,c){let d;if(Yh(s)){const h=ee(s);return Wi(h)||vv(h)}if(Cv(s))d=()=>ee(s.useValue);else if(function bw(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...an(s.deps||[]));else if(function Cw(s){return!(!s||!s.useExisting)}(s))d=()=>xt(ee(s.useExisting));else{const h=ee(s&&(s.useClass||s.provide));if(!function Ew(s){return!!s.deps}(s))return Wi(h)||vv(h);d=()=>new h(...an(s.deps))}return d}function Tl(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function Cv(s){return null!==s&&"object"==typeof s&&Se in s}function Yh(s){return"function"==typeof s}let pa=(()=>{class s{static create(c,d){var h;if(Array.isArray(c))return yw({name:""},d,c,"");{const g=null!==(h=c.name)&&void 0!==h?h:"";return yw({name:g},c.parent,c.providers,g)}}}return s.THROW_IF_NOT_FOUND=oa,s.NULL=new rd,s.\u0275prov=Oe({token:s,providedIn:"any",factory:()=>xt(Mm)}),s.__NG_ELEMENT_ID__=-1,s})();function Kh(s,o){zs(Eh(s)[1],or())}function Sv(s){let o=function Pw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;o;){let h;if(Qe(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Pe(903,"");h=o.\u0275dir}if(h){if(c){d.push(h);const v=s;v.inputs=ns(s.inputs),v.declaredInputs=ns(s.declaredInputs),v.outputs=ns(s.outputs);const w=h.hostBindings;w&&za(s,w);const E=h.viewQuery,x=h.contentQueries;if(E&&UD(s,E),x&&Rw(s,x),ne(s.inputs,h.inputs),ne(s.declaredInputs,h.declaredInputs),ne(s.outputs,h.outputs),Qe(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Sv&&(c=!1)}}o=Object.getPrototypeOf(o)}!function Ow(s){let o=0,c=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Vt(h.hostAttrs,c=Vt(c,h.hostAttrs))}}(d)}function ns(s){return s===gr?{}:s===Nt?[]:s}function UD(s,o){const c=s.viewQuery;s.viewQuery=c?(d,h)=>{o(d,h),c(d,h)}:o}function Rw(s,o){const c=s.contentQueries;s.contentQueries=c?(d,h,g)=>{o(d,h,g),c(d,h,g)}:o}function za(s,o){const c=s.hostBindings;s.hostBindings=c?(d,h)=>{o(d,h),c(d,h)}:o}let Nm=null;function Qh(){if(!Nm){const s=Yt.Symbol;if(s&&s.iterator)Nm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const d=o[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Nm=d)}}}return Nm}function kp(s){return!!Av(s)&&(Array.isArray(s)||!(s instanceof Map)&&Qh()in s)}function Av(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function hs(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function xv(s,o,c,d){const h=Je();return hs(h,bo(),o)&&(yn(),cs(yr(),h,s,o,c,d)),xv}function ld(s,o,c,d){return hs(s,bo(),c)?o+K(c)+d:yt}function Um(s,o,c,d,h,g,v,w){const E=Je(),x=yn(),M=s+U,V=x.firstCreatePass?function Bi(s,o,c,d,h,g,v,w,E){const x=o.consts,M=qr(o,s,4,v||null,Yi(x,w));wm(o,c,M,Yi(x,E)),zs(o,M);const V=M.tViews=vm(2,M,d,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,M),V.queries=o.queries.embeddedTView(M)),M}(M,x,E,o,c,d,h,g,v):x.data[M];Ki(V,!1);const se=E[11].createComment("");Gr(x,E,se,V),Li(se,E),zh(E,E[M]=Gh(se,E,se,V)),Ze(V)&&sv(x,E,V),null!=v&&Ga(E,V,w)}function Bm(s){return function vs(s,o){return s[o]}(function fu(){return Ht.lFrame.contextLView}(),U+s)}function cf(s,o=Ot.Default){const c=Je();return null===c?xt(s,o):yi(or(),c,ee(s),o)}function Al(){throw new Error("invalid")}function $c(s,o,c){const d=Je();return hs(d,bo(),o)&&Ms(yn(),yr(),d,s,o,d[11],c,!1),$c}function qm(s,o,c,d,h){const v=h?"class":"style";_v(s,c,o.inputs[v],v,d)}function zm(s,o,c,d){const h=Je(),g=yn(),v=U+s,w=h[11],E=h[v]=Fo(w,o,function xy(){return Ht.lFrame.currentNamespace}()),x=g.firstCreatePass?function gd(s,o,c,d,h,g,v){const w=o.consts,x=qr(o,s,2,h,Yi(w,g));return wm(o,c,x,Yi(w,v)),null!==x.attrs&&Rr(x,x.attrs,!1),null!==x.mergedAttrs&&Rr(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,g,h,0,o,c,d):g.data[v];Ki(x,!0);const M=x.mergedAttrs;null!==M&&Pi(w,E,M);const V=x.classes;null!==V&&Qy(w,E,V);const se=x.styles;return null!==se&&jb(w,E,se),64!=(64&x.flags)&&Gr(g,h,E,x),0===function cl(){return Ht.lFrame.elementDepthCount}()&&Li(E,h),function Ql(){Ht.lFrame.elementDepthCount++}(),Ze(x)&&(sv(g,h,x),sw(g,x,h)),null!==d&&Ga(h,x),zm}function xl(){let s=or();du()?hu():(s=s.parent,Ki(s,!1));const o=s;!function Xl(){Ht.lFrame.elementDepthCount--}();const c=yn();return c.firstCreatePass&&(zs(c,s),we(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Qf(s){return 0!=(16&s.flags)}(o)&&qm(c,o,Je(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function qg(s){return 0!=(32&s.flags)}(o)&&qm(c,o,Je(),o.stylesWithoutHost,!1),xl}function Wm(s,o,c,d){return zm(s,o,c,d),xl(),Wm}function $p(s,o,c){const d=Je(),h=yn(),g=s+U,v=h.firstCreatePass?function _d(s,o,c,d,h){const g=o.consts,v=Yi(g,d),w=qr(o,s,8,"ng-container",v);return null!==v&&Rr(w,v,!0),wm(o,c,w,Yi(g,h)),null!==o.queries&&o.queries.elementStart(o,w),w}(g,h,d,o,c):h.data[g];Ki(v,!0);const w=d[g]=d[11].createComment("");return Gr(h,d,w,v),Li(w,d),Ze(v)&&(sv(h,d,v),sw(h,v,d)),null!=c&&Ga(d,v),$p}function Zm(){let s=or();const o=yn();return du()?hu():(s=s.parent,Ki(s,!1)),o.firstCreatePass&&(zs(o,s),we(s)&&o.queries.elementEnd(s)),Zm}function Uv(s,o,c){return $p(s,o,c),Zm(),Uv}function Hw(){return Je()}function Bv(s){return!!s&&"function"==typeof s.then}function Gw(s){return!!s&&"function"==typeof s.subscribe}const jp=Gw;function Ym(s,o,c,d){const h=Je(),g=yn(),v=or();return function Vv(s,o,c,d,h,g,v,w){const E=Ze(d),M=s.firstCreatePass&&Xr(s),V=o[8],se=_w(o);let Me=!0;if(3&d.type||w){const ft=gi(d,o),Pt=w?w(ft):ft,et=se.length,Zt=w?An=>w(Vn(An[d.index])):d.index;if(Jn(c)){let An=null;if(!w&&E&&(An=function QD(s,o,c,d){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===c&&h[g+1]===d){const w=o[7],E=h[g+2];return w.length>E?w[E]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,d.index)),null!==An)(An.__ngLastListenerFn__||An).__ngNextListenerFn__=g,An.__ngLastListenerFn__=g,Me=!1;else{g=yd(d,o,V,g,!1);const Yn=c.listen(Pt,h,g);se.push(g,Yn),M&&M.push(h,Zt,et,et+1)}}else g=yd(d,o,V,g,!0),Pt.addEventListener(h,g,v),se.push(g),M&&M.push(h,Zt,et,v)}else g=yd(d,o,V,g,!1);const Ye=d.outputs;let lt;if(Me&&null!==Ye&&(lt=Ye[h])){const ft=lt.length;if(ft)for(let Pt=0;Pt<ft;Pt+=2){const jo=o[lt[Pt]][lt[Pt+1]].subscribe(g),Mf=se.length;se.push(g,jo),M&&M.push(h,d.index,Mf,-(Mf+1))}}}(g,h,h[11],v,s,o,!!c,d),Ym}function jc(s,o,c,d){try{return!1!==c(d)}catch(h){return mv(s,h),!1}}function yd(s,o,c,d,h){return function g(v){if(v===Function)return d;const w=2&s.flags?mi(s.index,o):o;0==(32&o[2])&&pv(w);let E=jc(o,0,d,v),x=g.__ngNextListenerFn__;for(;x;)E=jc(o,0,x,v)&&E,x=x.__ngNextListenerFn__;return h&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function $v(s=1){return function wo(s){return(Ht.lFrame.contextLView=function vu(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ht.lFrame.contextLView))[8]}(s)}function zw(s,o){let c=null;const d=function kh(s){const o=s.attrs;if(null!=o){const c=o.indexOf(5);if(0==(1&c))return o[c+1]}return null}(s);for(let h=0;h<o.length;h++){const g=o[h];if("*"!==g){if(null===d?pn(s,g,!0):tn(d,g))return h}else c=h}return c}function Ww(s){const o=Je()[16][6];if(!o.projection){const d=o.projection=si(s?s.length:1,null),h=d.slice();let g=o.child;for(;null!==g;){const v=s?zw(g,s):0;null!==v&&(h[v]?h[v].projectionNext=g:d[v]=g,h[v]=g),g=g.next}}}function jv(s,o=0,c){const d=Je(),h=yn(),g=qr(h,U+s,16,null,c||null);null===g.projection&&(g.projection=o),hu(),64!=(64&g.flags)&&function je(s,o,c){nt(o[11],0,o,c,Ub(s,c,o),qu(c.parent||o[6],c,o))}(h,d,g)}function Hp(s,o,c){return Gp(s,"",o,"",c),Hp}function Gp(s,o,c,d,h){const g=Je(),v=ld(g,o,c,d);return v!==yt&&Ms(yn(),yr(),g,s,v,g[11],h,!1),Gp}function zv(s,o,c,d,h){const g=s[c+1],v=null===o;let w=d?nr(g):As(g),E=!1;for(;0!==w&&(!1===E||v);){const M=s[w+1];eS(s[w],o)&&(E=!0,s[w+1]=d?Zu(M):Pr(M)),w=d?nr(M):As(M)}E&&(s[c+1]=d?Pr(g):Zu(g))}function eS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Mo(s,o)>=0}const ci={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kw(s){return s.substring(ci.key,ci.keyEnd)}function df(s){return s.substring(ci.value,ci.valueEnd)}function Wv(s,o){const c=ci.textEnd;let d=ci.key=vd(s,o,c);return c===d?-1:(d=ci.keyEnd=function Yv(s,o,c){let d;for(;o<c&&(45===(d=s.charCodeAt(o))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)o++;return o}(s,d,c),d=Qw(s,d,c),d=ci.value=vd(s,d,c),d=ci.valueEnd=function Kv(s,o,c){let d=-1,h=-1,g=-1,v=o,w=v;for(;v<c;){const E=s.charCodeAt(v++);if(59===E)return w;34===E||39===E?w=v=Xw(s,E,v,c):o===v-4&&85===g&&82===h&&76===d&&40===E?w=v=Xw(s,41,v,c):E>32&&(w=v),g=h,h=d,d=-33&E}return w}(s,d,c),Qw(s,d,c))}function vd(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function Qw(s,o,c,d){return(o=vd(s,o,c))<c&&o++,o}function Xw(s,o,c,d){let h=-1,g=c;for(;g<d;){const v=s.charCodeAt(g++);if(v==o&&92!==h)return g;h=92==v&&92===h?0:v}throw new Error}function ui(s,o){return function ma(s,o,c,d){const h=Je(),g=yn(),v=Cs(2);g.firstUpdatePass&&Qv(g,s,v,d),o!==yt&&hs(h,v,o)&&tE(g,g.data[_i()],h,h[11],s,h[v+1]=function iS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Ee(Is(s)))),s}(o,c),d,v)}(s,o,null,!0),ui}function Za(s){!function _a(s,o,c,d){const h=yn(),g=Cs(2);h.firstUpdatePass&&Qv(h,null,g,d);const v=Je();if(c!==yt&&hs(v,g,c)){const w=h.data[_i()];if(nE(w,d)&&!t_(h,g)){let E=d?w.classesWithoutHost:w.stylesWithoutHost;null!==E&&(c=ge(E,c||"")),qm(h,w,v,c,d)}else!function eE(s,o,c,d,h,g,v,w){h===yt&&(h=Nt);let E=0,x=0,M=0<h.length?h[0]:null,V=0<g.length?g[0]:null;for(;null!==M||null!==V;){const se=E<h.length?h[E+1]:void 0,Me=x<g.length?g[x+1]:void 0;let lt,Ye=null;M===V?(E+=2,x+=2,se!==Me&&(Ye=V,lt=Me)):null===V||null!==M&&M<V?(E+=2,Ye=M):(x+=2,Ye=V,lt=Me),null!==Ye&&tE(s,o,c,d,Ye,lt,v,w),M=E<h.length?h[E]:null,V=x<g.length?g[x]:null}}(h,w,v,v[11],v[g+1],v[g+1]=function Jv(s,o,c){if(null==c||""===c)return Nt;const d=[],h=Is(c);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(d,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(d,g,h[g]);else"string"==typeof h&&o(d,h);return d}(s,o,c),d,g)}}(r_,nS,s,!1)}function nS(s,o){for(let c=function Jm(s){return function Zv(s){ci.key=0,ci.keyEnd=0,ci.value=0,ci.valueEnd=0,ci.textEnd=s.length}(s),Wv(s,vd(s,0,ci.textEnd))}(o);c>=0;c=Wv(o,c))r_(s,Kw(o),df(o))}function t_(s,o){return o>=s.expandoStartIndex}function Qv(s,o,c,d){const h=s.data;if(null===h[c+1]){const g=h[_i()],v=t_(s,c);nE(g,d)&&null===o&&!v&&(o=!1),o=function Jw(s,o,c,d){const h=function dl(s){const o=Ht.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(c=Cd(c=ff(null,s,o,c,d),o.attrs,d),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(c=ff(h,s,o,c,d),null===g){let E=function Xv(s,o,c){const d=c?o.classBindings:o.styleBindings;if(0!==As(d))return s[nr(d)]}(s,o,d);void 0!==E&&Array.isArray(E)&&(E=ff(null,s,o,E[1],d),E=Cd(E,o.attrs,d),function n_(s,o,c,d){s[nr(c?o.classBindings:o.styleBindings)]=d}(s,o,d,E))}else g=function zp(s,o,c){let d;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)d=Cd(d,s[g].hostAttrs,c);return Cd(d,o.attrs,c)}(s,o,d)}return void 0!==g&&(d?o.residualClasses=g:o.residualStyles=g),c}(h,g,o,d),function qv(s,o,c,d,h,g){let v=g?o.classBindings:o.styleBindings,w=nr(v),E=As(v);s[d]=c;let M,x=!1;if(Array.isArray(c)){const V=c;M=V[1],(null===M||Mo(V,M)>0)&&(x=!0)}else M=c;if(h)if(0!==E){const se=nr(s[w+1]);s[d+1]=hm(se,w),0!==se&&(s[se+1]=Ip(s[se+1],d)),s[w+1]=function Pc(s,o){return 131071&s|o<<17}(s[w+1],d)}else s[d+1]=hm(w,0),0!==w&&(s[w+1]=Ip(s[w+1],d)),w=d;else s[d+1]=hm(E,0),0===w?w=d:s[E+1]=Ip(s[E+1],d),E=d;x&&(s[d+1]=Pr(s[d+1])),zv(s,M,d,!0),zv(s,M,d,!1),function JD(s,o,c,d,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Mo(g,o)>=0&&(c[d+1]=Zu(c[d+1]))}(o,M,s,d,g),v=hm(w,E),g?o.classBindings=v:o.styleBindings=v}(h,g,o,c,v,d)}}function ff(s,o,c,d,h){let g=null;const v=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<v&&(g=o[w],d=Cd(d,g.hostAttrs,h),g!==s);)w++;return null!==s&&(c.directiveStylingLast=w),d}function Cd(s,o,c){const d=c?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vi(s,v,!!c||o[++g]))}return void 0===s?null:s}function r_(s,o,c){vi(s,o,Is(c))}function tE(s,o,c,d,h,g,v,w){if(!(3&o.type))return;const E=s.data,x=E[w+1];i_(function Jy(s){return 1==(1&s)}(x)?e0(E,o,c,h,As(x),v):void 0)||(i_(g)||function Qb(s){return 2==(2&s)}(x)&&(g=e0(E,null,c,h,w,v)),function $b(s,o,c,d,h){const g=Jn(s);if(o)h?g?s.addClass(c,d):c.classList.add(d):g?s.removeClass(c,d):c.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:Le.DashCase;if(null==h)g?s.removeStyle(c,d,v):c.style.removeProperty(d);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),v|=Le.Important),g?s.setStyle(c,d,h,v):c.style.setProperty(d,h,w?"important":"")}}}(d,v,Yo(_i(),c),h,g))}function e0(s,o,c,d,h,g){const v=null===o;let w;for(;h>0;){const E=s[h],x=Array.isArray(E),M=x?E[1]:E,V=null===M;let se=c[h+1];se===yt&&(se=V?Nt:void 0);let Me=V?pc(se,d):M===d?se:void 0;if(x&&!i_(Me)&&(Me=pc(E,d)),i_(Me)&&(w=Me,v))return w;const Ye=s[h+1];h=v?nr(Ye):As(Ye)}if(null!==o){let E=g?o.residualClasses:o.residualStyles;null!=E&&(w=pc(E,d))}return w}function i_(s){return void 0!==s}function nE(s,o){return 0!=(s.flags&(o?16:32))}function t0(s,o=""){const c=Je(),d=yn(),h=s+U,g=d.firstCreatePass?qr(d,h,1,o,null):d.data[h],v=c[h]=function wl(s,o){return Jn(s)?s.createText(o):s.createTextNode(o)}(c[11],o);Gr(d,c,v,g),Ki(g,!1)}function pf(s){return Hc("",s,""),pf}function Hc(s,o,c){const d=Je(),h=ld(d,s,o,c);return h!==yt&&us(d,_i(),h),Hc}function Ml(s,o,c){Za(ld(Je(),s,o,c))}const Pl=void 0;var g0=["en",[["a","p"],["AM","PM"],Pl],[["AM","PM"],Pl,Pl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pl,"{1} 'at' {0}",Pl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lS(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let _f={};function d_(s){const o=function m0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=f_(o);if(c)return c;const d=o.split("-")[0];if(c=f_(d),c)return c;if("en"===d)return g0;throw new Error(`Missing locale data for the locale "${s}".`)}function h_(s){return d_(s)[Ut.PluralCase]}function f_(s){return s in _f||(_f[s]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[s]),_f[s]}var Ut=(()=>((Ut=Ut||{})[Ut.LocaleId=0]="LocaleId",Ut[Ut.DayPeriodsFormat=1]="DayPeriodsFormat",Ut[Ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ut[Ut.DaysFormat=3]="DaysFormat",Ut[Ut.DaysStandalone=4]="DaysStandalone",Ut[Ut.MonthsFormat=5]="MonthsFormat",Ut[Ut.MonthsStandalone=6]="MonthsStandalone",Ut[Ut.Eras=7]="Eras",Ut[Ut.FirstDayOfWeek=8]="FirstDayOfWeek",Ut[Ut.WeekendRange=9]="WeekendRange",Ut[Ut.DateFormat=10]="DateFormat",Ut[Ut.TimeFormat=11]="TimeFormat",Ut[Ut.DateTimeFormat=12]="DateTimeFormat",Ut[Ut.NumberSymbols=13]="NumberSymbols",Ut[Ut.NumberFormats=14]="NumberFormats",Ut[Ut.CurrencyCode=15]="CurrencyCode",Ut[Ut.CurrencySymbol=16]="CurrencySymbol",Ut[Ut.CurrencyName=17]="CurrencyName",Ut[Ut.Currencies=18]="Currencies",Ut[Ut.Directionality=19]="Directionality",Ut[Ut.PluralCase=20]="PluralCase",Ut[Ut.ExtraData=21]="ExtraData",Ut))();const Yp="en-US";let m_=Yp;function Jp(s,o,c,d,h){if(s=ee(s),Array.isArray(s))for(let g=0;g<s.length;g++)Jp(s[g],o,c,d,h);else{const g=yn(),v=Je();let w=Yh(s)?s:ee(s.provide),E=Zh(s);const x=or(),M=1048575&x.providerIndexes,V=x.directiveStart,se=x.providerIndexes>>20;if(Yh(s)||!s.multi){const Me=new Oa(E,h,cf),Ye=O_(w,o,h?M:M+se,V);-1===Ye?(Ks(Io(x,v),g,w),M_(g,s,o.length),o.push(w),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),c.push(Me),v.push(Me)):(c[Ye]=Me,v[Ye]=Me)}else{const Me=O_(w,o,M+se,V),Ye=O_(w,o,M,M+se),lt=Me>=0&&c[Me],ft=Ye>=0&&c[Ye];if(h&&!ft||!h&&!lt){Ks(Io(x,v),g,w);const Pt=function IS(s,o,c,d,h){const g=new Oa(s,c,cf);return g.multi=[],g.index=o,g.componentProviders=0,P_(g,h,d&&!c),g}(h?Tf:$0,c.length,h,d,E);!h&&ft&&(c[Ye].providerFactory=Pt),M_(g,s,o.length,0),o.push(w),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),c.push(Pt),v.push(Pt)}else M_(g,s,Me>-1?Me:Ye,P_(c[h?Ye:Me],E,!h&&d));!h&&d&&ft&&c[Ye].componentProviders++}}}function M_(s,o,c,d){const h=Yh(o),g=function ww(s){return!!s.useClass}(o);if(h||g){const E=(g?ee(o.useClass):o).prototype.ngOnDestroy;if(E){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=x.indexOf(c);-1===M?x.push(c,[d,E]):x[M+1].push(d,E)}else x.push(c,E)}}}function P_(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function O_(s,o,c,d){for(let h=c;h<d;h++)if(o[h]===s)return h;return-1}function $0(s,o,c,d){return eg(this.multi,[])}function Tf(s,o,c,d){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=ls(c,c[1],this.providerFactory.index,d);g=w.slice(0,v),eg(h,g);for(let E=v;E<w.length;E++)g.push(w[E])}else g=[],eg(h,g);return g}function eg(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function FE(s,o=[]){return c=>{c.providersResolver=(d,h)=>function x_(s,o,c){const d=yn();if(d.firstCreatePass){const h=Qe(s);Jp(c,d.data,d.blueprint,h,!0),Jp(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class j0{}class SS{resolveComponentFactory(o){throw function DS(s){const o=Error(`No component factory found for ${Ee(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let R_=(()=>{class s{}return s.NULL=new SS,s})();function AS(){return Ed(or(),Je())}function Ed(s,o){return new Id(gi(s,o))}let Id=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=AS,s})();function LE(s){return s instanceof Id?s.nativeElement:s}class G0{}let k_=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function UE(){const s=Je(),c=mi(or().index,s);return function Ln(s){return s[11]}(B(c)?c:s)}(),s})(),BE=(()=>{class s{}return s.\u0275prov=Oe({token:s,providedIn:"root",factory:()=>null}),s})();class Df{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const VE=new Df("13.3.1"),ar={};function Ii(s,o,c,d,h=!1){for(;null!==c;){const g=o[c.index];if(null!==g&&d.push(Vn(g)),z(g))for(let w=10;w<g.length;w++){const E=g[w],x=E[1].firstChild;null!==x&&Ii(E[1],E,x,d)}const v=c.type;if(8&v)Ii(s,o,c.child,d);else if(32&v){const w=St(c,o);let E;for(;E=w();)d.push(E)}else if(16&v){const w=dm(o,c);if(Array.isArray(w))d.push(...w);else{const E=Er(o[16]);Ii(E[1],E,w,d,!0)}}c=h?c.projectionNext:c.next}return d}class Us{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return Ii(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(z(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(cm(o,d),xo(c,d))}this._attachedToViewContainer=!1}Gu(this._lView[1],this._lView)}onDestroy(o){ed(this._lView[1],this._lView,null,o)}markForCheck(){pv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){nd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function gw(s,o,c){Co(!0);try{nd(s,o,c)}finally{Co(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function am(s,o){pt(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=o}}class $E extends Us{constructor(o){super(o),this._view=o}detectChanges(){Lc(this._view)}checkNoChanges(){!function mw(s){Co(!0);try{Lc(s)}finally{Co(!1)}}(this._view)}get context(){return null}}class jE extends R_{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=_n(o);return new q0(c,this.ngModule)}}function tg(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class q0 extends j0{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function Yb(s){return s.map(zu).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return tg(this.componentDef.inputs)}get outputs(){return tg(this.componentDef.outputs)}create(o,c,d,h){const g=(h=h||this.ngModule)?function GE(s,o){return{get:(c,d,h)=>{const g=s.get(c,ar,h);return g!==ar||d===ar?g:o.get(c,d,h)}}}(o,h.injector):o,v=g.get(G0,xa),w=g.get(BE,null),E=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",M=d?function av(s,o,c){if(Jn(s))return s.selectRootElement(o,c===un.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(E,d,this.componentDef.encapsulation):Fo(v.createRenderer(null,this.componentDef),x,function HE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),V=this.componentDef.onPush?576:528,se=function od(s,o){return{components:[],scheduler:s||im,clean:gv,playerHandler:o||null,flags:0}}(),Me=vm(0,null,null,1,0,null,null,null,null,null),Ye=Vh(null,Me,se,V,null,null,v,E,w,g);let lt,ft;Ko(Ye);try{const Pt=function xw(s,o,c,d,h,g){const v=c[1];c[20]=s;const E=qr(v,20,2,"#host",null),x=E.mergedAttrs=o.hostAttrs;null!==x&&(Rr(E,x,!0),null!==s&&(Pi(h,s,x),null!==E.classes&&Qy(h,s,E.classes),null!==E.styles&&jb(h,s,E.styles)));const M=d.createRenderer(s,o),V=Vh(c,Ju(o),null,o.onPush?64:16,c[20],E,d,M,g||null,null);return v.firstCreatePass&&(Ks(Io(E,c),v,o.type),uw(v,E),td(E,c.length,1)),zh(c,V),c[20]=V}(M,this.componentDef,Ye,v,E);if(M)if(d)Pi(E,M,["ng-version",VE.full]);else{const{attrs:et,classes:Zt}=function Ep(s){const o=[],c=[];let d=1,h=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++d]):8===h&&c.push(g);else{if(!ha(h))break;h=g}d++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);et&&Pi(E,M,et),Zt&&Zt.length>0&&Qy(E,M,Zt.join(" "))}if(ft=ll(Me,U),void 0!==c){const et=ft.projection=[];for(let Zt=0;Zt<this.ngContentSelectors.length;Zt++){const An=c[Zt];et.push(null!=An?Array.from(An):null)}}lt=function Mw(s,o,c,d,h){const g=c[1],v=function dv(s,o,c){const d=or();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Fc(s,d,o,$h(s,o,1,null),c));const h=ls(o,s,d.directiveStart,d);Li(h,o);const g=gi(d,o);return g&&Li(g,o),h}(g,c,o);if(d.components.push(v),s[8]=v,h&&h.forEach(E=>E(v,o)),o.contentQueries){const E=or();o.contentQueries(1,v,E.directiveStart)}const w=or();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Eo(w.index),hv(c[1],w,0,w.directiveStart,w.directiveEnd,o),fv(o,v)),v}(Pt,this.componentDef,Ye,se,[Kh]),xp(Me,Ye,null)}finally{Xo()}return new MS(this.componentType,lt,Ed(ft,Ye),Ye,ft)}}class MS extends class TS{}{constructor(o,c,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.instance=c,this.hostView=this.changeDetectorRef=new $E(h),this.componentType=o}get injector(){return new Oi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class ng{}class PS{}const Ir=new Map;class WE extends ng{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jE(this);const d=Nn(o);this._bootstrapComponents=m(d.bootstrap),this._r3Injector=vw(o,c,[{provide:ng,useValue:this},{provide:R_,useValue:this.componentFactoryResolver}],Ee(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=pa.THROW_IF_NOT_FOUND,d=Ot.Default){return o===pa||o===ng||o===Mm?this:this._r3Injector.get(o,c,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class W0 extends PS{constructor(o){super(),this.moduleType=o,null!==Nn(o)&&function RS(s){const o=new Set;!function c(d){const h=Nn(d,!0),g=h.id;null!==g&&(function qE(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${Ee(o)} vs ${Ee(o.name)}`)}(g,Ir.get(g),d),Ir.set(g,d));const v=m(h.imports);for(const w of v)o.has(w)||(o.add(w),c(w))}(s)}(o)}create(o){return new WE(this.moduleType,o)}}function L_(s){return o=>{setTimeout(s,void 0,o)}}const fs=class Q0 extends a.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){var h,g,v;let w=o,E=c||(()=>null),x=d;if(o&&"object"==typeof o){const V=o;w=null===(h=V.next)||void 0===h?void 0:h.bind(V),E=null===(g=V.error)||void 0===g?void 0:g.bind(V),x=null===(v=V.complete)||void 0===v?void 0:v.bind(V)}this.__isAsync&&(E=L_(E),w&&(w=L_(w)),x&&(x=L_(x)));const M=super.subscribe({next:w,error:E,complete:x});return o instanceof le.w0&&o.add(M),M}};function QE(){return this._results[Qh()]()}class U_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Qh(),d=U_.prototype;d[c]||(d[c]=QE)}get changes(){return this._changes||(this._changes=new fs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const h=Kr(o);(this._changesDetected=!function hc(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],g=o[d];if(c&&(h=c(h),g=c(g)),g!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Sd=(()=>{class s{}return s.__NG_ELEMENT_ID__=B_,s})();const X0=Sd,$S=class extends X0{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(o){const c=this._declarationTContainer.tViews,d=Vh(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[P];return null!==g&&(d[P]=g.createEmbeddedView(c)),xp(c,d,o),new Us(d)}};function B_(){return Ad(or(),Je())}function Ad(s,o){return 4&s.type?new $S(o,s,Ed(s,o)):null}let og=(()=>{class s{}return s.__NG_ELEMENT_ID__=ag,s})();function ag(){return Sf(or(),Je())}const jS=og,lg=class extends jS{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return Ed(this._hostTNode,this._hostLView)}get injector(){return new Oi(this._hostTNode,this._hostLView)}get parentInjector(){const o=ws(this._hostTNode,this._hostLView);if(fl(o)){const c=er(o,this._hostLView),d=qn(o);return new Oi(c[1].data[d+8],c)}return new Oi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=qc(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,d){const h=o.createEmbeddedView(c||{});return this.insert(h,d),h}createComponent(o,c,d,h,g){const v=o&&!function Ao(s){return"function"==typeof s}(o);let w;if(v)w=c;else{const V=c||{};w=V.index,d=V.injector,h=V.projectableNodes,g=V.ngModuleRef}const E=v?o:new q0(_n(o)),x=d||this.parentInjector;if(!g&&null==E.ngModule){const se=(v?x:this.parentInjector).get(ng,null);se&&(g=se)}const M=E.create(x,h,void 0,g);return this.insert(M.hostView,w),M}insert(o,c){const d=o._lView,h=d[1];if(function Yl(s){return z(s[3])}(d)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const V=d[3],se=new lg(V,V[6],V[3]);se.detach(se.indexOf(o))}}const g=this._adjustIndex(c),v=this._lContainer;!function lm(s,o,c,d){const h=10+d,g=c.length;d>0&&(c[h-1][4]=o),d<g-10?(o[4]=c[h],sh(c,10+d,o)):(c.push(o),o[4]=null),o[3]=c;const v=o[17];null!==v&&c!==v&&function eo(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(v,o);const w=o[P];null!==w&&w.insertView(s),o[2]|=128}(h,d,v,g);const w=Mt(g,v),E=d[11],x=wp(E,v[7]);return null!==x&&function Rh(s,o,c,d,h,g){d[0]=h,d[6]=o,pt(s,d,c,1,h,g)}(h,v[6],E,d,x,w),o.attachToViewContainerRef(),sh(ya(v),g,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=qc(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=cm(this._lContainer,c);d&&(xo(ya(this._lContainer),c),Gu(d[1],d))}detach(o){const c=this._adjustIndex(o,-1),d=cm(this._lContainer,c);return d&&null!=xo(ya(this._lContainer),c)?new Us(d):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function qc(s){return s[8]}function ya(s){return s[8]||(s[8]=[])}function Sf(s,o){let c;const d=o[s.index];if(z(d))c=d;else{let h;if(8&s.type)h=Vn(d);else{const g=o[11];h=g.createComment("");const v=gi(s,o);xc(g,wp(g,v),h,function es(s,o){return Jn(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=c=Gh(d,o,h,s),zh(o,c)}return new lg(c,s,o)}class V_{constructor(o){this.queryList=o,this.matches=null}clone(){return new V_(this.queryList)}setDirty(){this.queryList.setDirty()}}class xd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let g=0;g<d;g++){const v=c.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new xd(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==iC(o,c).matches&&this.queries[c].setDirty()}}class kl{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class J0{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,g=this.getByIndex(d).embeddedTView(o,h);g&&(g.indexInDeclarationView=d,null!==c?c.push(g):c=[g])}return null!==c?new J0(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class eC{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new eC(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(o,c,qS(c,g)),this.matchTNodeWithReadOption(o,c,Tt(c,o,g,!1,!1))}else d===Sd?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Tt(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Id||h===og||h===Sd&&4&c.type)this.addMatch(c.index,-2);else{const g=Tt(c,o,h,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function qS(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function XE(s,o,c,d){return-1===c?function zS(s,o){return 11&s.type?Ed(s,o):4&s.type?Ad(s,o):null}(o,s):-2===c?function WS(s,o,c){return c===Id?Ed(o,s):c===Sd?Ad(o,s):c===og?Sf(o,s):void 0}(s,o,d):ls(s,s[1],c,o)}function JE(s,o,c,d){const h=o[P].queries[d];if(null===h.matches){const g=s.data,v=c.matches,w=[];for(let E=0;E<v.length;E+=2){const x=v[E];w.push(x<0?null:XE(o,g[x],v[E+1],c.metadata.read))}h.matches=w}return h.matches}function $_(s,o,c,d){const h=s.queries.getByIndex(c),g=h.matches;if(null!==g){const v=JE(s,o,h,c);for(let w=0;w<g.length;w+=2){const E=g[w];if(E>0)d.push(v[w/2]);else{const x=g[w+1],M=o[-E];for(let V=10;V<M.length;V++){const se=M[V];se[17]===se[3]&&$_(se[1],se,x,d)}if(null!==M[9]){const V=M[9];for(let se=0;se<V.length;se++){const Me=V[se];$_(Me[1],Me,x,d)}}}}}return d}function eI(s){const o=Je(),c=yn(),d=mu();_u(d+1);const h=iC(c,d);if(s.dirty&&_o(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?$_(c,o,d,[]):JE(c,o,h,d);s.reset(g,LE),s.notifyOnChanges()}return!0}return!1}function tI(s,o,c){const d=yn();d.firstCreatePass&&(rC(d,new kl(s,o,c),-1),2==(2&o)&&(d.staticViewQueries=!0)),nC(d,Je(),o)}function tC(s,o,c,d){const h=yn();if(h.firstCreatePass){const g=or();rC(h,new kl(o,c,d),g.index),function rI(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}nC(h,Je(),c)}function nI(){return function ZS(s,o){return s[P].queries[o].queryList}(Je(),mu())}function nC(s,o,c){const d=new U_(4==(4&c));ed(s,o,d,d.destroy),null===o[P]&&(o[P]=new xd),o[P].queries.push(new V_(d))}function rC(s,o,c){null===s.queries&&(s.queries=new J0),s.queries.track(new eC(o,c))}function iC(s,o){return s.queries.getByIndex(o)}function Qa(...s){}const Zc=new Cr("Application Initializer");let mC=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Qa,this.reject=Qa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Bv(g))c.push(g);else if(jp(g)){const v=new Promise((w,E)=>{g.subscribe({complete:w,error:E})});c.push(v)}}Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(xt(Zc,8))},s.\u0275prov=Oe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vI=new Cr("AppId",{providedIn:"root",factory:function CI(){return`${pg()}${pg()}${pg()}`}});function pg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gg=new Cr("Platform Initializer"),Pd=new Cr("Platform ID"),Jr=new Cr("appBootstrapListener");let bI=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Oe({token:s,factory:s.\u0275fac}),s})();const W_=new Cr("LocaleId",{providedIn:"root",factory:()=>In(W_,Ot.Optional|Ot.SkipSelf)||function wI(){return"undefined"!=typeof $localize&&$localize.locale||Yp}()}),rA=new Cr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class II{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let sA=(()=>{class s{compileModuleSync(c){return new W0(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),g=m(Nn(c).declarations).reduce((v,w)=>{const E=_n(w);return E&&v.push(new q0(E)),v},[]);return new II(d,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Oe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const TI=(()=>Promise.resolve(0))();function mg(s){"undefined"==typeof Zone?TI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Vs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fs(!1),this.onMicrotaskEmpty=new fs(!1),this.onStable=new fs(!1),this.onError=new fs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function DI(){let s=Yt.requestAnimationFrame,o=Yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function yC(s){const o=()=>{!function aA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Yt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,AI(s),s.isCheckStableRunning=!0,SI(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),AI(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,g,v,w)=>{try{return lA(s),c.invokeTask(h,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),xI(s)}},onInvoke:(c,d,h,g,v,w,E)=>{try{return lA(s),c.invoke(h,g,v,w,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),xI(s)}},onHasTask:(c,d,h,g)=>{c.hasTask(h,g),d===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,AI(s),SI(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,d,h,g)=>(c.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,oA,Qa,Qa);try{return g.runTask(v,c,d)}finally{g.cancelTask(v)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const oA={};function SI(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function AI(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function lA(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function xI(s){s._nesting--,SI(s)}class cA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fs,this.onMicrotaskEmpty=new fs,this.onStable=new fs,this.onError=new fs}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,h){return o.apply(c,d)}}let uA=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vs.assertNotInAngularZone(),mg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mg(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,h){return[]}}return s.\u0275fac=function(c){return new(c||s)(xt(Vs))},s.\u0275prov=Oe({token:s,factory:s.\u0275fac}),s})(),dA=(()=>{class s{constructor(){this._applications=new Map,MI.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return MI.findTestabilityInTree(this,c,d)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Oe({token:s,factory:s.\u0275fac}),s})();class RM{addToWindow(o){}findTestabilityInTree(o,c,d){return null}}function kM(s){MI=s}let Xa,MI=new RM;const OI=new Cr("AllowMultipleToken");class hA{constructor(o,c){this.name=o,this.token=c}}function $o(s,o,c=[]){const d=`Platform: ${o}`,h=new Cr(d);return(g=[])=>{let v=kI();if(!v||v.injector.get(OI,!1))if(s)s(c.concat(g).concat({provide:h,useValue:!0}));else{const w=c.concat(g).concat({provide:h,useValue:!0},{provide:yv,useValue:"platform"});!function $i(s){if(Xa&&!Xa.destroyed&&!Xa.injector.get(OI,!1))throw new Pe(400,"");Xa=s.get(NI);const o=s.get(gg,null);o&&o.forEach(c=>c())}(pa.create({providers:w,name:d}))}return function Z_(s){const o=kI();if(!o)throw new Pe(401,"");return o}()}}function kI(){return Xa&&!Xa.destroyed?Xa:null}let NI=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const w=function fA(s,o){let c;return c="noop"===s?new cA:("zone.js"===s?void 0:s)||new Vs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),E=[{provide:Vs,useValue:w}];return w.run(()=>{const x=pa.create({providers:E,parent:this.injector,name:c.moduleType.name}),M=c.create(x),V=M.injector.get(ai,null);if(!V)throw new Pe(402,"");return w.runOutsideAngular(()=>{const se=w.onError.subscribe({next:Me=>{V.handleError(Me)}});M.onDestroy(()=>{CC(this._modules,M),se.unsubscribe()})}),function FI(s,o,c){try{const d=c();return Bv(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(V,w,()=>{const se=M.injector.get(mC);return se.runInitializers(),se.donePromise.then(()=>(function _0(s){Ce(s,"Expected localeId to be defined"),"string"==typeof s&&(m_=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(W_,Yp)||Yp),this._moduleDoBootstrap(M),M))})})}bootstrapModule(c,d=[]){const h=LI({},d);return function NM(s,o,c){const d=new W0(c);return Promise.resolve(d)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(c){const d=c.injector.get(vC);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new Pe(403,"");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(xt(pa))},s.\u0275prov=Oe({token:s,factory:s.\u0275fac}),s})();function LI(s,o){return Array.isArray(o)?o.reduce(LI,s):Object.assign(Object.assign({},s),o)}let vC=(()=>{class s{constructor(c,d,h,g,v){this._zone=c,this._injector=d,this._exceptionHandler=h,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new F.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),E=new F.y(x=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Vs.assertNotInAngularZone(),mg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Vs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{M.unsubscribe(),V.unsubscribe()}});this.isStable=(0,Te.T)(w,E.pipe((0,he.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Pe(405,"");let h;h=c instanceof j0?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(h.componentType);const g=function PI(s){return s.isBoundToModule}(h)?void 0:this._injector.get(ng),w=h.create(pa.NULL,[],d||h.selector,g),E=w.location.nativeElement,x=w.injector.get(uA,null),M=x&&w.injector.get(dA);return x&&M&&M.registerApplication(E,x),w.onDestroy(()=>{this.detachView(w.hostView),CC(this.components,w),M&&M.unregisterApplication(E)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;CC(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(Jr,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(xt(Vs),xt(pa),xt(ai),xt(R_),xt(mC))},s.\u0275prov=Oe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function CC(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}let _g=!0,bC=!1;function pA(){return bC=!0,_g}function wC(){if(bC)throw new Error("Cannot enable prod mode after platform setup.");_g=!1}let gA=(()=>{class s{}return s.__NG_ELEMENT_ID__=mA,s})();function mA(s){return function _A(s,o,c){if(Ge(s)&&!c){const d=mi(s.index,o);return new Us(d,d)}return 47&s.type?new Us(o[16],o):null}(or(),Je(),16==(16&s))}class DC{constructor(){}supports(o){return kp(o)}create(o){return new EA(o)}}const SC=(s,o)=>o;class EA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||SC}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,h=0,g=null;for(;c||d;){const v=!d||c&&c.currentIndex<ey(d,h,g)?c:d,w=ey(v,h,g),E=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{g||(g=[]);const x=w-h,M=E-h;if(x!=M){for(let se=0;se<x;se++){const Me=se<g.length?g[se]:g[se]=0,Ye=Me+se;M<=Ye&&Ye<x&&(g[se]=Me+1)}g[v.previousIndex]=M-x}}w!==E&&o(v,w,E)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!kp(o))throw new Pe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,g,v,w)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,v,w),d=!0),c=c._next}else h=0,function $D(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Qh()]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,w=>{v=this._trackByFn(h,w),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,w,v,h)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,v,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,g,h)):o=this._addAfter(new IA(c,d),g,h),o}_verifyReinsertion(o,c,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new vg),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vg),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class IA{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class vg{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new TA,this.map.set(c,d)),d.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ey(s,o,c){const d=s.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+o+h}class ty{constructor(){}supports(o){return o instanceof Map||Av(o)}create(){return new AC}}class AC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||Av(o)))throw new Pe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const d=new GI(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class GI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qI(){return new ny([new DC])}let ny=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||qI()),deps:[[s,new aa,new Fi]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new Pe(901,"")}}return s.\u0275prov=Oe({token:s,providedIn:"root",factory:qI}),s})();function zI(){return new MC([new ty])}let MC=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||zI()),deps:[[s,new aa,new Fi]]}}find(c){const d=this.factories.find(g=>g.supports(c));if(d)return d;throw new Pe(901,"")}}return s.\u0275prov=Oe({token:s,providedIn:"root",factory:zI}),s})();const AA=$o(null,"core",[{provide:Pd,useValue:"unknown"},{provide:NI,deps:[pa]},{provide:dA,deps:[]},{provide:bI,deps:[]}]);let xA=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(xt(vC))},s.\u0275mod=De({type:s}),s.\u0275inj=Ke({}),s})()},3942:(wt,$e,R)=>{"use strict";R.d($e,{Z:()=>Pe});var a=R(2090),le=R(4859),F=R(9681),Te=R(1877);class he{constructor(K,X){this._delegate=K,this.firebase=X,(0,F._addComponent)(K,new le.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(K,X=F._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(K);return!Ue.isInitialized()&&"EXPLICIT"===(null===(qe=Ue.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:X})}_removeServiceInstance(K,X=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(X)}_addComponent(K){(0,F._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,F._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ne=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function ge(){const J=function Ee(J){const K={},X={__esModule:!0,initializeApp:function Ae(be,Q={}){const q=F.initializeApp(be,Q);if((0,a.r3)(K,q.name))return K[q.name];const re=new J(q,X);return K[q.name]=re,re},app:Ue,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function ye(be){const Q=be.name,q=Q.replace("-compat","");if(F._registerComponent(be)&&"PUBLIC"===be.type){const re=(Z=Ue())=>{if("function"!=typeof Z[q])throw ne.create("invalid-app-argument",{appName:Q});return Z[q]()};void 0!==be.serviceProps&&(0,a.ZB)(re,be.serviceProps),X[q]=re,J.prototype[q]=function(...Z){return this._getService.bind(this,Q).apply(this,be.multipleInstances?Z:[])}}return"PUBLIC"===be.type?X[q]:null},removeApp:function qe(be){delete K[be]},useAsService:function ue(be,Q){return"serverAuth"===Q?null:Q},modularAPIs:F}};function Ue(be){if(!(0,a.r3)(K,be=be||F._DEFAULT_ENTRY_NAME))throw ne.create("no-app",{appName:be});return K[be]}return X.default=X,Object.defineProperty(X,"apps",{get:function _e(){return Object.keys(K).map(be=>K[be])}}),Ue.App=J,X}(he);return J.INTERNAL=Object.assign(Object.assign({},J.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function K(X){(0,a.ZB)(J,X)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),J}(),W=new Te.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const J=self.firebase.SDK_VERSION;J&&J.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=Y;!function ce(J){(0,F.registerVersion)("@firebase/app-compat","0.1.22",J)}()},9681:(wt,$e,R)=>{"use strict";R.r($e),R.d($e,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>zt,_DEFAULT_ENTRY_NAME:()=>Ne,_addComponent:()=>Fe,_addOrOverwriteComponent:()=>ze,_apps:()=>xe,_clearComponents:()=>mt,_components:()=>Be,_getProvider:()=>ot,_registerComponent:()=>Oe,_removeServiceInstance:()=>Ke,deleteApp:()=>lr,getApp:()=>$n,getApps:()=>Wr,initializeApp:()=>vn,onLog:()=>Un,registerVersion:()=>Br,setLogLevel:()=>sr});var a=R(5861),le=R(4859),F=R(1877),Te=R(2090);class he{constructor(Xe){this.container=Xe}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function de(Ct){const Xe=Ct.getComponent();return"VERSION"===(null==Xe?void 0:Xe.type)}(bt)){const Ft=bt.getImmediate();return`${Ft.library}/${Ft.version}`}return null}).filter(bt=>bt).join(" ")}}const ne="@firebase/app",ge=new F.Yd("@firebase/app"),Ne="[DEFAULT]",Ce={[ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xe=new Map,Be=new Map;function Fe(Ct,Xe){try{Ct.container.addComponent(Xe)}catch(bt){ge.debug(`Component ${Xe.name} failed to register with FirebaseApp ${Ct.name}`,bt)}}function ze(Ct,Xe){Ct.container.addOrOverwriteComponent(Xe)}function Oe(Ct){const Xe=Ct.name;if(Be.has(Xe))return ge.debug(`There were multiple attempts to register component ${Xe}.`),!1;Be.set(Xe,Ct);for(const bt of xe.values())Fe(bt,Ct);return!0}function ot(Ct,Xe){const bt=Ct.container.getProvider("heartbeat").getImmediate({optional:!0});return bt&&bt.triggerHeartbeat(),Ct.container.getProvider(Xe)}function Ke(Ct,Xe,bt=Ne){ot(Ct,Xe).clearInstance(bt)}function mt(){Be.clear()}const Xt=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class hn{constructor(Xe,bt,Ft){this._isDeleted=!1,this._options=Object.assign({},Xe),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Ft,this.container.addComponent(new le.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Xe){this._isDeleted=Xe}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}const zt="9.6.11";function vn(Ct,Xe={}){"object"!=typeof Xe&&(Xe={name:Xe});const bt=Object.assign({name:Ne,automaticDataCollectionEnabled:!1},Xe),Ft=bt.name;if("string"!=typeof Ft||!Ft)throw Xt.create("bad-app-name",{appName:String(Ft)});const fn=xe.get(Ft);if(fn){if((0,Te.vZ)(Ct,fn.options)&&(0,Te.vZ)(bt,fn.config))return fn;throw Xt.create("duplicate-app",{appName:Ft})}const Jt=new le.H0(Ft);for(const H of Be.values())Jt.addComponent(H);const te=new hn(Ct,bt,Jt);return xe.set(Ft,te),te}function $n(Ct=Ne){const Xe=xe.get(Ct);if(!Xe)throw Xt.create("no-app",{appName:Ct});return Xe}function Wr(){return Array.from(xe.values())}function lr(Ct){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,a.Z)(function*(Ct){const Xe=Ct.name;xe.has(Xe)&&(xe.delete(Xe),yield Promise.all(Ct.container.getProviders().map(bt=>bt.delete())),Ct.isDeleted=!0)})).apply(this,arguments)}function Br(Ct,Xe,bt){var Ft;let fn=null!==(Ft=Ce[Ct])&&void 0!==Ft?Ft:Ct;bt&&(fn+=`-${bt}`);const Jt=fn.match(/\s|\//),te=Xe.match(/\s|\//);if(Jt||te){const H=[`Unable to register library "${fn}" with version "${Xe}":`];return Jt&&H.push(`library name "${fn}" contains illegal characters (whitespace or "/")`),Jt&&te&&H.push("and"),te&&H.push(`version name "${Xe}" contains illegal characters (whitespace or "/")`),void ge.warn(H.join(" "))}Oe(new le.wA(`${fn}-version`,()=>({library:fn,version:Xe}),"VERSION"))}function Un(Ct,Xe){if(null!==Ct&&"function"!=typeof Ct)throw Xt.create("invalid-log-argument");(0,F.Am)(Ct,Xe)}function sr(Ct){(0,F.Ub)(Ct)}const Tn="firebase-heartbeat-store";let cr=null;function Ti(){return cr||(cr=(0,Te.X3)("firebase-heartbeat-database",1,(Ct,Xe)=>{0===Xe&&Ct.createObjectStore(Tn)}).catch(Ct=>{throw Xt.create("storage-open",{originalErrorMessage:Ct.message})})),cr}function un(){return(un=(0,a.Z)(function*(Ct){try{return(yield Ti()).transaction(Tn).objectStore(Tn).get(Gn(Ct))}catch(Xe){throw Xt.create("storage-get",{originalErrorMessage:Xe.message})}})).apply(this,arguments)}function It(Ct,Xe){return jt.apply(this,arguments)}function jt(){return(jt=(0,a.Z)(function*(Ct,Xe){try{const Ft=(yield Ti()).transaction(Tn,"readwrite");return yield Ft.objectStore(Tn).put(Xe,Gn(Ct)),Ft.complete}catch(bt){throw Xt.create("storage-set",{originalErrorMessage:bt.message})}})).apply(this,arguments)}function Gn(Ct){return`${Ct.name}!${Ct.options.appId}`}class rs{constructor(Xe){this.container=Xe,this._heartbeatsCache=null;const bt=this.container.getProvider("app").getImmediate();this._storage=new Nt(bt),this._heartbeatsCachePromise=this._storage.read().then(Ft=>(this._heartbeatsCache=Ft,Ft))}triggerHeartbeat(){var Xe=this;return(0,a.Z)(function*(){const Ft=Xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=Dr();if(null===Xe._heartbeatsCache&&(Xe._heartbeatsCache=yield Xe._heartbeatsCachePromise),Xe._heartbeatsCache.lastSentHeartbeatDate!==fn&&!Xe._heartbeatsCache.heartbeats.some(Jt=>Jt.date===fn))return Xe._heartbeatsCache.heartbeats.push({date:fn,agent:Ft}),Xe._heartbeatsCache.heartbeats=Xe._heartbeatsCache.heartbeats.filter(Jt=>{const te=new Date(Jt.date).valueOf();return Date.now()-te<=2592e6}),Xe._storage.overwrite(Xe._heartbeatsCache)})()}getHeartbeatsHeader(){var Xe=this;return(0,a.Z)(function*(){if(null===Xe._heartbeatsCache&&(yield Xe._heartbeatsCachePromise),null===Xe._heartbeatsCache||0===Xe._heartbeatsCache.heartbeats.length)return"";const bt=Dr(),{heartbeatsToSend:Ft,unsentEntries:fn}=function gr(Ct,Xe=1024){const bt=[];let Ft=Ct.slice();for(const fn of Ct){const Jt=bt.find(te=>te.agent===fn.agent);if(Jt){if(Jt.dates.push(fn.date),Sr(bt)>Xe){Jt.dates.pop();break}}else if(bt.push({agent:fn.agent,dates:[fn.date]}),Sr(bt)>Xe){bt.pop();break}Ft=Ft.slice(1)}return{heartbeatsToSend:bt,unsentEntries:Ft}}(Xe._heartbeatsCache.heartbeats),Jt=(0,Te.L)(JSON.stringify({version:2,heartbeats:Ft}));return Xe._heartbeatsCache.lastSentHeartbeatDate=bt,fn.length>0?(Xe._heartbeatsCache.heartbeats=fn,yield Xe._storage.overwrite(Xe._heartbeatsCache)):(Xe._heartbeatsCache.heartbeats=[],Xe._storage.overwrite(Xe._heartbeatsCache)),Jt})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class Nt{constructor(Xe){this.app=Xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Xe=this;return(0,a.Z)(function*(){return(yield Xe._canUseIndexedDBPromise)&&(yield function Ns(Ct){return un.apply(this,arguments)}(Xe.app))||{heartbeats:[]}})()}overwrite(Xe){var bt=this;return(0,a.Z)(function*(){var Ft;if(yield bt._canUseIndexedDBPromise){const Jt=yield bt.read();return It(bt.app,{lastSentHeartbeatDate:null!==(Ft=Xe.lastSentHeartbeatDate)&&void 0!==Ft?Ft:Jt.lastSentHeartbeatDate,heartbeats:Xe.heartbeats})}})()}add(Xe){var bt=this;return(0,a.Z)(function*(){var Ft;if(yield bt._canUseIndexedDBPromise){const Jt=yield bt.read();return It(bt.app,{lastSentHeartbeatDate:null!==(Ft=Xe.lastSentHeartbeatDate)&&void 0!==Ft?Ft:Jt.lastSentHeartbeatDate,heartbeats:[...Jt.heartbeats,...Xe.heartbeats]})}})()}}function Sr(Ct){return(0,Te.L)(JSON.stringify({version:2,heartbeats:Ct})).length}!function dn(Ct){Oe(new le.wA("platform-logger",Xe=>new he(Xe),"PRIVATE")),Oe(new le.wA("heartbeat",Xe=>new rs(Xe),"PRIVATE")),Br(ne,"0.7.21",Ct),Br(ne,"0.7.21","esm2017"),Br("fire-js","")}("")},4859:(wt,$e,R)=>{"use strict";R.d($e,{H0:()=>Ee,wA:()=>F,zt:()=>he});var a=R(5861),le=R(2090);class F{constructor(Y,W,ee){this.name=Y,this.instanceFactory=W,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const Te="[DEFAULT]";class he{constructor(Y,W){this.name=Y,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const W=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(W)){const ee=new le.BH;if(this.instancesDeferred.set(W,ee),this.isInitialized(W)||this.shouldAutoInitialize())try{const ie=this.getOrInitializeService({instanceIdentifier:W});ie&&ee.resolve(ie)}catch(ie){}}return this.instancesDeferred.get(W).promise}getImmediate(Y){var W;const ee=this.normalizeInstanceIdentifier(null==Y?void 0:Y.identifier),ie=null!==(W=null==Y?void 0:Y.optional)&&void 0!==W&&W;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(ie)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(ce){if(ie)return null;throw ce}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function ne(ge){return"EAGER"===ge.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:Te})}catch(W){}for(const[W,ee]of this.instancesDeferred.entries()){const ie=this.normalizeInstanceIdentifier(W);try{const ce=this.getOrInitializeService({instanceIdentifier:ie});ee.resolve(ce)}catch(ce){}}}}clearInstance(Y=Te){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,a.Z)(function*(){const W=Array.from(Y.instances.values());yield Promise.all([...W.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...W.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=Te){return this.instances.has(Y)}getOptions(Y=Te){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:W={}}=Y,ee=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ie=this.getOrInitializeService({instanceIdentifier:ee,options:W});for(const[ce,Pe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(ce)&&Pe.resolve(ie);return ie}onInit(Y,W){var ee;const ie=this.normalizeInstanceIdentifier(W),ce=null!==(ee=this.onInitCallbacks.get(ie))&&void 0!==ee?ee:new Set;ce.add(Y),this.onInitCallbacks.set(ie,ce);const Pe=this.instances.get(ie);return Pe&&Y(Pe,ie),()=>{ce.delete(Y)}}invokeOnInitCallbacks(Y,W){const ee=this.onInitCallbacks.get(W);if(ee)for(const ie of ee)try{ie(Y,W)}catch(ce){}}getOrInitializeService({instanceIdentifier:Y,options:W={}}){let ee=this.instances.get(Y);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=Y,ge===Te?void 0:ge),options:W}),this.instances.set(Y,ee),this.instancesOptions.set(Y,W),this.invokeOnInitCallbacks(ee,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,ee)}catch(ie){}var ge;return ee||null}normalizeInstanceIdentifier(Y=Te){return this.component?this.component.multipleInstances?Y:Te:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const W=this.getProvider(Y.name);if(W.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);W.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const W=new he(Y,this);return this.providers.set(Y,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,$e,R)=>{"use strict";R.d($e,{Am:()=>ge,Ub:()=>Ee,Yd:()=>ne,in:()=>le});const a=[];var le=(()=>{return(Y=le||(le={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",le;var Y})();const F={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},Te=le.INFO,he={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},de=(Y,W,...ee)=>{if(W<Y.logLevel)return;const ie=(new Date).toISOString(),ce=he[W];if(!ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[ce](`[${ie}]  ${Y.name}:`,...ee)};class ne{constructor(W){this.name=W,this._logLevel=Te,this._logHandler=de,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in le))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...W),this._logHandler(this,le.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...W),this._logHandler(this,le.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,le.INFO,...W),this._logHandler(this,le.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,le.WARN,...W),this._logHandler(this,le.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...W),this._logHandler(this,le.ERROR,...W)}}function Ee(Y){a.forEach(W=>{W.setLogLevel(Y)})}function ge(Y,W){for(const ee of a){let ie=null;W&&W.level&&(ie=F[W.level]),ee.userLogHandler=null===Y?null:(ce,Pe,...J)=>{const K=J.map(X=>{if(null==X)return null;if("string"==typeof X)return X;if("number"==typeof X||"boolean"==typeof X)return X.toString();if(X instanceof Error)return X.message;try{return JSON.stringify(X)}catch(qe){return null}}).filter(X=>X).join(" ");Pe>=(null!=ie?ie:ce.logLevel)&&Y({level:le[Pe].toLowerCase(),message:K,args:J,type:ce.name})}}}},5861:(wt,$e,R)=>{"use strict";function a(F,Te,he,de,ne,Ee,ge){try{var Y=F[Ee](ge),W=Y.value}catch(ee){return void he(ee)}Y.done?Te(W):Promise.resolve(W).then(de,ne)}function le(F){return function(){var Te=this,he=arguments;return new Promise(function(de,ne){var Ee=F.apply(Te,he);function ge(W){a(Ee,de,ne,ge,Y,"next",W)}function Y(W){a(Ee,de,ne,ge,Y,"throw",W)}ge(void 0)})}}R.d($e,{Z:()=>le})}},wt=>{wt(wt.s=1266)}]);